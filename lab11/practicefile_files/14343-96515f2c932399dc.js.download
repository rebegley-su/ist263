(self.webpackChunk_learn_ultra_apps_ultra=self.webpackChunk_learn_ultra_apps_ultra||[]).push([[14343],{320922:function(e,t,n){var r={"./ar-sa/_combined":[810733,19246],"./ar-sa/_combined.json":[810733,19246],"./az-az/_combined":[551324,23941],"./az-az/_combined.json":[551324,23941],"./cs-cz/_combined":[301948,58110],"./cs-cz/_combined.json":[301948,58110],"./cy-gb/_combined":[508846,76922],"./cy-gb/_combined.json":[508846,76922],"./da-dk/_combined":[246685,74662],"./da-dk/_combined.json":[246685,74662],"./de-de/_combined":[593990,86202],"./de-de/_combined.json":[593990,86202],"./en-au/_combined":[557276,75238],"./en-au/_combined.json":[557276,75238],"./en-gb/_combined":[132768,11819],"./en-gb/_combined.json":[132768,11819],"./en-us-k12/_combined":[846851,58270],"./en-us-k12/_combined.json":[846851,58270],"./en-us-pro/_combined":[912856,68785],"./en-us-pro/_combined.json":[912856,68785],"./en-us/_combined":[991115,91115],"./en-us/_combined.json":[991115,91115],"./en/_combined":[370526,41874],"./en/_combined.json":[370526,41874],"./es-es/_combined":[703636,47996],"./es-es/_combined.json":[703636,47996],"./fr-ca/_combined":[197662,86212],"./fr-ca/_combined.json":[197662,86212],"./fr-fr/_combined":[517037,73065],"./fr-fr/_combined.json":[517037,73065],"./he-il/_combined":[783224,87714],"./he-il/_combined.json":[783224,87714],"./it-it/_combined":[279521,26921],"./it-it/_combined.json":[279521,26921],"./ja-jp/_combined":[122552,78682],"./ja-jp/_combined.json":[122552,78682],"./ko-kr/_combined":[125799,19361],"./ko-kr/_combined.json":[125799,19361],"./ms-my/_combined":[652224,12803],"./ms-my/_combined.json":[652224,12803],"./nb-no/_combined":[879462,32713],"./nb-no/_combined.json":[879462,32713],"./nl-nl/_combined":[94664,46179],"./nl-nl/_combined.json":[94664,46179],"./nn-no/_combined":[20940,14526],"./nn-no/_combined.json":[20940,14526],"./pl-pl/_combined":[703301,97399],"./pl-pl/_combined.json":[703301,97399],"./pt-br/_combined":[27882,40412],"./pt-br/_combined.json":[27882,40412],"./pt-pt/_combined":[588386,14788],"./pt-pt/_combined.json":[588386,14788],"./ru-ru/_combined":[804868,68916],"./ru-ru/_combined.json":[804868,68916],"./sv-se/_combined":[299961,95054],"./sv-se/_combined.json":[299961,95054],"./th-th/_combined":[140343,30252],"./th-th/_combined.json":[140343,30252],"./tr-tr/_combined":[290115,99315],"./tr-tr/_combined.json":[290115,99315],"./uk-ua/_combined":[808613,45374],"./uk-ua/_combined.json":[808613,45374],"./zh-cn/_combined":[888727,41770],"./zh-cn/_combined.json":[888727,41770],"./zh-tw/_combined":[753005,92921],"./zh-tw/_combined.json":[753005,92921]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=320922,e.exports=i},178823:function(e,t,n){var r={"./ar-AE/_combined.json":[496211,59250],"./ar-SA/_combined.json":[889991,19877],"./ar/_combined.json":[490715,83442],"./cs-CZ/_combined.json":[841039,46711],"./cs/_combined.json":[558102,16323],"./cy-GB/_combined.json":[977867,36032],"./cy/_combined.json":[299197,15153],"./da-DK/_combined.json":[118533,33174],"./da/_combined.json":[350112,56291],"./de-DE/_combined.json":[319836,2576],"./de/_combined.json":[765629,89800],"./en-AU/_combined.json":[495332,92823],"./en-GB/_combined.json":[300997,26157],"./en-US/_combined.json":[411580,27986],"./en/_combined.json":[225925,99686],"./es-ES/_combined.json":[664892,75221],"./es/_combined.json":[820544,70533],"./fr-CA/_combined.json":[915346,53423],"./fr-FR/_combined.json":[784783,83761],"./fr/_combined.json":[280340,63020],"./he-IL/_combined.json":[989920,21684],"./he/_combined.json":[64666,36550],"./it-IT/_combined.json":[182475,71023],"./it/_combined.json":[102874,48850],"./ja-JP/_combined.json":[997401,6387],"./ja/_combined.json":[551941,31411],"./ko-KR/_combined.json":[373454,47363],"./ko/_combined.json":[883623,83554],"./ms/_combined.json":[45735,659],"./nb-NO/_combined.json":[611485,99852],"./nb/_combined.json":[836580,83099],"./nl-NL/_combined.json":[781590,77075],"./nl/_combined.json":[22839,45475],"./nn-NO/_combined.json":[208289,25656],"./nn/_combined.json":[53394,54870],"./pl-PL/_combined.json":[428728,28405],"./pl/_combined.json":[344695,32096],"./pt-BR/_combined.json":[806671,23125],"./pt-PT/_combined.json":[745036,49486],"./pt/_combined.json":[678496,47329],"./ru-RU/_combined.json":[549732,51940],"./ru/_combined.json":[25593,18448],"./sv-SE/_combined.json":[196953,12669],"./sv/_combined.json":[894680,70370],"./th-TH/_combined.json":[469047,9962],"./th/_combined.json":[143561,86083],"./tr-TR/_combined.json":[334526,37072],"./tr/_combined.json":[891906,22551],"./zh-Hans-CN/_combined.json":[58660,27457],"./zh-Hans/_combined.json":[469092,38746],"./zh-Hant-TW/_combined.json":[315954,55399],"./zh-Hant/_combined.json":[848672,6363],"./zh/_combined.json":[63231,24441]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=178823,e.exports=i},955546:function(e,t,n){"use strict";var r=n(202784);t.Z=({contentId:e,fileId:t,filePreviewUrl:n})=>r.createElement("a",{"data-ally-content-id":e,"data-ally-file-eid":t,"data-ally-file-preview-url":n,style:{display:"none"}})},469996:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r,i,o=n(202784),s=n(675689),a=n(927335),l=n(464158),u=n(158550);(r=i||(i={}))[r.ScoreIndicator=0]="ScoreIndicator",r[r.AlternativeFormats=1]="AlternativeFormats",t.Z=({contentRef:e,widgetType:t,text:n,ariaLabel:r,iconSize:d})=>{let c={"data-ally-content-ref":e},E={},p=o.useRef(null),m=o.useRef(null),h="components.directives.allyWidget";r&&(E["aria-label"]=r),n||(E.style={width:"100%"}),E.style={display:"none"};let I=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},h+".score"),b=o.useCallback(e=>{I(e)},[I]),g=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},h+".score"),y=o.useCallback(e=>{g(e)},[g]),f=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},h+".alternative"),S=o.useCallback(e=>{f(e)},[f]),_=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},h+".alternative"),T=o.useCallback(e=>{_(e)},[_]),v=o.useCallback(e=>{p.current&&p.current.removeEventListener("click",b),e&&e.addEventListener("click",b,!0),p.current=e},[b]),A=o.useCallback(e=>{m.current&&m.current.removeEventListener("click",S),e&&e.addEventListener("click",S,!0),m.current=e},[S]);switch(o.useEffect(()=>()=>{p.current&&p.current.removeEventListener("click",b),m.current&&m.current.removeEventListener("click",S)},[b,S]),t){case i.ScoreIndicator:if(c["data-ally-invoke"]="instructorfeedback",c["data-ally-show"]="instructorfeedback",!n)return o.createElement("span",{...c,...E,"data-ally-scoreindicator":"circle",ref:v,onMouseOver:y,"data-analytics-id":h+".score",onKeyDown:e=>{32===e.keyCode&&e.target.dispatchEvent(new Event("click"))}});break;case i.AlternativeFormats:if(c["data-ally-invoke"]="alternativeformats",c["data-ally-show"]="alternativeformats",r&&(c["data-ally-tooltip"]="",E.title=r),!n)return o.createElement("button",{...c,...E,ref:A,onMouseOver:T,"data-analytics-id":h+".alternative"},"medium"===d?o.createElement(a.AllyDownload,{id:"icon-solid-medium-ally-download"}):o.createElement(s.AllyDownload,{id:"icon-solid-small-ally-download"}))}return o.createElement(l.AnalyticsLink,{...E,...c,analyticsId:"components.directives.allyWidget.link"},n)}},600081:function(e,t,n){"use strict";n.d(t,{Z:function(){return t5}});var r=n(202784),i=n(928316),o=n(213980),s=n.n(o),a=n(367281),l=n.n(a),u=n(906277),d=n(692475),c=n(767474),E=n(740121),p=n(763384),m=n(574515),h=n.n(m),I=n(552063),b=n(254199),g=n(948638),y=n(828516);let f=c.Z.import("parchment");var S=class extends I.ZP{constructor(e,t){super(e,t),this.quill.root.addEventListener("cut",this.onCut.bind(this))}convert(e){let t=this.isHTMLManuallyLoaded;if(e?this.isHTMLManuallyLoaded=!0:delete this.isHTMLManuallyLoaded,e&&(e=e.replace("<pre></pre>","<pre>&nbsp;</pre>")),!e&&!t){Array.from(this.container.querySelectorAll("img")).forEach(e=>("string"!=typeof e.src||/^(blob|data|file):.*/.test(e.src)&&void 0===e.attributes["data-mathml"])&&e.remove()),Array.from(this.container.querySelectorAll("span.sr-only")).forEach(e=>"Wirisformula"===e.previousSibling.className&&e.remove()),Array.from(this.container.querySelectorAll('[data-bbtype="image"]')).forEach(e=>("string"!=typeof e.getAttribute("href")||/^(blob|data|file):.*/.test(e.getAttribute("href")))&&e.remove()),this.container.innerHTML=this.container.innerHTML.replace(/<br\s?\/?>\r?\n/g,"<br>");let e=this.container.querySelector("pre");e&&!this.isCodeBlockButtonActive()&&e.appendChild(document.createElement("br")),Array.from(this.container.querySelectorAll('[data-bbtype="attachment"]')).forEach(e=>{e.setAttribute("data-bbtype","reinsertAttachment"),e.getAttribute("href").includes("/sessions/")&&e.remove()}),Array.from(this.container.querySelectorAll("[data-bbfile]")).forEach(e=>{e.parentNode.insertBefore(document.createElement("p").appendChild(document.createElement("br")),e)}),Array.from(this.container.querySelectorAll("table")).forEach(e=>{!function(e){let t=e.rows.length;for(let n=0;n<t;n++){let t=e.rows[n],r=t.cells,i=r.length,o=0;for(let s=0;s<i;s++){let i=r[o],s=i.getAttribute("rowspan"),a=i.getAttribute("colspan");if(null!==s){let t=Math.min(s-1,e.rows.length-(n+1));for(let r=0;r<t;r++){let t=e.rows[n+r+1],i=o<t.cells.length?o:-1,s=t.insertCell(i);a&&s.setAttribute("colSpan",a)}}if(null!==a){let e=a-1;for(let n=0;n<e;n++)t.insertCell(o);o+=e}o+=1}}}(e)})}return this.handleCodeBlockFormatting(t),super.convert(e)}onPaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection(),n=new(h())().retain(t.index).delete(t.length),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.Z.sources.SILENT),setTimeout(()=>{n=n.concat(this.convert());let e="",i=this.quill.scroll.length(),o=null;if(i-t.index>1&&(n.ops.forEach(t=>{var n;(null===(n=t.attributes)||void 0===n?void 0:n.color)==="#ffffff"&&(t.insert=" \n",e+=" ")}),e.length>0)){let r=this.quill.getLeaf(t.index)[0],i="text"===r.statics.blotName;for(;null!=r&&!(r instanceof b.Z||r instanceof g.Z);)o=r,r=r.parent;if(["TD","TH"].includes(r.domNode.nodeName)){for(;null!=r&&!(r instanceof g.Z);)o=r,r=r.parent;t.index=this.quill.getIndex(o.next),n.ops[0].retain=t.index}i&&0!==t.index&&(this.quill.insertText(t.index,"\n","silent"),n.ops[0].retain+=1,t.index+=1),o=o.next,r.insertBefore(f.create("text","\n"),o),n.ops.push({delete:2}),this.quill.insertText(t.index,e,"silent")}if(this.quill.updateContents(n,c.Z.sources.USER),o){let e=this.quill.getIndex(o);-1===e&&(e=this.quill.getIndex(o.next)),this.quill.setSelection(e,c.Z.sources.USER)}else this.quill.focus(),this.quill.setSelection(n.length()-t.length,c.Z.sources.USER);this.quill.scrollingContainer.scrollTop=r,this.quill.focus(),this.quill.notifyPluginsOfPropChanges()},1)}onCut(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection();setTimeout(()=>{this.quill.setSelection(t.index,c.Z.sources.SILENT)},1)}dangerouslyReplaceHTML(e){let t=this._formatBbmlText(e);return this.quill.setContents(this.convert(t))}dangerouslyPasteHTML(e,t){let n=this._formatBbmlText(t);super.dangerouslyPasteHTML(e,n)}handleCodeBlockFormatting(e){if(e&&this.isCodeBlockButtonActive()){let e=this.quill.getLength();this.quill.insertText(e,"\n","silent"),this.quill.setSelection(e,0)}}isCodeBlockButtonActive(){return this.quill.getFormat(this.quill.selection.savedRange.index)[y.Z.blotName]}_formatBbmlText(e){let t=e.replace(/[\n]\s*/g,"");return(t=t.replace(/<h(\d)\s*><\/h\d\s*>/g,"<h$1><br></h$1>")).replace(/<h(\d)\s*\/>/g,"<h$1><br></h$1>")}},_=n(384285),T=n(436073),v=class extends _.Z{undo(){if(!this.stack)return;this.stack.undo=this.stack.undo.filter(e=>!e.redo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td})&&!e.undo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td}));let e=this.undoAroundTables(this.stack.undo);e.length>0&&(e[e.length-1].undo.ops=e[e.length-1].undo.ops.filter(e=>0!==e.retain),this.stack.undo=e),super.undo()}redo(){}getTableIndexes(){let e=[...document.getElementsByClassName("ql-editor")].find(e=>"true"===e.contentEditable).getElementsByTagName("table"),t=[];for(let n=0;n<e.length;n++){let r=e[n];t=[...t,{index:this.quill.getIndex(T.ZP.find(r))-1,endIndex:this.quill.getIndex(T.ZP.find(r.nextSibling))}]}return t}getLastSetOfOps(e){let t=[];for(let n=e.length-1;n>=0;n--){let r=e.pop();if(t=[r,...t],r.retain)break;0!==n||r.retain||(t=[{retain:0},...t])}return t}getOpsLength(e){let t=0;return e.forEach(e=>{var n,r,i,o;t+=(null!==(n=e.retain)&&void 0!==n?n:0)+(null!==(i=null===(r=e.insert)||void 0===r?void 0:r.length)&&void 0!==i?i:0)+(null!==(o=e.delete)&&void 0!==o?o:0)}),t}addOffsetToTableIndexes(e,t){e.forEach(e=>{e.index+=t,e.endIndex+=t})}undoAroundTables(e){var t;let n=null===(t=e[e.length-1])||void 0===t?void 0:t.undo.ops,r=this.getTableIndexes();if(0===r.length||!n)return e;for(;r.length>0;){let e=r.shift(),t=this.getLastSetOfOps(n),i=this.getOpsLength(n);for(;t.length>0;){let o=t.shift();if(void 0!==o.retain)i+o.retain>=e.index&&o.retain<e.endIndex?(o.retain=o.retain+e.endIndex-e.index+1,n.push(o,...t),t.length=0):o.retain<e.index?(i+=o.retain,0!==o.retain&&n.push(o)):(n.push(o,...t),t.length=0);else if(o.delete){if(o.delete+i>e.index){let r=o.delete+i-e.index;o.delete=o.delete-r,n.push(o,{retain:e.endIndex-e.index+1},{delete:r},...t),t.length=0}else i+=o.delete,n.push(o)}else o.insert&&(i+=o.insert.length,this.addOffsetToTableIndexes(r,o.insert.length),n.push(o))}}return e}},A=n(315573),O=n(42711),C=n(884089);let R=T.ZP.import("parchment");class L extends A.Z{static register(){T.ZP.register(C.pj,!0),T.ZP.register(C.ss,!0),T.ZP.register(C.SC,!0),T.ZP.register(C.RM,!0),T.ZP.register(C.xJ,!0),T.ZP.register(C.ie,!0)}constructor(...e){super(...e),this.listenBalanceTables()}balanceTables(){let e=this.quill.scroll.descendants(C.xJ),t=this.checkTablesMerge(e);if(0===t.length)return;e=e.filter(e=>t.includes(e.formats().table));for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.children.tail;for(;r.prev;)this.quill.scroll.insertBefore(r.prev,n);let i=r.children.tail,o=n.prev;for(;o&&!o.formats().tablebr&&!o.prev.formats().table;)i.insertBefore(o,i.children.head),o=n.prev;i.children.tail.remove(),n.next.domNode.remove(),this.quill.scroll.removeChild(n.next)}e[e.length-1].next||this.quill.scroll.appendChild(R.create("text","\n"));let n=null,r=null;e.forEach(e=>{let t=e.children.head,i=t.formats();if(n!==i.tr)n=i.tr,r=t;else{let e=t.children.head;r.appendChild(e)}});let i=null,o=null;e.forEach(e=>{let t=e.formats();if(i!==t.table)i=t.table,o=e;else{let t=e.children.head;o.appendChild(t)}})}checkTablesMerge(e=this.quill.scroll.descendants(C.xJ)){let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r].domNode.getAttribute("table_id");t.includes(i)&&!n.includes(i)&&n.push(i),e[r].prev.formats().tablebr||n.includes(i)||n.push(i),t.push(i)}return n}deleteColumn(){let[e,,t]=this.getTable();if(null==t)return;let n=e.children.tail.children.head instanceof C.ss;if(!t.next&&t.prev){let e=t.prev.getIndexAndOffset()[1];this.quill.setSelection(e,T.ZP.sources.SILENT)}e.deleteColumn(t.getIndexAndOffset()[0]),n&&this.updateHeaderCol(!0),this.quill.update(T.ZP.sources.USER)}deleteRow(){let[,e,t]=this.getTable();if(null==e)return;let n=e.children.tail instanceof C.ss,r=t.getIndexAndOffset()[0],i=0,o=null,s=!1;for(!e.next&&e.prev?o=e.prev.children.head:e.next||e.prev?o=e.next.children.head:(o=e.children.head,s=!0);o.next&&i<r&&!s;)o=o.next,i+=1;this.quill.setSelection(o.getIndexAndOffset()[1],T.ZP.sources.SILENT),e.remove(),n&&this.updateHeaderRow(!0),this.quill.update(T.ZP.sources.USER)}deleteTable(){var e;let[t]=this.getTable();if(null==t)return;let n=t.offset()-1;(null===(e=t.prev)||void 0===e?void 0:e.statics.blotName)===C.ie.blotName&&t.prev.domNode.getAttribute("table_id")===t.domNode.getAttribute("table_id")&&t.prev.remove(),t.remove(),this.quill.update(T.ZP.sources.USER),this.quill.setSelection(n,T.ZP.sources.SILENT)}getTable(e=this.quill.getSelection()){if(null==e)return[null,null,null,-1];let[t,n]=this.quill.getLine(e.index),r=this.getCellOfContent(t);if(null==r)return[null,null,null,-1];let i=r.parent;return[i.parent,i,r,n]}getCells(){let[e]=this.getTable();return e?e.getCells():[]}getCellOfContent(e){if(!e)return null;let t=e.parent;for(;t;){if(t.statics.blotName===C.pj.blotName||t.statics.blotName===C.ss.blotName)return t;t=t.parent}return null}getTableData(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i=this.getTableColumnsCount(r),o=this.getTableRowsCount(r);if(e!==t)return{columnCount:i,rowCount:o,headerRow:e,headerColumn:t};let s=this.getTableHeadersValue(e,t);return{columnCount:i,rowCount:o,headerRow:s.row,headerColumn:s.column}}getTableColumnsCount(e){return 0>=this.getTableRowsCount(e)||!e.children.head.children?0:e.children.head.children.length}getTableRowsCount(e){return(null==e?void 0:e.children)?e.children.length:0}getTableHeadersValue(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i={row:!1,column:!1},o=this.getTableColumnsCount(r),s=this.getTableRowsCount(r);return 0>=this.getTableRowsCount(r)||!r.children.head.children||(1===o&&1===s?!this.isHeaderCell(r.children.tail.children.head)||(i.row=e,i.column=t,e||t||(i.row=!0,t=!1)):1!==s||!(o>1)||e||t?1!==o||!(s>1)||e||t?(this.isHeaderCell(r.children.tail.children.head)&&(i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0)):(this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1),this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0)):(this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1))),i}isHeaderCell(e){return e.domNode.localName.toLowerCase()===C.ss.tagName.toLowerCase()}insertColumn(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let o=i.getIndexAndOffset()[0];n.insertColumn(o,e),this.quill.update(T.ZP.sources.USER);let s=n.children.head.children.map(e=>e)[o+e];this.quill.setSelection(s.offset(this.quill.scroll),0,T.ZP.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let o=r.rowOffset()[0];n.insertRow(o,e),this.quill.update(T.ZP.sources.USER);let s=n.children.map(e=>e)[o+e].children.head;this.quill.setSelection(s.offset(this.quill.scroll),0,T.ZP.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertColumns(e,t){let n=this.quill.getSelection(),[r,i]=this.getTable(n),o=r.getLastCell();if(null==o)return;let s=o.getIndexAndOffset()[0];for(let n=0;n<e;n++)r.insertColumn(s,t);this.quill.update(T.ZP.sources.USER);let a=i.rowOffset()[0];0===t&&(a+=1),this.quill.setSelection(n.index+a,n.length,T.ZP.sources.SILENT)}insertRows(e,t){let n=this.quill.getSelection(),[r]=this.getTable(n),i=r.getLastCell(),o=i.parent;if(null==i||null==o)return;let s=o.rowOffset()[0];for(let n=0;n<e;n++)r.insertRow(s,t);this.quill.update(T.ZP.sources.USER),1===t?this.quill.setSelection(n,T.ZP.sources.SILENT):this.quill.setSelection(n.index+o.children.length,n.length,T.ZP.sources.SILENT)}deleteColumns(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let o=i.getIndexAndOffset()[0],s=r.children.length-1-e;for(let t=0;t<e;t++){let e=r.children.length-1;n.deleteColumn(e),this.quill.update(T.ZP.sources.USER)}if(s<o){let e=r.children.tail.getIndexAndOffset()[1];this.quill.setSelection(e,t.length,T.ZP.sources.SILENT)}this.quill.update(T.ZP.sources.USER)}deleteRows(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let o=r.rowOffset()[0],s=i.getIndexAndOffset()[0],a=n.children.length-e-1;for(let t=0;t<e;t++)n.children.tail.remove(),this.quill.update(T.ZP.sources.USER);if(a<o){let e=n.children.tail.children.head;for(let t=0;t<s;t++)e=e.next;let r=e.getIndexAndOffset()[1];this.quill.setSelection(r,t.length,T.ZP.sources.SILENT)}this.quill.update(T.ZP.sources.USER)}insertTable(e,t,n,r){this.quill.history.cutoff();let i=this.quill.getSelection();if(null==i)return;let o=(0,C.z5)("table"),s=R.create(C.xJ.blotName,o);for(let n=0;n<e;n++){let e=R.create(C.SC.blotName,(0,C.z5)("row"));for(let n=0;n<t;n++){let t=R.create(C.pj.blotName,(0,C.z5)("cell")),n=R.create("block");n.appendChild(R.create("text","​")),t.appendChild(n),e.appendChild(t)}s.appendChild(e)}s.updateHeaderCol(r),s.updateHeaderRow(n),this.insertBlot(i,s),s.parent.insertBefore(R.create(C.ie.blotName,o),s),this.quill.update(T.ZP.sources.USER);let a=this.quill.history.stack.undo.pop();this.quill.history.stack.undo.forEach(e=>{var t,n,r;let i=null!==(t=a.undo.ops[0].retain)&&void 0!==t?t:0,o=null!==(r=null!==(n=a.undo.ops[0].delete)&&void 0!==n?n:a.undo.ops[1].delete)&&void 0!==r?r:0;e.undo.ops.forEach(e=>{e.retain&&e.retain>=i&&(e.retain+=o)})}),i.index+=1,this.quill.setSelection(i)}editTable(e,t){let n=this.getTableData();if(null==this.quill.getSelection())return;let r=t-n.columnCount,i=e-n.rowCount;i>0?this.insertRows(i,1):i<0&&this.deleteRows(Math.abs(i)),r>0?this.insertColumns(r,1):r<0&&this.deleteColumns(Math.abs(r)),this.updateNullSelection()}insertBlot(e,t){let n=this.quill.getLeaf(e.index)[0],r=n.statics.blotName===O.Z.blotName,i=null;for(;null!=n&&!(n instanceof b.Z||n instanceof g.Z);)i=n,n=n.parent;if(r){let e=R.create("text","\n");i.next?(n.insertBefore(e,i.next),n.insertBefore(t,i.next)):(n.appendChild(t),n.appendChild(e,i));return}n.insertBefore(t,i)}listenBalanceTables(){this.quill.on(T.ZP.events.SCROLL_OPTIMIZE,e=>{let t=!0;for(let n=0;n<e.length&&t;n++)["TH","TD","TR","TABLE"].includes(e[n].target.tagName)&&(this.balanceTables(),t=!1)})}updateHeaderRow(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderRow(e),this.quill.setSelection(n))}updateHeaderCol(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderCol(e),this.quill.setSelection(n))}updateNullSelection(){null===this.quill.getSelection()&&this.quill.setSelection(this.quill.selection.savedRange)}deltaHasTable(e){return e.ops.some(e=>e.attributes&&(e.attributes["table-container"]||e.attributes["table-cell"]))}deltaHasDangerousContent(e){let t=!1;for(let n=0;n<e.ops.length&&!t;n++){let r=e.ops[n];r.attributes&&(t=["header","src","list"].some(e=>Object.keys(r.attributes).includes(e))),!r.insert||t||(t=["inlineImage"].some(e=>Object.keys(r.insert).includes(e)))||(t=r.insert.includes("\n","cJ","\n","\f","\r"))}return t}}var D=n(898008),P=n(942548),N=n(611997),U=n(902813),w=n(262348),k=n(268973),M=n.n(k);let B=new(M()).Attributor.Style("custom-indent","padding-left",{scope:M().Scope.BLOCK}),G=new(M()).Attributor.Style("custom-indent-rtl","padding-right",{scope:M().Scope.BLOCK});var V=n(330217),x=n(932576),q=n(271154),Z=n(150465),F=n(204445),H=n(470276),K=n(577099),j=n(449806),Q=n(383568),Y=n(13417),z=n(814816),W=n(212401);class $ extends W.Z{constructor(e,t){super(e,t),e.style.color=e.color;let n=this.replaceWith(new W.Z(W.Z.create()));return n.children.forEach(e=>{var t,r;null===(t=e.attributes)||void 0===t||t.copy(n),null===(r=e.unwrap)||void 0===r||r.call(e)}),this.remove(),n}}$.blotName="customColor",$.tagName="FONT";var X=n(474115),J=n(633739);class ee extends W.Z{static value(e){return(0,J.u9)(e,this.blotAttributes)}static formats(e){return(0,J.u9)(e,this.blotAttributes,!0)}format(e,t){return e===this.statics.blotName&&t?(0,J.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ee.blotName="inline",ee.tagName="span";var et=n(555331);class en extends et.i2{static value(e){return(0,J.u9)(e,this.blotAttributes)}static formats(e){return(0,J.u9)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,J.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}en.blotName="embed",en.tagName="div";var er=n(378886);class ei extends er.Z{static value(e){return(0,J.u9)(e,this.blotAttributes)}static formats(e){return(0,J.u9)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,J.KT)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ei.blotName="embedInline",ei.tagName="span";var eo=n(278218),es=n(378780);class ea extends y.Z{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){let t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}static formats(){return!0}delta(){let e=this.domNode.textContent;if(e.endsWith("\n")&&(e=e.slice(0,-1)),(0,es.w)(this.parent)){let t=(0,es.A)(this.parent);return e.split("\n").reduce((e,n)=>e.insert(n).insert("\n",t),new(h()))}return e.split("\n").reduce((e,t)=>e.insert(t).insert("\n",this.formats()),new(h()))}format(e,t){if(e===this.statics.blotName&&t)return;let[n]=this.descendant(O.Z,this.length()-1);null!=n&&n.deleteAt(n.length()-1,1),this.descendants(O.Z).forEach(e=>{e.parent instanceof W.Z&&e.parent.moveChildren(e.parent.parent,e.parent)}),super.format(e,t)}}ea.className="ql-syntax";let el=new(M()).Attributor.Class("token","hljs",{scope:M().Scope.INLINE});var eu=class extends eo.ZP{static register(){T.ZP.register(el,!0),T.ZP.register(ea,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(T.ZP.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(y.Z).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(T.ZP.sources.SILENT),null!=e&&this.quill.hasFocus()&&this.quill.setSelection(e,T.ZP.sources.SILENT)}};let ed="bbml-editor.plugins";var ec=n(776956);let eE={inline:ee,embed:en,embedInline:ei},ep={"formats/header":D.Z,"formats/font":P.ZP,"formats/size":N.ZP,"formats/color":U.Z,"formats/list":V.aV,"formats/list/item":V.DF,"formats/align":x.ZP,"formats/bold":q.Z,"formats/italic":Z.Z,"formats/underline":F.Z,"formats/code-block":z.Z,"formats/strike":H.Z,"formats/superscript":K.Z,"formats/subscript":j.Z,"formats/indent":p.a,"formats/lineheight":Q.ZP,"formats/direction":Y.ZP,"formats/customcolor":$,"modules/clipboard":S,"modules/history":v,"modules/table":L,"modules/syntax":eu},em=e=>{let t="formats/";Object.keys(e).forEach(n=>{if(n.startsWith(t)){let r=n.replace(t,"");X.Z.registerConverter(r,e[n])}})},eh=(e,t,n)=>{let r={},i={},o={},s=[];e.forEach(e=>{if(e.formatter){let n=e.formatter.blotName||e.pluginId;i[n]=class extends eE[e.formatter.type]{constructor(t,n){super(t,n),e.formatter.onBlotInit&&e.formatter.onBlotInit(t,this)}},i[n].create=n=>{let r=document.createElement(e.formatter.tagName);return e.formatter.renderDomNode(r,e.formatter.attributes,n,t)},i[n].blotAttributes=e.formatter.attributes,i[n].blotName=n,i[n].className=e.formatter.className||n,i[n].tagName=e.formatter.tagName,i[n].split=e.split,i[n].toBbML=e.toBbML,i[n].toBbMLAsync=e.toBbMLAsync,r[`formats/${n}`]=i[n]}if(e.module){let t=e.pluginId;o[`modules/${t}`]=e.module}if("function"==typeof e.onLoad)try{let t=e.onLoad(n);"function"==typeof t&&s.push(t)}catch(e){ec.HE.error(ed,e)}});let a={...ep,...r,...o};return c.Z.register(a,!0),em(a),()=>{e.forEach(e=>{if("function"==typeof e.onUnload)try{e.onUnload()}catch(e){ec.HE.error(ed,e)}}),s.forEach(e=>{try{e()}catch(e){ec.HE.error(ed,e)}})}},eI=c.Z.import("parchment");eI.register(w.d,B,G);var eb=c.Z,eg=n(113923),ey=n(729233),ef=n(215571),eS=n(133961),e_=n(365516),eT=n(363201),ev=n(175805),eA=n(517801),eO=n(320393),eC=n(205693),eR=n(372769),eL=n(18350),eD=n(714719),eP=n(721586),eN=n(37574);eg.Z.registerLanguage("c",ey.Z),eg.Z.registerLanguage("csharp",ef.Z),eg.Z.registerLanguage("cpp",eS.Z),eg.Z.registerLanguage("css",e_.Z),eg.Z.registerLanguage("go",eT.Z),eg.Z.registerLanguage("java",ev.Z),eg.Z.registerLanguage("javascript",eA.Z),eg.Z.registerLanguage("kotlin",eO.Z),eg.Z.registerLanguage("php",eC.Z),eg.Z.registerLanguage("python",eR.Z),eg.Z.registerLanguage("r",eL.Z),eg.Z.registerLanguage("ruby",eD.Z),eg.Z.registerLanguage("swift",eP.Z),eg.Z.registerLanguage("xml",eN.Z);let eU=["td","th","tr","table","tablebr"];var ew={keyboard:{bindings:{tab:{key:9,prefix:/\t$/,handler:()=>{}},"remove tab":{key:9,shiftKey:!0,prefix:/\t$/,handler:()=>{}},"list autofill":{prefix:/^\s*?(\d+\.|-|\*)$/},contextBackspace:{key:"Backspace",shiftKey:null,context:{format:eU},handler:(e,t)=>{var n;if(!Array.isArray(t.format.td)&&(t.offset>0||!t.collapsed))return!0;let r=document.getSelection().baseNode;for(;!(null===(n=r.parentNode.classList)||void 0===n?void 0:n.contains("ql-editor"))&&![C.ss.tagName.toLowerCase(),C.pj.tagName.toLowerCase()].includes(r.parentNode.nodeName.toLowerCase());)r=r.parentNode;if(r.previousSibling&&"TABLE"===r.previousSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartBefore(r.previousSibling),e.setEnd(r.firstChild,0),document.getSelection().addRange(e),!1}return!!r.previousSibling||Array.isArray(t.format.td)&&(0===e.index||r.previousSibling.previousSibling)}},contextDelete:{key:"Delete",context:{format:eU},handler:(e,t)=>{if(!Array.isArray(t.format.td)&&(t.suffix.length>0||!t.collapsed))return!0;let n=document.getSelection().baseNode;if("#text"===n.nodeName&&(n=n.parentNode),n.nextSibling&&"TABLE"===n.nextSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartAfter(n.lastChild),e.setEnd(n.nextSibling.nextSibling.firstChild,0),document.getSelection().addRange(e),!1}return!!n.nextSibling}},shiftDelete:{key:"Delete",shiftKey:"true",context:{format:eU},handler:()=>!1},undoTables:{key:90,shortKey:"true",handler:(e,t)=>!t.format.table}}},history:{delay:1e3,maxStack:50,userOnly:!1},table:!0,syntax:{highlight:e=>eg.Z.highlightAuto(e).value}};let ek=["\xb7","o","\xa7","v","\xd8","\xfc"],eM=(e,t)=>e.compose(new(h())().retain(e.length(),t)),eB=()=>Math.random().toString(36).slice(2,6),eG=(e,t,n)=>"string"!=typeof t?Object.keys(t).reduce((e,n)=>eG(e,n,t[n]),e):e.reduce((e,r)=>{if(r.attributes&&r.attributes[t])return e.push(r);if(r.attributes){let i=n?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})}let i=n&&("table-cell"===t||"table-head"===t)?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})},new(h())),eV={selector:Node.ELEMENT_NODE,func:(e,t)=>{let n=[];return t.ops.forEach(e=>{e.insert&&"string"==typeof e.insert&&n.push({insert:e.insert})}),t.ops=n,t}},ex=e=>(t,n)=>{let r=n&&n.ops&&n.ops[n.ops.length-1],i=r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1);return 0!==n.ops.length&&i||n.insert("\n"),eG(n,`table-${e}`,`${e}-${eB()}`)},eq=e=>{var t;let n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.attributes&&"table-container"in i.attributes&&(n===i.attributes["table-head"]||n===i.attributes["table-cell"]?e.splice(r,1):(n=null!==(t=i.attributes["table-head"])&&void 0!==t?t:i.attributes["table-cell"],e.splice(r+1,0,{insert:" ",attributes:{color:"#ffffff",dummy:"true"}})))}return e},eZ=e=>{let t=["table-container","tablebr","dummy"];return e.ops=e.ops.filter(e=>!e.attributes||t.reduce((t,n)=>t&&!(n in e.attributes),!0)),e},eF=[{selector:"li",func:(e,t)=>t.ops.length?eM(t):new(h())([{insert:"\n"}])},{selector:"h1",func:(e,t)=>eM(t,{header:4})},{selector:"h2",func:(e,t)=>eM(t,{header:4})},{selector:"h3",func:(e,t)=>eM(t,{header:4})},{selector:"del",func:(e,t)=>eM(t,{strike:!0})},{selector:"pre",func:(e,t)=>eM(t,{underline:!1,"code-block":!0})},{selector:"strike",func:(e,t)=>eM(t,{strike:!0})},{selector:'span[style*="line-through"]',func:(e,t)=>eM(t,{strike:!0})},{selector:'span[style*="underline"]',func:(e,t)=>eM(t,{underline:!0})},{selector:'span[style*="color: rgba(0, 0, 0, 0)"]',func:(e,t)=>eM(t,{color:""})},{selector:"table",func:(e,t)=>{let n=`table-${eB()}`,r=eG(eZ(t),"table-container",n),i=" ";for(let e=0;e<r.ops.length;e++){let t=r.ops[e];if(t.attributes&&"table-container"in t.attributes){let n="\n"!==t.insert.length?t.insert:" \n";i+=" ",t.insert=i+"\n";let o=["table-container","table-row","table-cell","table-head"],s=Object.keys(t.attributes).filter(e=>!o.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{});r.ops.splice(e,0,{insert:n,attributes:s}),e+=1,t.attributes=Object.keys(t.attributes).filter(e=>o.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{})}}return r.ops.unshift({insert:"\n",attributes:{tablebr:n}}),r.ops=eq(r.ops),r}},{selector:"tr",func:(e,t)=>eG(t,"table-row",`row-${eB()}`)},{selector:"th",func:ex("head")},{selector:"td",func:ex("cell")},{selector:"p.MsoTitle",func:(e,t)=>eM(t,{header:4})},{selector:"p[class^=MsoListParagraph]",func:e=>{let t=ek.includes(e.textContent.charAt(0)),n=e.textContent.trim(),r=t?n.indexOf(e.textContent.charAt(0))+1:n.indexOf(".")+1;n=n.substring(r,n.length).replace(/\n/g," ").replace(/\u00a0/g," ").trim();let i=0,o=e.getAttribute("style");if(o){let e=o.match(/level(\d+)/);e&&(i=Number(e[1])-1)}let s=e.querySelector("a");if(s){let e=s.getAttribute("href"),r=s.textContent;return new(h())([{insert:n,attributes:{link:{href:e,text:r}}},{insert:"\n",attributes:{list:t?"bullet":"ordered",indent:i}}])}return new(h())().insert(n+"\n",{list:t?"bullet":"ordered",indent:i})}}],eH=e=>{let t=e.filter(e=>e&&e.formatter&&"embed"===e.formatter.type).map(e=>e.matchers),n=e=>t.length&&e.parentNode&&Array.from(e.parentNode.querySelectorAll(t)).indexOf(e)>-1;return(e,t)=>{let r=t&&t.ops&&t.ops[t.ops.length-1];return!(r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1))&&e.nextSibling&&n(e.nextSibling)&&t.insert("\n"),t}};var eK=n(435722);let ej={EDITOR:"editor",TOOLBAR:"toolbar"},eQ={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"};class eY{static hasModifierKey(e){return Object.keys(eQ).some(t=>e[eQ[t]])}static hasRegularKey(e){return!!e.keyCode}constructor(){this.keyDownEventScope=ej.EDITOR,this.keyDownHandlers=[],this.enableEditorScope=this.enableEditorScope.bind(this),this.enableToolbarScope=this.enableToolbarScope.bind(this),this.inToolbarScope=this.inToolbarScope.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.addKeyDownHandler=this.addKeyDownHandler.bind(this)}enableEditorScope(){this.keyDownEventScope=ej.EDITOR}enableToolbarScope(){this.keyDownEventScope=ej.TOOLBAR}inToolbarScope(){return this.keyDownEventScope===ej.TOOLBAR}handleKeyDown(e){let t=!1,n=this.constructor.hasModifierKey(e);return this.keyDownHandlers.forEach(r=>{r.scope!==this.keyDownEventScope||r.keyCode!==e.keyCode||(r.modifierName||n)&&!e[r.modifierName]||(r.callback(e),t=!0)}),t}addKeyDownHandler(e,t,n,r){return this.keyDownHandlers.push({keyCode:e,modifierName:t,callback:n,scope:r}),()=>{this.keyDownHandlers=this.keyDownHandlers.filter(i=>!(i.keyCode===e&&i.modifierName===t&&i.callback===n&&i.scope===r))}}}var ez=n(729941);let eW=["insertLocalFile","math","image","video"];var e$=(e,t,n)=>{let r=[].concat(...e).reduce((e,t)=>e.some(e=>e.pluginId===t.pluginId)?e:e.concat(t),[]);return!function(e){let t=eW.map(t=>e.findIndex(e=>e.pluginId===t));if(t.length>0){for(let n=0;n<eW.length;n++)if(-1!==t[n]&&eW[n]!==e[n].pluginId){let r=e[n];e[n]=e[t[n]],e[t[n]]=r}}}(r),r.forEach(e=>{e.fileDropHandler&&n.registerDropHandler(e.fileDropHandler)}),r.filter(e=>e.buttonConfig&&e.buttonConfig.checkAvailabilityAsPromise).forEach(e=>{let n=e.buttonConfig;delete e.buttonConfig,n.checkAvailabilityAsPromise().then(r=>{r&&(e.buttonConfig=n,t())})}),r},eX=(e,t)=>{let n={...e};return n.attachment&&t.insert&&t.insert["embedded-app"]&&delete n.attachment,e["embedded-app"]&&t.insert&&t.insert.attachment&&delete n["embedded-app"],n},eJ=n(12434),e0=function(e,t,n,r){let i=[],o=t;function s(e,t){return n(!0),(0,eJ.Z)(e,t,o)}return{setLocaleProps:e=>{o=e},onFileDrop:t=>{if(t.preventDefault(),0===i.length)return;let n=[...t.dataTransfer.files];i.forEach(t=>{t(n,e,s,o.locale,r)}),t.dataTransfer.files?t.dataTransfer.files.clear():t.dataTransfer.clearData()},onFileDragOver:e=>{e.preventDefault()},registerDropHandler:e=>{"function"==typeof e&&0>i.findIndex(t=>t===e)&&i.push(e)},hasDropHandlers:()=>i.length>0}},e1=n(797529),e2=n(474750);let e6=o.shape({service:e2.XJ,indexMap:o.shape({get:o.func,has:o.func,set:o.func})}),e7={service:null,indexMap:new Map},e3="is-disabled";function e9(e,t){t&&!e.contains(e3)?e.add(e3):!t&&e.contains(e3)&&e.remove(e3)}let e5="is-read-only";function e4(e,t){t&&!e.contains(e5)?e.add(e5):!t&&e.contains(e5)&&e.remove(e5)}let e8="is-active";function te(e,t){t&&!e.contains(e8)?e.add(e8):!t&&e.contains(e8)&&e.remove(e8)}let tt="has-focus";function tn(e,t){t&&!e.contains(tt)?e.add(tt):!t&&e.contains(tt)&&e.remove(tt)}let tr="has-error";function ti(e,t){t&&!e.contains(tr)?e.add(tr):!t&&e.contains(tr)&&e.remove(tr)}let to="has-keyboard-focus";function ts(e,t){t&&!e.contains(to)?e.add(to):!t&&e.contains(to)&&e.remove(to)}var ta=n(50635),tl=n(158550),tu=function e(t,n,i,o){let s=function(e,t,n){let i=[];return r.Children.forEach(e,(e,t)=>{(r.Component.isPrototypeOf(e.type)||"function"==typeof e.type&&null!==e.type({...e.props,index:t,parentIndex:void 0})||!e.props.isHideable||e.props.isActive)&&i.push(e)}),i.length?i:null}(t);return r.Children.map(s,(t,s)=>{s+=o;let a={...n};return a.children=e(t.props.children,n,s,0),r.cloneElement(t,{...t.props,...a,index:s,parentIndex:i})})},td=n(825501),tc=e=>{let t;let n=e.filter(e=>!!t||!e.props.isHideable||(e.props.pluginButtons.some(n=>!!(td.N6.some(t=>e.id===t.id&&n.id===t.id)&&n.isActive&&n.isActive(e.props.editorFormat))&&(t=e,!0)),!1));return t&&n.push(t),n};class tE{constructor(e,t,n,r,i){this.currentMenuIndex=-1,this.currentSubmenuIndex=-1,this.isSubmenuToolbar=!1,this.isSubToolbarOpen=!1,this.hasAdditionalToolbar=!1,this.isAdditionalToolbarVisible=!1,this.hasDisabledButtons=!1,this.toolbarButtons=e,this.additionalToolbarButtons=[],this.addKeyDownHandler=t,this.onClose=n,this.onChange=r,this.onResetSubmenu=i,this.events=[],this.resetAllMenus=this.resetAllMenus.bind(this),this.selectFirstButton=this.selectFirstButton.bind(this),this.updateToolbarButtons=this.updateToolbarButtons.bind(this),this.getMenuButtonCount=this.getMenuButtonCount.bind(this),this.getSubmenuButtonCount=this.getSubmenuButtonCount.bind(this),this.getIndexes=this.getIndexes.bind(this),this.setIndexes=this.setIndexes.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.destroy=this.destroy.bind(this),this.moveLeft=this.moveLeft.bind(this),this.moveRight=this.moveRight.bind(this),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),this.openSubmenu=this.openSubmenu.bind(this),this.forceOpenSubmenu=this.forceOpenSubmenu.bind(this),this.setSubmenuToolbar=this.setSubmenuToolbar.bind(this),this.setSubToolbarOpen=this.setSubToolbarOpen.bind(this),this.closeAllMenus=this.closeAllMenus.bind(this),this.registerEventListeners()}updateToolbarButtons(e,t){if(t){this.additionalToolbarButtons=e;return}this.toolbarButtons=e,this.hasDisabledButtons=this.toolbarButtons.some(e=>{var t;return null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.isButtonDisabled})}setOnAdditionalChange(e){this.onAdditionalChange=e}getMenuButtonCount(){return this.toolbarButtons?this.additionalToolbarButtons&&this.isAdditionalToolbarVisible?this.toolbarButtons.length+this.additionalToolbarButtons.length:this.toolbarButtons.length:0}getSubmenuButtonCount(e){var t,n;let r=this.toolbarButtons.length,i=r+this.additionalToolbarButtons.length;if(e>-1){if(e<r&&(null===(t=this.toolbarButtons[e])||void 0===t?void 0:t.props.children))return this.toolbarButtons[e].props.children.length;if(e>=r&&e<i&&(null===(n=this.additionalToolbarButtons[e])||void 0===n?void 0:n.props.children))return this.additionalToolbarButtons[e].props.children.length}return 0}getIndexes(){return{currentMenuIndex:this.currentMenuIndex,currentSubmenuIndex:this.currentSubmenuIndex}}setIndexes(e,t){this.currentMenuIndex=e,this.currentSubmenuIndex=t,this.onChange&&this.onChange(this.getIndexes()),this.onAdditionalChange&&this.onAdditionalChange(this.getIndexes())}resetAllMenus(...e){var t;this.collapseAllMenus(),null===(t=this.onClose)||void 0===t||t.call(this,...e)}collapseAllMenus(){this.setIndexes(-1,-1)}selectFirstButton(){var e;this.isAdditionalToolbarVisible&&this.isSubToolbarOpen&&this.onResetSubmenu();let t=0;this.hasDisabledButtons&&(null===(e=this.toolbarButtons[0])||void 0===e?void 0:e.props.isButtonDisabled)&&(t=this.getNextAvailableItem(0,this.getMenuButtonCount())),this.setIndexes(t,-1)}registerEventListeners(){let{addKeyDownHandler:e}=this,{TOOLBAR:t}=ej,{SHIFT:n}=eQ,r=(e,t="any")=>n=>{n.preventDefault(),n.stopPropagation();let{currentMenuIndex:r,currentSubmenuIndex:i}=this,o=this.getSubmenuButtonCount(r);return("any"===t||"main"===t&&-1===i||"main-no-children"===t&&-1===i&&0===o||"sub"===t&&-1!==i)&&e(n),!1};this.events.push(e(l().LEFT,null,r(this.moveLeft,"main"),t)),this.events.push(e(l().LEFT,null,r(this.moveUp,"sub"),t)),this.events.push(e(l().TAB,n,r(this.moveLeft,"main"),t)),this.events.push(e(l().TAB,n,r(this.moveUp,"sub"),t)),this.events.push(e(l().RIGHT,null,r(this.moveRight,"main"),t)),this.events.push(e(l().RIGHT,null,r(this.moveDown,"sub"),t)),this.events.push(e(l().TAB,null,r(this.moveRight,"main"),t)),this.events.push(e(l().TAB,null,r(this.moveDown,"sub"),t)),this.events.push(e(l().UP,null,r(this.moveLeft,"main"),t)),this.events.push(e(l().UP,null,r(this.moveUp,"sub"),t)),this.events.push(e(l().DOWN,null,r(this.moveDown,"sub"),t)),this.events.push(e(l().DOWN,null,r(this.moveDown,"main"),t)),this.events.push(e(l().DOWN,null,r(this.moveRight,"main-no-children"),t)),this.events.push(e(l().ESC,null,r(this.closeAllMenus),t))}destroy(){this.events.forEach(e=>e())}getPreviousAvailableItem(e,t){var n,r;for(let t=e-1;t>=0;t--)if(!(null===(n=this.toolbarButtons[t])||void 0===n?void 0:n.props.isButtonDisabled))return t;for(let n=t-1;n>e;n--)if(!(null===(r=this.toolbarButtons[n])||void 0===r?void 0:r.props.isButtonDisabled))return n;return e}moveLeft(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getPreviousAvailableItem(e,t):e-1<=-1?t-1:e-1,this.setIndexes(e,-1)}getNextAvailableItem(e,t){var n,r;for(let r=e+1;r<t;r++)if(!(null===(n=this.toolbarButtons[r])||void 0===n?void 0:n.props.isButtonDisabled))return r;for(let t=0;t<e;t++)if(!(null===(r=this.toolbarButtons[t])||void 0===r?void 0:r.props.isButtonDisabled))return t;return e}moveRight(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getNextAvailableItem(e,t):e+1===t?0:e+1,this.setIndexes(e,-1)}moveUp(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t-1<=-1?n-1:t-1),this.setIndexes(e,t)}moveDown(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t+1===n?0:t+1),this.setIndexes(e,t)}openSubmenu(e){let{currentMenuIndex:t,currentSubmenuIndex:n}=this,r=this.getSubmenuButtonCount(e);r&&t!==e&&-1!==n||r&&-1===n?this.setIndexes(e,0):this.resetAllMenus()}forceOpenSubmenu(e,t){this.setIndexes(e,t)}setAdditionalToolbar(e){this.hasAdditionalToolbar=e}setAdditionalToolbarVisible(e){this.isAdditionalToolbarVisible=e}setSubmenuToolbar(e){this.isSubmenuToolbar=e}setSubToolbarOpen(e){this.isSubToolbarOpen=e}closeAllMenus(){let{currentMenuIndex:e,currentSubmenuIndex:t,isSubmenuToolbar:n,isSubToolbarOpen:r,isAdditionalToolbarVisible:i}=this;if(-1===t){if(n){if(!this.isSubToolbarOpen&&i){this.resetAllMenus(!0);return}this.onResetSubmenu&&this.onResetSubmenu();return}if(!r){this.resetAllMenus(!0);return}}this.setIndexes(e,-1)}}class tp extends r.Component{constructor(e){if(super(e),this.onNavigatorChange=this.onNavigatorChange.bind(this),e.sharedNavigator){this.navigator=e.sharedNavigator;let t=e.children.filter(e=>!e.props.isHideable);this.navigator.updateToolbarButtons(t,this.props.useSharedNavigator),this.navigator.setOnAdditionalChange(this.onNavigatorChange)}else this.navigator=new tE(e.children,e.addKeyDownHandler,e.toolbarActionComplete,this.onNavigatorChange,e.resetMenu),e.shareNavigator&&e.shareNavigator(this.navigator);this.state=this.navigator.getIndexes()}componentDidMount(){this.toolbarRoot.addEventListener("mousedown",ez.p7),this.props.isSubmenuToolbar&&this.props.hasKeyboardFocus&&this.navigator.selectFirstButton()}UNSAFE_componentWillReceiveProps(e){let{currentMenuIndex:t}=this.state,{hasKeyboardFocus:n,editorHasTableSelected:r}=e,{useSharedNavigator:i}=this.props;this.navigator.setSubmenuToolbar(this.props.isSubmenuToolbar),this.navigator.setSubToolbarOpen(this.props.isSubToolbarOpen),this.navigator.setAdditionalToolbar(i),this.navigator.setAdditionalToolbarVisible(r),this.props.hasKeyboardFocus!==n&&n&&!i?this.navigator.selectFirstButton():this.props.hasKeyboardFocus===n||n?!1===this.props.hasKeyboardFocus&&-1!==t&&this.navigator.collapseAllMenus():this.navigator.resetAllMenus()}componentWillUnmount(){this.toolbarRoot.removeEventListener("mousedown",ez.p7),this.props.useSharedNavigator||this.navigator.destroy()}onNavigatorChange(e){this.toolbarRoot&&this.setState(e)}render(){let e={toolbarActionComplete:this.navigator.resetAllMenus,openSubmenu:this.navigator.openSubmenu,forceOpenSubmenu:this.navigator.forceOpenSubmenu,closeAllMenus:this.navigator.closeAllMenus},t=0,n=[];this.props.useSharedNavigator?(n=this.props.children.filter(e=>!e.props.isHideable),t=this.navigator.getMenuButtonCount()-n.length):n=this.props.children.filter(e=>!!e);let i=tu(n,{...{...this.props,...this.state,...e}},null,t);this.navigator.updateToolbarButtons(tc(i),this.props.useSharedNavigator);let{toolbarId:o,editorId:s,t:a}=this.props,l=(0,u.Z)({"bb-editor-toolbar no-select":!0,"is-disabled":this.props.isDisabled,"is-hidden":this.props.isHidden,"bb-editor-submenu-toolbar":this.props.isSubmenuToolbar});return r.createElement("div",{className:l,role:"toolbar","aria-label":o?a(`bbmlEditor.toolbar.${o}.axAriaText`):"Text Formatting","aria-controls":s,ref:e=>{this.toolbarRoot=e}},i)}}tp.propTypes={children:s().array,addKeyDownHandler:s().func.isRequired,editorId:s().string,toolbarId:s().string,toolbarActionComplete:s().func.isRequired,hasKeyboardFocus:s().bool,isDisabled:s().bool,isRtl:s().bool,isSubmenuToolbar:s().bool,isSubToolbarOpen:s().bool,rootContentId:s().string,useSharedNavigator:s().bool,onModalOpen:s().func},tp.defaultProps={children:null,editorId:null,toolbarId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,rootContentId:null,useSharedNavigator:!1};var tm=(0,ta.H)((0,tl.withAnalytics)(tp)),th=n(924980),tI=n(464158);let tb=()=>r.createElement("div",{className:"bb-editor-toolbar-button-separator"});var tg=n(462966),ty=n(704695);class tf extends r.Component{static newState(e){let t=e.isActive&&e.isActive(e.editorFormat),n=e.isButtonDisabled,r=!n&&e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index||e.hasKeyboardFocus&&e.currentSubmenuIndex>-1&&e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index;return{isActive:t,isDisabled:n,hasKeyboardFocus:r,isSubmenuOpen:e.children&&e.currentMenuIndex===e.index&&e.currentSubmenuIndex>-1}}constructor(e){super(e),this.state=this.constructor.newState(e),this.focusOnCurrentButton=this.focusOnCurrentButton.bind(this),this.triggerAction=this.triggerAction.bind(this),this.containerClasses=this.containerClasses.bind(this),this.buttonClasses=this.buttonClasses.bind(this),this.buttonIconClasses=this.buttonIconClasses.bind(this),this.buttonNode=null,this.state.submenuStyles={}}componentDidMount(){this.focusOnCurrentButton(this.props)}UNSAFE_componentWillReceiveProps(e){let t=this.constructor.newState(e);this.setState(t,()=>this.focusOnCurrentButton(e))}componentDidUpdate(){this.adjustSubmenuPosition()}adjustSubmenuPosition(){if(this.containerRef){let e=this.containerRef.getElementsByClassName("bb-editor-toolbar-submenu")[0];if(!e||this.adjustingMenu)return;let t=this.containerRef.getBoundingClientRect(),n=this.props.getEditorRect(),r=e.getBoundingClientRect(),i=t.bottom+r.height,o=window.innerHeight||window.screen.height||document.body.offsetHeight,s=t.top+window.scrollY-r.height>=0,a={};n&&(r.left<n.left?a={right:r.left-n.left}:r.right>n.right&&(a={left:n.right-r.right})),i>o&&r.top>=0&&s?(this.adjustingMenu=!0,this.setState({submenuStyles:{...a,top:"auto"}},()=>{this.adjustingMenu=!1})):Object.keys(a).length>0&&(this.adjustingMenu=!0,this.setState({submenuStyles:a},()=>{this.adjustingMenu=!1}))}}focusOnCurrentButton(e){(e.currentMenuIndex===e.index&&-1===e.currentSubmenuIndex||e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index)&&this.buttonNode&&this.buttonNode.focus()}triggerAction(e){if(e.preventDefault(),e.stopPropagation(),this.props.isDisabled||this.state.isDisabled||!this.props.onClick)this.props.isDisabled||this.state.isDisabled||this.setState({submenuStyles:{display:"relative"}},()=>{this.props.setEditorFocusStateToolbar(!1),this.props.openSubmenu(this.props.parentIndex||this.props.index)});else{let{buttonNode:e}=this,{isActive:t}=this.state,{editorFormat:n,editorLastContent:r,editorLastRawSelection:i,currentLocale:o,localize:s,isRtl:a}=this.props;this.props.isSubmenu&&this.props.forceOpenSubmenu(this.props.index,0);let l=this.props.bbEditorId;this.props.onClick({applyChange:(e,t)=>{this.props.applyChange(e,t),this.props.toolbarActionComplete(!e||this.props.hasKeyboardFocus)},quillModuleAction:e=>this.props.quillModuleAction(e),closeAllMenus:()=>this.props.closeAllMenus(),useSharedNavigator:!0,editorFormat:n,editorLastContent:r,editorLastRawSelection:i,isActive:t,locale:o,preventBlur:()=>{this.props.setEditorFocusStateToolbar(!0)},showModal:(e,t)=>(this.props.setEditorFocusStateToolbar(!0),(0,eJ.Z)(e,t,s.getLocalePropsForClone())),buttonNode:e,isRtl:a,bbEditorId:l,rootContentId:this.props.rootContentId,onModalOpen:this.props.onModalOpen})}return!1}containerClasses(){return(0,u.Z)({"bb-editor-toolbar-button-container":!0,"bb-editor-toolbar-dropdown-container":this.state.isSubmenuOpen})}buttonClasses(){return(0,u.Z)({"bb-editor-toolbar-button":!0,"bb-editor-toolbar-button--left-separator":this.props.leftSeparator,"bb-editor-toolbar-button--double-separator":this.props.doubleSeparator,"bb-editor-toolbar-button--non-separator":!this.props.separator&&!this.props.doubleSeparator&&!this.props.leftSeparator,"bb-editor-toolbar-button--main":null===this.props.parentIndex,"bb-editor-submenu-is-open":this.state.isSubmenuOpen||this.props.isToolbarOpen,"bb-editor-submenu-is-closed":!this.state.isSubmenuOpen||!this.props.isToolbarOpen,"is-disabled":this.props.isDisabled||this.state.isDisabled,"is-focused":this.state.hasKeyboardFocus,"bb-editor-toolbar-text":this.props.textOnly||!(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-icon-text":!this.props.textOnly&&!this.props.iconOnly&&(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-dropdown":this.props.children||this.props.isSubmenu&&!this.props.hiddenChevron,"bb-editor-submenu-button":this.props.isSubmenu,"bb-editor-submenu-button-active":this.props.isToolbarOpen,padded:!this.props.iconOnly&&!this.props.children,"text-active":this.state.isActive||this.state.isSubmenuOpen,[`${this.props.cssClass}-active`]:this.state.isActive,[`${this.props.cssClass}-normal`]:!this.state.isActive})}buttonIconClasses(){return(0,u.Z)({icon:!!this.props.iconName,[`${this.props.iconName}-active-icon`]:this.props.iconName&&(this.state.isActive||this.state.isSubmenuOpen)||this.props.isToolbarOpen,[`${this.props.iconName}-normal-icon`]:this.props.iconName&&!this.state.isActive,"color-picker":this.props.isColorPicker})}buttonIcon(){if(null!==this.props.iconComponent){let e=this.props.iconComponent;return r.createElement(e,null)}return this.props.isColorPicker?r.createElement(tg.ZP,{color:this.props.color,cssClass:this.props.cssClass,editorFormat:this.props.editorFormat}):r.createElement(ty.l,null)}haspopup(){return this.props.isDialog?"dialog":this.props.children?!!this.props.children:null}innerButton(){let{isSubmenuOpen:e,isActive:t}=this.state,{analyticsEventAugmentor:n,children:i,localize:o,isSubmenu:s,isDialog:a,isToolbarOpen:l,isSubToolbarOpen:u,parentIndex:d,toggleButton:c}=this.props,E=this.buttonClasses(),p=this.buttonIconClasses(),m=this.haspopup(),h=n(tl.AnalyticsEventTypes.CLICK_EVENT,this.triggerAction,`editor.toolbar.${this.props.id}.button`);return r.createElement("button",{tabIndex:0===this.props.index?"0":"-1","data-analytics-id":`editor.toolbar.${this.props.id}.button`,className:E,"aria-checked":d?t:null,"aria-expanded":s||i?e||l:null,"aria-controls":s&&(e||u)?this.props.id:null,"aria-haspopup":m,"aria-pressed":!(d||s||e||i||a)&&c?!!t:null,"aria-label":o.translate(`bbmlEditor.toolbar.${this.props.id}.axAriaText`),onClick:h,ref:e=>{this.buttonNode=e}},r.createElement("span",{"aria-hidden":"true"},this.props.textOnly||r.createElement("span",{className:p},this.buttonIcon()),this.props.iconOnly||o.translate(`bbmlEditor.toolbar.${this.props.id}.label`)))}render(){let{isSubmenuOpen:e,isActive:t,isToolbarOpen:n}=this.state,{localize:i,isHideable:o,separator:s}=this.props,a=this.containerClasses(),l=this.innerButton();return o&&!t?null:r.createElement("div",{role:"presentation",className:a,ref:e=>{this.containerRef=e}},(this.props.iconOnly||this.children)&&r.createElement(tI.AnalyticsTooltip,{placement:"top",title:i.translate(`bbmlEditor.toolbar.${this.props.id}.label`)},l),!(this.props.iconOnly||this.children)&&l,e&&!n&&this.props.children&&r.createElement("ul",{id:this.props.id,role:"menu",className:"bb-editor-toolbar bb-editor-toolbar-submenu","aria-orientation":"horizontal",tabIndex:"-1",style:this.state.submenuStyles},this.props.children.map(e=>r.createElement("li",{key:e.key,role:"menuitemradio","aria-checked":e.props.isActive,tabIndex:"-1"},e))),s?r.createElement(tb,null):null)}}tf.propTypes={children:s().array,cssClass:s().string,iconName:s().string,iconComponent:s().object,iconOnly:s().bool,toggleButton:s().bool,isDisabled:s().bool,isHideable:s().bool,isRtl:s().bool,isSubmenu:s().bool,isToolbarOpen:s().bool,textOnly:s().bool,index:s().number,parentIndex:s().number,onClick:s().func,applyChange:s().func,quillModuleAction:s().func,toolbarActionComplete:s().func,openSubmenu:s().func,editorFormat:s().shape(),editorLastContent:s().arrayOf(s().shape({insert:s().oneOfType([s().string,s().object]),attributes:s().instanceOf(Object)})),editorLastRawSelection:s().shape(),id:s().string.isRequired,hasKeyboardFocus:s().bool,setEditorFocusStateToolbar:s().func,getEditorRect:s().func,isColorPicker:s().bool,color:s().string,rootContentId:s().string,...th.Z},tf.defaultProps={children:null,cssClass:"no-format",iconName:null,iconComponent:null,iconOnly:!1,toggleButton:!0,isDisabled:!1,isHideable:!1,isRtl:!1,isSubmenu:!1,isToolbarOpen:!1,textOnly:!1,index:-1,parentIndex:null,onClick:null,applyChange:null,quillModuleAction:null,toolbarActionComplete:null,openSubmenu:null,editorFormat:{},editorLastContent:[],editorLastRawSelection:new E.e(0,0),hasKeyboardFocus:!1,setEditorFocusStateToolbar:null,getEditorRect:()=>null,isColorPicker:!1,color:null,onModalOpen:()=>null,rootContentId:null};let tS=(0,d.h)((0,tl.withAnalytics)(tf));var t_=n(941386),tT=n(410628);function tv(e){let t=(0,u.Z)({"table-creator-cell":!0,selected:e.isSelected});return r.createElement("div",{className:"table-cell",role:"cell"},r.createElement("button",{index:e.index,tabIndex:"-1",className:t,"aria-labelledby":"tableGridCreator",onClick:()=>e.handleClick(e.rowIndex,e.columnIndex),onMouseEnter:()=>e.handleHover(e.rowIndex,e.columnIndex)}))}function tA(e){let[t,n]=(0,r.useState)({rowCount:0,columnCount:0}),i=(0,tT.q)(),o=(r,i)=>{e.quillModuleAction({module:"quill.table",action:"saved-selection"}),n({rowCount:r,columnCount:i}),e.quillModuleAction({module:"quill.table",action:"insert-table",rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1,headerRow:!1,headerColumn:!1})},s=(e,t)=>{n({rowCount:e,columnCount:t})};return r.createElement("div",{className:"table-creator"},r.createElement("span",{id:"tableGridCreator",className:"table-info"},i("bbmlEditor.toolbar.tableCreator.info",{rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1})),r.createElement("div",{"aria-labelledby":"tableGridCreator",role:"grid"},r.createElement("div",{className:"table-creator-grid",role:"row"},(()=>{let n=[];for(let i=0;i<10;i++)for(let a=0;a<10;a++)n.push(r.createElement(tv,{...e,index:10*i+a,key:`${i}_${a}`,rowIndex:i,columnIndex:a,isSelected:i<=t.rowCount&&a<=t.columnCount,handleHover:s,handleClick:o}));return n})())))}tv.propTypes={isSelected:s().bool.isRequired,rowIndex:s().number.isRequired,columnIndex:s().number.isRequired,index:s().number.isRequired,handleHover:s().func.isRequired,handleClick:s().func.isRequired},tA.propTypes={quillModuleAction:s().func.isRequired};var tO=(0,tl.withAnalytics)(tA);let tC=e=>{let{analyticsId:t,id:n,label:i,value:o}=e,s=(0,r.useRef)(null),a=(0,tT.q)();return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&s.current&&s.current.focus()}),r.createElement(tI.AnalyticsFormControlLabel,{analyticsId:t,className:(0,u.Z)({"bb-editor-toolbar-checkbox":!0,"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),label:a(`bbmlEditor.toolbar.${i}.label`),control:r.createElement(tI.AnalyticsCheckbox,{analyticsId:t,id:n,className:"inner-checkbox",value:o,checked:o}),htmlFor:n,onChange:t=>{e.onChange(t,e)},ref:s})};tC.propTypes={id:s().string.isRequired,label:s().string.isRequired,hasKeyboardFocus:s().bool,index:s().number,value:s().bool,currentMenuIndex:s().number.isRequired,currentSubmenuIndex:s().number.isRequired,onChange:s().func.isRequired},tC.defaultProps={hasKeyboardFocus:!1,index:-1,currentSubmenuIndex:-1,value:!1};var tR=(0,tl.withAnalytics)(tC),tL=n(675689),tD=n(958299);function tP(e){let t;let{title:n,placement:i,ariaLabel:o}=e;return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&t&&t.focus()}),r.createElement(tI.AnalyticsTooltip,{className:(0,u.Z)({"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),title:n,placement:i},r.createElement(tD.AnalyticsIconButton,{className:"bb-editor-toolbar-tooltip-icon-button","aria-label":o,ref:e=>{t=e},analyticsId:"bbml-editor.toolbar.tooltip"},r.createElement(tL.Information,null)))}tP.propTypes={ariaLabel:s().string.isRequired,hasKeyboardFocus:s().bool,index:s().number,placement:s().string,title:s().string.isRequired},tP.defaultProps={hasKeyboardFocus:!1,index:-1,placement:"top"};var tN=(0,tl.withAnalytics)(tP);function tU(e){let{isSmallToolbar:t,tableHasHeaderColumn:n,tableHasHeaderRow:i}=e,o=(0,tT.q)();return(0,r.useEffect)(()=>{let t=e.quillModuleAction({module:"quill.table",action:"get-headers"});e.setHeaders(t.row,t.column)},[]),r.createElement(tm,{...t_.gO,...e,isSubmenuToolbar:!0},r.createElement(tS,{...t_.Zp,iconOnly:!0}),r.createElement(tS,{...t_.wR,iconOnly:!0}),r.createElement(tS,{...t_.VV,iconOnly:!0}),r.createElement(tS,{...t_.km,iconOnly:!0}),r.createElement(tS,{...t_.Ag,iconOnly:!0}),r.createElement(tS,{...t_.yj,iconOnly:!0}),r.createElement(tS,{...t_.wj,iconOnly:!0}),r.createElement(tR,{id:"checkboxRow",label:"table-dialog-headers-row",value:i,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:n}),t.setHeaders(e.target.checked,n)},isHideable:t}),r.createElement(tR,{id:"checkboxColumn",label:"table-dialog-headers-column",value:n,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:i}),t.setHeaders(i,e.target.checked)},isHideable:t}),r.createElement(tN,{title:o("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top",ariaLabel:o("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText"),isHideable:t}))}tU.propTypes={children:s().array,addKeyDownHandler:s().func.isRequired,editorId:s().string,toolbarActionComplete:s().func.isRequired,hasKeyboardFocus:s().bool,isDisabled:s().bool,isRtl:s().bool,isSubmenuToolbar:s().bool,isSubToolbarOpen:s().bool,isSmallToolbar:s().bool},tU.defaultProps={children:null,editorId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,isSmallToolbar:!1};var tw=(0,tl.withAnalytics)(tU);let tk={[td.mt.default]:{[td.mZ.small]:["link","editAttachment","editYoutubeVideo","collab_video"],[td.mZ.medium]:["link","insertImage","insertLocalFile","editAttachment","editYoutubeVideo","collab_video"],[td.mZ.large]:["link","insertImage","insertLocalFile","editAttachment","editYoutubeVideo","collab_video"]},[td.mt.minimal]:{[td.mZ.small]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"],[td.mZ.medium]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"],[td.mZ.large]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"]}},tM=(e,t,n)=>e.filter(e=>!tk[t][n].some(t=>e.id===t)).length>0;var tB=(e,t,n)=>e.pluginButtons.filter(e=>!tk[t][n].some(t=>e.id===t)&&!e.isHidden).map(e=>r.createElement(tS,{...e}));function tG(e){let t=e.pluginButtons.find(e=>"link"===e.id);return t?r.createElement(tS,{...t,...e}):null}function tV(e){let t=e.pluginButtons.find(e=>"editAttachment"===e.id);return t?r.createElement(tS,{...t,...e}):null}function tx(e){let t=e.pluginButtons.find(e=>"editYoutubeVideo"===e.id);return t?r.createElement(tS,{...t,...e}):null}function tq(e){let t=e.pluginButtons.find(e=>"insertLocalFile"===e.id);return t?r.createElement(tS,{...t,...e}):null}function tZ(e){let t=e.pluginButtons.find(e=>"insertImage"===e.id);return t?r.createElement(tS,{...t,...e}):null}function tF(e){let t=e.pluginButtons.find(e=>"collab_video"===e.id);return!t||t.isHidden?null:r.createElement(tS,{...t,...e})}tG.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tV.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tx.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tq.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tZ.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tF.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired,isHidden:s().bool})).isRequired};let tH={None:"",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tK(e){let[t,n]=(0,r.useState)(tH.None),[i,o]=(0,r.useState)(),s=e=>{n(t=>t===e?tH.None:e)},a=()=>{s(tH.None)};return r.createElement("div",null,r.createElement(tm,{...e,isSubToolbarOpen:t!==tH.None,resetMenu:a,shareNavigator:e=>{o(e)}},r.createElement(tS,{...t_.pn,iconOnly:!0},t_.Qi.map(e=>r.createElement(tS,{key:e.key,...e,textOnly:!0}))),r.createElement(tS,{...t_.DQ,iconOnly:!0},r.createElement(tS,{...t_.l2,textOnly:!0}),r.createElement(tS,{...t_.dr,textOnly:!0}),r.createElement(tS,{...t_.K3,textOnly:!0}),r.createElement(tS,{...t_.wk,textOnly:!0}),r.createElement(tS,{...t_.sg,textOnly:!0}),r.createElement(tS,{...t_.Cg,textOnly:!0}),r.createElement(tS,{...t_.AW,textOnly:!0})),r.createElement(tS,{...t_.yH,iconOnly:!0},r.createElement(tS,{...t_.rA,textOnly:!0}),r.createElement(tS,{...t_.nl,textOnly:!0}),r.createElement(tS,{...t_.xj,textOnly:!0,isActive:t=>t.size===N.SC||!e.isRtl&&!t.size}),r.createElement(tS,{...t_.B2,textOnly:!0,isActive:t=>t.size===N.gJ||e.isRtl&&!t.size}),r.createElement(tS,{...t_.Fo,textOnly:!0}),r.createElement(tS,{...t_.AV,textOnly:!0}),r.createElement(tS,{...t_.jU,textOnly:!0})),r.createElement(tS,{...t_.zH,iconOnly:!0,separator:!0},r.createElement(tS,{...t_.gu}),r.createElement(tS,{...t_.dK}),r.createElement(tS,{...t_.Ol}),r.createElement(tS,{...t_.JZ}),r.createElement(tS,{...t_.yx}),r.createElement(tS,{...t_.BU})),r.createElement(tS,{...t_.d8,iconOnly:!0}),r.createElement(tS,{...t_.Tx,iconOnly:!0}),r.createElement(tS,{...t_.v6,iconOnly:!0}),r.createElement(tS,{...t_.c0,onClick:()=>s(tH.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tH.TextOptionsMenu,separator:!0}),e.editorHasTableSelected?r.createElement(tS,{...t_.OR,iconOnly:!0}):r.createElement(tS,{...t_.SN,iconOnly:!0},r.createElement(tO,{...e.quillModuleAction}),r.createElement(tS,{...t_.cM,...e.closeAllMenus})),!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.v2,iconOnly:!0},r.createElement(tS,{...t_.Ni}),r.createElement(tS,{...t_.Un}),r.createElement(tS,{...t_.EL}),r.createElement(tS,{...t_.IH})),r.createElement(tS,{...t_.sc,onClick:()=>s(tH.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tH.ListMenu,separator:!0}),r.createElement(tS,{...t_.WP,iconOnly:!0,isButtonDisabled:e.editorHasTableSelected}),r.createElement(tS,{...t_.XM,iconOnly:!0,separator:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tq,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tZ,{pluginButtons:e.pluginButtons,iconOnly:!0}),tM(e.pluginButtons,td.mt.default,td.mZ.large)&&r.createElement(tS,{...t_.t0,onModalOpen:e.onModalOpen,iconOnly:!0},tB(e,td.mt.default,td.mZ.large)),r.createElement(tF,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tV,{id:td.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tx,{id:td.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tH.TextOptionsMenu&&r.createElement(tm,{...e,...t_.MO,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tH.None,resetMenu:a},r.createElement(tS,{...t_.Re,iconOnly:!0}),r.createElement(tS,{...t_.$2,iconOnly:!0}),r.createElement(tS,{...t_.ar,iconOnly:!0}),r.createElement(tS,{...t_.GY,iconOnly:!0})),t===tH.ListMenu&&r.createElement(tm,{...e,...t_.AU,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tH.None,resetMenu:a},r.createElement(tS,{...t_.QI,iconOnly:!0}),r.createElement(tS,{...t_.GS,iconOnly:!0}),r.createElement(tS,{...t_.L3,iconOnly:!0},r.createElement(tS,{...t_.yz,textOnly:!0}),r.createElement(tS,{...t_.MP,textOnly:!0}),r.createElement(tS,{...t_.aj,textOnly:!0}),r.createElement(tS,{...t_.QA,textOnly:!0})),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.jy,iconOnly:!0,isActive:t=>t.direction===Y.TM||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tK.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool,editorHasCodeBlockSelected:s().bool},tK.defaultProps={editorHasTableSelected:!1};let tj={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tQ(e){let[t,n]=(0,r.useState)(tj.None),[i,o]=(0,r.useState)(),s=e=>{n(t=>t===e?tj.None:e)},a=()=>{s(tj.None)};return r.createElement("div",null,r.createElement(tm,{...e,isSubToolbarOpen:t!==tj.None,resetMenu:a,shareNavigator:e=>{o(e)}},r.createElement(tS,{...t_.tM,onClick:()=>s(tj.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tj.TextStylingMenu,separator:!0}),r.createElement(tS,{...t_.d8,iconOnly:!0}),r.createElement(tS,{...t_.Tx,iconOnly:!0}),r.createElement(tS,{...t_.v6,iconOnly:!0}),r.createElement(tS,{...t_.c0,onClick:()=>s(tj.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tj.TextOptionsMenu,separator:!0}),!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.v2,iconOnly:!0},r.createElement(tS,{...t_.Ni}),r.createElement(tS,{...t_.Un}),r.createElement(tS,{...t_.EL}),r.createElement(tS,{...t_.IH})),r.createElement(tS,{...t_.sc,onClick:()=>s(tj.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tj.ListMenu,separator:!0}),r.createElement(tS,{...t_.WP,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),r.createElement(tS,{...t_.XM,iconOnly:!0,separator:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tq,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tZ,{pluginButtons:e.pluginButtons,iconOnly:!0}),tM(e.pluginButtons,td.mt.default,td.mZ.medium)&&r.createElement(tS,{...t_.t0,onModalOpen:e.onModalOpen,iconOnly:!0},tB(e,td.mt.default,td.mZ.medium)),r.createElement(tF,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tV,{id:td.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tx,{id:td.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tj.TextStylingMenu&&r.createElement(tm,{...t_.nk,...e,isSubmenuToolbar:!0,resetMenu:a},r.createElement(tS,{...t_.pn,iconOnly:!0},t_.Qi.map(e=>r.createElement(tS,{key:e.key,...e,textOnly:!0}))),r.createElement(tS,{...t_.DQ,iconOnly:!0},r.createElement(tS,{...t_.l2,textOnly:!0}),r.createElement(tS,{...t_.dr,textOnly:!0}),r.createElement(tS,{...t_.K3,textOnly:!0}),r.createElement(tS,{...t_.wk,textOnly:!0}),r.createElement(tS,{...t_.sg,textOnly:!0}),r.createElement(tS,{...t_.Cg,textOnly:!0}),r.createElement(tS,{...t_.AW,textOnly:!0})),r.createElement(tS,{...t_.yH,iconOnly:!0},r.createElement(tS,{...t_.rA,textOnly:!0}),r.createElement(tS,{...t_.nl,textOnly:!0}),r.createElement(tS,{...t_.xj,textOnly:!0,isActive:t=>t.size===N.SC||!e.isRtl&&!t.size}),r.createElement(tS,{...t_.B2,textOnly:!0,isActive:t=>t.size===N.gJ||e.isRtl&&!t.size}),r.createElement(tS,{...t_.Fo,textOnly:!0}),r.createElement(tS,{...t_.AV,textOnly:!0}),r.createElement(tS,{...t_.jU,textOnly:!0})),r.createElement(tS,{...t_.zH,iconOnly:!0},r.createElement(tS,{...t_.gu}),r.createElement(tS,{...t_.dK}),r.createElement(tS,{...t_.Ol}),r.createElement(tS,{...t_.JZ}),r.createElement(tS,{...t_.yx}),r.createElement(tS,{...t_.BU}))),t===tj.TextOptionsMenu&&r.createElement(tm,{...t_.MO,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tj.None,resetMenu:a},r.createElement(tS,{...t_.Re,iconOnly:!0}),r.createElement(tS,{...t_.$2,iconOnly:!0}),r.createElement(tS,{...t_.ar,iconOnly:!0}),r.createElement(tS,{...t_.GY,iconOnly:!0})),t===tj.ListMenu&&r.createElement(tm,{...t_.AU,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tj.None,resetMenu:a},r.createElement(tS,{...t_.QI,iconOnly:!0}),r.createElement(tS,{...t_.GS,iconOnly:!0}),r.createElement(tS,{...t_.L3,iconOnly:!0},r.createElement(tS,{...t_.yz,textOnly:!0}),r.createElement(tS,{...t_.MP,textOnly:!0}),r.createElement(tS,{...t_.aj,textOnly:!0}),r.createElement(tS,{...t_.QA,textOnly:!0})),e.editorHasTableSelected?r.createElement(tS,{...t_.OR,iconOnly:!0}):r.createElement(tS,{...t_.SN,iconOnly:!0},r.createElement(tO,{...e.quillModuleAction}),r.createElement(tS,{...t_.cM,...e.closeAllMenus})),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.jy,iconOnly:!0,isActive:t=>t.direction===Y.TM||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tQ.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool},tQ.defaultProps={editorHasTableSelected:!1};var tY=n(662176);let tz={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tW(e){let[t,n]=(0,r.useState)(tz.None),[i,o]=(0,r.useState)(),s=(0,tY.useTheme)(),a=(0,tY.useMediaQuery)(s.breakpoints.down("sm")),l=e=>{n(t=>t===e?tz.None:e)},u=()=>{l(tz.None)},d=a?tB(e,td.mt.default,td.mZ.small).concat(r.createElement(tF,{pluginButtons:e.pluginButtons})):tB(e,td.mt.default,td.mZ.small);return r.createElement("div",null,r.createElement(tm,{...e,isSubToolbarOpen:t!==tz.None,resetMenu:u,shareNavigator:e=>{o(e)}},r.createElement(tS,{...t_.tM,onClick:()=>l(tz.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tz.TextStylingMenu,separator:!0}),r.createElement(tS,{...t_.c0,onClick:()=>l(tz.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tz.TextOptionsMenu,separator:!0}),r.createElement(tS,{...t_.sc,onClick:()=>l(tz.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tz.ListMenu,separator:!0}),r.createElement(tS,{...t_.WP,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tS,{...t_.t0,onModalOpen:e.onModalOpen,iconOnly:!0},d),!a&&r.createElement(tF,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tV,{id:td.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tx,{id:td.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tz.TextStylingMenu&&r.createElement(tm,{...t_.nk,...e,isSubmenuToolbar:!0,resetMenu:u},r.createElement(tS,{...t_.pn,iconOnly:!0},t_.Qi.map(e=>r.createElement(tS,{key:e.key,...e,textOnly:!0}))),r.createElement(tS,{...t_.DQ,iconOnly:!0},r.createElement(tS,{...t_.l2,textOnly:!0}),r.createElement(tS,{...t_.dr,textOnly:!0}),r.createElement(tS,{...t_.K3,textOnly:!0}),r.createElement(tS,{...t_.wk,textOnly:!0}),r.createElement(tS,{...t_.sg,textOnly:!0}),r.createElement(tS,{...t_.Cg,textOnly:!0}),r.createElement(tS,{...t_.AW,textOnly:!0})),r.createElement(tS,{...t_.yH,iconOnly:!0},r.createElement(tS,{...t_.rA,textOnly:!0}),r.createElement(tS,{...t_.nl,textOnly:!0}),r.createElement(tS,{...t_.xj,textOnly:!0,isActive:t=>t.size===N.SC||!e.isRtl&&!t.size}),r.createElement(tS,{...t_.B2,textOnly:!0,isActive:t=>t.size===N.gJ||e.isRtl&&!t.size}),r.createElement(tS,{...t_.Fo,textOnly:!0}),r.createElement(tS,{...t_.AV,textOnly:!0}),r.createElement(tS,{...t_.jU,textOnly:!0})),r.createElement(tS,{...t_.zH,iconOnly:!0},r.createElement(tS,{...t_.gu}),r.createElement(tS,{...t_.dK}),r.createElement(tS,{...t_.Ol}),r.createElement(tS,{...t_.JZ}),r.createElement(tS,{...t_.yx}),r.createElement(tS,{...t_.BU}))),t===tz.TextOptionsMenu&&r.createElement(tm,{...t_.MO,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tz.None,resetMenu:u},r.createElement(tS,{...t_.d8,iconOnly:!0}),r.createElement(tS,{...t_.Tx,iconOnly:!0}),r.createElement(tS,{...t_.v6,iconOnly:!0}),r.createElement(tS,{...t_.Re,iconOnly:!0}),r.createElement(tS,{...t_.$2,iconOnly:!0}),r.createElement(tS,{...t_.ar,iconOnly:!0}),r.createElement(tS,{...t_.XM,iconOnly:!0}),r.createElement(tS,{...t_.GY,iconOnly:!0})),t===tz.ListMenu&&r.createElement(tm,{...t_.AU,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tz.None,resetMenu:u},!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.v2,iconOnly:!0},r.createElement(tS,{...t_.Ni}),r.createElement(tS,{...t_.Un}),r.createElement(tS,{...t_.EL}),r.createElement(tS,{...t_.IH})),r.createElement(tS,{...t_.QI,iconOnly:!0}),r.createElement(tS,{...t_.GS,iconOnly:!0}),r.createElement(tS,{...t_.L3,iconOnly:!0},r.createElement(tS,{...t_.yz,textOnly:!0}),r.createElement(tS,{...t_.MP,textOnly:!0}),r.createElement(tS,{...t_.aj,textOnly:!0}),r.createElement(tS,{...t_.QA,textOnly:!0})),e.editorHasTableSelected?r.createElement(tS,{...t_.OR,iconOnly:!0}):r.createElement(tS,{...t_.cM,iconOnly:!0}),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.jy,iconOnly:!0,isActive:t=>t.direction===Y.TM||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tS,{...t_.rG,iconOnly:!0,isActive:t=>t.direction===Y.hn||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,isSmallToolbar:!0,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tW.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool},tW.defaultProps={editorHasTableSelected:!1};var t$=n(256579),tX=e=>{let t=e.pluginButtons.find(e=>e.id===t$.aw);return t?r.createElement(tS,{...t,...e}):null};function tJ(e){let t=e.pluginButtons.find(e=>"math"===e.id);return t?r.createElement(tS,{...t,...e}):null}tJ.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};let t0=e=>r.createElement(tm,{...e},r.createElement(tS,{...t_.d8,iconOnly:!0}),r.createElement(tS,{...t_.Tx,iconOnly:!0}),r.createElement(tS,{...t_.v6,iconOnly:!0}),r.createElement(tJ,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tS,{...t_.t0,onModalOpen:e.onModalOpen,iconOnly:!0,separator:!0},r.createElement(tG,{pluginButtons:e.pluginButtons}),r.createElement(tX,{pluginButtons:e.pluginButtons}),tB(e,td.mt.minimal,td.mZ.small),r.createElement(tF,{pluginButtons:e.pluginButtons})),r.createElement(tV,{id:td.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tx,{id:td.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));t0.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};let t1=e=>r.createElement(tm,{...e},r.createElement(tS,{...t_.c0,iconOnly:!0},r.createElement(tS,{...t_.d8}),r.createElement(tS,{...t_.Tx}),r.createElement(tS,{...t_.v6})),r.createElement(tJ,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tS,{...t_.t0,onModalOpen:e.onModalOpen,iconOnly:!0,separator:!0},r.createElement(tG,{pluginButtons:e.pluginButtons}),r.createElement(tX,{pluginButtons:e.pluginButtons}),tB(e,td.mt.minimal,td.mZ.small),r.createElement(tF,{pluginButtons:e.pluginButtons})),r.createElement(tV,{id:td.M$.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tx,{id:td.HC.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));t1.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};var t2=n(198022);let t6=e=>{let{onChange:t}=e,n=(0,tY.useTheme)(),i=(0,tY.useMediaQuery)(n.breakpoints.down("sm"));return(0,r.useEffect)(()=>{t(i)},[t,i]),null},t7="aria-additional-information";class t3 extends r.Component{constructor(e){super(e),this.setEditorContainer=e=>{this.editorContainer=e},this.setEditorRoot=e=>{this.editorRoot=e},this.handleSmallBreakpointChange=e=>{this.getPluginModules().forEach(t=>{"function"==typeof t.onBreakpointChange&&t.onBreakpointChange(e)})};let t=new E.e(0,0);this.editorInitialContent=null,this.isBbmlDirty=!1,this.bbEditorId="BB_Editor_ID_"+(0,t2.v4)(),this.state={isApplyingChanges:!1,editorFormat:{text:"",selection:t},editorLastFormat:{},editorLastContent:[],editorLastSelection:t,editorLastRawSelection:t,toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1,editorHasTableSelected:!1,tableHasHeaderRow:!1,tableHasHeaderColumn:!1,toolbar:tW,editorHasCodeBlockSelected:!1},this.quill=null,this.quillUnloadHandler=null,this.storedStack=null,this.editorContainer=null,this.editorRoot=null,this.keyDownHandler=new eY,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownOutsideEditor=this.onKeyDownOutsideEditor.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.extendSelection=null,this.registerAccessibilityHandlers=this.registerAccessibilityHandlers.bind(this),this.unregisterAccessibilityHandlers=this.unregisterAccessibilityHandlers.bind(this),this.setToolbarKeyboardFocused=this.setToolbarKeyboardFocused.bind(this),this.setEditorKeyboardFocused=this.setEditorKeyboardFocused.bind(this),this.setEditorMouseFocused=this.setEditorMouseFocused.bind(this),this.updateAriaAttributes=this.updateAriaAttributes.bind(this),this.addAxLabels=this.addAxLabels.bind(this),this.editorContainsElement=this.editorContainsElement.bind(this),this.editorHasFocus=this.editorHasFocus.bind(this),this.editorHasKeyboardFocus=this.editorHasKeyboardFocus.bind(this),this.setEditorFocusState=this.setEditorFocusState.bind(this),this.setEditorFocusStateToolbar=this.setEditorFocusStateToolbar.bind(this),this.isEditorFocusState=this.isEditorFocusState.bind(this),this.editorFocusState=td.xB.BLURRED,this.onFocusHandler=this.onFocusHandler.bind(this),this.onFocusDebounce=null,this.onBlurHandler=this.onBlurHandler.bind(this),this.onBlurDebounce=null,this.initializeQuill=this.initializeQuill.bind(this),this.updateQuillEnable=this.updateQuillEnable.bind(this),this.updateQuillPlaceholder=this.updateQuillPlaceholder.bind(this),this.restoreQuillPlaceholder=this.restoreQuillPlaceholder.bind(this),this.unloadPlugins=this.unloadPlugins.bind(this),this.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.onToolbarActionComplete=this.onToolbarActionComplete.bind(this),this.onEditorChange=this.onEditorChange.bind(this),this.getEditorSelection=this.getEditorSelection.bind(this),this.getEditorFormat=this.getEditorFormat.bind(this),this.updateFormatWithBlotSelection=this.updateFormatWithBlotSelection.bind(this),this.selectEmbeddedBlot=this.selectEmbeddedBlot.bind(this),this.unselectEmbeddedBlots=this.unselectEmbeddedBlots.bind(this),this.applyEditorChange=this.applyEditorChange.bind(this),this.applyChangeAndSetEditorFocused=this.applyChangeAndSetEditorFocused.bind(this),this.quillModuleAction=this.quillModuleAction.bind(this),this.setHeaders=this.setHeaders.bind(this),this.onBbMLInputChange=this.onBbMLInputChange.bind(this),this.onBbMLOutputChange=this.onBbMLOutputChange.bind(this),this.makeEmbedsEasierToEditAfter=this.makeEmbedsEasierToEditAfter.bind(this),this.updateToolbar=this.updateToolbar.bind(this),this.setToolbarState=this.setToolbarState.bind(this),this.getPluginButtons=this.getPluginButtons.bind(this),this.getEditorRect=this.getEditorRect.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.dragCount=0,this.fileDragDropUtil=e0(this.applyChangeAndSetEditorFocused,this.props.localize.getLocalePropsForClone(),this.setEditorFocusStateToolbar,this.props.onModalOpen),this.plugins=e$(e.plugins,()=>this.forceUpdate(),this.fileDragDropUtil)}componentDidMount(){this.initializeQuill(),this.registerAccessibilityHandlers(),this.updateToolbar(),window.addEventListener("resize",this.updateToolbar)}componentDidUpdate(e){let t=!e.isDisabled&&!e.isReadOnly,n=!this.props.isDisabled&&!this.props.isReadOnly;n===t||(this.updateQuillEnable(n),te(this.editorRoot.classList,n),n||(tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1))),this.props.placeholder!==e.placeholder&&this.updateQuillPlaceholder(this.props.placeholder),this.props.isDisabled!==e.isDisabled&&e9(this.editorRoot.classList,this.props.isDisabled),this.props.isReadOnly!==e.isReadOnly&&(e4(this.editorRoot.classList,this.props.isReadOnly),this.updateQuillPlaceholder(this.props.placeholder),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly})),this.props.errorMessage!==e.errorMessage&&ti(this.editorRoot.classList,!!this.props.errorMessage),this.updateAriaAttributes(e),(this.props.isReadOnly!==e.isReadOnly||this.props.isToolbarHidden!==e.isToolbarHidden||this.props.toolbarSet!==e.toolbarSet)&&this.updateToolbar(),(this.props.size!==e.size||Object.keys(this.props).some(t=>this.props[t]!==e[t]))&&((this.props.bbml!==e.bbml||this.isBbmlDirty)&&this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges()),(this.props.currentLocale!==e.currentLocale||this.props.isRtl!==e.isRtl)&&this.fileDragDropUtil.setLocaleProps(this.props.localize.getLocalePropsForClone()),this.editorRoot.firstChild.classList.remove(`size-${e.size}`),this.setEditorSize()}componentWillUnmount(){this.quill.history.clear(),this.unloadPlugins(),this.unregisterAccessibilityHandlers(),this.removeTimers(),window.removeEventListener("resize",this.updateToolbar),this.quill.off(c.Z.events.EDITOR_CHANGE,this.onEditorChange),this.editorRoot.remove(),delete this.editorContainer,delete this.editorRoot,delete this.quill}removeTimers(){this.requestAnimationFrameID&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=null),clearTimeout(this.extendSelection),clearTimeout(this.debounceWindowResizeToolbar),clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),clearTimeout(this.axTooltipTimeout),clearTimeout(this.keyFocusTimeout),clearTimeout(this.autoSaveTimeout)}registerAccessibilityHandlers(){document.addEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.addEventListener("focusin",this.onFocusHandler),this.editorContainer.addEventListener("focusout",this.onBlurHandler),this.editorRoot.addEventListener("mousedown",this.onMouseDown),this.updateAriaAttributes(),this.keyDownHandler.addKeyDownHandler(l().F10,eQ.ALT,this.setToolbarKeyboardFocused,ej.EDITOR)}unregisterAccessibilityHandlers(){document.removeEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),this.editorContainer.removeEventListener("focusout",this.onBlurHandler),this.editorRoot.removeEventListener("mousedown",this.onMouseDown)}addAxLabels(){let{editorId:e,ariaLabelledBy:t,ariaDescribedBy:n}=this.props,r=this.editorRoot.firstChild;this.editorRoot.querySelector(".ql-clipboard").setAttribute("aria-hidden","true"),e&&r.setAttribute("id",e),t&&r.setAttribute("aria-labelledby",t),n&&r.setAttribute("aria-describedby",n)}updateAriaAttributes(e){let t=!1;!e||e.isReadOnly||e.isDisabled||(t=!0);let n=!this.props.isReadOnly&&!this.props.isDisabled;if(t!==n&&(n?(this.editorRoot.firstChild.setAttribute("role","textbox"),this.editorRoot.firstChild.setAttribute("aria-multiline","true"),this.editorRoot.firstChild.setAttribute("aria-required",this.props.ariaRequired?"true":"false")):(this.editorRoot.firstChild.removeAttribute("role"),this.editorRoot.firstChild.removeAttribute("aria-multiline"),this.editorRoot.firstChild.removeAttribute("aria-required"))),e){let{ariaLabelledBy:t}=this.props;e.ariaLabelledBy!==t&&this.editorRoot.firstChild.setAttribute("aria-labelledby",t)}let{showKeyboardTooltip:r}=this.getToolbarAndKeyboardTooltip(),{ariaDescribedBy:i}=this.props;if(i){let e=r?`${i} ${t7}`:i;this.editorRoot.firstChild.setAttribute("aria-describedby",e)}}setToolbarKeyboardFocused(){this.keyDownHandler.enableToolbarScope(),this.setState({toolbarHasKeyboardFocus:!0,editorHasKeyboardFocus:!1}),tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1)}setEditorKeyboardFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!0},"function"==typeof e?e:null),tn(this.editorRoot.classList,!0),ts(this.editorRoot.classList,!0)}setEditorMouseFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1},"function"==typeof e?e:null),tn(this.editorRoot.classList,!0)}onMouseDown(e){this.editorHasFocus()&&!this.quill.hasFocus()&&this.onToolbarActionComplete(!this.toolbarHasFocus()),2===e.button&&(clearTimeout(this.extendSelection),this.extendTableSelection()),this.props.isDisabled||this.props.isReadOnly||setTimeout(()=>this.selectEmbeddedBlot(e.target))}onKeyDown(e){if(!this.props.isDisabled&&!this.props.isReadOnly){let t=this.keyDownHandler.handleKeyDown(e),n=eY.hasModifierKey(e),r=eY.hasRegularKey(e);clearTimeout(this.extendSelection),this.extendTableSelection(),e.keyCode===l().ENTER&&this.quill.history.cutoff(),(t||n&&r)&&this.onEditorChange(c.Z.events.TEXT_CHANGE)}}onKeyDownOutsideEditor(e){e.keyCode!==l().TAB||this.props.isDisabled||this.props.isReadOnly||this.editorHasFocus()||(this.keyFocusTimeout=setTimeout(()=>{this.editorHasFocus()&&this.setEditorKeyboardFocused()}))}editorContainsElement(e,t){let n=this.editorContainer;return t&&(n=n.querySelector(t)),n&&n.contains(e)}toolbarHasFocus(){return(this.editorContainsElement(document.activeElement,".bb-editor-toolbar")||this.editorContainsElement(document.activeElement,".bb-editor-submenu-toolbar"))&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasFocus(){return(this.editorContainsElement(document.activeElement)||this.quill.hasFocus())&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasKeyboardFocus(){return this.editorHasFocus()&&(this.state.editorHasKeyboardFocus||this.editorRoot.classList.contains("has-keyboard-focus"))}onToolbarActionComplete(e=!1){var t,n;let r=!0===e?()=>this.quill.focus():()=>{};this.setEditorFocusState(td.xB.FOCUSED),this.state.toolbarHasKeyboardFocus?this.setEditorKeyboardFocused(r):this.setEditorMouseFocused(r),null===(n=(t=this.props).onFocus)||void 0===n||n.call(t)}setEditorFocusState(e){this.editorFocusState=e}setEditorFocusStateToolbar(e=!1){tn(this.editorRoot.classList,!1),e&&this.setEditorFocusState(td.xB.TOOLBAR)}isEditorFocusState(e){return this.editorFocusState===e}onBlurHandler(){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.editorContainer.removeEventListener("dragover",ez.be),this.onBlurDebounce=setTimeout(()=>{!this.editorHasFocus()&&this.isEditorFocusState(td.xB.FOCUSED)&&this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1},()=>{this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(null)}),this.setEditorFocusState(td.xB.BLURRED),this.restoreQuillPlaceholder(),tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1),this.props.onBlur&&this.props.onBlur()})},100)}onFocusHandler(e){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.readOnly||this.editorContainer.addEventListener("dragover",ez.be),e&&e.target&&!this.props.isDisabled&&!this.props.isReadOnly&&(this.selectEmbeddedBlot(e.target),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),e.target.focus({preventScroll:!0}),this.editorContainer.addEventListener("focusin",this.onFocusHandler)),this.onFocusDebounce=setTimeout(()=>{this.editorHasFocus()&&this.isEditorFocusState(td.xB.BLURRED)&&(window.getSelection().focusNode===this.editorRoot.firstChild&&this.quill.setSelection(0,0),this.setEditorFocusState(td.xB.FOCUSED),this.toolbarHasFocus()||tn(this.editorRoot.classList,!0),this.editorHasKeyboardFocus()&&ts(this.editorRoot.classList,!0),this.toolbarHasFocus()||this.quill.hasFocus()||this.quill.focus(),this.props.onFocus&&this.props.onFocus())},100)}initializeQuill(){this.quillUnloadHandler=eh([...this.plugins],this.props,this.editorRoot),this.editorRoot.classList.add("bb-editor-container"),this.quill=new c.Z(this.editorRoot,{placeholder:!this.props.isReadOnly&&this.props.placeholder,readOnly:this.props.isDisabled||this.props.isReadOnly,modules:{...ew,...this.getPluginModulesConfig()}}),this.getPluginModules().forEach(e=>{"function"==typeof e.onInit&&e.onInit(this.props.localize.getLocalePropsForClone(),this.applyEditorChange)}),this.quill.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.editorRoot.firstChild.classList.add(td.Eq),this.setEditorSize(),this.editorContainer.shouldEnableDemoMashup=!!this.props.plugins.reduce((e,t)=>t.length?[...e,...t]:[...e,t],[]).find(e=>e&&"demoMashup"===e.pluginId),this.editorContainer.shouldEnableDemoMashup&&(0,e1.d)(),this.addAxLabels(),this.props.disablePasteFormat?this.quill.clipboard.addMatcher(eV.selector,eV.func):eF.forEach(e=>{this.quill.clipboard.addMatcher(e.selector,e.func)}),function(e,t){t.forEach(n=>{if(n.matchers){let t;n.matchers.forEach(r=>{t="function"==typeof n.deltaModifier?n.deltaModifier:(e,t)=>{let r;let i=n.formatter&&n.formatter.blotName,o=i||n.pluginId;return(["embed","embedInline"].includes(n.formatter.type)?r={insert:{[o]:(0,J.u9)(e,n.formatter.attributes)},attributes:(0,J.u9)(e,n.formatter.attributes)}:"inline"===n.formatter.type&&((r={insert:e.textContent,attributes:(0,J.u9)(e,n.formatter.attributes)}).attributes[o]=(0,J.u9)(e,n.formatter.attributes)),"link"===i&&e.textContent&&e.textContent.trim().length)?eM(t,r.attributes):new(h())([r])},e.clipboard.addMatcher(r,t)})}e.clipboard.addMatcher(Node.TEXT_NODE,eH(t))})}(this.quill,this.plugins),te(this.editorRoot.classList,!this.props.isDisabled&&!this.props.isReadOnly),e9(this.editorRoot.classList,this.props.isDisabled),e4(this.editorRoot.classList,this.props.isReadOnly),ti(this.editorRoot.classList,!!this.props.errorMessage),this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges(),this.quill.on(c.Z.events.EDITOR_CHANGE,this.onEditorChange),this.quill.history.clear()}updateQuillEnable(e=!1){e&&!this.quill.isEnabled()?this.quill.enable(!0):!e&&this.quill.isEnabled()&&this.quill.enable(!1)}updateQuillPlaceholder(e){"string"==typeof e&&this.quill.root.setAttribute("data-placeholder",e)}restoreQuillPlaceholder(){1===this.quill.getContents().ops.length&&"string"==typeof this.quill.getContents().ops[0].insert&&"\n"===this.quill.getContents().ops[0].insert&&this.quill.setText("")}unloadPlugins(){var e;null===(e=this.quillUnloadHandler)||void 0===e||e.call(this),(0,eJ.u)(this.bbEditorId,this.props.onModalOpen)}notifyPluginsOfPropChanges(){Array.from(this.editorRoot.querySelectorAll(".wants-props-update")).forEach(e=>{e.formatComponent&&e.formatComponent(this.props)})}onEditorChange(e,t,n,r){e!==c.Z.events.SELECTION_CHANGE&&this.state.isApplyingChanges||e===c.Z.events.SELECTION_CHANGE&&"silent"===r||e===c.Z.events.TEXT_CHANGE&&"silent"===r||i.unstable_batchedUpdates(()=>{if(this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops),e===c.Z.events.SELECTION_CHANGE&&"user"===r&&(clearTimeout(this.extendSelection),this.extendSelection=setTimeout(()=>{this.extendTableSelection()},400)),e!==c.Z.events.SELECTION_CHANGE||"user"!==r||this.state.isApplyingChanges||this.setState({editorLastContent:this.quill.getContents().ops}),e===c.Z.events.TEXT_CHANGE){let e=this.quill.getContents().ops;this.onBbMLOutputChange(e),this.setState({editorLastContent:e})}if(this.editorContainsElement(document.activeElement)&&!this.props.isDisabled&&!this.props.isReadOnly&&e&&!this.state.isApplyingChanges){let e=t&&t.ops&&t.ops[t.ops.length-1].insert,r="string"==typeof e&&e.includes("\n"),i=this.getEditorFormat(),o={};r&&(Object.values(td.I2).forEach(e=>{i[e]&&(o[e]=i[e])}),o.selection=new E.e(i.selection.index+1,0));let s=this.getEditorHasTableSelected(),a=!1;if(s)this.storedStack||(this.storedStack=this.quill.history.stack,this.quill.history.clear()),a=this.isDifferentTableSelected(n);else if(this.storedStack){let e=this.quill.history.stack,t=this.getDeltaChangeLength(e);this.storedStack.undo.forEach(e=>{e.undo.ops.forEach(e=>{e.retain&&e.retain>t.lowestRetain&&(e.retain+=t.offset)})}),this.quill.history.stack=this.storedStack,this.storedStack=void 0}a?this.resetTableSubtoolbar():this.setState({editorHasTableSelected:s}),this.setState({editorFormat:i,editorLastFormat:o,editorLastSelection:i.selection,editorLastRawSelection:i.rawSelection,toolbarHasKeyboardFocus:this.keyDownHandler.inToolbarScope(),editorHasCodeBlockSelected:this.getCodeBlockSelected()}),this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(i)})}})}getEditorSelection(){return this.quill.getSelection()||this.state.editorLastSelection}getEditorFormat(){let e=this.getEditorSelection(),t=this.quill.getText(e),n=this.quill.getContents(e),r=this.quill.getFormat(e),i={};return Object.keys(this.state.editorLastFormat).length?((i=this.state.editorLastFormat).selection=e,i.rawSelection=e):(0===e.length?i=r:e.length>0&&(i=n.ops.reduce((e,t)=>({...eX(e,t),...t.attributes,..."object"==typeof t.insert?t.insert:{}}),r)),(i=this.updateFormatWithBlotSelection(i,t,e)).rawSelection=e),i}updateFormatWithBlotSelection(e,t,n){let r=0;return Object.keys(e).forEach(t=>{let n=e[t].domNode;if(n){let t=c.Z.find(n);e.text=n.innerText,e.selection=new E.e(t.offset(this.quill.scroll),t.length()),r+=1}}),(1!==r||n.index<e.selection.index||n.index+n.length>e.selection.index+e.selection.length)&&(e.text=t,e.selection=n),e}selectEmbeddedBlot(e){let t;let n=eI.find(e,!0),r=n&&n.constructor&&Object.getPrototypeOf(n.constructor).blotName;"embed"===r?(this.quill.setSelection(n.offset(this.quill.scroll)-1,2,c.Z.sources.SILENT),this.onEditorChange(c.Z.events.SELECTION_CHANGE),(t=n.domNode.querySelector("span > div:first-child")||n.domNode).classList.add("ql-embed-selected","no-select")):"embedInline"===r&&(this.quill.setSelection(n.offset(this.quill.scroll),1,c.Z.sources.SILENT),this.onEditorChange(c.Z.events.SELECTION_CHANGE),(t=n.domNode).classList.add("ql-embed-selected","no-select")),this.unselectEmbeddedBlots(t)}unselectEmbeddedBlots(e){let t=Array.from(this.editorRoot.querySelectorAll(".ql-embed-selected"));t.length&&t.forEach(t=>{t!==e&&t.classList.remove("ql-embed-selected","no-select")})}makeEmbedsEasierToEditAfter(){var e;let t=this.quill.getContents().ops,n=t.length-1;(t[n]&&"object"==typeof t[n].insert||t[n]&&"string"==typeof t[n].insert&&"\n"!==t[n].insert.substr(-1,1)||t[n]&&"string"==typeof t[n].insert&&"\n"===t[n].insert&&(null===(e=t[n].attributes)||void 0===e?void 0:e.table))&&this.quill.insertText(this.quill.scroll.length,"\n",c.Z.events.SILENT)}applyEditorChange(e,t){this.setState({isApplyingChanges:!0},()=>{!function(e,t,n,r){let i=t.update?t.update.index:t.index,o=t.update?t.update.length:t.length;if(!e)return;let s=Array.isArray(e)?e:[e];if("object"==typeof t.raw&&s.length>0&&!t.update){let e=t.raw.index,r=t.raw.length,a=s.reduce((e,t)=>(Object.keys("object"==typeof t.format?t.format:t).forEach(t=>e[t]=!0),e),{}),l=Object.keys(n.getFormat(e,r)),u=l.length>0&&l.some(e=>e in a);s.length>0&&s.some(e=>!!e.insert)&&!u&&0===r&&(i=e,o=r)}s.forEach(e=>{let t=!!e.insert,s=t&&o>0,a="string"==typeof e.insert?e.insert:"",l=a.length>0,u="object"==typeof e.format?e.format:{},d=Object.keys(u).length>0;if(s&&n.deleteText(i,o,eb.sources.SILENT),t&&l&&!d)n.insertText(i,a),i+=a.length,o=0,n.setSelection(i,o,eb.sources.USER);else if(d){let e=Object.keys(u).filter(e=>"object"!=typeof u[e]),s=Object.keys(u).filter(e=>"object"==typeof u[e]),d=s.length>0?s.shift():null,p=d&&u[d],m=u.dangerouslyPasteHTML;if(t&&l){if(m){let e=n.getLength();n.clipboard.dangerouslyPasteHTML(i,a);let t=n.getLength();a=n.getText(i,t-e)}else{if(d){if(n.insertText(i,a,d,p,eb.sources.USER),"latex"===d){let e=Object.keys(n.getFormat(i,a.length)).filter(e=>"latex"!==e).reduce((e,t)=>(e[t]=!1,e),{});n.formatText(i,a.length,e,eb.sources.SILENT)}}else n.insertText(i,a,eb.sources.USER);o=a.length,n.setSelection(i,o,eb.sources.USER)}}else if(t&&!l&&(n.insertEmbed(i,d,p,eb.sources.USER),i+=1,o=0,n.setSelection(i,o,eb.sources.USER),d&&n.format(d,!1,eb.sources.USER),/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))){var c,E;c=n.container,E=()=>n.focus(),setTimeout(()=>{let e=document.createElement("input");e.style.width=0,e.style.height=0,e.style.opacity=0,e.setAttribute("aria-hidden","true"),e.tabIndex=-1,c.appendChild(e),e.focus(),e.remove(),E()},0)}e.length&&(o>0||!t)&&e.forEach(e=>{let t=u[e];n.format(e,t,eb.sources.USER)}),t&&l?((null==u?void 0:u.selected)?o=a.length:(i+=a.length,o=0),n.setSelection(i,o,eb.sources.USER),d?n.insertText(i," ",d,!1,eb.sources.USER):n.insertText(i," ",eb.sources.USER),n.deleteText(i,1,eb.sources.USER),d&&(n.format(d,!1,eb.sources.USER),r(eb.events.TEXT_CHANGE))):r(eb.events.TEXT_CHANGE)}})}(e,{...this.state.editorLastSelection,raw:this.state.editorLastRawSelection,update:t},this.quill,this.onEditorChange),this.notifyPluginsOfPropChanges(),this.setState({isApplyingChanges:!1},()=>{this.onEditorChange(c.Z.events.TEXT_CHANGE)})})}applyChangeAndSetEditorFocused(e){this.applyEditorChange(e),this.onToolbarActionComplete(!0)}quillModuleAction(e){let t;if("quill.history"===e.module&&(t=this.quill.history,"undo"===e.action)){t.undo();return}if("quill.table"===e.module)switch(t=this.quill.getModule("table"),e.action){case"insert-table":e.rowCount&&e.columnCount&&(t.insertTable(e.rowCount,e.columnCount,e.headerRow,e.headerColumn),this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}));break;case"edit-table":e.rowCount&&e.columnCount&&t.editTable(e.rowCount,e.columnCount);break;case"get-table-info":return t.getTableData(this.state.tableHasHeaderRow,this.state.tableHasHeaderColumn);case"insert-row-above":t.insertRowAbove();break;case"insert-row-below":t.insertRowBelow();break;case"insert-col-left":t.insertColumnLeft();break;case"insert-col-right":t.insertColumnRight();break;case"delete-table":t.deleteTable();break;case"delete-row":t.deleteRow();break;case"delete-column":t.deleteColumn();break;case"set-header-row":t.updateHeaderRow(e.setHeader);break;case"set-header-col":t.updateHeaderCol(e.setHeader);break;case"saved-selection":t.updateNullSelection();break;case"get-headers":return this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}),t.getTableHeadersValue();case"reset-table-subtoolbar":this.resetTableSubtoolbar()}if("plugins"===e.module){let t=this.getPluginModules();"read-only-change"===e.action&&t.forEach(t=>{t.onReadOnlyChange&&t.onReadOnlyChange(e.value,this.props.currentLocale)})}if(e.module||"clearFormat"!==e.action)return;let n=this.quill.getSelection();!(null==n?void 0:n.length)>0||(td.$L.forEach(e=>{this.quill.formatText(n.index,n.length,e,!1)}),td.ee.forEach(e=>{this.quill.format(e,!1)}))}onBbMLInputChange(e){"string"!=typeof e||(this.quill.clipboard.dangerouslyReplaceHTML(e),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly}),this.makeEmbedsEasierToEditAfter(),""!==e||this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops))}onBbMLOutputChange(e){let{editorLastContent:t}=this.state,{autoSaveCallback:n,autoSaveMilliseconds:r,onChange:i}=this.props,o=!(0,eK.vZ)(e,t);this.isBbmlDirty=!(0,eK.vZ)(e,this.editorInitialContent)&&("\n"!==e[0].insert||"\n"!==this.editorInitialContent[0].insert||e.length>1||this.editorInitialContent.length>1);let s=n&&"number"==typeof r;if((i||s)&&o){let t={toBbML:X.Z.toBbML.bind(null,e,this.props.isRtl),isDirty:this.isBbmlDirty,setPristine:e=>{this.setState({editorFormat:{text:"",selection:new E.e(0,0)}}),this.onBbMLInputChange(e),this.editorInitialContent=this.quill.getContents().ops,this.onEditorChange(c.Z.events.TEXT_CHANGE)}};i&&i(t),s&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{n(t)},r))}}setToolbarState(e){let t=function(e,t){let n;switch(t){case td.mt.default:n=e>=td.ED?tK:e>=td.l$?tQ:tW;break;case td.mt.minimal:n=e>=td.KU?t0:t1;break;default:n=tW}return n}(e.getBoundingClientRect().width,this.props.toolbarSet);t!==this.state.toolbar&&this.setState({toolbar:t})}updateToolbar(e){if(this.editorContainer){let t=this.editorContainer;t.getBoundingClientRect().width<=0&&window.requestAnimationFrame?this.requestAnimationFrameID=window.requestAnimationFrame(this.updateToolbar):e&&"resize"===e.type?(clearTimeout(this.debounceWindowResizeToolbar),this.debounceWindowResizeToolbar=setTimeout(()=>this.setToolbarState(t),100)):this.setToolbarState(t)}}getPluginButtons(){return this.plugins.filter(e=>e.buttonConfig).map(e=>e.buttonConfig).map(e=>(e.key=e.id,e))}getPluginModules(){return this.plugins.map(e=>this.quill.getModule(e.pluginId)).filter(e=>!!e)}getPluginModulesConfig(){return this.plugins.reduce((e,t)=>(t.module&&(e[t.pluginId]=t.moduleParams||!0),e),{})}getEditorRect(){return this.editorContainer?this.editorContainer.getBoundingClientRect():null}isFileDropEnabled(){return!this.props.isDisabled&&!this.props.isReadOnly&&this.fileDragDropUtil.hasDropHandlers()}isFileOnEvent(e){return void 0!==e.dataTransfer.files&&e.dataTransfer.files.length>0}onDragEnter(){this.isFileDropEnabled()&&(this.dragCount+=1,ts(this.editorRoot.classList,!0))}onDragLeave(){this.isFileDropEnabled()&&(this.dragCount-=1,0===this.dragCount&&ts(this.editorRoot.classList,!1))}onDrop(e){this.isFileDropEnabled()&&this.isFileOnEvent(e)&&(this.dragCount=0,ts(this.editorRoot.classList,!1),this.fileDragDropUtil.onFileDrop(e))}getWordCount(){if(!this.quill)return 0;let e=this.quill.getText().trim();return 0===e.length?0:e.split(/\s+/).length}getDeltaChangeLength(e){let t=0,n=Number.MAX_SAFE_INTEGER;return e.undo.forEach(e=>{e.undo.ops.forEach(e=>{var r,i,o;e.retain&&(n=Math.min(n,e.retain)),t+=null!==(r=e.delete)&&void 0!==r?r:0,t-=null!==(o=null===(i=e.insert)||void 0===i?void 0:i.length)&&void 0!==o?o:0})}),n===Number.MAX_SAFE_INTEGER&&(n=0),{lowestRetain:n,offset:t}}getEditorHasTableSelected(){let e=this.getEditorSelection();return"table"in this.quill.getFormat(e)}getCodeBlockSelected(){let e=this.getEditorSelection();return"code-block"in this.quill.getFormat(e)}getToolbarAndKeyboardTooltip(){let e=!this.props.isToolbarHidden&&!this.props.isReadOnly,t=e&&this.state.editorHasKeyboardFocus;return{showToolbar:e,showKeyboardTooltip:t}}isDifferentTableSelected(e){if(e){let t=this.quill.getFormat(e);if("table"in t){let e=this.getEditorSelection();return this.quill.getFormat(e).table!==t.table}}return!1}extendTableSelection(){var e,t;let n=document.getSelection();if("Range"!==n.type)return;let r=n.anchorNode;r.nodeType!==Node.ELEMENT_NODE&&(r=r.parentElement),r=null!==(e=r.closest("TD"))&&void 0!==e?e:r.closest("TH");let i=n.focusNode;if(i.nodeType!==Node.ELEMENT_NODE&&(i=i.parentElement),i=null!==(t=i.closest("TD"))&&void 0!==t?t:i.closest("TH"),!r&&!i)return;let o=n.anchorNode.compareDocumentPosition(n.focusNode)===Node.DOCUMENT_POSITION_FOLLOWING;if(r===i)return;let s=n.anchorNode,a=n.anchorOffset,l=n.focusNode,u=n.focusOffset;r&&(s=o?r.closest("TABLE"):r.closest("TABLE").nextSibling,a=0),i&&(l=o?i.closest("TABLE").nextSibling:i.closest("TABLE"),u=0),n.setBaseAndExtent(s,a,l,u)}resetTableSubtoolbar(){this.setState({editorHasTableSelected:!1,tableHasHeaderRow:void 0,tableHasHeaderColumn:void 0}),setTimeout(()=>this.setState({editorHasTableSelected:!0}))}setHeaders(e,t){this.setState({tableHasHeaderRow:e,tableHasHeaderColumn:t})}setEditorSize(){this.props.size&&-1!==td.Qw.indexOf(this.props.size)&&this.editorRoot.firstChild.classList.add(`size-${this.props.size}`)}focusEditor(e,t){var n,r;null===(r=null===(n=this.editorRoot)||void 0===n?void 0:n.querySelector(`.${td.Eq}`))||void 0===r||r.focus(e),t&&this.editorHasFocus()&&this.setEditorKeyboardFocused()}scrollEditorIntoView(e){var t,n;null===(n=null===(t=this.editorRoot)||void 0===t?void 0:t.querySelector(`.${td.Eq}`))||void 0===n||n.scrollIntoView(e)}blurEditor(){var e,t;null===(t=null===(e=this.editorRoot)||void 0===e?void 0:e.querySelector(`.${td.Eq}`))||void 0===t||t.blur()}render(){let{localize:e}=this.props,t=this.state.toolbar,n=this.getPluginButtons(),{showToolbar:i,showKeyboardTooltip:o}=this.getToolbarAndKeyboardTooltip(),s=(0,u.Z)({"keyboard-tooltip-container":!0,"no-toolbar":!i,"is-rtl":this.props.isRtl});return r.createElement("div",{ref:this.setEditorContainer,className:"bb-editor-root",role:"presentation",onKeyDown:this.onKeyDown,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.fileDragDropUtil.onFileDragOver,onBlur:ez.U8,onMouseDown:ez.U8},i&&r.createElement(t,{isDisabled:this.props.isDisabled||this.props.isReadOnly,isRtl:this.props.isRtl,bbEditorId:this.bbEditorId,editorFormat:this.state.editorFormat,editorLastContent:this.state.editorLastContent,editorLastRawSelection:this.state.editorLastRawSelection,editorId:this.props.editorId,addKeyDownHandler:this.keyDownHandler.addKeyDownHandler,applyChange:this.applyEditorChange,quillModuleAction:this.quillModuleAction,toolbarActionComplete:this.onToolbarActionComplete,hasKeyboardFocus:this.state.toolbarHasKeyboardFocus,setEditorFocusStateToolbar:this.setEditorFocusStateToolbar,pluginButtons:n,getEditorRect:this.getEditorRect,editorHasTableSelected:this.state.editorHasTableSelected,editorHasCodeBlockSelected:this.state.editorHasCodeBlockSelected,rootContentId:this.props.rootContentId,setHeaders:this.setHeaders,tableHasHeaderRow:this.state.tableHasHeaderRow,tableHasHeaderColumn:this.state.tableHasHeaderColumn,onModalOpen:this.props.onModalOpen}),r.createElement("div",{className:s},r.createElement("div",{ref:this.setEditorRoot,role:"presentation"}),o&&r.createElement(r.Fragment,null,r.createElement("span",{"aria-live":"polite",id:t7,className:"sr-only"},e.translate("bbmlEditor.editor.accessibilityAriaMessage")),r.createElement("div",{className:"keyboard-tooltip"},e.translate("bbmlEditor.editor.accessibilityMessage")))),this.props.errorMessage&&r.createElement("span",{className:"error-message"},this.props.errorMessage),this.props.showWordCount&&!this.props.isReadOnly&&i&&r.createElement("span",{className:"word-count"},e.translate("bbmlEditor.editor.wordCount",{count:this.getWordCount()})),r.createElement(t6,{onChange:this.handleSmallBreakpointChange}))}}let t9=s().shape({buttonConfig:s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired}),formatter:s().shape({type:s().oneOf(["inline","embed","embedInline"]),tagName:s().string,attributes:s().shape(),renderDomNode:s().func}),matchers:s().arrayOf(s().string),onLoad:s().func,onUnload:s().func,pluginId:s().string,toBbML:s().func,toBbMLAsync:s().func});t3.propTypes={ally:e6,ariaLabelledBy:s().string,ariaDescribedBy:s().string,ariaRequired:s().bool,autoSaveCallback:s().func,autoSaveMilliseconds:s().number,bbml:s().string,disablePasteFormat:s().bool,editorId:s().string,errorMessage:s().string,expandInlineFilesOnLoad:s().bool,isDisabled:s().bool,isReadOnly:s().bool,isRtl:s().bool,isToolbarHidden:s().bool,onChange:s().func,onBlur:s().func,onFocus:s().func,placeholder:s().string,plugins:s().arrayOf(s().oneOfType([t9,s().arrayOf(t9)])),rootContentId:s().string,size:s().oneOf(["small","medium"]),showWordCount:s().bool,toolbarSet:s().oneOf(["default","minimal"])},t3.defaultProps={ally:e7,ariaLabelledBy:null,ariaDescribedBy:null,ariaRequired:!1,autoSaveCallback:null,autoSaveMilliseconds:null,bbml:null,disablePasteFormat:!1,editorId:"bb-editor-textbox",errorMessage:null,isDisabled:!1,isReadOnly:!1,isRtl:!1,isToolbarHidden:!1,onChange:null,onFocus:null,onBlur:null,placeholder:null,plugins:[],rootContentId:null,size:null,showWordCount:!1,toolbarSet:"default",expandInlineFilesOnLoad:!1};var t5=(0,d.h)(t3)},633739:function(e,t,n){"use strict";function r(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let o=n[e.replace("data-","")],s=t[e];i=r,(o||s)&&i.setAttribute(e,o||s),r=i}),r}function i(e,t,n){return Object.keys(t).forEach(r=>{let i=n[r.replace("data-","")],o=t[r];i||o?e.setAttribute(r,i||o):void 0!==i&&("close"===r||"open"===r)&&e.setAttribute(r,i)}),e}function o(e,t,n=!1){return Object.keys(t).reduce((t,n)=>{if(e.hasAttribute(n)){let r=e.getAttribute(n);"string"==typeof r&&r.slice(0,3)===encodeURIComponent("{")&&(r=decodeURIComponent(r)),t[n.replace("data-","")]=r}return t},n?{domNode:e}:{})}n.d(t,{KT:function(){return r},u9:function(){return o},vh:function(){return i}})},932576:function(e,t,n){"use strict";n.d(t,{gg:function(){return s},jm:function(){return i},w3:function(){return o},x2:function(){return a},xM:function(){return r.HE}});var r=n(5044);let i="left",o="center",s="right",a="justify";r.HE.whitelist=[i,o,s,a],r.HE.createChange=(e=i)=>({format:{align:e}}),t.ZP=r.HE},271154:function(e,t,n){"use strict";var r=n(374556);r.Z.createChange=(e=!0)=>({format:{bold:e}}),t.Z=r.Z},814816:function(e,t,n){"use strict";var r=n(828516);r.Z.createChange=(e=!0)=>({format:{"code-block":e,align:"left"}}),t.Z=r.Z},902813:function(e,t,n){"use strict";var r=n(789841),i=n(462966);r.HQ.createChange=(e=i.O9.Black)=>({format:{color:e}}),t.Z=r.HQ},262348:function(e,t,n){"use strict";n.d(t,{D:function(){return l},d:function(){return s}});var r=n(178463),i=n(268973),o=n.n(i);let s=new(o()).Attributor.Style("bullet-size","font-size",{scope:o().Scope.BLOCK});function a(e){let t=parseFloat(e.match(/[+-]?\d+(\.\d+)?/g));return`${(.6715*t+.7315).toFixed(3)}rem`}class l extends r.H{optimize(e){var t,n;if(super.optimize(e),this.children.length>0){let e=this.children.head,r=e.attributes;if(r&&r.attributes.size){let t=r.attributes.size.value(e.domNode),n=a(t);super.format("bullet-size",t),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",n);return}if(null===(n=null===(t=this.children.head.domNode)||void 0===t?void 0:t.style)||void 0===n?void 0:n.fontSize){let e=this.children.head.domNode.style.fontSize,t=a(e);super.format("bullet-size",e),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",t)}}else Object.prototype.hasOwnProperty.call(this.attributes,"bullet-size")&&super.format("bullet-size",null)}remove(){super.format("bullet-size",null),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",null),super.remove()}}},13417:function(e,t,n){"use strict";n.d(t,{Nm:function(){return r.IF},TM:function(){return s},hn:function(){return o}});var r=n(791174),i=n(932576);let o="rtl",s="ltr";r.IF.whitelist=[s,o],r.IF.createChange=(e=s)=>({format:{direction:e,align:"rtl"===e?i.gg:i.jm}}),t.ZP=r.IF},942548:function(e,t,n){"use strict";n.d(t,{KZ:function(){return l},MW:function(){return i},Ol:function(){return s},VT:function(){return d},Zx:function(){return r.H},eL:function(){return o},gt:function(){return u},z2:function(){return a}});var r=n(499713);let i="Arial",o="Comic Sans MS",s="Courier New",a="Noto",l="Open Sans",u="Times New Roman",d="Verdana";r.H.whitelist=[i,o,s,a,l,u,d];let c=r.H.value;r.H.value=function(e){if(e.style)return c.call(r.H,e);if(e.getAttribute("style")){let t=e.getAttribute("style"),n=/font-family:([^;]+);?/g.exec(t);if(n&&n[1])return n[1].trim()}return""},r.H.createChange=(e=l)=>({format:{font:e}}),t.ZP=r.H},898008:function(e,t,n){"use strict";var r=n(663642);r.Z.createChange=(e=4)=>({format:{header:e}}),t.Z=r.Z},150465:function(e,t,n){"use strict";var r=n(738282);r.Z.createChange=(e=!0)=>({format:{italic:e}}),t.Z=r.Z},383568:function(e,t,n){"use strict";n.d(t,{ee:function(){return o},g:function(){return i},j4:function(){return s},kG:function(){return u},uD:function(){return a}});var r=n(767474);let i="1",o="1.15",s="1.5",a="2",l=r.Z.import("parchment"),u=new l.Attributor.Style("lineheight","line-height",{scope:l.Scope.BLOCK,whitelist:[i,o,s,a]});u.createChange=e=>({format:{lineheight:e}}),t.ZP=u},330217:function(e,t,n){"use strict";n.d(t,{DF:function(){return i.D},aV:function(){return r.Z}});var r=n(178463),i=n(262348);let o={ORDERED:"ordered",UNORDERED:"bullet"};r.Z.createChange=(e=!0)=>({format:{list:e?o.UNORDERED:o.ORDERED}}),t.ZP=r.Z},611997:function(e,t,n){"use strict";n.d(t,{$u:function(){return r.Z},B3:function(){return d},SC:function(){return s},SG:function(){return u},X4:function(){return i},Yf:function(){return l},gJ:function(){return a},r_:function(){return o}});var r=n(702834);let i="0.625rem",o="0.75rem",s="0.875rem",a="1.125rem",l="1.5rem",u="2.25rem",d="3rem";r.Z.whitelist=[i,o,s,a,l,u,d,"0.714em","0.857em","1em","1.286em","1.714em","2.571em","3.429em"],r.Z.createChange=(e=s)=>({format:{size:e}}),t.ZP=r.Z},470276:function(e,t,n){"use strict";var r=n(184285);r.Z.createChange=(e=!0)=>({format:{strike:e}}),t.Z=r.Z},449806:function(e,t,n){"use strict";var r=n(212401);class i extends r.Z{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{superscript:!1,subscript:e}}),i.blotName="subscript",i.tagName="sub",t.Z=i},577099:function(e,t,n){"use strict";var r=n(212401);class i extends r.Z{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{subscript:!1,superscript:e}}),i.blotName="superscript",i.tagName="sup",t.Z=i},884089:function(e,t,n){"use strict";n.d(t,{RM:function(){return m},SC:function(){return p},ie:function(){return d},pj:function(){return c},ss:function(){return E},xJ:function(){return h},z5:function(){return b}});var r=n(254199),i=n(436073),o=n(987814),s=n(42711),a=n(212401),l=n(555331);let u=i.ZP.import("parchment");class d extends l.ZP{static create(e=b()){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{tablebr:this.domNode.getAttribute("table_id")}}}d.blotName="tablebr",d.tagName="p",d.className="tablebr";class c extends r.Z{static create(e=b()){let t=super.create(this.tagName);return t.setAttribute("cell_id",e),t}static formats(e){if(e.hasAttribute("cell_id"))return e.getAttribute("cell_id")}formats(){return{...this.domNode.hasAttribute("cell_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("cell_id")}:{}}}getIndexAndOffset(){return this.parent?g(this,this.parent.children):-1}format(e,t){e===this.blotName&&t?this.domNode.setAttribute("cell_id",t):super.format(e,t)}formatAt(e,t,n,r){(n!==this.domNode.nodeName||r!==this.formats(this.domNode))&&super.formatAt(e,t,n,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}c.blotName="table-cell",c.tagName="td";class E extends c{}E.blotName="table-head",E.tagName="th";class p extends r.Z{static create(e=b()){let t=super.create(this.tagName);return t.setAttribute("row_id",e),t}formats(){return{...this.domNode.hasAttribute("row_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("row_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("row_id"))&&super.formatAt(e,t,n,r)}rowOffset(){return this.parent?g(this,this.parent.children):-1}table(){return this.parent&&this.parent.parent}}p.blotName="table-row",p.tagName="tr";class m extends r.Z{}m.blotName="table-body",m.tagName="TBODY";class h extends r.Z{static create(e){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{...this.domNode.hasAttribute("table_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("table_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("table_id"))&&super.formatAt(e,t,n,r)}balanceRows(){let e=this.descendants(p);if(!this.checkRowsMerge(e))return;let t={};e.forEach(e=>{let n=e.domNode.getAttribute("row_id");if(!n)return;let r=!t[n];r&&(t[n]={row:e,columns:{}});let i=t[n].columns;e.children.forEach(e=>{let r=e.domNode.getAttribute("cell_id");if(!i[r]){let o=this.createCell(e.statics.blotName,e.domNode.getAttribute("cell_id"),!1);i[r]={rowCell:o},t[n].row.appendChild(o)}let o=i[r].rowCell;e.children.forEach(e=>{"header"===e.statics.blotName?o.appendChild(e):o.children.head.appendChild(e)}),e.remove()}),r||e.remove()})}checkRowsMerge(e=this.descendants(p)){let t=[];if(e.length<=1)return!0;for(let n=0;n<e.length;n++){let r=e[n].domNode.getAttribute("row_id");if(t.includes(r))return!0;t.push(r)}return!1}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){if(null==this.children.head||e<0)return;let t=this.children.head;for(;null!==t;){let n=f(t,e);null!=n&&n.remove(),t=t.next}}createCell(e="td",t=b(),n=!0){let r=u.create(e,t),i=u.create("block");return n&&i.appendChild(u.create("text","​")),r.appendChild(i),r}insertColumn(e,t){let n=0===e&&0===t&&this.hasHeaderCol(),r=n?E.blotName:c.blotName;n&&this.updateHeaderCol(!1),this.children.forEach(n=>{y(this.createCell(r),e,t,n)}),this.hasHeaderRow()&&this.checkHeaderRowConsistency()}insertRow(e,t){let n=u.create(p.blotName,b("row")),r=0===e&&0===t&&this.hasHeaderRow(),i=r?E.blotName:c.blotName,o=this.children.head.children.length;for(;o>0;){let e=this.createCell(i);n.appendChild(e),o-=1}r&&this.updateHeaderRow(!1),y(n,e,t,this),this.hasHeaderCol()&&this.checkHeaderColConsistency()}rows(){let e=this.children.head;return null==e?[]:e.children.map(e=>e)}updateHeaderRow(e=!0){let t=this.children.head.children.head;for(;null!==t;){let n=t.replaceWith(e?E.blotName:c.blotName,t.domNode.getAttribute("cell_id"));n.scroll&&n.formatAt(0,n.scroll.length(),e?E.tagName:c.tagName,t.domNode.getAttribute("cell_id")),t=n.next}this.checkHeaderIntersection()}updateHeaderCol(e=!0){let t=this.children.head;for(;null!==t;){let n=t.children.head,r=n.replaceWith(e?E.blotName:c.blotName,n.domNode.getAttribute("cell_id"));r.scroll&&r.formatAt(0,r.scroll.length(),e?E.tagName:c.tagName,n.domNode.getAttribute("cell_id")),t=t.next}this.checkHeaderIntersection()}hasHeaderRow(){var e;return this.children.head.children&&(this.children.head.children.tail.statics.blotName===E.blotName||(null===(e=this.children.head.children.head.next)||void 0===e?void 0:e.statics.blotName)===E.blotName)}hasHeaderCol(){var e;return this.children.tail.children&&(this.children.tail.children.head.statics.blotName===E.blotName||(null===(e=this.children.head.next)||void 0===e?void 0:e.children.head.statics.blotName)===E.blotName)}checkHeaderIntersection(){if(this.hasHeaderRow()||this.hasHeaderCol()){let e=this.children.head.children.head;e.statics.blotName!==E.blotName&&e.replaceWith(E.blotName,e.domNode.getAttribute("cell_id"))}}checkHeaderRowConsistency(){let e=this.children.head.children.head;for(;null!==e;)e.statics.blotName!==E.blotName&&e.replaceWith(E.blotName,e.domNode.getAttribute("cell_id")),e=e.next}checkHeaderColConsistency(){let e=this.children.head;for(;null!==e;){let t=e.children.head;t.statics.blotName!==E.blotName&&t.replaceWith(E.blotName,t.domNode.getAttribute("cell_id")),e=e.next}}getLastCell(){if(this.children&&this.children.head.children)return this.children.tail.children.tail}}h.blotName="table-container",h.tagName="table";let I=[...r.Z.allowedChildren,s.Z,a.Z,o.Z];function b(e="cell"){let t=Math.random().toString(36).slice(2,6);return`${e}-${t}`}function g(e,t){let n=0,r=t.head;for(;r!==e&&null!==r;)r=r.next,n+=1;return[n,r.offset(t)]}function y(e,t,n,r){if(r.children&&t+n>r.children.length-1)r.appendChild(e);else{let i=f(r,t+n);r.insertBefore(e,i)}}function f(e,t){let n=0,r=e.children.head;for(;n<e.children.length&&null!=r;){if(n===t)return r;r=r.next,n+=1}return null}h.allowedChildren=[m,p,...I],h.scope=u.Scope.BLOCK_BLOT,m.allowedChildren=[p,...I],m.requiredContainer=h,m.scope=u.Scope.BLOCK_BLOT,p.allowedChildren=[c,E,...I],p.requiredContainer=m,p.scope=u.Scope.BLOCK_BLOT,c.allowedChildren=[...I],c.requiredContainer=p,c.scope=u.Scope.BLOCK_BLOT,E.allowedChildren=[...I],E.requiredContainer=p,E.scope=u.Scope.BLOCK_BLOT},204445:function(e,t,n){"use strict";var r=n(89526);r.Z.createChange=(e=!0)=>({format:{underline:e}}),t.Z=r.Z},961406:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(202784),i=n(410628),o=n(213980),s=n.n(o),a=n(675689),l=n(464158),u=n(158550);function d(e){let{onChange:t,onEnterKey:n,type:o,value:s,minValue:u,maxValue:d}=e,c=(0,i.q)(),[E,p]=(0,r.useState)(s),m=e=>!(e>d)&&!(e<u),h=()=>{let e=E+1;m(e)&&(p(e),t(e))},I=()=>{let e=E-1;m(e)&&(p(e),t(e))};return r.createElement("span",{className:"table-dialog-input-spinner"},r.createElement(l.AnalyticsIconButton,{"aria-label":c("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-minus-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-minus-button.label"),onClick:I},r.createElement(a.Minus,null)),r.createElement(l.AnalyticsTextField,{id:`analyticTextField-${o}`,className:"table-dialog-input-spinner-text-field",placeholder:String(E),value:E,onChange:e=>{let n=Number(e.target.value);if(!Number.isNaN(n)){if(m(n))p(n),t(n);else if(n>d){let e=d.toString().length,r=Number(n.toString().substr(0,e-1));e<n.toString().length&&(r=d),p(r),t(r)}}},onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),n();break;case"ArrowUp":h();break;case"ArrowDown":I()}}}),r.createElement(l.AnalyticsIconButton,{"aria-label":c("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-add-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-add-button.label"),onClick:h},r.createElement(a.Add,null)))}d.propTypes={onChange:s().func,onEnterKey:s().func,type:s().string,value:s().number,minValue:s().number,maxValue:s().number},d.defaultProps={onChange:null,onEnterKey:null,type:"",value:1,minValue:1,maxValue:10};var c=(0,u.withAnalytics)(d);function E(e){let t="table-dialog",{isEditingTable:n,quillModuleAction:o,editProps:s,closeAllMenus:u}=e,d=(0,i.q)(),[E,p]=(0,r.useState)({checkboxColumn:s.headerColumn,checkboxRow:s.headerRow,numberColumns:s.columns,numberRows:s.rows}),m=()=>{u(),e.destroy()},h=()=>{o({module:"quill.table",action:"saved-selection"}),n?(o({module:"quill.table",action:"edit-table",rowCount:E.numberRows,columnCount:E.numberColumns}),e.editProps.headerColumn===E.checkboxColumn||(o({module:"quill.table",action:"set-header-col",setHeader:E.checkboxColumn}),E.checkboxRow||o({module:"quill.table",action:"set-header-column",setHeader:E.checkboxColumn})),e.editProps.headerRow===E.checkboxRow||(o({module:"quill.table",action:"set-header-row",setHeader:E.checkboxRow}),E.checkboxColumn||o({module:"quill.table",action:"set-header-row",setHeader:E.checkboxRow})),o({module:"quill.table",action:"reset-table-subtoolbar"})):(o({module:"quill.table",action:"insert-table",rowCount:E.numberRows,columnCount:E.numberColumns,headerRow:E.checkboxRow,headerColumn:E.checkboxColumn}),u()),m()},I=e=>{p({...E,checkboxColumn:e.target.checked})},b=e=>{p({...E,checkboxRow:e.target.checked})};return r.createElement(l.AnalyticsDialog,{open:!0,maxWidth:"sm",onClose:m,"aria-labelledby":`${t}-dialog-title`},r.createElement(l.AnalyticsDialogTitle,{onClose:m,id:`${t}-dialog-title`},d(n?"bbmlEditor.toolbar.table-dialog-title-edit.label":"bbmlEditor.toolbar.table-dialog-title-insert.label")),r.createElement(l.AnalyticsDialogContent,null,r.createElement("div",{className:`${t}-columns-content`},r.createElement("label",{htmlFor:"analyticTextField-column"},d("bbmlEditor.toolbar.table-dialog-columns.label")),r.createElement(c,{onChange:e=>{p({...E,numberColumns:e})},type:"column",value:E.numberColumns,maxValue:n?Math.max(10,s.columns):10,onEnterKey:h})),r.createElement("div",{className:`${t}-rows-content`},r.createElement("label",{htmlFor:"analyticTextField-row"},d("bbmlEditor.toolbar.table-dialog-rows.label")),r.createElement(c,{onChange:e=>{p({...E,numberRows:e})},type:"row",value:E.numberRows,maxValue:n?Math.max(10,s.rows):10,onEnterKey:h})),r.createElement("span",{className:`${t}-header-selector`},r.createElement(l.AnalyticsFormControlLabel,{label:d("bbmlEditor.toolbar.table-dialog-headers-row.label"),control:r.createElement(l.AnalyticsCheckbox,{checked:E.checkboxRow,id:"dialogCheckboxRow"}),htmlFor:"dialogCheckboxRow",onChange:e=>{b(e)}}),r.createElement(l.AnalyticsFormControlLabel,{label:d("bbmlEditor.toolbar.table-dialog-headers-column.label"),control:r.createElement(l.AnalyticsCheckbox,{checked:E.checkboxColumn,id:"dialogCheckboxColumn"}),htmlFor:"dialogCheckboxColumn",onChange:e=>{I(e)}}),r.createElement(l.AnalyticsTooltip,{className:"info-tooltip",title:d("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top"},r.createElement(l.AnalyticsIconButton,{className:"info-tooltip","aria-label":d("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText")},r.createElement(a.Information,null))))),r.createElement(l.AnalyticsDialogActions,null,r.createElement(l.AnalyticsDefaultButton,{onClick:m},d("bbmlEditor.buttons.cancel")),r.createElement(l.AnalyticsPrimaryButton,{onClick:h,id:"create-edit-table-primary-btn"},d(n?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert"))))}E.propTypes={quillModuleAction:s().func.isRequired,closeAllMenus:s().func.isRequired,isEditingTable:s().bool,editProps:s().shape({columns:s().number,rows:s().number,headerColumn:s().bool,headerRow:s().bool})},E.defaultProps={isEditingTable:!1,editProps:{columns:1,rows:1,headerColumn:!1,headerRow:!1}};var p=(0,u.withAnalytics)(E)},462966:function(e,t,n){"use strict";n.d(t,{O9:function(){return u}});var r=n(202784),i=n(217628),o=n(464158),s=n(158550),a=n(213980),l=n.n(a);let u={Black:"#000000",Grey:"#666666",Purple:"#a234b5",Blue:"#046ef6",Green:"#1c8845",Red:"#e72218"};class d extends r.Component{render(){let{editorFormat:e,color:t,cssClass:n}=this.props;return r.createElement(o.AnalyticsListItemIcon,{classes:{root:`picker-color ${n}`}},(t===u.Black&&!e.color||e.color===t)&&r.createElement(i.f,null))}}d.propTypes={editorFormat:l().shape(),color:l().string,cssClass:l().string},d.defaultProps={editorFormat:{},color:null,cssClass:null},t.ZP=(0,s.withAnalytics)(d)},12434:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r=n(464158),i=n(174897),o=n(202784),s=n(928316);function a(e,t){let n=document.querySelector(`#${e}`);null!=n&&(s.unmountComponentAtNode(n),n.remove()),null==t||t(!1)}t.Z=(e,t,n)=>{setTimeout(()=>{var a;let l="bb-editor-modal";if(document.querySelector(`div.${l}`))return;let u=document.createElement("div");u.classList.add(l),t.bbEditorId&&(u.id=t.bbEditorId),document.body.appendChild(u),null===(a=t.onModalOpen)||void 0===a||a.call(t,!0),s.render(o.createElement(r.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:n.isRtl,zIndex:{modal:1350}},o.createElement(i.g,{...n},o.createElement(e,{destroy:()=>{var e;s.unmountComponentAtNode(u),u.remove(),t.applyChange&&t.applyChange(),null===(e=t.onModalOpen)||void 0===e||e.call(t,!1)},...t}))),u)},250)}},101981:function(e,t,n){"use strict";n.d(t,{F:function(){return r},k:function(){return i}});class r extends Error{}function i(e){let t=new AbortController,n=new r("Promise has been cancelled"),i=new Promise((r,i)=>{e.then((...e)=>{t.signal.aborted?i(n):r(...e)}).catch(i),t.signal.addEventListener("abort",()=>i(n))});return i.cancel=()=>{"function"==typeof e.cancel&&e.cancel(),t.abort(n)},i.signal=t.signal,i.abortController=t,i}},729941:function(e,t,n){"use strict";function r(e){e.stopImmediatePropagation(),e.stopPropagation()}function i(e){return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1}function o(e){e.stopPropagation()}n.d(t,{U8:function(){return o},be:function(){return r},p7:function(){return i}})},378780:function(e,t,n){"use strict";n.d(t,{A:function(){return o},w:function(){return i}});var r=n(884089);function i(e){return!!e&&function(e){var t,n,i,o;let s=e instanceof HTMLElement?e:null==e?void 0:e.domNode;return(null===(t=null==s?void 0:s.tagName)||void 0===t?void 0:t.toLowerCase())===(null===(n=r.pj.tagName)||void 0===n?void 0:n.toLowerCase())||(null===(i=null==s?void 0:s.tagName)||void 0===i?void 0:i.toLowerCase())===(null===(o=r.ss.tagName)||void 0===o?void 0:o.toLowerCase())}(e)&&function(e){var t,n,i;let o=e instanceof HTMLElement?e.parentElement:null===(t=null==e?void 0:e.parent)||void 0===t?void 0:t.domNode;return(null===(n=null==o?void 0:o.tagName)||void 0===n?void 0:n.toLowerCase())===(null===(i=r.SC.tagName)||void 0===i?void 0:i.toLowerCase())}(e)&&function(e){var t,n,i,o,s;let a=e instanceof HTMLElement?null===(t=e.parentElement)||void 0===t?void 0:t.parentElement:null===(i=null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.parent)||void 0===i?void 0:i.domNode;return(null===(o=null==a?void 0:a.tagName)||void 0===o?void 0:o.toLowerCase())===(null===(s=r.xJ.tagName)||void 0===s?void 0:s.toLowerCase())}(e)}function o(e){var t,n;let r={"code-block":!0};if(i(e)){let i=null==e?void 0:e.domNode,o=null===(t=e.parent)||void 0===t?void 0:t.domNode,s=null===(n=e.parent.parent)||void 0===n?void 0:n.domNode;r[i.tagName.toLowerCase()]=null==i?void 0:i.getAttribute("cell_id"),r[o.tagName.toLowerCase()]=null==o?void 0:o.getAttribute("row_id"),r[s.tagName.toLowerCase()]=null==s?void 0:s.getAttribute("table_id")}return r}},825501:function(e,t,n){"use strict";n.d(t,{Eq:function(){return b},Qw:function(){return g},ee:function(){return u},M$:function(){return r},HC:function(){return i},xB:function(){return h},N6:function(){return o},aW:function(){return s},I2:function(){return a},$L:function(){return l},ED:function(){return E},EK:function(){return I.Z},l$:function(){return p},KU:function(){return m},mZ:function(){return d},mt:function(){return c}});let r={id:"editAttachment",type:"attachment"},i={id:"editYoutubeVideo",type:"embedded-app"},o=[r,i];var s={maxFileMB:2500,maxFileSize:262144e4};let a={Bold:"bold",Italic:"italic",Underline:"underline",Superscript:"superscript",Strike:"strike",Subscript:"subscript",List:"list"},l=["font","bold","italic","size","color","strike","underline","superscript","subscript"],u=["header","list","align","lineheight","direction"],d={small:"small",medium:"medium",large:"large"},c={default:"default",minimal:"minimal"},E=764,p=554,m=268;var h={BLURRED:"blurred",FOCUSED:"focused",TOOLBAR:"toolbar"},I=n(219121);n(656890);let b="bb-editor",g=["small","medium","large"]},656890:function(e,t){"use strict";t.Z={outgoing:{initContent:"init_content"},incoming:{pageLoaded:"page_loaded",canceled:"content_canceled",contentReady:"content_ready"}}},291683:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(396375),i=n(725390),o=n(134129),s=n(134641);let a="contentCollection",l=e=>[{pluginId:a,buttonConfig:{id:a,cssClass:a,iconName:"content-collection",iconComponent:s.C,isDialog:!0,isActive:()=>!1,onClick:t=>{e.getOpenContentCollectionFunction(n=>{!function(e,t,n){let s=e.map(e=>{let t=decodeURIComponent(e.name);return{href:e.fullUrl,bbfile:{alternativeText:t,linkName:t,mimeType:e.type,render:o.I_d.Inline,fileSize:"number"==typeof e.size?e.size:parseInt(e.size,10)},originalFile:e}}).filter(e=>!!e.href),a=[];s.length>1?(s.forEach(({href:e,bbfile:t})=>{a=a.concat((0,i.Z)(e,t,!0))}),n.applyChange(a)):1===s.length&&(0,r.At)(s[0].bbfile,n.showModal,t,n,s[0].href)}(n,e,t)})}}}]},245111:function(e,t){"use strict";t.Z=e=>`<html>
<head>
    <title>Demo Mashup</title>
    <script>

    function getParentOrigin() {
        const parentOrigin = '${e}';
        return parentOrigin;

        // Actual external demos should use the referrer
        // However in a sourceDoc-generated mashup the referrer is empty
        // const url = new URL(document.referrer);
        // return url.origin;
    }
        window.addEventListener('message', receiveMessage);
        window.onload = () => {
            window.URL.revokeObjectURL(window.location.href);
            window.parent.postMessage({ messageType: 'page_loaded' }, getParentOrigin());
        }
        window.onunload = () => {
            window.removeEventListener('message', receiveMessage);
        }
        const MESSAGE_LINK = {
            dataType: 'link',
            dataContent: {
                src: 'www.blackboard.com',
                alt: 'Test Link',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IMAGE = {
            dataType: 'image',
            dataContent: {
                src: '',
                alt: 'Test Image',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_VIDEO = {
            dataType: 'video',
            dataContent: {
                src: 'https://www.w3schools.com/tags/movie.mp4',
                alt: 'Test Video',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_AUDIO = {
            dataType: 'audio',
            dataContent: {
                src: 'https://www.w3schools.com/TAGS/horse.mp3',
                alt: 'Test Audio',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IFRAME = {
            dataType: 'embedded-app',
            dataContent: {
                src: '',
                alt: 'Test IFrame',
                embeddedAppConfig: {
                    id: 'demoMashup',
                    isEditable: undefined,
                },
            },
            messageType: 'content_ready',
        };

        const ROBO_HASH_URL = "https://robohash.org/";

        function receiveMessage(event) {
            if (event.data.messageType != 'init_content' || event.origin !== getParentOrigin()) {
                return;
            }

            const { dataToDisplay } = event.data;
            const mode = dataToDisplay ? dataToDisplay.mode : 'create';
            document.querySelector('#' + mode + '-container').classList.toggle('hide-container');
            if (mode === 'view') {
                let text = 'Robohash for ' +  dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#view-container h4').innerText = text;
                document.querySelector('#view-container img').src = dataToDisplay.content.dataContent.src;
            }
            if (mode === 'edit') {
                document.querySelector('#edit-container input').value = dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#edit-container button').onclick = () => {
                    const message = getEmbeddedAppMessage(true);
                    message.dataContent.src = ROBO_HASH_URL + document.querySelector('#edit-container input').value;
                    window.parent.postMessage(message, getParentOrigin());
                };
            }
        }

        function getRandomString(length) {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            for (var i = 0; i < length; i++)
                text += possible.charAt(Math.floor(Math.random() * possible.length));

            return text;
        }

        function getRandomRoboHashURL() {
            return ROBO_HASH_URL + getRandomString(6);
        }

        function getEmbeddedAppMessage(isEditable) {
            let newMessage = MESSAGE_IFRAME;
            newMessage.dataContent.src = getRandomRoboHashURL();
            newMessage.dataContent.embeddedAppConfig.isEditable = isEditable;
            return newMessage;
        }

        function getImageMessage() {
            let newMessage = MESSAGE_IMAGE;
            newMessage.dataContent.src = getRandomRoboHashURL() + ".png";
            return newMessage;
        }

        function sendMessage(mashupType) {
            switch (mashupType) {
                case 'link':
                    window.parent.postMessage(MESSAGE_LINK, getParentOrigin());
                    break;
                case 'image':
                    window.parent.postMessage(getImageMessage(), getParentOrigin());
                    break;
                case 'video':
                    window.parent.postMessage(MESSAGE_VIDEO, getParentOrigin());
                    break;
                case 'audio':
                    window.parent.postMessage(MESSAGE_AUDIO, getParentOrigin());
                    break;
                case 'edit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(true), getParentOrigin());
                    break;
                case 'nonedit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(false), getParentOrigin());
                    break;
                default:
                    break;
            }
        }
    </script>
</head>
<style>
    .hide-container {
        display: none;
    }
</style>

<body>
    <div id="create-container" class="hide-container">
        <h3>This is a sample app to demonstrate posting messages from this content provider iFrame to the parent window (ie.
            Blackboard Learn/Ultra).</h3>
        <br />
        <h4>Click an anchor tag to post the respective message</h4>
        <br />
        <ul>
            <li>
                <a href="" onClick="sendMessage('link')">link</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('image')">image</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('video')">video</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('audio')">audio</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('edit-embedded-app')">editable embedded-app</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('nonedit-embedded-app')">non-editable embedded-app</a>
            </li>
        </ul>
    </div>
    <div id="view-container" class="hide-container">
    <h4></h4>
    <img></img>
    </div>
    <div id="edit-container" class="hide-container">
    <h4>Change Robohash Text</h4>
    <input/>
    <button type="submit">Save</button>
    </div>
</body>
</html>
`},725390:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:"\n"},{insert:!0,format:{attachment:{bbtype:"attachment",bbfile:JSON.stringify(t),href:e}}}];return n||r.push({insert:"\n"}),r}n.d(t,{Z:function(){return r}})},906627:function(e,t,n){"use strict";var r=n(202784),i=n(14724),o=n(359895),s=n(309988),a=n(194210),l=n(303109),u=n(825501),d=n(192900),c=n(336508),E=n(822382),p=n(242141),m=n(914732);let h="editAttachment",I="attachment",b=[`[data-bbtype=${I}][data-bbfile]`,"[data-bbfile]:not([data-bbtype])"],g="bb-edit-attachment-remove",y=e=>{let t,n,o;let{editorProps:a,values:l,node:u,pluginConfig:d}=e,E=r.useMemo(()=>JSON.parse(l.bbfile),[l.bbfile]),{href:h,metadata:I}=(0,s.Z)(l.href,E);I.width&&I.height&&(t=I.width,n=I.height);let b=(0,c.V4D)(E);!(0,c.COu)(b)||t&&n?(0,c.NUD)(b)&&!a.isReadOnly&&(o={controls:!1,tabIndex:0}):o={className:"image--default"};let y=(0,p.e)(h,I,{supportsInlineDocumentRender:a.supportsInlineDocumentRender}),[f,S]=(0,r.useState)(!1),_={disableMediaModal:!a.isReadOnly,file:y,readOnly:a.isReadOnly||a.isDisabled,showContextMenu:a.isReadOnly&&!a.isDisabled,onDelete:()=>u.dispatchEvent(new CustomEvent(g)),expandInlineFilesOnLoad:a.expandInlineFilesOnLoad,supportsInlineDocumentRender:a.supportsInlineDocumentRender,customWidget:null==d?void 0:d.customWidget,inlineMediaAdditionalAttributes:o,onDownloadTriggered:()=>S(!0)};return r.createElement(r.Fragment,null,r.createElement(i.$,{fileViewerProps:_,ally:a.ally,rootContentId:a.rootContentId}),r.createElement(m.F,{bbfile:E,plugins:a.plugins,downloaded:f}))},f=e=>t=>r.createElement(y,{...t,pluginConfig:e}),S=e=>({type:"embed",blotName:I,tagName:"div",attributes:{"data-bbtype":h,"data-bbfile":null,href:null},renderDomNode:(0,d.H)({processValues:e=>{let t;let n=JSON.parse(e.bbfile),{href:r,metadata:i}=(0,s.Z)(e.href,n),o=(0,c.V4D)(n);return((0,c.NUD)(o)||(0,c.COu)(o)&&(0,c.f5y)(n))&&!(0,c.iTO)(n)&&(t=["bb-file","ql-embed-selected--hidden"]),{...e,href:r,bbfile:JSON.stringify({...i,render:n.render||n.displayInline?i.render:void 0}),additionalRootClasses:t}},component:f(e),onUnmountComponent:e=>e.removeEventListener(g,e.customDeleteEventHandler)}),onBlotInit:(e,t)=>{e.customDeleteEventHandler=()=>t.remove(),e.addEventListener(g,e.customDeleteEventHandler)}});function _(e,t){let n=JSON.parse(t.bbfile);return`<a href="${t.href}" data-bbtype="${I}" data-bbfile="${(0,o.ZP)(t.bbfile)}">${n.linkName||n.alternativeText}</a>`}t.ZP=e=>({pluginId:h,buttonConfig:{id:h,cssClass:h,iconName:"edit",iconComponent:l.I,isDialog:!0,isActive:e=>!!e[u.M$.type],onClick:({showModal:t,editorFormat:n,...r})=>{let i=JSON.parse(n[I].bbfile);t(a.Z,{isEdit:!0,editorFormat:n,file:i,...e,...r,href:n[I].href})}},matchers:b,module:E.C,formatter:S(e),toBbML:_})},413513:function(e,t,n){"use strict";var r=n(202784),i=n(928316),o=n(315109),s=n(258197),a=n(673252),l=n(755657),u=n(623572),d=n(73793),c=n(359895),E=n(825501),p=n(648153),m=n(656890),h=n(549487),I=n(464357);let b="editYoutubeVideo",g="embedded-app",y=[`a[data-bbtype="${g}"]`],f="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",S=e=>({editorFormat:t,showModal:n,buttonNode:r,...i})=>new Promise((n,i)=>{let{embeddedAppConfig:o}=t.bbfile?JSON.parse(t.bbfile):{},{id:s}=o;(0,a.Z)(s,e,r).then(e=>{e?n(e.srcURL):i()})}).then(r=>{let o=JSON.parse(t.bbfile);n(u.Z,{goBack:()=>{},srcURL:r,editingData:o,...e,...i})}).catch(()=>{n(l.Z,{destroy:i.destroy,messageType:"mashupNotAvailable"})});function _(e){let t=t=>{if(t.data.messageType!==m.Z.incoming.pageLoaded||!e)return;let n=Array.from(e.querySelectorAll(".embedded-app-container")).find(e=>e.contentWindow===t.source);n&&n.onEmeddedAppLoaded&&n.onEmeddedAppLoaded(t)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}let T=e=>({type:"embed",blotName:g,tagName:"div",attributes:{"data-bbtype":b,"data-bbfile":null},renderDomNode(t,n,l,u){var c;let E=JSON.parse(l.bbfile),{embeddedAppConfig:m,linkRefId:h}=E,{id:I}=m||{id:`content_market${h}_${Math.floor(1e3*Math.random())}`},b=(0,d.Z)(t,n,l),g=document.createElement("div"),y=document.createElement("div"),S=document.createElement("div"),_={allow:f,className:"embedded-app-container hidden no-select",frameBorder:0,id:I,tabIndex:!u.isReadOnly||u.isDisabled?-1:0,width:"100%"};g.classList.add("bb-embedded-app"),E.width&&E.height&&(g.style.width=`${E.width}px`,g.style.height=`${E.height}px`),b.contentEditable="false",b.classList.add("wants-props-update"),b.style.paddingBottom=".1rem",b.style.overflow="hidden",b.style.display="flex",b.style.backgroundColor="#f8f8f8",b.style.justifyContent="center",S.classList.add("embedded-app-overlay"),y.classList.add("loading-container"),b.appendChild(g),i.render(r.createElement(o.Spinner,{size:o.SpinnerSize.large}),y);let T=u.localize.getLocalePropsForClone(),v={title:E.title||u.localize.translate("bbmlEditor.editor.lightboxDefaultTitle"),fullScreenButtonText:u.localize.translate("bbmlEditor.editor.fullScreenButtonText")},A=new s.U(g,T,_,{localizedStrings:v,firstFocusableContentSelector:`.${_.id}`});return(g.childNodes[0]||g.appendChild(document.createElement("div"))).classList.add("no-longtext"),g.appendChild(y),g.appendChild(S),b.formatComponent=e=>{A.update(T,{tabIndex:!e.isReadOnly||e.isDisabled?"-1":"0"},{})},m?(0,a.Z)(I,e,t).then(t=>{let n=t.srcURL;A.update(T,{onEmeddedAppLoaded:t=>{var r;y.classList.replace("loading-container","hidden"),A.update(T,{className:"embedded-app-container no-select",src:n},{});let i=new URL(n,window.origin);if(t.origin===i.origin){let n={apiBasePath:e.apiBasePath,xsrfToken:e.xsrfToken,locale:T.locale},i=(0,p.JG)(n,E);null===(r=t.source)||void 0===r||r.postMessage(i,t.origin)}}},{})}):null===(c=null==e?void 0:e.getEmbedSrc)||void 0===c||c.call(e,E).then(e=>{y.classList.remove("loading-container"),y.classList.add("hidden"),A.update(T,{src:e,allow:"autoplay *; fullscreen *; microphone *; encrypted-media *",className:"embedded-app-container no-select"},{})}),b}});function v(e,t){let n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="${g}" data-bbfile="${(0,c.ZP)(t.bbfile)}">${n.alt}</a>`}t.Z=e=>({pluginId:b,buttonConfig:{id:b,cssClass:b,iconName:"app",iconComponent:h.g,isDialog:!0,isActive:e=>{let t=e.bbfile?JSON.parse((0,I.Ac)(e.bbfile)):{};return!!e[E.HC.type]&&t&&t.embeddedAppConfig&&t.embeddedAppConfig.isEditable},onClick:S(e)},formatter:T(e),matchers:y,toBbML:v,onLoad:_,IFRAME_ALLOW:f})},486537:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:!0,format:{image:{bbtype:"image",bbfile:JSON.stringify(t),href:e}}}];return r.unshift({insert:"\n"}),n||r.push({insert:"\n"}),r}n.d(t,{Z:function(){return r}})},396375:function(e,t,n){"use strict";n.d(t,{At:function(){return p},bq:function(){return h}});var r=n(213980),i=n.n(r),o=n(194210),s=n(725390),a=n(906627),l=n(367668),u=n(482994),d=n(12434),c=n(646343);let E="insertLocalFile";function p(e,t,n,r,i){(t=t||d.Z)(o.Z,{file:e,...n,...r,href:i},r.localeProps)}function m(e,t,n,r){var i,o;let a=[];e.length>1?(e.forEach(({href:e,bbfile:t})=>{a=a.concat((0,s.Z)(e,t,!0))}),r.applyChange(a),null===(i=null==n?void 0:n.onNewAttachmentSavePressed)||void 0===i||i.call(n),null===(o=r.onModalOpen)||void 0===o||o.call(r,!1)):p(e[0].bbfile,t,n,r,e[0].href)}let h=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,fileLocation:i().string,webLocation:i().string,onUploadSuccess:i().func,supportsInlineDocumentRender:i().bool,hideFileDisplayOptions:i().bool});t.ZP=e=>[(0,a.ZP)(e),{pluginId:E,buttonConfig:{id:e&&e.buttonId||E,cssClass:E,iconName:"attachment",iconComponent:c.P,isDialog:!0,isActive:()=>!1,onClick:async({showModal:t,onModalOpen:n,...r})=>{null==n||n(!0),m(await (0,u.ZP)({...e,...r,multiple:!0,showModal:t}),t,e,{...r,onModalOpen:n})}},fileDropHandler:(t,n,r,i,o)=>{null==o||o(!0),(0,u.ZP)({applyChange:n,multiple:!0,...e,showModal:r},()=>Promise.resolve(t)).then(t=>{m(t,r,e,{applyChange:n,onModalOpen:o})})}},(0,l.Z)(e)]},962682:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},J:function(){return s}});var r=n(486537),i=n(417357),o=n(947413);function s(e,t){let n=[{insert:!0,format:{"embedded-app":{bbtype:"embedded-app",bbfile:JSON.stringify({...e,alt:e.alt||e.src})}}}];return n.unshift({insert:"\n"}),t||n.push({insert:"\n"}),n}function a(e){switch(e.dataType){case"embedded-app":return s(e.dataContent);case"image":return(0,r.Z)(e.dataContent.src,{alt:e.dataContent.alt});case"link":return(0,i.Z)(e.dataContent.src,e.dataContent.alt);case"video":return(0,o.Z)({src:e.dataContent.src,alt:e.dataContent.alt});case"audio":return function(e="",t=!0,n){let r=[{insert:!0,format:{audio:{bbtype:"audio",bbfile:JSON.stringify({alt:!0===t||"string"==typeof t&&0===t.length?e:t,src:e})}}}];return r.unshift({insert:"\n"}),r.push({insert:"\n"}),r}(e.dataContent.src,e.dataContent.alt);default:return null}}},623572:function(e,t,n){"use strict";var r=n(202784),i=n(213980),o=n.n(i),s=n(692475),a=n(345479),l=n(962682),u=n(656890),d=n(648153);class c extends r.Component{constructor(e){super(e),this.origin=new URL(e.srcURL).origin,this.postBackMashupInitConfig=this.postBackMashupInitConfig.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.state={isOpen:!1,content:null}}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout(()=>this.setState({isOpen:!0}))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}postBackMashupInitConfig(){let e;let{apiBasePath:t,xsrfToken:n,localize:{locale:r,isRtl:i},editingData:o}=this.props;this.iframeEl||(this.iframeEl=this.iframeContainerEl.getElementsByTagName("iframe")[0]);let s={apiBasePath:t,xsrfToken:n,locale:r,isRtl:i()};e=o?(0,d.Gu)(s,o):(0,d.AU)(s),this.iframeEl.contentWindow.postMessage(e,this.origin)}receiveMessage(e){if(new URL(this.props.srcURL).origin===e.origin)switch(e.data.messageType){case u.Z.incoming.pageLoaded:this.postBackMashupInitConfig();break;case u.Z.incoming.canceled:this.onCancel();break;case u.Z.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange((0,l.Z)(this.state.content)),this.props.destroy()}render(){let{srcURL:e,localize:t}=this.props;return r.createElement(a.Modal,{containerClassName:"modal-youtube-video-provider",isBlocking:!1,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},r.createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},this.state.isOpen&&r.createElement("iframe",{title:t.translate("bbmlEditor.dialogs.youtubeVideoProviderModal.title"),src:e,frameBorder:0,className:"js-editor-video-container"})))}}c.propTypes={apiBasePath:o().string.isRequired,applyChange:o().func.isRequired,destroy:o().func.isRequired,editingData:o().shape(),srcURL:o().string.isRequired,xsrfToken:o().string.isRequired},c.defaultProps={editingData:null},t.Z=(0,s.h)(c)},797529:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});let r=!1;t.Z=e=>{if(!r||!e)return!1;let t=Array.from(document.querySelectorAll(".bb-editor-root")).find(t=>t.contains(e));return t&&t.shouldEnableDemoMashup};let i=()=>{r=!0}},417357:function(e,t){"use strict";let n=/^\w+:\/\/|^mailto:/;function r(e,t){return t?{[e]:t}:null}t.Z=function(e,t,i,o){if(e.length<1)return{insert:t};let s=e;return n.test(s)||(s=`http://${s}`),{insert:t||s,format:{link:{href:s,...r("bbfile",i),...r("bbtype",o)}}}}},435107:function(e,t,n){"use strict";n.d(t,{ZP:function(){return A},bq:function(){return v}});var r=n(213980),i=n.n(r),o=n(574515),s=n.n(o),a=n(619046),l=n(986962),u=n(397280),d=n(633739);let c={math:{xmlns:null,style:null,mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,display:null,maxwidth:null,overflow:null,altimg:null,"altimg-width":null,"altimg-height":null,"altimg-valign":null,alttext:null,cdgroup:null},maction:{mathcolor:null,mathbackground:null,actiontype:null,selection:null},maligngroup:{mathcolor:null,mathbackground:null,groupalign:null},malignmark:{mathcolor:null,mathbackground:null,edge:null},menclose:{mathcolor:null,mathbackground:null,notation:null},merror:{mathcolor:null,mathbackground:null},mfenced:{mathcolor:null,mathbackground:null,open:null,close:null,separators:null},mfrac:{mathcolor:null,mathbackground:null,linethickness:null,numalign:null,denomalign:null,bevelled:null},mi:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mlongdiv:{mathcolor:null,mathbackground:null,longdivstyle:null},mmultiscripts:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},mn:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mo:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,form:null,fence:null,separator:null,lspace:null,rspace:null,"stretc hy":null,symmetric:null,maxsize:null,minsize:null,largeop:null,movablelimits:null,accent:null,linebreak:null,lineleading:null,linebreakstyle:null,linebreakmultchar:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null},mover:{mathcolor:null,mathbackground:null,accent:null,align:null},mpadded:{mathcolor:null,mathbackground:null,height:null,depth:null,width:null,lspace:null,voffset:null},mphantom:{mathcolor:null,mathbackground:null},mprescripts:{},mroot:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mrow:{mathcolor:null,mathbackground:null,dir:null},ms:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,lquote:null,rquote:null},mscarries:{mathcolor:null,mathbackground:null,position:null,location:null,crossout:null,scriptsizemultiplier:null},mscarry:{mathcolor:null,mathbackground:null,location:null,crossout:null},msgroup:{mathcolor:null,mathbackground:null,position:null,shift:null},msline:{mathcolor:null,mathbackground:null,position:null,length:null,leftoverhang:null,rightoverhang:null,mslinethickness:null},mspace:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null,width:null,height:null,depth:null,linebreak:null},msqrt:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},msrow:{mathcolor:null,mathbackground:null,position:null},mstack:{mathcolor:null,mathbackground:null,align:null,stackalign:null,charalign:null,charspacing:null},mstyle:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,scriptlevel:null,displaystyle:null,scriptsizemultiplier:null,scriptminsize:null,infixlinebreakstyle:null,decimalpoint:null},msub:{mathcolor:null,mathbackground:null,subscriptshift:null},msubsup:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},msup:{mathcolor:null,mathbackground:null,superscriptshift:null},mtable:{mathcolor:null,mathbackground:null,align:null,rowalign:null,columnalign:null,groupalign:null,alignmentscope:null,columnwidth:null,width:null,rowspacing:null,columnspacing:null,rowlines:null,columnlines:null,frame:null,framespacing:null,equalrows:null,equalcolumns:null,displaystyle:null,side:null,minlabelspacing:null},mtd:{mathcolor:null,mathbackground:null,rowspan:null,columnspan:null,rowalign:null,columnalign:null,groupalign:null},mtext:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mtr:{mathcolor:null,mathbackground:null,rowalign:null,columnalign:null,groupalign:null},munder:{mathcolor:null,mathbackground:null,accentunder:null,align:null},munderover:{mathcolor:null,mathbackground:null,accent:null,accentunder:null,align:null},none:{},semantics:{definitionURL:null,encoding:null},annotation:{definitionURL:null,encoding:null,cd:null,name:null,src:null},"annotation-xml":{definitionURL:null,encoding:null,cd:null,name:null,src:null}};function E(e){return{...c[e]}}var p=n(541502),m=n(758546);let h="math",I={"data-mathml":null},b=!1;function g(e,t=!1,n=""){return t?{insert:!0}:""===n?{insert:!0,format:{[h]:{mathml:e}}}:{insert:`$$${n}$$`,format:{[l.aw]:{mathml:e}}}}let y=[...Object.keys(c),"img[data-mathml]"],f=(e,t)=>{let n=e.tagName.toLowerCase(),r=E(n);return new(s())("img"===n?[{insert:{[h]:(0,d.u9)(e,I)},attributes:(0,d.u9)(e,I)}]:[{insert:{[n]:{...(0,d.u9)(e,r),children:t.ops}},attributes:(0,d.u9)(e,r)}])};function S(e,t){return t.mathml}function _(e){e&&e.forEach(e=>{T(e.target,e.target.alt)})}function T(e,t){if(b)e.setAttribute("role","img");else{let n=document.createElement("span");n.classList.add("sr-only"),e.parentElement.appendChild(n),n.textContent=t}}let v=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,locale:i().string});var A=e=>{let t=new m.q7(e);return[{pluginId:h,buttonConfig:{id:h,cssClass:h,iconName:"insert_formula",iconComponent:p.k,isDialog:!0,isActive:e=>!!e[h]&&!!e[h].mathml,onClick:({showModal:t,...n})=>{t(a.Z,{createChange:g,...e,...n})}},matchers:y,deltaModifier:f,formatter:function(e){let t=new MutationObserver(_);return{type:"embedInline",blotName:h,tagName:"span",attributes:I,renderDomNode:(n,r,i,o)=>{let s=null;if(i.mathml)s=(0,u.F)(i.mathml);else if(i.children&&Array.isArray(i.children)){let e=document.createElement("math");e=(0,d.KT)(e,E("math"),i),i.children.forEach(t=>(function e(t,n){if("string"==typeof n.insert){let e=document.createTextNode(n.insert);t.appendChild(e)}else if("object"==typeof n.insert){let r=Object.keys(n.insert).find(e=>void 0!==c[e]);if(r){let i=document.createElement(r),o=E(r);i="mfenced"===r?(0,d.vh)(i,o,n.attributes||{}):(0,d.KT)(i,o,n.attributes||{});let s=n.insert[r].children;s&&Array.isArray(s)&&s.forEach(t=>e(i,t)),t.appendChild(i)}}})(e,t)),s=e.outerHTML}return(0,d.KT)(n,r,{...i,...s?{mathml:s}:null}),n.classList.add("formula-container"),n.innerHTML=s,t.observe(n,{subtree:!0,attributes:!0,attributeFilter:["alt"]}),n.classList.add("wants-props-update"),n.formatComponent=e=>{var t;for(let r of(b=e.isReadOnly,n.parentElement.getElementsByClassName("Wirisformula")))r.nextSibling||(null===(t=r.nextSibling)||void 0===t?void 0:t.getAttribute()("sr-only"))||T(r,r.alt)},e.parseElement(n),n}}}(t),toBbML:S,onLoad:function(){t.load()}},(0,l.ZP)(e)]}},19228:function(e,t,n){"use strict";var r=n(789644),i=n.n(r),o=n(74621),s=n(188391),a=n.n(s),l=n(4264);let u=null,d=!1;function c(e,t){let n={language:t,fontFamily:"Times New Roman"};return e&&(n.mml=e),com.wiris.jsEditor.JsEditor.newInstance(n)}t.Z=({courseId:e,apiBasePath:t,xsrfToken:n,locale:r})=>{let s=e?`/courses/${e}`:"",E=(0,l.uI)(`${t}/v1${s}/editor/v4/configurations`),p=(0,l.uI)(`${t}/v1${s}/mathEditor/v3/mathMLToImage`);function m(e){return{wirisEditorUrl:(0,l.uI)(e.editorUrl)}}return{getAltText:function(e){if(!u)return Promise.reject();let t=o.stringify({service:"mathml2accessible",mml:e,lang:r});return i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t})},getMathMLToImageURL:function(e){return new Promise((t,r)=>{i()({url:p,method:"POST",headers:{"X-Blackboard-XSRF":n},data:{mathML:e}}).then(e=>t(e.data.mathMLImageURL)).catch(r)})},newInstance:function(e){return new Promise((t,n)=>{d?t(c(e,r)):i()({url:E,method:"GET"}).then(o=>{var s;(s=o.data.contextPath,i()({url:`${s}app/configurationjs`,method:"GET"})).then(i=>{let{wirisEditorUrl:o}=m(i.data);u=(0,l.uI)("/webapps/vtbe-tinymce/app/service"),new Promise((t,n)=>{a()(o,()=>{try{d=!0,t(c(e,r))}catch(e){d=!1,n()}})}).then(e=>t(e)).catch(n)}).catch(n)}).catch(n)})},parseConfiguration:m,getLaTeXFromMathML:function(e){let t=o.stringify({service:"mathml2latex",mml:e,lang:r});return new Promise((e,r)=>{i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t}).then(t=>e(t)).catch(r)})}}}},770308:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r,i,o=n(315573),s=n(276635),a=n(464158),l=n(202784),u=n(928316);class d{constructor(e){this.overlay=e.overlay,this.elem=e.elem,this.quillRoot=e.quill.root,this.blotRoot=e.blotRoot,this.localeProps=e.localeProps,this.editorFormat=e.editorFormat,this.isSmallBreakpoint=e.isSmallBreakpoint,this.requestUpdate=e.onUpdate,this.startChange=e.onStartChange,this.stopChange=e.onStopChange,this.applyChange=e.applyChange}onCreate(){}onDestroy(){}onUpdate(){}}var c=n(662176),E=n(578485),p=n(675689),m=n(410628),h=n(17108);function I(e){return{filetype:e.formatType?e.formatType:"media",fileDisplayName:e.alternativeText?e.alternativeText:""}}let b=({onClick:e,buttonAccessibleProps:t})=>{let n=(0,m.q)(),r=I(t);return l.createElement(E.Q,{analyticsId:"media-content.delete",title:n("bbmlEditor.buttons.deleteMedia.label"),"aria-label":n("bbmlEditor.buttons.deleteMedia.axAriaText",r),onClick:e,value:""},l.createElement(p.Trash,null))},g=({videoURL:e,buttonAccessibleProps:t})=>{let n=(0,m.q)(),r=I(t);return l.createElement(E.Q,{analyticsId:"media-content.preview.button",title:n("bbmlEditor.buttons.PreviewMedia.label"),"aria-label":n("bbmlEditor.buttons.PreviewMedia.axAriaText",r),onClick:()=>{window.open(e,"_blank","noopener,noreferrer")},value:""},l.createElement(p.OpenInNewWindow,null))};var y=n(174897),f=n(31307),S=n(378780);(r=i||(i={})).TopLeft="tl",r.TopRight="tr",r.BottomRight="br",r.BottomLeft="bl";let _=Number.MAX_SAFE_INTEGER;var T=n(729941);let v={ResizeExtension:class extends d{constructor(e){super(e),this.currentDragHandle=null,this.tl=null,this.tr=null,this.br=null,this.bl=null,this.originalSize=null,this.aspectRatio=1,this.minWidth=200,this.maxWidth=1e3,this.minHeight=200,this.maxHeight=_,this.dragStart=null,this.size={width:0,height:0},this.keyboardDelta=0,this.hasValidResize=!1,this.isResizeInProgress=!1,this.lastRequestAnimationFrameId=0,this.lastCursor="",this.handleMouseDown=e=>{if(!this.elem)return;let t=e.target;if(!(t instanceof HTMLDivElement))return;let n=t.getAttribute("data-corner");(function(e){let t=[i.TopLeft,i.TopRight,i.BottomRight,i.BottomLeft];return null!==e&&t.includes(e)})(n)&&(this.currentDragHandle={corner:n,element:t},this.dragStart={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),this.hasValidResize=!1,this.setCursor(n),this.setUserSelect(!0),this.startChange(),e.preventDefault(),e.stopPropagation())},this.handleMouseMove=e=>{var t;let n;if(!this.dragStart)return;let r=e.clientX-this.dragStart.x;switch(null===(t=this.currentDragHandle)||void 0===t?void 0:t.corner){case i.TopLeft:case i.BottomLeft:n=-r;break;case i.TopRight:case i.BottomRight:n=r;break;default:n=0}this.resize(n),e.preventDefault(),e.stopPropagation()},this.handleMouseUp=e=>{this.hasValidResize&&this.applyChange(this.size),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.clearCursor(),this.setUserSelect(!1),this.stopChange(),e.preventDefault(),e.stopPropagation()},this.handleKeyDown=e=>{if(!e.shiftKey||!this.isValidResizeKeyEvent(e))return;let t=10;e.altKey&&(t=1),this.currentDragHandle=this.currentDragHandle={corner:i.BottomRight,element:this.br},this.isResizeInProgress||(this.hasValidResize=!1,this.setUserSelect(!0),this.startChange(),this.isResizeInProgress=!0),e.key===f.s.ArrowLeft||e.key===f.s.ArrowUp?this.keyboardDelta=this.clampDelta(this.keyboardDelta-t):(e.key===f.s.ArrowRight||e.key===f.s.ArrowDown)&&(this.keyboardDelta=this.clampDelta(this.keyboardDelta+t)),this.resize(this.keyboardDelta),e.stopPropagation(),e.preventDefault()},this.handleKeyUp=e=>{(!this.isResizeInProgress||!e.shiftKey)&&(this.isResizeInProgress||this.isValidResizeKeyEvent(e))&&(this.hasValidResize&&this.applyChange(this.size),this.setUserSelect(!1),this.isResizeInProgress=!1,this.stopChange(),e.stopPropagation(),e.preventDefault())},this.container=document.createElement("div"),this.container.classList.add("resize-container")}clampDelta(e){if(!this.originalSize)return(0,s.clamp)(e,this.minWidth,this.maxWidth);let t=this.originalSize.width+e;return(0,s.clamp)(t,this.minWidth,this.maxWidth)-this.originalSize.width}resize(e){if(!this.originalSize)return;let t=this.originalSize.width+e,n=(0,s.clamp)(t,this.minWidth,this.maxWidth),r=n/this.aspectRatio,o={};this.size.width=n,this.size.height=r,this.hasValidResize=!0,cancelAnimationFrame(this.lastRequestAnimationFrameId),this.lastRequestAnimationFrameId=requestAnimationFrame(()=>{var n;let r,s;if(this.originalSize){switch(this.minWidth<=t&&t<=this.maxWidth?(s=`${-e/this.aspectRatio}px`,r=`${-e}px`):t>this.maxWidth?(s=`${(this.originalSize.width-this.maxWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.maxWidth}px`):(s=`${(this.originalSize.width-this.minWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.minWidth}px`),null===(n=this.currentDragHandle)||void 0===n?void 0:n.corner){case i.TopLeft:o.top=s,o.left=r;break;case i.TopRight:o.top=s,o.right=r;break;case i.BottomLeft:o.bottom=s,o.left=r;break;case i.BottomRight:o.bottom=s,o.right=r;break;default:throw TypeError("Could not detect a valid corner type")}Object.assign(this.container.style,o)}}),this.requestUpdate()}isValidResizeKeyEvent(e){return e.key===f.s.ArrowLeft||e.key===f.s.ArrowUp||e.key===f.s.ArrowRight||e.key===f.s.ArrowDown}addDragHandle(e){var t;let n=`resize-drag-handle--${e}`,r=document.createElement("div");return r.classList.add("resize-drag-handle",n),r.setAttribute("data-corner",e),r.addEventListener("mousedown",this.handleMouseDown),null===(t=this.container)||void 0===t||t.appendChild(r),r}setUserSelect(e){e?(this.quillRoot.classList.add("no-select"),document.documentElement.classList.add("no-select")):(this.quillRoot.classList.remove("no-select"),document.documentElement.classList.remove("no-select"))}setCursor(e){let t=`resize-cursor-${e}`;this.lastCursor.length>0?(document.body.classList.replace(this.lastCursor,t),this.elem.classList.replace(this.lastCursor,t)):(document.body.classList.add(t),this.elem.classList.add(t)),this.lastCursor=t}clearCursor(){this.lastCursor.length>0&&(document.body.classList.remove(this.lastCursor),this.elem.classList.remove(this.lastCursor)),this.lastCursor=""}onCreate(){let{elemWidth:e,elemHeight:t}=function(e){let t=e.getBoundingClientRect(),n=t.width,r=t.height;return e instanceof HTMLImageElement?(n||(n=e.naturalWidth),r||(r=e.naturalHeight)):e instanceof HTMLVideoElement&&(n||(n=e.videoWidth),r||(r=e.videoHeight)),{elemWidth:n,elemHeight:r}}(this.elem);this.originalSize={width:e,height:t},this.aspectRatio=e/t;let n=this.quillRoot.getBoundingClientRect();this.minWidth=Math.max(200,.25*n.width),this.maxWidth=n.width,this.minHeight=200,this.maxHeight=_,this.aspectRatio<1?this.minHeight=Math.max(this.minHeight,this.minWidth/this.aspectRatio):this.aspectRatio>1&&(this.minWidth=Math.max(this.minWidth,this.aspectRatio*this.minHeight)),this.isSmallBreakpoint||(0,S.w)(this.blotRoot.parentElement)||(this.tl=this.addDragHandle(i.TopLeft),this.tr=this.addDragHandle(i.TopRight),this.br=this.addDragHandle(i.BottomRight),this.bl=this.addDragHandle(i.BottomLeft),this.blotRoot.addEventListener("keydown",this.handleKeyDown),this.blotRoot.addEventListener("keyup",this.handleKeyUp)),this.overlay.appendChild(this.container)}onDestroy(){this.hasValidResize=!1,this.originalSize=null,this.aspectRatio=1,this.blotRoot.removeEventListener("keydown",this.handleKeyDown),this.blotRoot.removeEventListener("keyup",this.handleKeyUp),this.clearCursor()}},OptionsExtension:class extends d{constructor(){var e;let t,n;super(...arguments),this.container=document.createElement("div"),this.shouldShowPreviewButton=(this.elem instanceof HTMLIFrameElement||this.elem instanceof HTMLVideoElement)&&this.elem.src,this.buttonAccessibleProps=(e=this.editorFormat,(0,h.kG)(e)?{alternativeText:JSON.parse(e.video.bbfile).alt,formatType:e.video.bbtype}:(0,h.R4)(e)?{alternativeText:JSON.parse(e.image.bbfile).alt,formatType:e.image.bbtype}:(0,h.Dw)(e)?{alternativeText:JSON.parse(e.attachment.bbfile).displayName,formatType:e.attachment.bbtype}:{alternativeText:t,formatType:n}),this.handleOnDelete=()=>{this.applyChange(null)}}onCreate(){this.container.classList.add("options-container"),this.overlay.appendChild(this.container),u.render(l.createElement(a.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:this.localeProps.isRtl},l.createElement(y.g,{...this.localeProps},this.shouldShowPreviewButton&&l.createElement(c.Box,null,l.createElement(g,{videoURL:this.elem.src,buttonAccessibleProps:this.buttonAccessibleProps})),l.createElement(c.Box,null,l.createElement(b,{onClick:this.handleOnDelete,buttonAccessibleProps:this.buttonAccessibleProps})))),this.container)}onDestroy(){u.unmountComponentAtNode(this.container)}}};class A extends o.Z{constructor(e,t={}){var n;super(e,t),this.initializeExtensions=()=>{this.removeExtensions(),this.extensions=this.extensionClasses.map(e=>new(v[e]||e)(this)),this.extensions.forEach(e=>{e.onCreate()}),this.onUpdate()},this.removeExtensions=()=>{this.extensions.forEach(e=>{e.onDestroy()}),this.extensions=[]},this.show=e=>{this.elem=e;let t=function(e,t){if(!e.contains(t))return null;let n=t,r=t.parentElement;for(;r!==e&&!(0,S.w)(r);)r=(null==(n=r)?void 0:n.parentElement)||null;return n}(this.quill.root,this.elem);this.blotRoot=null!=t?t:this.elem,this.showOverlay(),this.initializeExtensions()},this.showOverlay=()=>{this.overlay&&this.hideOverlay(),this.overlay=document.createElement("div"),this.overlay.classList.add("media-overlay"),this.overlay.addEventListener("mousedown",T.p7),this.blotRoot.classList.add("with-overlay"),this.blotRoot.appendChild(this.overlay),this.repositionElements()},this.hide=()=>{this.removeExtensions(),this.hideOverlay(),this.elem=void 0,this.blotRoot=void 0},this.hideOverlay=()=>{this.blotRoot&&this.blotRoot.classList.remove("with-overlay"),this.overlay&&(this.overlay.remove(),this.overlay=void 0)},this.repositionElements=()=>{if(!this.overlay||!this.elem)return;let e=this.elem.getBoundingClientRect();Object.assign(this.overlay.style,{top:"0px",width:`${e.width+2}px`,height:`${e.height+2}px`})},this.quill=e;let r=!1;t.extensions&&(r=t.extensions.slice()),this.options=(0,s.defaultsDeep)({},t),!1!==r&&(this.options.extensions=r),this.onInit=this.onInit.bind(this),this.onReadOnlyChange=this.onReadOnlyChange.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onFormatChange=this.onFormatChange.bind(this),this.applyChange=this.applyChange.bind(this),this.onStartChange=this.onStartChange.bind(this),this.onStopChange=this.onStopChange.bind(this),this.onUpdate=this.onUpdate.bind(this),this.extensionClasses=null!==(n=this.options.extensions)&&void 0!==n?n:[],this.extensions=[]}onInit(e,t){this.localeProps=e,this.applyEditorChange=t}onReadOnlyChange(e){e&&this.hide()}onBreakpointChange(e){this.isSmallBreakpoint=e,e&&this.removeExtensions()}onFormatChange(e){if(!e){this.hide(),this.editorFormat=null;return}if((0,s.isEqual)(this.editorFormat,e)){this.repositionElements();return}this.hide(),this.editorFormat=this.filterFormat(e),this.editorFormat&&(this.elem=this.getMediaElement(this.editorFormat.domNode)),this.elem?this.show(this.elem):this.editorFormat=null}onStartChange(){this.blotRoot.classList.add("with-change")}onStopChange(){this.blotRoot.classList.remove("with-change")}onUpdate(){this.repositionElements(),this.extensions.forEach(e=>{e.onUpdate()})}filterFormat(e){return null}getMediaElement(e){return null}createChange(e){return{}}applyChange(e){if(null===e)this.applyEditorChange({insert:!0});else{let t=this.quill.root.getBoundingClientRect(),n=this.elem.getBoundingClientRect().height-e.height,r=`${t.height-n}px`;Object.assign(this.quill.root.style,{minHeight:r}),this.applyEditorChange(this.createChange({...e})),Object.assign(this.quill.root.style,{minHeight:""})}}}A.DEFAULTS={extensions:Object.keys(v)};var O=A},326483:function(e,t,n){"use strict";function r({src:e,title:t,alt:n,uuid:r,availabilityMessage:i,bbfile:o}){return[{insert:"\n"},{insert:!0,format:{collab_video:{src:e,title:t,alt:n,bbfile:o||JSON.stringify({video_uuid:r}),info:null!=i?i:null}}},{insert:"\n"}]}n.d(t,{Z:function(){return r}})},474610:function(e,t,n){"use strict";n.d(t,{ZP:function(){return I},dI:function(){return p}});var r=n(202784),i=n(213980),o=n.n(i),s=n(464158),a=n(675689),l=n(692475),u=n(336508),d=n(555294),c=n(410628);let E=({analyticsId:e,preventClosing:t,onDiscard:n})=>{let[i,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(),u=(0,c.q)();return(0,d.wj)(e=>{t&&(e.preventRouteChange(),o(!0),l(e))}),r.createElement(s.AnalyticsDialog,{open:i,analyticsId:e,classes:{root:"discard-dialog-root"}},r.createElement(s.AnalyticsDialogTitle,{analyticsId:`${e}.title`},u("bbmlEditor.dialogs.discardDialog.title")),r.createElement(s.AnalyticsDialogContent,{analyticsId:`${e}.content`},r.createElement(s.AnalyticsDialogContentText,{analyticsId:`${e}.content.text`},u("bbmlEditor.dialogs.discardDialog.content"))),r.createElement(s.AnalyticsDialogActions,{analyticsId:`${e}.actions`},r.createElement(s.AnalyticsDefaultButton,{analyticsId:`${e}.cancel`,onClick:()=>{o(!1)}},u("global.cancel")),r.createElement(s.AnalyticsPrimaryButton,{analyticsId:`${e}.discard`,onClick:()=>{var e,t;n(),d.Nd.goRoute(null!==(e=null==a?void 0:a.toState.name)&&void 0!==e?e:"",null!==(t=null==a?void 0:a.toParams)&&void 0!==t?t:{})}},u("global.discard"))))};function p(){let e=document.querySelector("div.modal-video-everywhere-contents > iframe");e&&(e.height=`${e.offsetWidth*(700/1200)}px`)}let m="bbml-editor.modal-video.interactable.dialog";class h extends r.Component{constructor(e){super(e),this.state={isOpen:!1,shrinkScreen:!0,screenSize:"md"},this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onMinimizeMaximizeClick=this.onMinimizeMaximizeClick.bind(this)}componentDidMount(){this.timer=setTimeout(()=>{this.setState({isOpen:!0},()=>{window.addEventListener("resize",p)})})}UNSAFE_componentWillReceiveProps(e){!e.isOpen&&this.state.isOpen&&this.onCancel()}componentWillUnmount(){clearTimeout(this.timer),window.removeEventListener("resize",p)}onCancel(){this.setState({isOpen:!1}),this.onAnimationComplete()}onAnimationComplete(){this.props.destroy&&this.props.destroy()}getAllowAttribute(){return this.props.allowMedia?"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *":null}componentDidUpdate(e,t){if(e.shrinkScreen!==this.state.shrinkScreen&&p(),this.props.mediaQuery!==t.mediaQuery||e.shrinkScreen!==this.state.shrinkScreen){let e;e=this.props.mediaQuery?this.state.shrinkScreen?"sm":"md":this.state.shrinkScreen?"md":"lg",this.state.screenSize!==e&&this.setState({screenSize:e})}}onMinimizeMaximizeClick(){this.setState(e=>({shrinkScreen:!e.shrinkScreen}))}render(){return r.createElement(r.Fragment,null,r.createElement(s.AnalyticsDialog,{analyticsId:`${m}.dialog`,open:this.state.isOpen,maxWidth:this.state.screenSize,hideBackdrop:!0,disableEnforceFocus:!0,disableBackdropClick:!0,PaperComponent:s.AnalyticsPaper,classes:{root:"modal-video-everywhere-dialog",paper:"modal-video-everywhere-dialog-paper"}},r.createElement("div",{className:"dialog-header"},r.createElement(s.AnalyticsTypography,{variant:"h3"},this.props.title),r.createElement("div",null,r.createElement(s.AnalyticsIconButton,{analyticsId:`${m}.resize`,onClick:this.onMinimizeMaximizeClick,"aria-label":this.props.localize.translate("bbmlEditor.dialogs.icon.shrinkScreen")},this.state.shrinkScreen?r.createElement(a.Maximize,{fontSize:"small"}):r.createElement(a.MinimizeApp,{fontSize:"small"})),this.props.showCloseButton&&r.createElement(s.AnalyticsIconButton,{analyticsId:`${m}.cancel`,onClick:this.onCancel,"aria-label":this.props.localize.translate("bbmlEditor.dialogs.icon.close")},r.createElement(a.Close,{fontSize:"small"})))),r.createElement("div",{className:"modal-video-everywhere-contents"},this.props.src&&r.createElement("iframe",{tabIndex:"0",title:this.props.title,src:this.props.src,frameBorder:"0",width:"100%",height:"100%",scrolling:"no",allow:this.getAllowAttribute(),allowFullScreen:!0,onLoad:p}))),r.createElement(E,{preventClosing:this.state.isOpen,analyticsId:`${m}.confirmation-dialog`,onDiscard:this.onCancel}))}}h.propTypes={allowMedia:o().bool,destroy:o().func,isOpen:o().bool,showCloseButton:o().bool,src:o().string,title:o().string.isRequired},h.defaultProps={allowMedia:!1,destroy:null,isOpen:!1,showCloseButton:!0,src:null};var I=(0,l.h)((0,u.u3x)({query(e){return e.breakpoints.down("sm")}})(h))},406733:function(e,t,n){"use strict";var r=n(202784),i=n(50635),o=n(213980),s=n.n(o),a=n(474610),l=n(816390);class u extends r.Component{constructor(e){super(e),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.promise=(0,l.Z)(this.props.service.getPlaybackLink(this.props.videoId)).then(e=>{this.setState({src:e.data.result,isOpen:!0},a.dI)})}componentWillUnmount(){this.promise.cancel()}render(){let{destroy:e,t,showCloseButton:n}=this.props;return r.createElement(a.ZP,{destroy:e,showCloseButton:n,src:this.state.src,isOpen:this.state.isOpen,title:t("bbmlEditor.dialogs.collab_video.playbackTitle")})}}u.propTypes={destroy:s().func,videoId:s().string.isRequired,service:s().shape({getPlaybackLink:s().func.isRequired}).isRequired,showCloseButton:s().bool},u.defaultProps={destroy:null,showCloseButton:!0},t.Z=(0,i.H)(u)},854666:function(e,t){"use strict";t.Z="collab_video"},820487:function(e,t){"use strict";t.Z=[".mp4"]},947413:function(e,t,n){"use strict";function r(e,t){let n=[{insert:!0,format:{video:{bbtype:"video",bbfile:JSON.stringify(e)}}}];return n.unshift({insert:"\n"}),t||n.push({insert:"\n"}),n}n.d(t,{Z:function(){return r}})},648798:function(e,t,n){"use strict";var r=n(819549),i=n(73793),o=n(359895),s=n(820487),a=n(645885),l=n(464357),u=n(485544);let d="video",c=e=>!(!e.isReadOnly||e.isDisabled),E=({bbFile:e,editorProps:t})=>{let n=document.createElement("iframe");return n.frameBorder=0,n.setAttribute("allowFullScreen",""),n.tabIndex=c(t)?"0":"-1",n.title=e.alt,n.src=e.src,n.classList.add("no-select"),e.width&&e.height&&(n.height=e.height,n.width=e.width),n},p=({bbFile:e,editorProps:t})=>{let{isReadOnly:n,isDisabled:r}=t,i=document.createElement("video");return i.autoplay=!1,i.controls=!(!n||r),i.playsinline=!0,i.ariaLabel=e.alt,i.src=e.src,i.classList.add("no-select"),e.width&&e.height&&(i.height=e.height,i.width=e.width),i},m=[`[data-bbtype="${d}"][data-bbfile]`],h={type:"embed",tagName:"div",attributes:{"data-bbtype":d,"data-bbfile":null},renderDomNode:(e,t,n,r)=>{let o;let a=JSON.parse((0,l.Ac)(n.bbfile)),u=!s.Z.some(e=>a.src&&a.src.toLowerCase().endsWith(e)),{isReadOnly:d}=r,m=document.createElement("span");m.classList.add("sr-only"),m.textContent=a.alt;let h=document.createElement("div");h.tabIndex=0,h.classList.add("video-placeholder"),h.classList.add("no-select"),d&&h.classList.add("hidden"),h.appendChild(m),o=u?E({bbFile:a,editorProps:r}):p({bbFile:a,editorProps:r});let I=document.createElement("div");I.classList.add("bb-video-embed"),a.width&&a.height?I.classList.add("bb-video-embed--resize"):I.classList.add("bb-video-embed--default"),I.appendChild(h),I.appendChild(o);let b=(0,i.Z)(e,t,n);return b.contentEditable=!1,b.classList.add("bb-video"),b.classList.add("wants-props-update"),b.classList.add("ql-embed-selected--hidden"),b.formatComponent=e=>{o.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0",o.controls=!(!e.isReadOnly||e.isDisabled),h.tabIndex=!e.isReadOnly||e.isDisabled?"0":"-1",c(e)?h.classList.add("hidden"):h.classList.remove("hidden")},b.formatComponent(r),b.appendChild(I),b}};function I(e,t){let n=JSON.parse((0,l.Ac)(t.bbfile));return`<a href="${n.src}" data-bbtype="${d}" data-bbfile="${(0,o.ZP)(t.bbfile)}">${n.alt}</a>`}t.Z=e=>({pluginId:d,buttonConfig:{id:d,cssClass:`${d}`,iconName:"video",iconComponent:a.n,isDialog:!0,isActive:e=>!!e[d],onClick:({showModal:t,...n})=>{t(r.Z,{...e,...n})}},matchers:m,module:u.Z,formatter:h,toBbML:I})},322846:function(e,t){"use strict";t.Z=(e,t)=>new Promise((n,r)=>{let i=document.getElementById("browseForFiles");i&&i.remove();let o=document.createElement("input");o.id="browseForFiles",o.classList.add("sr-only"),o.tabIndex="-1",o.role="presentation",o.type="file",(null==t?void 0:t.length)>0&&(o.accept=t.join(",")),o.multiple=!!e,o.onchange=e=>{let t=e.target.files;o.remove(),n(t)},document.body.appendChild(o),document.querySelector(".data-e2e-simulate-file-input")||o.click()})},148330:function(e,t,n){"use strict";n.d(t,{C:function(){return i},p:function(){return o}});var r=n(716241);class i extends Error{constructor(e,t){super(t),this.errorData=e}getErrorFiles(){return this.errorData.errorFiles}getAllowedFiles(){return this.errorData.allowedFiles}}class o{constructor(e,t){this.sizeLimitInBytes=e,this.customFileUploadSettings=t}validate(e){let t=r.udf.filterOversizedFiles(e,this.customFileUploadSettings,this.sizeLimitInBytes),n=r.udf.filterValidSizedFiles(e,this.customFileUploadSettings,this.sizeLimitInBytes);if(t.length>0)throw new i({errorFiles:t,allowedFiles:n},"File is larger than the maximum file size")}}},587987:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(202784),i=n(692475),o=n(213980),s=n.n(o),a=n(906277),l=n(844156),u=n(142895),d=n.n(u),c=n(158550),E=n(789644),p=n.n(E),m=n(4264);function h(e,t,n){return p()({url:n,method:"GET",headers:{"X-Blackboard-XSRF":t},cancelToken:new(p()).CancelToken(t=>{e.cancelInternal=t})})}class I{constructor(e,t){if(e.cloudStorageIntegrationAccessToken){this.progressTick=0,this.file=e;let n=(0,m.uI)(`${t.apiBasePath}/v1/cloudstorages`),r=(0,m.uI)(`${n}/cloudstorageintegration/contents/${encodeURIComponent(e.id)}/download?accessToken=${e.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`);h(this,t.xsrfToken,r).then(e=>this.queryDownload(e,n,t.xsrfToken)).catch(e=>this.onError(e))}else{this.progressTick=0,this.file=e;let n=(0,m.uI)(`${t.apiBasePath}/v1/files?expand=mimeType,isMedia`);t.courseId&&(n=`${n}&courseId=${t.courseId}`),Number.isFinite(t.resizeImageWidth)&&(n=`${n}&resizeImageWidth=${t.resizeImageWidth}`);let r=new FormData;r.append("file",e,encodeURIComponent(e.name)),r.append("webLocation",t.webLocation||""),r.append("fileLocation",t.fileLocation||""),p()({url:n,method:"POST",headers:{"Content-Type":"image/jpeg","X-Blackboard-XSRF":t.xsrfToken},data:r,cancelToken:new(p()).CancelToken(e=>{this.cancelInternal=e}),onUploadProgress:e=>this.onProgress(e)}).then(e=>this.onSuccess(e)).catch(e=>this.onError(e))}}onSuccess(e){this.cachedResponse=e,this.successCallback&&this.successCallback(this.file,e.data)}onProgress(e,t){if(this.cachedProgress=e,this.progressCallback){if(t){this.progressCallback(this.file.name,Math.floor(e));return}e.lengthComputable&&this.progressCallback(this.file.name,Math.floor(100*e.loaded/e.total))}}onError(e){this.cachedError=e,this.errorCallback&&this.errorCallback(this.file,e)}queryDownload(e,t,n){return new Promise(r=>{"COMPLETE"===e.data.status?(this.cloudStorageIntegrationTimer&&clearTimeout(this.cloudStorageIntegrationTimer),r(this.onSuccess(e))):this.cloudStorageIntegrationTimer=setTimeout(()=>{this.onProgress(+e.data.completePercentage,!0),r(h(this,n,`${t}/tasks/${e.data.taskId}?accessToken=${this.file.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`).then(e=>this.queryDownload(e,t,n)).catch(e=>this.onError(e)))},500)})}cancel(){delete this.errorCallback,delete this.progressCallback,delete this.successCallback,this.cachedResponse||this.cachedError||this.cancelInternal()}progress(e){return this.progressCallback=e,this.cachedProgress&&this.onProgress(this.cachedProgress),this}success(e){return this.successCallback=e,this.cachedResponse&&this.onSuccess(this.cachedResponse),this}error(e){return this.errorCallback=e,this.cachedError&&this.onError(this.cachedError),this}}var b=n(924980);class g extends r.Component{constructor(e){super(e),this.state={files:[],fileGroup:{}},this.uploadServices={},this.progressTimers={},this.failedUploads=[],this.successfulUploads=[],this.updateProgress=this.updateProgress.bind(this),this.onCancel=this.onCancel.bind(this),this.onCancelAll=this.onCancelAll.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.finishUploading=this.finishUploading.bind(this)}UNSAFE_componentWillMount(){let{files:e}=this.props;this.setState({files:e}),e.forEach(e=>{let t=!1;this.uploadServices[e.name]=new I(e,{apiBasePath:this.props.apiBasePath,xsrfToken:this.props.xsrfToken,webLocation:this.props.webLocation,fileLocation:this.props.fileLocation,resizeImageWidth:this.props.resizeImageWidth,courseId:this.props.courseId}).progress((n,r)=>{r>=100?(clearTimeout(this.progressTimers[e.name]),this.updateProgress(n,100)):t||(t=!0,this.progressTimers[e.name]=setTimeout(()=>{let e=!!this.state.fileGroup[n]&&this.state.fileGroup[n].uploadComplete;t=!1,this.updateProgress(n,e?100:r)},5))}).success(this.onUploadSuccess).error(this.onUploadError)})}onCancel(e){let t=this.state.files;this.uploadServices[e].cancel(),t=t.filter(t=>t.name!==e),this.failedUploads=this.failedUploads.filter(t=>t.name!==e),this.successfulUploads=this.successfulUploads.filter(t=>t.name!==e),t.length>0?this.setState({files:t},()=>{this.finishUploading()}):this.onDismiss()}onCancelAll(){this.props.files.forEach(e=>{this.uploadServices[e.name].cancel()}),this.onDismiss()}onDismiss(){this.props.destroy()}onUploadSuccess(e,t){this.successfulUploads.push(e),this.props.onUploadSuccess&&this.props.onUploadSuccess(t),this.setState(n=>({fileGroup:{...n.fileGroup,[e.name]:{...n.fileGroup[e.name]||{},uploadComplete:!0,successResponse:t}}}),()=>{this.finishUploading()})}onUploadError(e,t){var n;let{localize:r,onUploadError:i}=this.props;this.uploadServices[e.name].cancel(),this.failedUploads.push(e),clearTimeout(this.progressTimers[e.name]);let o=(null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.status)===422;i&&i(t),this.setState(t=>({fileGroup:{...t.fileGroup,[e.name]:{...t.fileGroup[e.name]||{},errorResponse:r.translate(`bbmlEditor.dialogs.insertLocalFile.${o?"securityThreat":"networkError"}`),progress:0,uploadComplete:!1}}}),()=>{this.finishUploading()})}updateProgress(e,t){let n=this.state.fileGroup;(!this.state.fileGroup[e]||void 0===this.state.fileGroup[e].progress||t>this.state.fileGroup[e].progress)&&(n[e]={...this.state.fileGroup[e]||{},progress:t},this.setState({fileGroup:n}))}finishUploading(){if(this.state.files.length-this.failedUploads.length===this.successfulUploads.length){let{fileGroup:e}=this.state,t=[];Object.keys(e).forEach(n=>{e[n].successResponse&&t.push(e[n].successResponse)}),0!==t.length&&setTimeout(()=>{this.props.destroy(),this.props.createChange(t)},350)}}render(){let{fileGroup:e}=this.state,{localize:t,analyticsEventAugmentor:n}=this.props,i=t.translate("bbmlEditor.buttons.cancel"),o="cloudStorageIntegration"===this.props.fileSource?t.translate("bbmlEditor.dialogs.insertCloudStorageIntegrationFile.titleInsert"):t.translate("bbmlEditor.dialogs.insertLocalFile.titleInsert");return r.createElement(d(),{hidden:!1,onDismiss:this.onDismiss,dialogContentProps:{title:o,showCloseButton:!1,type:u.DialogType.fullHeaderFooter},modalProps:{containerClassName:"modal-insert-file"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"cloudStorageIntegration"===this.props.fileSource?"editor.dialogs.insertCloudStorageIntegrationFile.titleInsert":"editor.dialogs.insertLocalFile.titleInsert"},r.createElement("div",{className:"large"===this.props.variant?"dialog-inner-content-large":void 0},this.state.files.map(i=>{let o=e[i.name]?e[i.name].progress:0,s=!!e[i.name]&&e[i.name].uploadComplete,l=o>=100&&!s,u=43*Math.PI,d=o>0?u-u/100*o:u,E=(0,a.Z)({"loading-circle-svg":!0,processing:l}),p="";return this.state.fileGroup[i.name]&&(p=this.state.fileGroup[i.name].errorResponse||""),r.createElement("div",{key:i.name,className:"file-group"},r.createElement("div",{className:"file-progress-container"},s?r.createElement("div",{className:"indicator complete"}):r.createElement("div",{className:"indicator"},r.createElement("svg",{className:E,height:49,width:49,viewBox:"0 0 46 46"},r.createElement("circle",{className:"back",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:u,strokeDashoffset:d}),r.createElement("circle",{className:"bar",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:l?6:u,strokeDashoffset:d})),o.toString(),"%"),r.createElement("div",{className:"file-name no-longtext no-select"},i.name),r.createElement("button",{type:"button","aria-label":t.translate("bbmlEditor.dialogs.insertLocalFile.cancelUploadButton"),className:"cancel-upload",onClick:n(c.AnalyticsEventTypes.CLICK_EVENT,()=>this.onCancel(i.name),"editor.dialogs.insertLocalFile.cancelUploadButton"),"data-analytics-id":"editor.dialogs.insertLocalFile.cancelUploadButton"},"X")),r.createElement("div",{className:"upload-error-message",role:"alert","aria-live":"assertive"},p))})),r.createElement("br",null),r.createElement(u.DialogFooter,null,r.createElement(l.AnalyticsDefaultButton,{onClick:this.onCancelAll,analyticsId:"editor.modalInsertFile.cancel"},i)))}}g.propTypes={apiBasePath:s().string.isRequired,createChange:s().func.isRequired,destroy:s().func.isRequired,files:s().arrayOf(s().shape({lastModified:s().number,name:s().string,size:s().number,type:s().string}).isRequired).isRequired,fileLocation:s().string,fileSource:s().oneOf(["local","cloudStorageIntegration"]),onUploadError:s().func,onUploadSuccess:s().func,webLocation:s().string,xsrfToken:s().string.isRequired,variant:s().string,...b.Z},g.defaultProps={fileLocation:"",fileSource:"local",onUploadError:null,onUploadSuccess:null,webLocation:""};var y=(0,i.h)((0,c.withAnalytics)(g))},954752:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(202784),i=n(50635),o=n(716241),s=n(213980),a=n.n(s),l=n(464158),u=n(662176),d=n(410628),c=n(435722);let E=(0,u.makeStyles)(e=>(0,u.createStyles)({warningMessage:{marginBottom:"16px"},fileInfo:{marginBottom:"5px"}})),p=e=>{let t;let{fileSizeGroup:n}=e,i=E(),o=(0,d.q)();return r.createElement(r.Fragment,null,r.createElement("div",{className:i.warningMessage},0===n.fileSizeLimit?o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.zeroSizeWarningMessage"):o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.warningMessage",{maxFileSize:(t=n.fileSizeLimit,r.createElement(l.AnalyticsTypography,{component:"span",variant:"h4"},o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.maxFileSize",{maxFileSize:(0,c.wZ)(t)})))})),r.createElement("ul",null,n.files.map((e,t)=>r.createElement("li",{className:i.fileInfo,key:t},r.createElement(l.AnalyticsTypography,{component:"span",variant:"h4"},e.name)))))};class m extends r.Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this)}onDismiss(){var e;this.props.destroy(),null===(e=this.props)||void 0===e||e.executeCallback()}render(){let{t:e,files:t,maxFileSize:n,fileUploadSettings:i,classes:s}=this.props,{displayRecommendedAlternatives:a,displaySupportLink:u,supportLink:d,recommendedAlternatives:c,customFileUploadSettings:E}=i,m=o.udf.groupExceedingUploadLimitFiles(t,E,n),h=r.createElement(l.AnalyticsLink,{analyticsId:"bbmlEditor.dialogs.fileUpload.linkAnalytics",href:d,target:"_blank",rel:"noreferrer"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLink")),I=a||""!==c?e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.alternateStorage",{alternateStorage:c}):e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.noAlternateStorage"),b=u||""!==d?r.createElement(r.Fragment,null," ",e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLinkText",{supportLinkAnchor:h})):"";return r.createElement(l.AnalyticsDialog,{open:!0,maxWidth:"md",onClose:this.onDismiss,analyticsId:"editor.dialogs.fileUpload.maxSizeWarning.title",className:"max-size-warning-modal",PaperProps:{role:"alertdialog"},"aria-labelledby":"alert-upload-error"},r.createElement(l.AnalyticsDialogTitle,{id:"alert-upload-error",onClose:this.onDismiss},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.title")),r.createElement(l.AnalyticsDialogContent,{className:s.dialogContent},m.map(e=>r.createElement(p,{fileSizeGroup:e})),r.createElement("div",{className:"alternate-storage-info"},r.createElement("span",null,I),r.createElement("span",null,b))),r.createElement(l.AnalyticsDialogActions,null,r.createElement(l.AnalyticsPrimaryButton,{onClick:this.onDismiss,analyticsId:"editor.modalMaxFileSizeError.cancel"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.primary"))))}}m.propTypes={destroy:a().func.isRequired,files:a().arrayOf([{name:a().string,size:a().number}]),maxFileSize:a().number.isRequired,executeCallback:a().func},m.defaultProps={fileUploadSettings:{displayRecommendedAlternatives:!1,displaySupportLink:!1,supportLink:"",recommendedAlternatives:""}};var h=(0,i.H)((0,u.withStyles)(()=>(0,u.createStyles)({dialogContent:{maxHeight:"400px",overflowY:"auto",paddingLeft:"16px",marginLeft:0}}))(m))},242141:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(242454),i=n(336508),o=n(134129);let s=(e,t,{supportsInlineDocumentRender:n=!1}={})=>{let s={resourceUrl:e,fileName:t.fileName||(0,r.O)(t.linkName,t.mimeType),fileSize:t.fileSize,viewerUrl:t.viewerUrl,alternativeText:t.alternativeText||t.linkName,displayName:t.linkName,mimeType:t.mimeType,isDecorative:!!t.isDecorative,height:t.height,width:t.width,bbFileUuid:t.bbFileUuid,hasError:t.hasError};return{...s,render:t.render||((0,i.QaU)(s,n)?o.I_d.Inline:o.I_d.Attachment)}}},73793:function(e,t){"use strict";t.Z=function(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let o=n[e.replace("data-","")],s=t[e];i=r,(o||s)&&i.setAttribute(e,o||s),r=i}),r}},988860:function(e,t){"use strict";t.Z=e=>new Promise(t=>{setTimeout(()=>{t(e)},200)})},242454:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});let r={"application/msword":["doc","dot"],"application/pdf":["pdf"],"application/excel":["xls"],"application/mspowerpoint":["ppt"],"application/powerpoint":["ppt"],"application/x-mspowerpoint":["ppt"],"application/vnd.ms-excel":["xls","xlt","xla"],"application/vnd.ms-excel.addin.macroEnabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroEnabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroEnabled.12":["xlsm"],"application/vnd.ms-excel.template.macroEnabled.12":["xltm"],"application/vnd.ms-powerpoint":["ppt","pot","pps","ppa"],"application/vnd.ms-powerpoint.addin.macroEnabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroEnabled.12":["pptm","potm"],"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":["ppsm"],"application/vnd.ms-word.document.macroEnabled.12":["docm"],"application/vnd.ms-word.template.macroEnabled.12":["dotm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/x-excel":["xls","xll"],"application/x-compressed":["zip"],"application/x-zip-compressed":["zip"],"application/zip":["zip"],"audio/midi":["mid"],"audio/mpeg":["mp3"],"audio/mpeg3":["mp3"],"audio/x-mpeg":["mp3"],"audio/x-mpeg3":["mp3"],"audio/x-midi":["mid"],"audio/aiff":["aiff","aif","aifc"],"audio/x-aiff":["aiff","aif","aifc"],"audio/wav":["wav"],"audio/x-wav":["wav"],"image/bmp":["bmp","bm"],"image/x-windows-bmp":["bmp"],"image/gif":["gif"],"image/x-icon":["ico"],"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/tiff":["tif","tiff"],"image/x-tiff":["tif","tiff"],"multipart/x-zip":["zip"],"text/plain":["txt"],"video/avi":["avi"],"video/mpeg":["mpeg","mp4"],"video/msvideo":["avi"],"video/quicktime":["mov","moov"]},i=(e,t)=>!r[t]||r[t].some(t=>e.endsWith(`.${t}`))?e:`${e}.${r[t][0]}`},17108:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&"video"in e}function i(e){return null!=e&&"object"==typeof e&&"image"in e}function o(e){return null!=e&&"object"==typeof e&&"attachment"in e}n.d(t,{Dw:function(){return o},R4:function(){return i},kG:function(){return r}})},816390:function(e,t){"use strict";t.Z=e=>{let t=!1,n=new Promise((n,r)=>{e.then(e=>t||n(e)).catch(e=>t||r(e))});return{then(e){return n.then(e),this},catch(e){return n.catch(e),this},cancel(){t=!0}}}},359895:function(e,t,n){"use strict";function r(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(e){return e.replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function o(e){return new DOMParser().parseFromString(e,"text/html")}n.d(t,{ZP:function(){return r},qo:function(){return i},rg:function(){return o}})},4264:function(e,t,n){"use strict";n.d(t,{d0:function(){return s},uI:function(){return l}});var r=n(594421),i=n.n(r),o=n(359895);async function s(e){var t,n,r;let i=e=null!==(r=null===(n=(t=e).match(/\<iframe.+src\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/))||void 0===n?void 0:n[1])&&void 0!==r?r:t;if(i.includes("://")||(e=`https://${i}`),(i=i.toLowerCase()).includes("m.youtube"))return e.replace(/(m.youtube)/i,"youtube");if(i.includes("youtube.com")&&!i.includes(".com/embed"))return(e=e.replace(/(watch\?v=)/i,"").replace(/(.com\/)/i,".com/embed/")).split(/(&feature=youtu.be)/i)[0];if(i.includes("//youtu.be/"))return e.replace(/(\/\/youtu.be\/)/i,"//youtube.com/embed/");if(i.includes("vimeo.com")&&!i.includes("player.vimeo")){let[t,n]=(e=e.replace(/\/+$/g,"")).split(".com/")[1].split("/");return e=`https://player.vimeo.com/video/${t}${n?`?h=${n}`:""}`}if(i.includes("vidgrid.com/view")&&!i.includes("embed"))return(e=e.replace(/(view)/i,"embed")).replace(/(?=\/\?).+/i,"");if(i.includes("kaltura.com")&&!i.includes("embed"))return e=e.replace(/media\/.[^\/]*\//i,"embed/secure/iframe/entryId/");if(i.includes("panopto.com")&&!i.includes("Embed"))return e.replace(/Viewer/i,"Embed");if(i.includes("flipgrid.com")&&!i.includes("embed=true"))return i.includes("admin")&&(e=e.replace(/admin/i,"shorts").replace(/manage\/shorts/i,"watch")),e=e.replace(/\?\w+$/i,"?embed=true");if(i.includes("prezi.com")&&!i.includes("embed")){if(!i.includes("view")){let t=e.split("/");e=(t=t.splice(0,5)).join("/")}return e.endsWith("/")||(e=e.concat("/")),e.concat("embed")}return i.includes("voicethread.com")&&!i.includes("/app/player/?threadId=")?e.replace(/\/myvoice\/thread\//i,"/app/player/?threadId=").replace(/(\/[0-9]+){2}$/,""):i.includes("spotify.com")&&!i.includes("embed/")?(i.includes("track")?e=e.replace(/track/i,"embed/track"):i.includes("album")?e=e.replace(/album/i,"embed/album"):i.includes("playlist")?e=e.replace(/playlist/i,"embed/playlist"):i.includes("artist")?e=e.replace(/artist/i,"embed/artist"):i.includes("show")?e=e.replace(/show/i,"embed-podcast/show"):i.includes("episode")&&(e=e.replace(/episode/i,"embed-podcast/episode")),e.replace(/\?.+$/i,"")):i.includes("genial.ly")?e.replace(/\/[\w-]+$/i,""):i.includes("nearpod.com")?e.replace(/command\?puid/i,"?pin").replace(/&[=\w]+$/i,"&he=true"):i.includes("quizlet.com")&&!i.includes("/embed")?e.replace(/(.*\/\/quizlet.com\/)([a-zA-Z]+\/)?(\d+)\/.*/,"$1$3/flashcards/embed"):i.includes("edpuzzle.com")&&!i.includes("embed/media")?e.replace(/media/i,"embed/media"):i.includes("soundcloud.com")&&!i.includes("embed_code/key")||i.includes("slideshare.net")&&!i.includes("//api")?a(i):i.includes("h5p.org")&&!i.includes("/embed")?e.replace(/node/i,"h5p/embed"):i.includes("h5p.com")&&!i.includes("/embed")?e.concat("/embed"):i.includes("sharepoint.com")?i.includes("action=")?e.replace(/action=\w*/i,"action=embedview"):e+"&action=embedview":i.includes("microsoftstream.com")&&!i.includes("/embed/")?e.replace(/video/,"embed/video"):i.includes("miro.com")&&!i.includes("/live-embed/")?e.replace(/board/,"live-embed"):e}async function a(e){return e.includes("soundcloud.com")?i().get(`https://soundcloud.com/oembed?format=json&url=${e}`).then(e=>(0,o.rg)(e.data.html).getElementsByTagName("iframe")[0].src):e.includes("slideshare.net")?i().jsonp(`https://www.slideshare.net/api/oembed/2?url=${e}&format=jsonp`).then(e=>(0,o.rg)(e.html).getElementsByTagName("iframe")[0].src):void 0}function l(e,t){let n=e;return e&&0>e.indexOf("//")&&("/"!==e[0]&&(n=`/${e}`),n=t?t+e:window.location.origin+e),n}},682267:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});let r=[/edpuzzle/i,/flipgrid/i,/genial\.ly/i,/h5p/i,/kaltura/i,/microsoftstream/i,/miro/i,/nearpod/i,/panopto/i,/prezi/i,/quizlet/i,/sharepoint.+\/(?:\:[pwx]\:|.+&referrer=StreamWebApp)/i,/slideshare/i,/soundcloud/i,/spotify/i,/vidgrid/i,/vimeo\.com/i,/voicethread/i,/youtu\.be/i,/youtube\.com/i,/yuja\.com/i],i=e=>r.some(t=>t.test(e))},924980:function(e,t,n){"use strict";let r={analyticsEventAugmentor:n(213980).PropTypes.func.isRequired};t.Z=r},409780:function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}n.d(t,{Z:function(){return r}})},269191:function(e,t,n){"use strict";n.d(t,{$w:function(){return E},cO:function(){return d},gp:function(){return c}});var r=n(202784),i=n(725386),o=n(640411),s=n(139867),a=n(875365),l=n(270369);let u=r.createContext({capture:!1}),d=({capture:e=!1,children:t})=>{let n=(0,r.useMemo)(()=>({capture:e}),[e]);return r.createElement(u.Provider,{value:n},t)};function c(){let{capture:e}=(0,r.useContext)(u),{activate:t,cell:n,uncapture:s}=(0,i.Nz)(),[a,d]=(0,o.C)(null),{targetRefCb:c}=(0,l.O)("focusin",()=>{e&&t(!0)}),{targetRefCb:E}=(0,l.O)("focusout",()=>{s()});(0,r.useEffect)(()=>{var e;n.captured&&(null===(e=a.current)||void 0===e||e.focus())},[a,n.captured]);let p=(0,o.l)(d,c,E);return(0,r.useMemo)(()=>({controlRefCb:p}),[p])}function E(){let{cellRefCb:e}=function(){let{autoFocusRef:e,focusSignal:t,navigation:n}=(0,r.useContext)(a.hM),{activate:s,cell:u}=(0,i.Nz)(),[d,c]=(0,o.C)(null),{targetRefCb:E}=(0,l.O)("mousedown",e=>{n.isActivateCellEvent(e)&&s()}),{targetRefCb:p}=(0,l.O)("focusin",t=>{t.target===d.current&&(e.current=!0)}),{targetRefCb:m}=(0,l.O)("focusout",t=>{t.target===d.current&&(e.current=!1)});(0,r.useEffect)(()=>{var t;u.active&&e.current&&(null===(t=d.current)||void 0===t||t.focus())},[d,t]),(0,r.useEffect)(()=>{var t;e.current&&u.active&&!u.captured&&(null===(t=d.current)||void 0===t||t.focus())},[e,d,u.active,u.captured]);let h=(0,o.l)(p,m,c,E);return(0,r.useMemo)(()=>({cellRefCb:h}),[h])}(),{cellRefCb:t}=function(){let{capture:e,focus:t}=(0,r.useContext)(a.hM),{capture:n}=(0,r.useContext)(u),{capture:o,grid:d,uncapture:c}=(0,i.Nz)(),{targetRefCb:E}=(0,l.O)("keydown",r=>{!d.captured&&n&&e.isCaptureEvent(r)?(o(),(0,s.g)()):d.captured&&e.isUncaptureEvent(r)&&(c(),t(),(0,s.g)())});return(0,r.useMemo)(()=>({cellRefCb:E}),[E])}(),n=(0,o.l)(e,t);return(0,r.useMemo)(()=>({cellRefCb:n}),[n])}},875365:function(e,t,n){"use strict";n.d(t,{CY:function(){return h},Lr:function(){return m},Ls:function(){return p},hM:function(){return E},l7:function(){return d}});var r=n(465139),i=n(202784),o=n(337527),s=n(640411),a=n(139867),l=n(270369);let u={isActivateCellEvent:()=>!0,isNextCellEvent:e=>"ArrowRight"===e.key,isNextRowEvent:e=>"ArrowDown"===e.key,isPreviousCellEvent:e=>"ArrowLeft"===e.key,isPreviousRowEvent:e=>"ArrowUp"===e.key},d={isCaptureEvent:e=>"Enter"===e.key,isUncaptureEvent:e=>"Escape"===e.key},c={isSelectActiveRowEvent:e=>e.shiftKey&&" "===e.key||"Enter"===e.key,isSelectToggleEvent:e=>e.shiftKey},E=i.createContext({autoFocusRef:{current:!1},capture:d,focus:()=>void 0,focusSignal:0,navigation:u,selecting:!1,setSelecting:()=>void 0}),p=({capture:e=d,children:t,navigation:n=u,select:o=!1})=>{var s,a,l,p,m,h,I,b,g;let y=(0,i.useRef)(!1),[f,S]=(0,i.useState)(!1),[_,T]=(0,i.useState)(0),v=(0,r.zX)(null!==(s=n.isActivateCellEvent)&&void 0!==s?s:u.isActivateCellEvent),A=(0,r.zX)(null!==(a=n.isNextCellEvent)&&void 0!==a?a:u.isNextCellEvent),O=(0,r.zX)(null!==(l=n.isNextRowEvent)&&void 0!==l?l:u.isNextRowEvent),C=(0,r.zX)(null!==(p=n.isPreviousCellEvent)&&void 0!==p?p:u.isPreviousCellEvent),R=(0,r.zX)(null!==(m=n.isPreviousRowEvent)&&void 0!==m?m:u.isPreviousRowEvent),L=(0,i.useMemo)(()=>({isActivateCellEvent:v,isNextCellEvent:A,isNextRowEvent:O,isPreviousCellEvent:C,isPreviousRowEvent:R}),[v,A,O,C,R]),D=(0,r.zX)(null!==(h=e.isCaptureEvent)&&void 0!==h?h:d.isCaptureEvent),P=(0,r.zX)(null!==(I=e.isUncaptureEvent)&&void 0!==I?I:d.isCaptureEvent),N=(0,i.useMemo)(()=>({isCaptureEvent:D,isUncaptureEvent:P}),[D,P]),U=o?!0===o?c:o:void 0,w=(0,r.f0)(U?null!==(b=U.isSelectActiveRowEvent)&&void 0!==b?b:c.isSelectActiveRowEvent:void 0),k=(0,r.f0)(U?null!==(g=U.isSelectToggleEvent)&&void 0!==g?g:c.isSelectToggleEvent:void 0),M=(0,i.useMemo)(()=>{if(w&&k)return{isSelectActiveRowEvent:w,isSelectToggleEvent:k}},[w,k]),B=(0,r.zX)(()=>{y.current=!0,T(e=>e+1)}),G=(0,i.useMemo)(()=>({autoFocusRef:y,capture:N,focus:B,focusSignal:_,navigation:L,select:M,selecting:f,setSelecting:S}),[N,B,_,L,M,f]);return i.createElement(E.Provider,{value:G},t)};function m(){let{focus:e,selecting:t}=(0,i.useContext)(E),{grid:n}=(0,o.j5)();return(0,i.useMemo)(()=>({focus:e,selecting:t&&!n.captured}),[e,t,n.captured])}function h(){let{gridRefCb:e}=function(){let{grid:e}=(0,i.useContext)(o.Xb),{navigation:t}=(0,i.useContext)(E),{activateRelativeCell:n,activateRelativeRow:r}=(0,o.j5)(),{targetRefCb:s}=(0,l.O)("keydown",i=>{let o=e=>{e.prev!==e.next&&i.preventDefault(),(0,a.g)()};!e.captured&&(t.isNextCellEvent(i)?o(n(1)):t.isPreviousCellEvent(i)?o(n(-1)):t.isNextRowEvent(i)?o(r(1)):t.isPreviousRowEvent(i)&&o(r(-1)))});return(0,i.useMemo)(()=>({gridRefCb:s}),[s])}(),{gridRefCb:t}=function(){let{select:e,setSelecting:t}=(0,i.useContext)(E),{targetRefCb:n}=(0,l.O)("keydown",n=>{let r=null==e?void 0:e.isSelectToggleEvent(n);void 0!==r&&t(r)});return(0,i.useMemo)(()=>({gridRefCb:n}),[n])}(),n=(0,s.l)(e,t);return(0,i.useMemo)(()=>({gridRefCb:n}),[n])}},780127:function(e,t,n){"use strict";n.d(t,{Am:function(){return p},o8:function(){return c},og:function(){return E}});var r=n(465139),i=n(202784),o=n(391623),s=n(337527),a=n(139867),l=n(875365),u=n(270369);let d=i.createContext({addSelectListener:()=>void 0,onSelect:()=>void 0,removeSelectListener:()=>void 0,selectListeners:[]}),c=({children:e})=>{let[t,n]=(0,i.useState)([]),r=(0,i.useCallback)(e=>n(t=>t.concat(e)),[]),o=(0,i.useCallback)(()=>t.forEach(e=>e()),[t]),s=(0,i.useCallback)(e=>n(t=>t.filter(t=>t!==e)),[]),a=(0,i.useMemo)(()=>({addSelectListener:r,onSelect:o,removeSelectListener:s,selectListeners:t}),[r,o,s,t]);return i.createElement(d.Provider,{value:a},e)};function E({onSelect:e}){let{addSelectListener:t,removeSelectListener:n}=(0,i.useContext)(d),o=(0,r.f0)(e);(0,i.useEffect)(()=>{if(o)return t(o),()=>n(o)},[o,t,n])}function p(){return function(){let{grid:e}=(0,s.j5)(),{row:t}=(0,o._K)(),{select:n,selecting:c}=(0,i.useContext)(l.hM),{onSelect:E}=(0,i.useContext)(d);(0,i.useEffect)(()=>{n&&!e.captured&&t.active&&c&&E()},[t.active]);let{targetRefCb:p}=(0,u.O)("keydown",t=>{n&&!e.captured&&n.isSelectActiveRowEvent(t)&&(t.preventDefault(),E(),(0,a.g)())}),m=(0,r.zX)(e=>n?p(e):p(null));return(0,i.useMemo)(()=>({rowRefCb:m}),[m])}()}},270369:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(465139),i=n(202784),o=n(640411);function s(e,t,n){let[s,a]=(0,o.C)(null),l=(0,r.zX)(t);return(0,i.useEffect)(()=>{let t=s.current;function r(e){l.call(this,e)}return null==t||t.addEventListener(e,r,n),()=>null==t?void 0:t.removeEventListener(e,r,n)},[e,JSON.stringify(n)]),{targetRefCb:a}}},868682:function(e,t,n){"use strict";n.d(t,{B:function(){return s}});var r=n(202784),i=n(725386),o=n(731925);function s(){let{cell:{active:e,captured:t,index:n},row:{selected:s}}=(0,i.Nz)();return(0,r.useMemo)(()=>({props:(0,o.o)({...void 0!==s?{"aria-selected":s}:void 0,"aria-colindex":n,role:"gridcell",tabIndex:e&&!t?0:-1})}),[e,t,n,s])}},731925:function(e,t,n){"use strict";n.d(t,{o:function(){return i},v:function(){return o}});var r=n(202784);function i(e){return e}function o(){return(0,r.useMemo)(()=>({props:{role:"grid"}}),[])}},891774:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(202784),i=n(391623),o=n(731925);function s(){let{row:{selected:e,index:t}}=(0,i._K)();return(0,r.useMemo)(()=>({props:(0,o.o)({...void 0!==e?{"aria-selected":e}:void 0,"aria-rowindex":t,role:"row"})}),[t,e])}},725386:function(e,t,n){"use strict";n.d(t,{Nz:function(){return u},rz:function(){return l}});var r=n(202784),i=n(337527),o=n(391623),s=n(465139);let a=r.createContext({index:0,cell:{active:!1,captured:!1,index:0}}),l=({defaultActive:e,index:t,children:n})=>{let{getCell:s}=(0,r.useContext)(i.Xb),{index:l}=(0,r.useContext)(o.ue),u=(0,r.useRef)(e),d=(0,r.useMemo)(()=>({index:t,cell:s(l,t,{defaultActive:u.current})}),[t,s,l]);return r.createElement(a.Provider,{value:d},n)};function u(){let{activate:e,capture:t,grid:n}=(0,r.useContext)(i.Xb),{row:l}=(0,r.useContext)(o.ue),{cell:u}=(0,r.useContext)(a),d=(0,s.zX)((n=!1)=>{e(l.index,u.index),n&&t(!0)}),c=(0,s.zX)(()=>{u.active&&t(!0)}),E=(0,s.zX)(()=>{u.active&&t(!1)});return(0,r.useMemo)(()=>({activate:d,capture:c,cell:u,grid:n,row:l,uncapture:E}),[d,c,u,n,l,E])}},391623:function(e,t,n){"use strict";n.d(t,{_K:function(){return a},l2:function(){return s},ue:function(){return o}});var r=n(202784),i=n(337527);let o=r.createContext({index:0,row:{active:!1,captured:!1,index:0,selected:void 0}}),s=({defaultActive:e,index:t,children:n,selected:s})=>{let{getRow:a,select:l}=(0,r.useContext)(i.Xb),u=(0,r.useRef)(e),d=(0,r.useMemo)(()=>({index:t,row:a(t,{defaultActive:u.current})}),[t,a]);return(0,r.useEffect)(()=>{"boolean"==typeof s&&l(t,s)},[t,l,s]),r.createElement(o.Provider,{value:d},n)};function a(){let{grid:e}=(0,r.useContext)(i.Xb),{row:t}=(0,r.useContext)(o);return(0,r.useMemo)(()=>({grid:e,row:t}),[e,t])}},337527:function(e,t,n){"use strict";n.d(t,{OP:function(){return u},Xb:function(){return a},j5:function(){return d}});var r=n(465139),i=n(202784);function o(e){return Object.keys(e).map(e=>parseInt(e,10)).sort()}function s(e){return Object.entries(e).map(([e,t])=>[parseInt(e,10),t]).sort(([e],[t])=>e-t)}let a=i.createContext({activate:()=>({}),activateRelativeCell:()=>({}),activateRelativeRow:()=>({}),capture:()=>void 0,cells:{},getCell:()=>({active:!1,captured:!1,index:0}),getRow:()=>({active:!1,captured:!1,index:0,selected:void 0}),grid:{captured:!1},rows:{},select:()=>void 0,selected:{}});function l(e,t,n,r){var i,s,a;if(t)return t;let l=null!=n?n:null==r?void 0:r[0],u=null==r?void 0:r[1],d=o(e),c=void 0!==l?d.indexOf(l):-1,E=-1!==c?d[c]:null!==(i=d[0])&&void 0!==i?i:-1,p=o(null!==(s=e[E])&&void 0!==s?s:{}),m=void 0!==u?p.indexOf(u):-1;return{row:E,cell:-1!==m?p[m]:null!==(a=p[0])&&void 0!==a?a:-1}}let u=({children:e})=>{let[t,n]=(0,i.useState)(),[u,d]=(0,i.useState)(),[c,E]=(0,i.useState)(()=>({captured:!1})),[p,m]=(0,i.useState)({}),[h,I]=(0,i.useState)({}),b=(0,i.useRef)(),g=(0,i.useRef)(),y=(0,i.useCallback)((e,{defaultActive:t=!1}={})=>{if(e in p)return p[e];let n={active:!1,captured:!1,index:e,selected:!1};return t&&void 0===b.current&&(b.current=e),m(t=>({...t,[e]:n})),n},[p]),f=(0,i.useCallback)((e,t,{defaultActive:n=!1}={})=>{if(e in h&&t in h[e])return h[e][t];let r={active:!1,captured:!1,index:t};return n&&void 0===g.current&&(g.current=[e,t]),I(n=>({...n,[e]:{...n[e],[t]:r}})),r},[h]),S=(0,r.zX)(e=>{E(t=>t.captured!==e?{...t,captured:e}:t)}),_=(0,r.zX)((e,t)=>{d((n={})=>n[e]!==t?{...n,[e]:t}:n)}),T=(0,r.zX)((e,r,i=!1)=>{var o;let s=t?{row:y(t.row),cell:f(t.row,t.cell)}:void 0;if(!(null===(o=h[e])||void 0===o?void 0:o[r]))return{prev:s,next:s};let a={row:y(e),cell:f(e,r)};return s&&a.row===s.row&&a.cell===s.cell?{prev:s,next:s}:(S(i),n({row:e,cell:r}),{prev:s,next:a})}),v=(0,r.zX)((e,n)=>{let r=l(h,t,b.current,g.current),i=o(h[r.row]),s=i.indexOf(r.cell),a=Math.max(0,Math.min(i.length-1,s+e));return T(r.row,i[a],n)}),A=(0,r.zX)((e,n)=>{var r;let i=l(h,t,b.current,g.current),s=o(h),a=s.indexOf(i.row),u=Math.max(0,Math.min(s.length,a+e)),d=s[u],c=o(null!==(r=h[d])&&void 0!==r?r:{}).reverse(),E=c.findIndex(e=>e<=i.cell),p=-1===E?c.length-1:E;return T(d,c[p],n)});(0,i.useEffect)(()=>{var e;let{row:n=-1,cell:r=-1}=null!=t?t:{},i=p[n],o=null===(e=h[n])||void 0===e?void 0:e[r];E(e=>{var t,n;return(null===(t=e.active)||void 0===t?void 0:t.row)!==i||(null===(n=e.active)||void 0===n?void 0:n.cell)!==o?{...e,active:i&&o?{cell:o,row:i}:void 0}:e})},[t,h,p]),(0,i.useEffect)(()=>{let{row:e,cell:n}=l(h,t,b.current,g.current),r=(t,n)=>e>-1?t===e:0===n,i=(e,t)=>n>-1?e===n:0===t;m(e=>{let t=!1,n=s(e).reduce((e,[n,i],o)=>{let s=r(n,o),a=s&&c.captured,l=void 0===u?void 0:!0===u[n],d=i.active!==s||i.captured!==a||i.selected!==l;return t=t||d,{...e,[n]:d?{...i,active:s,captured:a,selected:l}:i}},{});return t?n:e}),I(e=>{let t=!1,n=s(e).reduce((e,[n,o],a)=>{let l=!1,u=r(n,a),d=s(o).reduce((e,[n,r],o)=>{let s=u&&i(n,o),a=s&&c.captured,d=r.active!==s||r.captured!==a;return l=l||d,t=t||d,{...e,[n]:d?{...r,active:s,captured:a}:r}},{});return{...e,[n]:l?d:o}},{});return t?n:e})},[t,h,c.captured,u]);let O=(0,i.useMemo)(()=>({activate:T,activateRelativeCell:v,activateRelativeRow:A,active:t,capture:S,cells:h,getCell:f,getRow:y,grid:c,rows:p,select:_,selected:u}),[T,v,A,t,S,c,h,p,f,y,_,u]);return i.createElement(a.Provider,{value:O},e)};function d(){let{activate:e,activateRelativeCell:t,activateRelativeRow:n,capture:r,grid:o}=(0,i.useContext)(a);return(0,i.useMemo)(()=>({activate:e,activateRelativeCell:t,activateRelativeRow:n,grid:o,uncapture:()=>r(!1)}),[e,t,n,r,o])}},640411:function(e,t,n){"use strict";n.d(t,{C:function(){return i},l:function(){return o}});var r=n(202784);function i(e){let t=(0,r.useRef)(e),n=(0,r.useCallback)(e=>{t.current=e},[]);return[t,n]}function o(...e){return(0,r.useCallback)(t=>{for(let n of e)n(t)},e)}},139867:function(e,t,n){"use strict";function r(e=window.document){e.body.classList.remove("hide-focus-outline")}n.d(t,{g:function(){return r}})},650619:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(()=>(0,r.createStyles)({itemSelection:{marginRight:"12px"}}))},878798:function(e,t,n){"use strict";n.d(t,{f:function(){return M}});var r=n(202784),i=n(441365),o=n(662176);let s="24px",a="28px",l="10px",u="40px",d=(0,o.makeStyles)(e=>(0,o.createStyles)({picker:{color:e.palette.primary.main,fontSize:e.typography.fontSizeMedium,backgroundColor:e.palette.common.white,position:"relative",textAlign:"left"},holder:{WebkitOverflowScrolling:"touch",boxSizing:"border-box",display:"none",[e.breakpoints.up("sm")]:{width:"224px"}},pickerIsOpened:{position:"relative","& $holder":{boxSizing:"border-box",display:"block"}},frame:{padding:"1px",position:"relative"},wrap:{margin:"-1px",padding:"10px",display:"flex"},dayPicker:{display:"block"},header:{display:"inline-flex",height:s,lineHeight:"44px",[e.breakpoints.up("sm")]:{lineHeight:s,flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},headerAxContainer:{[e.breakpoints.up("sm")]:{display:"flex",justifyContent:"center",alignItems:"center"}},month:{display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},year:{marginLeft:"10px",display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},table:{textAlign:"center",borderCollapse:"collapse",borderSpacing:"0",tableLayout:"fixed",fontSize:"inherit",marginTop:"5px",borderTop:`1px solid ${e.palette.border.main}`,"& td":{margin:0,padding:0,border:"1px solid transparent",background:"transparent",textAlign:"center","&:hover":{outline:"1px solid transparent"}}},day:{width:a,height:s,padding:0,lineHeight:s,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,borderRadius:"2px"},weekday:{width:a,height:"30px",padding:0,lineHeight:s,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold,"& > abbr[title]":{textDecoration:"none"}},dayIsToday:{fontWeight:e.typography.fontWeightBold,backgroundColor:"inherit",color:e.palette.primary.dark,border:"transparent",[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`},"& $dayIsHighlighted[aria-selected=true]":{color:e.palette.common.white,backgroundColor:e.palette.common.black,fontWeight:e.typography.fontWeightSemiBold,border:`2px solid ${e.palette.common.black}`}},dayIsDisabled:{visibility:"hidden"},dayIsEnabled:{"&:hover":{cursor:"pointer",background:e.palette.secondary.light},"&:active":{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dayIsHighlighted:{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold,"&:hover":{backgroundColor:e.palette.secondary.light,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}},"& span":{position:"absolute",margin:"-2px 0 0 -8px"}},pickerIsFocused:{"& $dayIsHighlighted":{cursor:"pointer",backgroundColor:e.palette.brand.main,"&:hover":{backgroundColor:e.palette.border.dark,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}}}},monthComponents:{display:"inline-flex",marginLeft:"3px"},yearComponents:{display:"inline-flex",marginLeft:"3px"},decadeComponents:{display:"inline-flex",marginLeft:"3px"},prevNext:{width:a,height:s,display:"block",textAlign:"center",lineHeight:s,fontSize:e.typography.fontSizeMedium,color:e.palette.primary.dark,position:"relative","&:hover":{color:e.palette.primary.dark,cursor:"pointer",outline:"1px solid transparent"},[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeMedium,width:"24px",minHeight:"24px",lineHeight:"24px"}},headerToggleView:{height:s,position:"absolute",width:"130px",cursor:"pointer",backgroundColor:"transparent",color:e.palette.primary.dark,fontSize:"20px",left:"auto",top:"auto",textAlign:"center",fontWeight:e.typography.fontWeightRegular,"&:focus":{backgroundColor:"transparent",position:"absolute"},"&:hover":{backgroundColor:"transparent"}},navContainer:{display:"flex",justifyContent:"center",padding:"0 10px"},currentDecadeYear:{display:"block",fontSize:"14px",color:e.palette.primary.main,lineHeight:"14px",marginBottom:"2px",textAlign:"center"},monthPickerCurrentYear:{display:"flex",alignItems:"center",fontSize:"18px",lineHeight:"1.4",marginBottom:0},optionGrid:{position:"relative",height:"210px",margin:"12px 0 0 0"},yearMonthOption:{width:"60px",height:"60px",lineHeight:"60px",cursor:"pointer",float:"left",margin:"0 10px 10px 0",fontSize:e.typography.fontSizeSmall,color:e.palette.primary.light,textAlign:"center",[e.breakpoints.up("sm")]:{width:u,height:u,lineHeight:u,margin:"0 11px 11px 0","&:hover":{outline:"1px solid transparent"},"&:nth-child(4n+4)":{margin:"0 0px 11px 0"}},"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold},"&:hover":{color:e.palette.primary.dark,outline:"1px solid transparent"}},goToday:{bottom:"9px",cursor:"pointer",color:e.palette.primary.main,height:"30px",lineHeight:"30px",padding:"0 10px",position:"absolute",right:"13px",width:"auto",fontSize:e.typography.fontSizeSmall,"&:hover":{color:e.palette.brand.main,outline:"1px solid transparent"},"&:active":{color:e.palette.primary.dark}},goTodaySpacing:{marginBottom:"30px"},isPickingYears:{"& $dayPicker":{display:"none"},"& $monthComponents":{display:"none"},"& $monthPicker":{display:"none"}},monthPickerVisible:{"& $dayPicker":{margin:`-${l} 0`,padding:`${l} 0`,boxSizing:"border-box",borderRight:`1px solid, ${e.palette.primary.light}`,width:"214px"},"& $monthPicker":{display:"block"},"& $optionGrid":{height:"150px"},"& $goToday":{boxSizing:"border-box",fontSize:"12px",height:s,lineHeight:s,padding:"0 10px",right:"10px",textAlign:"right",top:"199px"},"& $isPickingYears":{"& $dayPicker":{display:"block"},"& $monthComponents":{display:"block"},"& $monthPicker":{display:"none"}}},calendarsInline:{"& $wrap":{padding:"10px"},"& $holder":{width:"440px",height:"auto"},"& $table":{marginRight:"10px"},"& $monthPicker":{marginLeft:"10px"},"& $goToday":{right:"13px"}},nextPrevMonth:{display:"inline-block"},nextPrevDateDisabled:{visibility:"hidden"},itemIsHighlighted:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthIsCurrentMonth:{fontWeight:e.typography.fontWeightSemiBold,color:e.palette.primary.contrastText,backgroundColor:e.palette.brand.main,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthOption:{"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dateIsUnfocused:{cursor:"not-allowed",color:e.palette.action.disabled,fontWeight:e.typography.fontWeightRegular},topLeftCornerDate:{borderRadius:0},topRightCornerDate:{borderRadius:0},bottomLeftCornerDate:{borderRadius:0},bottomRightCornerDate:{borderRadius:0},singleTopDate:{borderRadius:0},singleBottomDate:{borderRadius:0},monthPicker:{},root:{boxSizing:"border-box",boxShadow:"none"}}));var c=n(464158),E=n(408687),p=n(675689),m=n(410628),h=n(755755),I=n(528187),b=n(502463),g=n(685014),y=n(663761),f=n(712414),S=n(108548),_=n(31307),T=n(906277);let v=e=>{let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current},A=e=>{let t=d(),{firstDayOfWeek:n,strings:o,navigatedDate:s,dateRangeType:a,dateTimeFormatter:l,onNavigateDate:u,onHeaderSelect:A,analyticsId:O,navigatedDayRef:C,restrictions:R,showGoToToday:L,goToTodayButtonRef:D,prevButtonRef:P}=e,N=(0,m.q)(),{isRtl:U}=(0,h.h)(),w="DatePickerDay-dayPicker",k="DatePickerDay-month",M="DatePickerDay-year",B=r.useCallback(()=>{u((0,I.Z)(s,1),!1)},[s,u]),G=r.useCallback(()=>{u((0,I.Z)(s,-1),!1)},[s,u]),V=r.useCallback(t=>{let{onSelectDate:n,dateRangeType:r,firstDayOfWeek:i,navigatedDate:o,autoNavigateOnSelection:s}=e,a=(0,E.e0)(t,r,i);if(n&&n(t,a),s&&t.getMonth()!==o.getMonth()){let e=(0,b.Z)(t,o);e<0?G():e>0&&B()}},[e,B,G]),x=r.useCallback(e=>{let{navigatedDate:t,selectedDate:n,dateRangeType:r,firstDayOfWeek:o,today:s,restrictions:a}=e,l=new Date(t.getFullYear(),t.getMonth(),1),u=s||new Date,d=[];for(;l.getDay()!==o;)l.setDate(l.getDate()-1);let c=!1,p=(0,E.e0)(n,r,o);for(let e=0;!c;e++){let e=[];c=!0;for(let n=0;n<7;n++){let n=new Date(l.toString()),r=!0;a&&(r=(0,E.sS)(n,{singleRestriction:a.singleRestriction})===i.M6.None);let o={key:l.toString(),date:l.getDate().toString(),originalDate:n,isEnabled:r,isInMonth:l.getMonth()===t.getMonth(),isToday:(0,E.aN)(u,l),isSelected:(0,E.le)(l,p),onSelected:()=>V(n)};e.push(o),o.isInMonth&&(c=!1),l.setDate(l.getDate()+1)}c||d.push(e)}return d},[V]),q="DatePickerDay-active",[Z,F]=r.useState(x(e)),H=v(e),K=r.useRef(null);function j(e,t){(t.key===_.s.Enter||" "===t.key)&&(t.preventDefault(),e())}return r.useEffect(()=>{H!==e&&F(x(e))},[e,x,H]),r.createElement("div",{"data-analytics-id":O,className:t.dayPicker,id:w},r.createElement("div",null,r.createElement("div",{className:t.currentDecadeYear,id:M},l.formatYear(s)),r.createElement("div",{className:t.navContainer},r.createElement(c.AnalyticsIconButton,{className:(0,T.Z)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,E.Bw)(R,s,i.NU.Month,!1)}),"aria-controls":w,"aria-label":o.prevMonthAriaLabel,onClick:G,onKeyDown:function(e){if(e.key===_.s.Tab&&e.shiftKey){if(L&&D.current){e.preventDefault(),D.current.focus();return}if(C.current){e.preventDefault(),C.current.focus();return}}j(G,e)},analyticsId:`${O}.prevMonth.button`,ref:P},r.createElement(p.TriangleLeft,null)),r.createElement("div",{className:t.header},r.createElement("div",{className:t.headerAxContainer,role:"status","aria-live":"assertive","aria-relevant":"text","aria-atomic":"true",id:k},A?null:r.createElement("div",{className:t.month},l.formatMonth(s,o))),A?r.createElement(c.AnalyticsDefaultButton,{className:t.headerToggleView,onClick:()=>A(!0),onKeyDown:function(e){j(()=>null==A?void 0:A(!0),e)},"aria-describedby":M,analyticsId:`${O}monthPicker`},l.formatMonth(s,o)):null),r.createElement(c.AnalyticsIconButton,{className:(0,T.Z)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,E.Bw)(R,s,i.NU.Month,!0)}),"aria-controls":w,"aria-label":o.nextMonthAriaLabel,onClick:B,onKeyDown:function(e){j(B,e)},analyticsId:`${O}.nextMonth.button`,ref:K},r.createElement(p.TriangleRight,null)))),r.createElement("table",{className:t.table,"aria-readonly":"true","aria-multiselectable":a===i.NU.Week?"true":"false","aria-labelledby":k,"aria-activedescendant":q,role:"grid"},r.createElement("thead",null,r.createElement("tr",null,o.shortDays.map((e,i)=>r.createElement("th",{className:t.weekday,scope:"col",key:i,"aria-label":o.days[(i+n)%7],role:"columnheader",id:`th${i}`},r.createElement("abbr",null,o.shortDays[(i+n)%7]))))),r.createElement("tbody",null,Z.map((n,d)=>r.createElement("tr",{key:d},n.map((n,d)=>{var c,p;return r.createElement("td",{key:n.key,role:"gridcell"},r.createElement("div",{className:(0,T.Z)(t.day,{[t.dayIsEnabled]:n.isEnabled,[t.dayIsDisabled]:!!R&&!n.isInMonth,[t.dateIsUnfocused]:!(n.isInMonth&&n.isEnabled),[t.dayIsToday]:n.isToday,[t.dayIsHighlighted]:n.isSelected&&a===i.NU.Day,[t.itemIsHighlighted]:(0,E.aN)(s,n.originalDate)}),role:"button","data-analytics-id":`${O}.daySelected`,onClick:n.isEnabled?n.onSelected:void 0,onKeyDown:(c=n.originalDate,p=n.isEnabled,t=>{if((t.key===_.s.Enter||" "===t.key)&&p){V(c);return}if(t.key===_.s.Tab){if(!t.shiftKey){if(L&&D.current){t.preventDefault(),D.current.focus();return}if(P.current){t.preventDefault(),P.current.focus();return}}if(t.shiftKey&&K.current){t.preventDefault(),K.current.focus();return}}!function(t,n){let{navigatedDate:r,restrictions:o}=e,s=n;t.key===_.s.ArrowUp?s=(0,g.Z)(n,-1):t.key===_.s.ArrowDown?s=(0,g.Z)(n,1):t.key===_.s.ArrowRight?s=(0,y.Z)(n,U()?-1:1):t.key===_.s.ArrowLeft?s=(0,y.Z)(n,U()?1:-1):t.altKey&&t.key===_.s.PageUp?s=(0,I.Z)(n,-12):t.altKey&&t.key===_.s.PageDown?s=(0,I.Z)(n,12):t.key===_.s.PageUp?s=(0,I.Z)(n,-1):t.key===_.s.PageDown?s=(0,I.Z)(n,1):t.key===_.s.Home?s=(0,f.Z)(n):t.key===_.s.End&&(s=(0,S.Z)(n)),(s.getMonth()===r.getMonth()||(0,E.Bw)(o,r,i.NU.Month,s>r))&&u(s,!0),t.preventDefault()}(t,c)}),"aria-current":n.isToday?"date":void 0,"aria-label":function(e,t){let n=l.formatMonthDayYear(e.originalDate,o);return t?N("cr.components.calendar.ariaSelectedDateLabel",{selectedDate:n}):n}(n,n.isSelected),"aria-describedby":`th${d}`,"aria-disabled":!n.isEnabled,id:(0,E.aN)(s,n.originalDate)?q:void 0,"data-is-focusable":!0,ref:(0,E.aN)(s,n.originalDate)?C:void 0,key:(0,E.aN)(s,n.originalDate)?"navigatedDay":void 0},r.createElement("span",null,l.formatDay(n.originalDate))))}))))))};var O=n(852946),C=n(22110),R=n(158550),L=n(464447);let D=e=>{let{index:t,month:n,navigatedDate:o,strings:s,highlightCurrentMonth:a,analyticsEventAugmentor:l,navigatedMonthRef:u,prevYearButtonRef:c,nextYearButtonRef:p,selectMonthCallbacks:b,dateTimeFormatter:g,restrictions:y,analyticsId:v,showGoToToday:A,goToTodayButtonRef:O}=e,C=d(),D=(0,m.q)(),{isRtl:P}=(0,h.h)(),N=function(t){let{restrictions:n,navigatedDate:r}=e;if(n&&!(0,L.Z)(new Date(r.getFullYear(),t))){let e=new Date(r.getFullYear(),t,1),o=(0,f.Z)(e),s=(0,S.Z)(e);return(0,E.sS)(o,{singleRestriction:n.singleRestriction})===i.M6.None||(0,E.sS)(s,{singleRestriction:n.singleRestriction})===i.M6.None}return!0}(t),U=(0,L.Z)(new Date(o.getFullYear(),t));return r.createElement("span",{role:"button",className:(0,T.Z)(C.monthOption,C.yearMonthOption,{[C.monthIsCurrentMonth]:a&&U,[C.itemIsHighlighted]:a&&o.getMonth()===t&&N,[C.dateIsUnfocused]:!N}),key:t,onClick:N?l(R.AnalyticsEventTypes.CLICK_EVENT,b[t],`${v}.monthSelected`):void 0,onKeyDown:n=>{if((n.key===_.s.Enter||" "===n.key)&&N){b[t]();return}if(n.key===_.s.Tab){if(n.shiftKey){if(n.shiftKey&&p.current){n.preventDefault(),p.current.focus();return}}else{if(A&&O.current){n.preventDefault(),O.current.focus();return}if(c.current){n.preventDefault(),c.current.focus();return}}}!function(t,n){let{onNavigateDate:r,navigatedDate:o}=e,s=n;t.key===_.s.ArrowUp?s=(0,I.Z)(n,-4):t.key===_.s.ArrowDown?s=(0,I.Z)(n,4):t.key===_.s.ArrowRight?s=(0,I.Z)(n,P()?-1:1):t.key===_.s.ArrowLeft?s=(0,I.Z)(n,P()?1:-1):t.altKey&&t.key===_.s.PageUp?s=(0,I.Z)(n,-12):t.altKey&&t.key===_.s.PageDown?s=(0,I.Z)(n,12):t.key===_.s.PageUp?s=(0,I.Z)(n,-12):t.key===_.s.PageDown?s=(0,I.Z)(n,12):t.key===_.s.Home?s=(0,f.Z)(n):t.key===_.s.End&&(s=(0,S.Z)(n)),(s.getFullYear()===o.getFullYear()||(0,E.Bw)(y,o,i.NU.Year,s>o))&&r(s,!0),t.preventDefault()}(n,o)},"data-analytics-id":`${v}.monthSelected`,"aria-current":U?"date":void 0,"aria-label":function(e,t){let n=o.getMonth()===e,r=function(e,t){let n=new Date(2019,e,1);return g.formatMonth(n,t)}(e,t);return n?D("cr.components.calendar.ariaSelectedDateLabel",{selectedDate:r}):r}(t,s),"aria-describedby":"year_","aria-disabled":!N,"data-is-focusable":!0,ref:o.getMonth()===t?u:void 0},n)},P=(0,R.withAnalytics)(e=>{let t=d(),{navigatedDate:n,strings:o,highlightCurrentMonth:s,dateTimeFormatter:a,navigatedMonthRef:l,analyticsEventAugmentor:u,analyticsId:m,restrictions:h,onNavigateDate:I,showGoToToday:b,goToTodayButtonRef:g,prevButtonRef:y}=e,f=[],S=r.useRef(null);function v(e,t){(t.key===_.s.Enter||" "===t.key)&&(t.preventDefault(),e())}function A(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,O.Z)(t,1),!1)}function R(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,O.Z)(t,-1),!1)}function L(){let{onHeaderSelect:t}=e;t&&t(!0)}return o.shortMonths.map((t,n)=>f[n]=()=>(function(t){let{navigatedDate:n,onNavigateDate:r,onHeaderSelect:i}=e;i&&i(!0),r((0,C.Z)(n,t),!0)})(n)),r.createElement("div",{"data-analytics-id":m,className:t.monthPicker},r.createElement("div",{className:t.navContainer},r.createElement(c.AnalyticsIconButton,{className:(0,T.Z)(t.prevNext,t.nextPrevMonth,{[t.nextPrevDateDisabled]:!(0,E.Bw)(h,n,i.NU.Year,!1)}),"aria-label":o.prevYearAriaLabel,onClick:R,onKeyDown:function(e){if(e.key===_.s.Tab&&e.shiftKey){if(b&&g.current){e.preventDefault(),g.current.focus();return}if(l.current){e.preventDefault(),l.current.focus();return}}v(R,e)},analyticsId:`${m}.prevYear.button`,ref:y},r.createElement(p.TriangleLeft,null)),r.createElement("div",{className:t.header},r.createElement("div",{role:e.onHeaderSelect?"button":void 0,tabIndex:e.onHeaderSelect?0:-1,onClick:e.onHeaderSelect?L:void 0,onKeyDown:function(t){v(()=>e.onHeaderSelect&&L(),t)},"data-analytics-id":`${m}.headerToggle`,className:e.onHeaderSelect?t.headerToggleView:(0,T.Z)(t.currentDecadeYear,t.monthPickerCurrentYear),id:"year_"},a.formatYear(n))),r.createElement(c.AnalyticsIconButton,{className:(0,T.Z)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,E.Bw)(h,n,i.NU.Year,!0)}),"aria-label":o.nextYearAriaLabel,onClick:A,onKeyDown:function(e){v(A,e)},analyticsId:`${m}nextYear.button`,ref:S},r.createElement(p.TriangleRight,null))),r.createElement("div",{className:t.optionGrid,onFocus:function(){l.current&&(l.current.tabIndex=0,l.current.focus())},tabIndex:0},o.shortMonths.map((e,t)=>r.createElement(D,{key:t,month:e,index:t,highlightCurrentMonth:s,navigatedDate:n,navigatedMonthRef:l,prevYearButtonRef:y,nextYearButtonRef:S,selectMonthCallbacks:f,strings:o,analyticsId:m,dateTimeFormatter:a,onNavigateDate:I,analyticsEventAugmentor:u,restrictions:h,showGoToToday:b,goToTodayButtonRef:g}))))});var N=n(310405);let U={leftNavigation:"Up",rightNavigation:"Down"},w=e=>{let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current},k={formatMonthDayYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`,formatMonthYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getFullYear()}`,formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:(e,t)=>t?t(e.getDate()):e.getDate().toString(),formatYear:(e,t)=>t?t(e.getFullYear()):e.getFullYear().toString()},M=r.forwardRef((e,t)=>{var n;let o=d(),s=(0,m.q)(),{showMonthPickerAsOverlay:a=!1,today:l=(0,N.Z)(new Date),firstDayOfWeek:u=i.eO.Sunday,dateRangeType:c=i.NU.Day,autoNavigateOnSelection:p=!1,showGoToToday:h=!0,highlightCurrentMonth:I=!1,navigationIcons:b=U,dateTimeFormatter:g=k,analyticsId:y,isMonthPickerVisible:f=!0,isDayPickerVisible:S=!0,restrictions:v}=e,O=r.useRef(null),C=r.useRef(null),R=r.useRef(null),L=r.useRef(null),D=e.value&&!isNaN(e.value.getTime())?e.value:e.today||(0,N.Z)(new Date),[M,B]=r.useState(D),[G,V]=r.useState(D),[x,q]=r.useState(!0),[Z,F]=r.useState(!a&&f),[H,K]=r.useState(!!a||S),j=w(e);function Q(e,t){V(e),q(t)}function Y(t,n){let{onSelectDate:r}=e;B(t),r&&r(t,n)}r.useEffect(()=>{setTimeout(()=>{x&&(C.current?(C.current.tabIndex=0,C.current.focus()):O.current&&(O.current.tabIndex=0,O.current.focus()),q(!1))})},[x,C,O]),r.useEffect(()=>{if(j!==e){let{autoNavigateOnSelection:t,value:n=new Date}=e;t&&(0,E.aN)(n,(null==j?void 0:j.value)?j.value:n)&&V(n),B(n||l)}},[e,j,l]),r.useImperativeHandle(t,()=>({calendarFocus:()=>{C.current&&(C.current.tabIndex=0)}}));let z=a?function(e){K(!H),F(!Z),e&&q(!0)}:void 0;function W(){let{today:t=(0,N.Z)(new Date)}=e,n=(0,E.e0)(t,i.NU.Day,i.eO.Sunday);Y(t,n)}let $=null!==(n=e.strings)&&void 0!==n?n:{months:[s("cr.components.calendar.strings.months.january"),s("cr.components.calendar.strings.months.february"),s("cr.components.calendar.strings.months.march"),s("cr.components.calendar.strings.months.april"),s("cr.components.calendar.strings.months.may"),s("cr.components.calendar.strings.months.june"),s("cr.components.calendar.strings.months.july"),s("cr.components.calendar.strings.months.august"),s("cr.components.calendar.strings.months.september"),s("cr.components.calendar.strings.months.october"),s("cr.components.calendar.strings.months.november"),s("cr.components.calendar.strings.months.december")],shortMonths:[s("cr.components.calendar.strings.shortMonths.january"),s("cr.components.calendar.strings.shortMonths.february"),s("cr.components.calendar.strings.shortMonths.march"),s("cr.components.calendar.strings.shortMonths.april"),s("cr.components.calendar.strings.shortMonths.may"),s("cr.components.calendar.strings.shortMonths.june"),s("cr.components.calendar.strings.shortMonths.july"),s("cr.components.calendar.strings.shortMonths.august"),s("cr.components.calendar.strings.shortMonths.september"),s("cr.components.calendar.strings.shortMonths.october"),s("cr.components.calendar.strings.shortMonths.november"),s("cr.components.calendar.strings.shortMonths.december")],days:[s("cr.components.calendar.strings.days.sunday"),s("cr.components.calendar.strings.days.monday"),s("cr.components.calendar.strings.days.tuesday"),s("cr.components.calendar.strings.days.wednesday"),s("cr.components.calendar.strings.days.thursday"),s("cr.components.calendar.strings.days.friday"),s("cr.components.calendar.strings.days.saturday")],shortDays:[s("cr.components.calendar.strings.shortDays.sunday"),s("cr.components.calendar.strings.shortDays.monday"),s("cr.components.calendar.strings.shortDays.tuesday"),s("cr.components.calendar.strings.shortDays.wednesday"),s("cr.components.calendar.strings.shortDays.thursday"),s("cr.components.calendar.strings.shortDays.friday"),s("cr.components.calendar.strings.shortDays.saturday")],goToToday:s("cr.components.calendar.strings.goToToday"),prevMonthAriaLabel:s("cr.components.calendar.strings.prevMonthAriaLabel"),nextMonthAriaLabel:s("cr.components.calendar.strings.nextMonthAriaLabel"),prevYearAriaLabel:s("cr.components.calendar.strings.prevYearAriaLabel"),nextYearAriaLabel:s("cr.components.calendar.strings.nextYearAriaLabel")};return r.createElement("div",{"data-analytics-id":y,className:(0,T.Z)("ms-DatePicker",o.root),role:"application","aria-label":s("cr.components.calendar.ariaLabelCalendar")},r.createElement("div",{className:(0,T.Z)(o.picker,o.pickerIsOpened,o.pickerIsFocused,Z&&o.monthPickerVisible,Z&&H&&o.calendarsInline)},r.createElement("div",{className:o.holder,onKeyDown:function(t){switch(t.key){case _.s.Enter:case _.s.Backspace:t.preventDefault();break;case _.s.Escape:var n;null===(n=e.onDismiss)||void 0===n||n.call(e)}}},r.createElement("div",{className:o.frame},r.createElement("div",{className:(0,T.Z)(o.wrap,{[o.goTodaySpacing]:h||v})},H&&r.createElement(A,{selectedDate:M,navigatedDate:G,today:l,onSelectDate:Y,onNavigateDate:Q,firstDayOfWeek:u,dateRangeType:c,autoNavigateOnSelection:p,strings:$,onHeaderSelect:z,navigationIcons:b,dateTimeFormatter:g,navigatedDayRef:C,analyticsId:`${y}.dayPicker`,restrictions:v,showGoToToday:h,goToTodayButtonRef:R,prevButtonRef:L}),Z&&r.createElement(P,{navigatedDate:G,strings:$,onSelectDate:Y,onNavigateDate:Q,highlightCurrentMonth:I,onHeaderSelect:z,navigationIcons:b,dateTimeFormatter:g,navigatedMonthRef:O,analyticsId:`${y}.monthPicker`,restrictions:v,showGoToToday:h,goToTodayButtonRef:R,prevButtonRef:L}),h&&r.createElement("span",{"data-analytics-id":`${y}.todayButton`,role:"button",className:o.goToday,onClick:W,onKeyDown:function(e){e.key===_.s.Enter||" "===e.key?(e.preventDefault(),W()):e.key===_.s.Tab&&!e.shiftKey&&L.current&&(e.preventDefault(),L.current.focus())},ref:R,tabIndex:0},$.goToToday))))))})},568533:function(e,t,n){"use strict";n.d(t,{e:function(){return r.eO}});var r=n(441365)},408687:function(e,t,n){"use strict";n.d(t,{aN:function(){return y},sS:function(){return v},e0:function(){return f},le:function(){return S},Bw:function(){return A},VH:function(){return T}});var r=n(441365),i=n(502463),o=n(310405),s=n(663761),a=n(149122),l=n(712414),u=n(528187),d=n(481290),c=n(852946),E=n(908849),p=n(250356),m=n(692082),h=n(793399),I=n(108548),b=n(497852),g={DaysInOneWeek:7};function y(e,t){return 0===(0,i.Z)((0,o.Z)(e),(0,o.Z)(t))}function f(e,t,n,i){let E;let p=[],m=null;switch(i||(i=[r.eO.Monday,r.eO.Tuesday,r.eO.Wednesday,r.eO.Thursday,r.eO.Friday]),t){case r.NU.Day:E=(0,o.Z)(e),m=(0,s.Z)(E,1);break;case r.NU.Week:case r.NU.WorkWeek:E=(0,a.Z)((0,o.Z)(e),{weekStartsOn:n}),m=(0,s.Z)(E,g.DaysInOneWeek);break;case r.NU.Month:E=(0,l.Z)(e),m=(0,u.Z)(E,1);break;case r.NU.Year:E=(0,d.Z)(e),m=(0,c.Z)(E,1);break;default:return function(e){throw Error("Unexpected object: "+e)}(t)}let h=E;do t!==r.NU.WorkWeek?p.push(h):i.includes(h.getDay())&&p.push(h),h=(0,s.Z)(h,1);while(!y(h,m));return p}function S(e,t){for(let n of t)if(y(e,n))return!0;return!1}function _(e){switch(e){case r.NU.Day:return E.Z;case r.NU.Week:return p.Z;case r.NU.Month:return m.Z;case r.NU.Year:return h.Z;default:return E.Z}}function T(e){return e!==r.M6.None&&(e===r.M6.DateIsBefore||e===r.M6.DateIsAfter||e===r.M6.OutOfBounds||e===r.M6.SameDate)}function v(e,t){if(!e||"string"==typeof e)return r.M6.Invalid;if(!t)return r.M6.None;let{singleRestriction:n,rangeRestriction:i}=t,s=(0,o.Z)(e);if(n){let{maxPastBound:e,allowFutureDates:t,rangeType:i}=n;if(!t&&s.getTime()>Date.now())return r.M6.FutureDate;let o=_(i)(new Date,s);if("number"==typeof e&&o>e)return r.M6.MaxPastBound}if(i){let{referenceDate:e,isRangeBefore:t,rangeLimit:n,rangeType:a,allowSameDate:l}=i,u=(0,o.Z)(e);if(!l&&y(s,u))return r.M6.SameDate;let d=_(a)(s,u);if(void 0===t&&(d<-n||d>n))return r.M6.OutOfBounds;if(t){if(s>u)return r.M6.DateIsAfter;if(d<-n)return r.M6.OutOfBounds}else{if(s<u)return r.M6.DateIsBefore;if(d>n)return r.M6.OutOfBounds}}return r.M6.None}function A(e,t,n,i){if(!e)return!0;let o=n===r.NU.Month?u.Z:c.Z;return v((n===r.NU.Month?i?l.Z:I.Z:i?d.Z:b.Z)(o(t,i?1:-1)),{singleRestriction:e.singleRestriction})===r.M6.None}},441365:function(e,t,n){"use strict";var r,i,o,s,a,l,u,d,c,E;n.d(t,{M6:function(){return a},NU:function(){return s},eO:function(){return r}}),(l=r||(r={}))[l.Sunday=0]="Sunday",l[l.Monday=1]="Monday",l[l.Tuesday=2]="Tuesday",l[l.Wednesday=3]="Wednesday",l[l.Thursday=4]="Thursday",l[l.Friday=5]="Friday",l[l.Saturday=6]="Saturday",(u=i||(i={}))[u.January=0]="January",u[u.February=1]="February",u[u.March=2]="March",u[u.April=3]="April",u[u.May=4]="May",u[u.June=5]="June",u[u.July=6]="July",u[u.August=7]="August",u[u.September=8]="September",u[u.October=9]="October",u[u.November=10]="November",u[u.December=11]="December",(d=o||(o={}))[d.FirstDay=0]="FirstDay",d[d.FirstFullWeek=1]="FirstFullWeek",d[d.FirstFourDayWeek=2]="FirstFourDayWeek",(c=s||(s={})).Day="day",c.Week="week",c.Month="month",c.WorkWeek="workWeek",c.Year="year",(E=a||(a={})).OutOfBounds="OutOfBounds",E.DateIsBefore="DateIsBefore",E.DateIsAfter="DateIsAfter",E.MaxPastBound="MaxPastBound",E.FutureDate="FutureDate",E.SameDate="SameDate",E.Invalid="Invalid",E.Empty="Empty",E.None="None"},818964:function(e,t,n){"use strict";n.d(t,{K7:function(){return i},W5:function(){return d}});var r,i,o=n(202784),s=n(906277),a=n(675689),l=n(662176);(r=i||(i={})).Down="down",r.Right="right";let u=(0,l.makeStyles)(e=>({container:{padding:"0 16px",display:"none",[e.breakpoints.up("sm")]:{display:"flex"}},alwaysVisible:{display:"flex"},smallAndMediumOnlyContainer:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},chevron:{transition:"color 250ms cubic-bezier(0.55, 0, 0.1, 1), transform 250ms cubic-bezier(0.55, 0, 0.1, 1)",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}}})),d=e=>{let{open:t,hideOnDesktop:n,useSmallIcon:r,alwaysVisible:l,className:d,orientation:c}=e,E=u(e),p=(e=i.Down,n)=>{if(e===i.Right){let e=n?a.ChevronRightSpecial:a.ChevronRight;return o.createElement(e,{className:E.chevron,style:{...t&&{transform:"rotate(90deg)"}},isDirectional:!0})}let r=n?a.ChevronDownSpecial:a.ChevronDown;return o.createElement(r,{className:E.chevron,style:{...t&&{transform:"rotate(180deg)"}},isDirectional:!1})};return o.createElement("div",{className:(0,s.Z)(E.container,n&&E.smallAndMediumOnlyContainer,l&&E.alwaysVisible,d)},p(c,r))}},531520:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({button:{minWidth:"auto",".panel-header &":{padding:e.spacing(1,2)}},startIconCollapsed:{margin:0}}))},679915:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(202784),i=n(238136);let o=e=>{switch(e.name){case"pdf":return r.createElement(i.Pdf,{className:e.iconClass});case"presentation":return r.createElement(i.Presentation,{className:e.iconClass});case"spreadsheet":return r.createElement(i.Spreadsheet,{className:e.iconClass});case"zip":return r.createElement(i.Zip,{className:e.iconClass});case"audio":return r.createElement(i.Audio,{className:e.iconClass});case"photo":return r.createElement(i.Photo,{className:e.iconClass});case"video":return r.createElement(i.Video,{className:e.iconClass});case"document-text":return r.createElement(i.DocumentText,{className:e.iconClass})}return r.createElement(i.DocumentBlank,{className:e.iconClass})}},331196:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({root:{position:"relative"},input:{},searchButton:{height:"40px",width:"40px"},internalInput:{marginBottom:"0 !important",border:"none !important"},inputAdorment:{paddingRight:"0 !important"},popperContainer:{boxSizing:"border-box",borderStyle:"solid",borderWidth:"1px",borderColor:e.palette.border.main,boxShadow:`${e.palette.action.focus} 0px 0px 0px 4px`,borderRadius:"2px",zIndex:1e4},errorMessage:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightMedium,margin:"0",paddingTop:e.spacing(.75),display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(.75)}}}))},433477:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var r=n(441365);function i(e,t,n,i,o,s,a){var l,u,d,c,E,p,m,h,I,b,g,y,f;if(o===r.M6.Invalid)return null!=i?i:s("cr.components.calendar.validate.invalid",{labelName:null!=e?e:t,format:s("components.directives.datepicker.dateFormatPlaceholder")});if(o===r.M6.Empty)return null!=n?n:s("cr.components.calendar.validate.empty",{labelName:null!=e?e:t});if(a){if(a.rangeRestriction){if(o===r.M6.OutOfBounds)return null!==(u=null===(l=a.errorStrings)||void 0===l?void 0:l.outOfBounds)&&void 0!==u?u:s("cr.components.calendar.validate.outOfBounds",{rangeLimit:s(`global.timeSpan.${a.rangeRestriction.rangeType}.plural`,{months:a.rangeRestriction.rangeLimit,years:a.rangeRestriction.rangeLimit,days:a.rangeRestriction.rangeLimit})});if(o===r.M6.DateIsBefore)return null!==(c=null===(d=a.errorStrings)||void 0===d?void 0:d.dateIsBefore)&&void 0!==c?c:s("cr.components.calendar.validate.dateIsBefore",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel});if(o===r.M6.DateIsAfter)return null!==(p=null===(E=a.errorStrings)||void 0===E?void 0:E.dateIsAfter)&&void 0!==p?p:s("cr.components.calendar.validate.dateIsAfter",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel});if(o===r.M6.SameDate)return null!==(h=null===(m=a.errorStrings)||void 0===m?void 0:m.sameDate)&&void 0!==h?h:s("cr.components.calendar.validate.sameDate",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel})}if(a.singleRestriction){if(o===r.M6.MaxPastBound)return null!==(b=null===(I=a.errorStrings)||void 0===I?void 0:I.maxPastBound)&&void 0!==b?b:s("cr.components.calendar.validate.maxPastBound",{limit:s(`global.timeSpan.${null!==(g=a.singleRestriction.rangeType)&&void 0!==g?g:r.NU.Day}.plural`,{months:a.singleRestriction.maxPastBound,years:a.singleRestriction.maxPastBound,days:a.singleRestriction.maxPastBound})});if(o===r.M6.FutureDate)return null!==(f=null===(y=a.errorStrings)||void 0===y?void 0:y.futureDate)&&void 0!==f?f:s("cr.components.calendar.validate.futureDate",{labelName:e})}}return""}},971260:function(e,t,n){"use strict";n.d(t,{K:function(){return h}});var r=n(202784),i=n(464158),o=n(662176),s=n(465139),a=n(410628),l=n(675689);let u=(0,o.makeStyles)(e=>({container:{color:e.palette.error.main,display:"flex",alignItems:"center",gap:"4px"}})),d=e=>{let{charactersLength:t,maxCharactersLength:n,charactersRemainingThreshold:i,id:o}=e,s=u(),d=(0,a.q)(),c=n-t;return c>i?null:r.createElement("div",{className:s.container,role:"alert"},r.createElement(l.Attention,null),r.createElement("span",{id:o,"aria-live":"assertive",role:"alert"},d("cr.components.charactersLeft.charactersLeft",{left:c})))};var c=n(593370),E=n(64191),p=n(215343);let m=(0,o.makeStyles)({altTextInput:{marginTop:"16px"},checkbox:E.J.checkboxMarginFix,isDecorativeHelpBlock:{marginInlineStart:"10px"},isDecorativeHelp:{marginBlockStart:"0px"}}),h=(0,r.memo)(({analyticsId:e,canEdit:t,canMarkAsDecorative:n,isDecorative:o,onIsDecorativeChanged:l,altText:u,maxAltTextLength:E,onAltTextChanged:h})=>{let I=(0,s.Me)(),b=m(),g=(0,p.T)(),y=(0,a.q)(),[f,S]=(0,r.useState)(u);return(0,r.useEffect)(()=>{S(u)},[u]),r.createElement(r.Fragment,null,r.createElement(i.AnalyticsTypography,{variant:"h2"},y("cr.components.fileAccessibilitySettings.title")),r.createElement(i.AnalyticsTypography,{variant:"caption"},y("cr.components.fileAccessibilitySettings.description",{helpLink:r.createElement(i.AnalyticsLink,{href:y("cr.components.fileAccessibilitySettings.help.link"),analyticsId:`${e}.ax.help.link`,target:"_blank"},y("cr.components.fileAccessibilitySettings.help.label"))})),r.createElement(i.AnalyticsTextField,{id:`${I}-alt-text`,analyticsId:`${e}.altText.input.text`,label:y("cr.components.fileAccessibilitySettings.altText.label"),placeholder:y("cr.components.fileAccessibilitySettings.altText.placeholder"),multiline:!0,minRows:3,fullWidth:!0,disabled:o||!t,value:f,className:b.altTextInput,InputLabelProps:{htmlFor:`${I}-alt-text`},inputProps:{maxLength:E,"aria-describedby":`${I}-chars-remaining`,className:g.multilineTextFieldBorderFix},onChange:e=>{let t=e.target.value;S(t),h(t)}}),!o&&r.createElement(d,{id:`${I}-chars-remaining`,charactersLength:u.length,maxCharactersLength:E,charactersRemainingThreshold:10}),n&&r.createElement(r.Fragment,null,r.createElement(i.AnalyticsFormControlLabel,{analyticsId:`${e}.markDecorative.input.checkboxLabel`,className:b.checkbox,label:y("cr.components.fileAccessibilitySettings.markAsDecorative.label"),disabled:!t,control:r.createElement(i.AnalyticsCheckbox,{analyticsId:`${e}.markDecorative.input.checkbox`,checked:o,onChange:e=>l(e.target.checked),inputProps:{"aria-describedby":o?`${I}-decorative`:void 0}})}),o&&r.createElement(c.o,{className:b.isDecorativeHelpBlock},r.createElement(i.AnalyticsFormHelperText,{id:`${I}-decorative`,analyticsId:`${e}.decorative.label`,className:b.isDecorativeHelp},y("cr.components.fileAccessibilitySettings.markAsDecorative.help")))))});h.displayName="FileInputAccessibilitySettings"},913250:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(202784),i=n(609582),o=n(906277),s=n(791235),a=n(662176);let l=(0,a.makeStyles)(e=>(0,a.createStyles)({fileViewerContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& img":{maxHeight:"100%",maxWidth:"100%"},"& video":{maxHeight:"100%",maxWidth:"100%",display:"inline-block",marginBottom:"-5px"},"& audio":{width:"100%",display:"inline-block",marginBottom:"-6px"},"& iframe":{width:"100%",height:"100%",minHeight:"500px",[e.breakpoints.up("sm")]:{minHeight:"700px"},[e.breakpoints.up("md")]:{minHeight:"880px"},borderWidth:1,borderStyle:"solid",borderColor:e.palette.border.main}},fileViewerContainerImage:{alignItems:"stretch","& div":{backgroundColor:"unset",display:"flex"}},fileViewerContainerIframe:{alignItems:"stretch"}})),u=({...e})=>{let t;let n=l();return e.file.viewerUrl?t=n.fileViewerContainerIframe:"image"===(0,s.V4)(e.file)&&(t=n.fileViewerContainerImage),r.createElement("div",{className:(0,o.Z)(n.fileViewerContainer,t,e.containerClassName)},function(e){let{file:t,disableMediaModal:n,analyticsId:o,inlineMediaAdditionalAttributes:a}=e;if(t.viewerUrl)return r.createElement("iframe",{src:t.viewerUrl,allowFullScreen:!0,allow:"clipboard-write *",...t.alternativeText?{title:t.isDecorative?"":t.alternativeText}:null,...a});switch((0,s.V4)(t)){case"image":return r.createElement(i.MediaGallery,{disabled:n,analyticsId:`${o}.media-gallery`},function(e,t){let n=(0,s.Ak)(e);return e.isDecorative?r.createElement("img",{src:n,...t,alt:""}):e.alternativeText?r.createElement("img",{src:n,...t,alt:e.alternativeText}):r.createElement("img",{src:n,...t})}(t,a));case"video":return r.createElement(i.VideoPlayer,{videoSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:a});case"audio":return r.createElement(i.AudioPlayer,{audioSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:a});default:return r.createElement(r.Fragment,null)}}(e))}},565663:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});let r=255},799209:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(662176);let i="10px",o=(0,r.makeStyles)(e=>(0,r.createStyles)({root:{color:e.palette.text.primary,display:"flex",flexFlow:"wrap",position:"relative",transform:"translateZ(0)","&:hover $rootControlsInline button":{backgroundColor:e.palette.background.b9,color:e.palette.secondary.light},"&:hover $rootControlsInline button:hover":{color:e.palette.primary.contrastText}},rootControls:{display:"flex",flex:"1 0 100%",order:1,alignItems:"stretch",minHeight:"58px",minWidth:0},rootControlsWidgets:{"@media print":{display:"none"},display:"flex","& button":{color:e.palette.text.secondary,height:"100%",minHeight:"48px",width:"48px",borderRadius:"0"},"& button:hover, & button:focus":{backgroundColor:e.palette.background.b4,color:e.palette.primary.main}},rootControlsInline:{flex:"0 1 auto",position:"absolute",right:0,zIndex:100,minHeight:"auto","& $rootControlsWidgets":{flexDirection:"column-reverse"}},rootBackground:{backgroundColor:e.palette.background.paper},contextMenu:{display:"flex",marginLeft:"auto"},inlineRenderToggle:{display:"flex"},inlineRenderToggleSeparator:{alignSelf:"center",borderLeft:`1px solid ${e.palette.background.b5}`,height:"50%",width:"1px"},mediaRoot:{margin:"0 auto",order:2,textAlign:"center",width:"100%"},documentPreviewHidden:{height:0,display:"none","div& iframe":{height:0,minHeight:0,visibility:"hidden"}},mediaRootInline:{order:0},attachmentMeta:{display:"flex",alignItems:"center",flex:1,height:"100%",minWidth:0,paddingLeft:i,paddingRight:i,wordBreak:"break-all"},attachmentMetaClickable:{"&:hover,&:focus":{backgroundColor:e.palette.background.b4,cursor:"pointer",textDecoration:"underline"}},icon:{marginRight:"10px"},fileText:{flexShrink:1,lineHeight:"unset",textAlign:"unset",fontWeight:e.typography.fontWeightBold},contextMenuHovered:{"& svg":{color:e.palette.primary.main},"& button.is-expanded svg":{color:e.palette.brand.main}},fileHasError:{color:e.palette.error.main},fileSubText:{color:e.palette.text.secondary}}))},593370:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var r=n(662176),i=n(797580),o=n(906277),s=n(202784);let a=(0,r.makeStyles)(()=>({container:{display:"flex",gap:"14px"},decoration:{flexShrink:0,inlineSize:"4px",borderRadius:"4px",background:i.W1.messagingYellowBackground},children:{flex:1}})),l=(0,s.forwardRef)(function(e,t){let{children:n,className:r,...i}=e,l=a();return s.createElement("div",{ref:t,className:(0,o.Z)(l.container,r),...i},s.createElement("div",{className:l.decoration}),s.createElement("div",{className:l.children},n))})},946100:function(e,t,n){"use strict";n.d(t,{E:function(){return l}});var r=n(464158),i=n(662176),o=n(410628),s=n(202784);let a=(0,i.makeStyles)(e=>({moreInfo:{color:e.palette.text.secondary,overflow:"hidden",boxOrient:"vertical",display:"-webkit-box",lineClamp:1}})),l=e=>{let{authorLinkText:t,authorName:n,authorUrl:i,analyticsId:l,tabIndex:u,onBlur:d,onKeyDown:c,onFocus:E}=e,p=a(),m=(0,o.q)();return s.createElement(r.AnalyticsTooltip,{analyticsId:`${l}.author.tooltip`,title:n},s.createElement(r.AnalyticsLink,{onBlur:d,onKeyDown:c,onFocus:E,tabIndex:u,className:p.moreInfo,analyticsId:`${l}.image.author.link`,href:i,target:"_blank"},null!=t?t:m("cr.components.accessibility.skipLink.imageBy",{userName:n})))}},985532:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(946100),i=n(662176),o=n(906277),s=n(202784),a=n(428046);let l=(0,i.makeStyles)(e=>({image:{borderRadius:"6px",border:"2px solid transparent",cursor:"pointer",width:"100%",height:"100%"},imageSelected:{"&::before":{content:'""',position:"absolute",inset:"2px",border:`1px solid ${e.palette.background.default}`,borderRadius:"4px"}},selected:{border:`2px solid ${e.palette.brand.main}`},hideImageButton:{display:"none"},moreInfo:{marginLeft:"2px"},skeleton:{borderRadius:"4px",width:"100%"},square:{height:"auto",aspectRatio:"1 / 1"},dynamic:{height:"98px"},moreInfoLink:{color:e.palette.text.secondary}})),u=e=>{let{onClick:t,altText:n,url:u,isSelected:d,imageType:c,linkProps:E,isLinkFocusable:p,isMouseClick:m}=e,h=l(),[I,b]=(0,s.useState)(!1),{cell:g,capture:y,uncapture:f}=(0,a.PW)(),S=e=>{"Escape"===e.key&&e.stopPropagation()};return(0,s.useEffect)(()=>{d&&!m&&f(),d&&m&&y()},[d,f,y,m]),s.createElement(s.Fragment,null,!I&&s.createElement(i.Skeleton,{className:(0,o.Z)(h.skeleton,{[h.square]:"square"===c,[h.dynamic]:"dynamic"===c}),variant:"rect"}),s.createElement("img",{tabIndex:!E&&g.captured?0:-1,className:(0,o.Z)(h.image,{[h.hideImageButton]:!I,[h.imageSelected]:d,[h.selected]:d,[h.square]:"square"===c,[h.dynamic]:"dynamic"===c}),onClick:t,src:u,alt:n,onLoad:()=>{b(!0)},onKeyDown:E?void 0:S}),E&&s.createElement(r.E,{onBlur:()=>{f()},onFocus:()=>{y()},onKeyDown:S,analyticsId:E.analyticsId,authorUrl:E.authorUrl,authorName:E.authorName,tabIndex:p&&g.active||g.captured?0:-1}))}},498024:function(e,t,n){"use strict";n.d(t,{R:function(){return u}});var r=n(202784),i=n(464158),o=n(276776),s=n(662176);let a=(0,s.makeStyles)(e=>(0,s.createStyles)({componentContainer:{justifyContent:"center",height:"100%",padding:"30px 0"},container:{display:"flex",flexDirection:"column",alignItems:"center"},horizontalTextContainer:{[e.breakpoints.up("lg")]:{alignItems:"start"}},horizontalContainer:{backgroundColor:e.palette.background.b1,padding:"20px",flexFlow:"column",[e.breakpoints.up("lg")]:{flexFlow:"row"}},illustration:{marginBottom:"20px","& svg":{width:"250px"}},horizontalIllustration:{display:"none",[e.breakpoints.up("lg")]:{display:"block",marginBottom:"0",marginRight:"20px"}},horizontalProminent:{marginBottom:"3px",fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("lg")]:{textAlign:"left"}},horizontalParagraph:{textAlign:"center",marginBottom:"0",[e.breakpoints.up("lg")]:{textAlign:"left"}}}));var l=n(906277);let u=e=>{let{illustration:t,prominentText:n,subText:s,horizontalDisplay:u,headerComponent:d="h2"}=e,c=a();return r.createElement("div",{className:(0,l.Z)(c.container,c.componentContainer,{[c.horizontalContainer]:u})},r.createElement(o.Z,{image:t,className:(0,l.Z)({[c.horizontalIllustration]:u,[c.illustration]:!u}),presentationOnly:!0}),r.createElement("div",{className:(0,l.Z)(c.container,{[c.horizontalTextContainer]:u})},r.createElement(i.AnalyticsTypography,{className:(0,l.Z)({[c.horizontalProminent]:u}),variant:"h2",component:d},n),s&&!u&&r.createElement("span",null,s),s&&u&&r.createElement("p",{className:c.horizontalParagraph},s)))}},688580:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(755755);let i=()=>{let{babelfishFormat:e,locale:t}=(0,r.h)();return e.getFormatterSync(t).cldr.main("listPatterns/listPattern-type-standard")};var o=n(122970),s=n(325135);let a=/\{[01]\}/;class l{parse(e){return{2:e["2"].split(a),start:e.start.split(a),middle:e.middle.split(a),end:e.end.split(a)}}}(0,o.__decorate)([(0,s.LRUMemoize)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",Object)],l.prototype,"parse",null);let u=new l,d=()=>{let e=i();return u.parse(e)}},49678:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});let r=(0,n(662176).makeStyles)(e=>({button:{color:e.palette.link.active,textDecoration:"underline",verticalAlign:"baseline","&:hover":{color:e.palette.link.focus},"&:focus":{color:e.palette.link.hover}},close:{marginInlineStart:"6px"}}))},553239:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(662176),i=n(346304);let o=(0,r.makeStyles)(()=>({localizedNumberInput:e=>{let{locale:t,displayWesternNumbers:n,inlineLabel:r}=e,o=(0,i.sh)(t,n),s=o?"right":"inherit";return{flip:!o,textAlign:s,display:r?"inline-block":"block","& label":{display:r?"inline-block":"block"},'& input[type="text"], & input[type="text"]:focus':{flip:!o,textAlign:s,margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"}}}}))},337486:function(e,t,n){"use strict";n.d(t,{Di:function(){return s},GM:function(){return c},Il:function(){return u},UZ:function(){return d},Z3:function(){return a},hN:function(){return l}});var r=n(202784),i=n(755755),o=n(346304);let s=e=>e.indexOf("E")>-1||e.indexOf("e")>-1,a=(e,t)=>(0,o.sh)(e,t)?"en-us":e,l=(e,t)=>(0,o.sh)(e,t)?"ltr":void 0,u=e=>{let t=(e=e.indexOf("E")>0?e.replace("E","e"):e).substring(e.indexOf("e"));return{integer:e.substring(0,e.length-t.length),exponentialNotation:t}},d=(e,t,n,r,i={})=>{var a,l;if(null==t||!Number.isFinite(t))return"";let u=s(t.toString())?"scientific":"standard",d=(0,o.sh)(e,n),c={...i,notation:u};d&&(c.numberingSystem="latn");let E=null===(l=null===(a=null==r?void 0:r.getFormatterSync)||void 0===a?void 0:a.call(r,e).cldr)||void 0===l?void 0:l.locale,p=[];if(E){p.push(E);let e=E.split("-");p.push(`${e[0]}-${e[1]}`)}p.push("en-US");let m=e=>new Intl.NumberFormat(e,{...c}).formatToParts(t).map(t=>{switch(t.type){case"decimal":return"٫"!==r.number.getDecimalStringSync(e)&&d||!d?r.number.getDecimalStringSync(e):t.value;case"group":return"٬"!==r.number.getGroupingStringSync(e)&&d||!d?r.number.getGroupingStringSync(e):t.value;default:return t.value}}).join(""),h=p.shift();for(;h;)try{return m(h)}catch(e){h=p.shift()}return t.toString()},c=({value:e,numberFormatOptions:t,displayWesternNumbers:n=!1})=>{let{babelfishFormat:o,locale:s}=(0,i.h)(),[a,l]=r.useState(d(s,e,n,o,t)),[u,c]=r.useState(e);return r.useEffect(()=>{e!==u&&(c(e),l(d(s,e,n,o,t)))},[e,l,t,c,u,s,n,o]),{displayValue:a,setDisplayValue:l,numericValue:u,setNumericValue:c}}},729094:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(202784),i=n(276635),o=n(854230),s=n(464158);let a=r.memo(({analyticsId:e,item:t,onChange:n})=>{let i=(0,o.y)();return r.createElement(s.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:i.listItem,disableGutters:!0},r.createElement(s.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:t.label,htmlFor:`ind-checkbox-${t.value}`,control:r.createElement(s.AnalyticsCheckbox,{analyticsId:`${e}.multiSelectItem.input.checkbox`,id:`ind-checkbox-${t.value}`,checked:t.checked,value:t.value,onChange:n})}))},i.isEqual)},854230:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({multiSelectContainer:{backgroundColor:e.palette.background.b1,paddingLeft:"12px",overflowX:"hidden",maxHeight:"130px","&.with-scroll":{overflowY:"scroll"}},divider:{marginRight:"0",marginBottom:"3px"},MultiselectCheckbox:{width:"100%","& fieldset":{width:"100%"}},multiselectFormControl:{"&.MuiFormControl-root":{width:"100%"}},list:{width:"100%"},listItem:{paddingTop:"0",paddingBottom:"0"}}))},883608:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(662176),i=n(517272);let o=(0,r.makeStyles)(e=>(0,r.createStyles)({panelHeaderControlsRoot:t=>({...i._O,minWidth:t.minWidth?`${t.minWidth}px`:"auto",flex:1,display:"flex",justifyContent:"flex-end",[e.breakpoints.up("md")]:{display:"block",flex:0,justifyContent:"center",marginLeft:0}}),panelHeaderControlsWrapper:{display:"flex"}}))},601009:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});let r={buildSensor:()=>{},activator:(0,n(275128).V)("onKeyDown",()=>!1)}},873211:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(275128),i=n(48631);let o={buildSensor:e=>{new i.w(e).attachListeners()},activator:(0,r.V)("onPointerDown",e=>e.isPrimary&&0===e.button)}},48631:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(948067),i=n(31307);class o{constructor(e){this.location=e.resizeHandleLocation,this.originalRect=e.originalRect,this.resizedRect=null,this.onStart=e.onStart,this.onResize=e.onResize,this.onEnd=e.onEnd,this.isRtl=e.isRtl,this.onCancel=e.onCancel,this.attachListeners=this.attachListeners.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.cleanupListeners=this.cleanupListeners.bind(this)}attachListeners(){document.addEventListener("pointermove",this.handlePointerMove),document.addEventListener("pointerup",this.handleEnd),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("resize",this.handleCancel),document.addEventListener("dragstart",this.handleCancel),document.addEventListener("visibilitychange",this.handleCancel),document.addEventListener("contextmenu",this.handleCancel),this.onStart()}handlePointerMove(e){e.preventDefault();let t={x:e.clientX,y:e.clientY};this.resizedRect=function(e,t,n,i){let o={x:e.x,y:e.y,width:e.width,height:e.height};if(!i&&n===r.y.InlineStart||i&&n===r.y.InlineEnd){let n=t.x-e.x;o.x=t.x,o.width=o.width-n}if(!i&&n===r.y.InlineEnd||i&&n===r.y.InlineStart){let n=t.x-(e.x+e.width);o.width=o.width+n}return o}(this.originalRect,t,this.location,this.isRtl),this.onResize(this.originalRect,this.resizedRect)}handleKeyDown(e){e.code===i.s.Escape&&this.handleCancel()}handleEnd(){this.cleanupListeners(),this.onEnd(this.originalRect,this.resizedRect)}handleCancel(){this.cleanupListeners(),this.onCancel()}cleanupListeners(){document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handleEnd),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("resize",this.handleCancel),document.removeEventListener("dragstart",this.handleCancel),document.removeEventListener("visibilitychange",this.handleCancel),document.removeEventListener("contextmenu",this.handleCancel)}}},275128:function(e,t,n){"use strict";function r(e,t){return{eventName:e,shouldActivate:t}}n.d(t,{V:function(){return r}})},948067:function(e,t,n){"use strict";var r,i;n.d(t,{y:function(){return r}}),(i=r||(r={})).InlineStart="inlineStart",i.InlineEnd="inlineEnd"},83590:function(e,t,n){"use strict";n(202784),(0,n(662176).makeStyles)(()=>({clampText:{display:"-webkit-box","-webkit-line-clamp":2,"-webkit-box-orient":"vertical",overflow:"hidden"},toggleTruncateButtonContainer:{marginTop:"20px"},internalTextContent:{cursor:"text",margin:0,wordBreak:"break-word",overflowWrap:"anywhere"}})),n(884391),n(198022),n(124860)},165856:function(e,t,n){"use strict";n.d(t,{v:function(){return m}});var r,i,o=n(202784),s=n(958299),a=n(675689),l=n(619034),u=n.n(l),d=n(664071),c=n(755755);(r=i||(i={}))[r.Up=1]="Up",r[r.Down=-1]="Down";let E=new Map([[d.d.Hour,"h"],[d.d.Minute,"m"],[d.d.AmPm,"h"]]),p=e=>{e.stopPropagation();let t=e.which;(t===d.m.Up||t===d.m.Down||t===d.m.Home||t===d.m.End||t===d.m.Left||t===d.m.Right||t===d.m.Pageup||t===d.m.Pagedown)&&e.preventDefault()},m=e=>{let{formatNumber:t,parseNumber:n,isRtl:r}=(0,c.h)(),l=E.get(e.type),m=()=>{let{type:t,is24hr:n}=e;return t===d.d.Hour?n?0:1:0},h=()=>{let{type:t,is24hr:n}=e;return t===d.d.Hour?n?23:12:59},I=(e,t,n,r)=>(r.set("year",n),r.set("month",t),r.set("date",e),r.toDate()),b=(t,n,r)=>{let{onChangeValue:i}=e,o=t.date(),s=t.month(),a=t.year();t.add(n,r),i(I(o,s,a,t))},g=t=>{let{date:n,onChangeValue:r}=e,i=u()(n),o=i.date(),s=i.month(),a=i.year();e.type===d.d.AmPm?i.add(12*t,l):i.add(1*t,l),r(I(o,s,a,i))},y=(t,n)=>{let{closeSpinner:r}=e;p(t);let i=t.which;i===d.m.Esc?r():(i===d.m.Up||i===d.m.Down||i===d.m.Home||i===d.m.End||i===d.m.Left||i===d.m.Right||i===d.m.Pageup||i===d.m.Pagedown)&&b(n,12,"h")},f=o.useCallback(t=>{let{onChangeValue:n,closeSpinner:i,type:o,is24hr:s,date:a}=e,c=u()(a),E=c.date(),m=c.month(),h=c.year();if(o===d.d.AmPm){y(t,c);return}switch(p(t),t.which){case d.m.Esc:i();break;case d.m.Right:{let e=r()?-1:1;l&&b(c,e,l);break}case d.m.Up:l&&b(c,1,l);break;case d.m.Left:{let e=r()?1:-1;l&&b(c,e,l);break}case d.m.Down:l&&b(c,-1,l);break;case d.m.Pageup:o===d.d.Hour&&l?b(c,3,l):o===d.d.Minute&&l&&b(c,10,l);break;case d.m.Pagedown:o===d.d.Hour&&l?b(c,-3,l):o===d.d.Minute&&l&&b(c,-10,l);break;case d.m.Home:o===d.d.Hour?(c.hour(s?23:12),n(I(E,m,h,c))):o===d.d.Minute&&(c.minute(59),n(I(E,m,h,c)));break;case d.m.End:o===d.d.Hour?(c.hour(s?0:1),n(I(E,m,h,c))):o===d.d.Minute&&(c.minute(0),n(I(E,m,h,c)))}},[e.date]),S=(e,r)=>{let i=n(e),o=m(),s=h();return Number.isNaN(i)?n(r).toString():i>=o&&i<=s?e:i<o?t(o):t(s)},_=o.useCallback(t=>{let{type:n,value:r,updateTimeInput:i}=e,o=t.target.value;if(n===d.d.AmPm){i({amPm:o.toUpperCase()});return}let s=S(o,r);i(n===d.d.Hour?{hour:s}:{minute:s})},[e.value]),T=o.useCallback(t=>{p(t),t.which===d.m.Esc&&e.closeSpinner()},[]);return o.createElement("div",{className:e.className},o.createElement(s.AnalyticsIconButton,{"aria-label":e.ariaLabel.upButton,className:"spinner-btn",onKeyUp:T,onClick:()=>g(i.Up),onKeyDown:p,title:e.ariaLabel.upButton,analyticsId:e.analyticsId.upButton,"data-testid":"add-btn"},o.createElement(a.ArrowUp,null)),o.createElement("input",{type:"text",className:e.className+"-input",ref:e.inputRef,"aria-label":e.ariaLabel.input,value:e.value,role:"spinbutton","aria-valuenow":parseInt(e.value,10),"aria-valuemax":h(),"aria-valuemin":m(),onChange:_,onFocus:e=>e.target.select(),onKeyUp:f,onKeyDown:p,onKeyPress:t=>{t.which===d.m.Enter&&e.closeSpinner()},onClick:e.onInputClick,"data-analytics-id":e.analyticsId.input}),o.createElement(s.AnalyticsIconButton,{"aria-label":e.ariaLabel.downButton,className:"spinner-btn",onClick:()=>g(i.Down),onKeyUp:T,onKeyDown:p,title:e.ariaLabel.downButton,analyticsId:e.analyticsId.downButton,"data-testid":"sub-btn"},o.createElement(a.ArrowDown,null)))}},664071:function(e,t,n){"use strict";var r,i,o,s;n.d(t,{d:function(){return r},m:function(){return i}}),(o=r||(r={})).Hour="hour",o.Minute="minute",o.AmPm="amPm",(s=i||(i={}))[s.Pageup=33]="Pageup",s[s.Pagedown=34]="Pagedown",s[s.End=35]="End",s[s.Home=36]="Home",s[s.Left=37]="Left",s[s.Up=38]="Up",s[s.Right=39]="Right",s[s.Down=40]="Down",s[s.Esc=27]="Esc",s[s.Enter=13]="Enter"},736873:function(e,t,n){"use strict";n.d(t,{G:function(){return f}});var r,i,o=n(464158),s=n(906277),a=n(202784),l=n(410628),u=n(498024),d=n(662176);let c=(0,d.makeStyles)(e=>({empty:{textAlign:"center",borderLeft:`1px solid ${e.palette.border.main}`,borderRight:`1px solid ${e.palette.border.main}`,borderBottom:`1px solid ${e.palette.border.main}`,padding:"20px"},emptyRootLevel:{border:0}})),E=({analyticsId:e,localizedMessage:t,level:n,colSpan:r,emptyIllustration:i})=>{let l=c(),d=0===n;return a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.empty.row`},a.createElement(o.AnalyticsTableCell,{analyticsId:`${e}.empty.row.cell`,colSpan:r,className:(0,s.Z)({[l.empty]:!0,[l.emptyRootLevel]:d})},d&&i?a.createElement(u.R,{illustration:i,prominentText:t}):t))},p=(0,d.makeStyles)(e=>({loading:{padding:"20px"},loadingSpinner:{display:"flex",justifyContent:"center"},loadingBorder:{border:`1px solid ${e.palette.border.main}`,borderTop:0}}));var m=n(818964),h=n(166177);(r=i||(i={})).Margin="margin",r.Padding="padding";let I=(0,d.makeStyles)(e=>({cell:{borderBottom:0,padding:0,height:"inherit"},cellIndented:t=>{let{level:n,prependedExpandIcon:r}=t,o=r?i.Margin:i.Padding;return{[`${o}InlineStart`]:`${32*n}px`,[e.breakpoints.down("md")]:{[`${o}InlineStart`]:`${16*n}px`}}},applyBorderToElement:{borderBottom:`1px solid ${e.palette.border.main}`},cellColumContentExpandContainer:{position:"relative",display:"flex",alignItems:"center",height:"100%",width:"100%",marginTop:5,marginBottom:5},columnContentContainer:{display:"flex",justifyContent:"center",alignItems:"flex-start",height:"100%"},expandContainer:{display:"flex",justifyContent:"flex-end",height:"100%",padding:"0px"},collapseIcon:{alignItems:"center",padding:0},iconContainer:{[e.breakpoints.up("sm")]:{display:"flex",padding:"10px 8px",alignSelf:"center",height:"50%"}},iconContainerBorder:{[e.breakpoints.up("sm")]:{borderLeft:`1px solid ${e.palette.border.main}`,borderColor:e.palette.border.main}},noBottomBorder:{"& $cellColumContentExpandContainer":{borderBottom:"none"}},collapseDisabled:{"& svg":{color:e.palette.action.disabled}},disabledOnEdition:{backgroundColor:e.palette.action.disabledBackground,"&:hover":{backgroundColor:e.palette.action.disabledBackground}}})),b=({analyticsId:e,column:t,level:n,colIndex:r,data:i,showExpander:l,isExpanded:u,isLastItemOnLevel:d,additionalRowAction:c,rowKey:E,rowKeyBeingEdited:p,nonEditableFieldsConfig:b,prependedExpandIcon:g})=>{var y,f;let S=I({level:n,prependedExpandIcon:g}),_=n>0,T=(null==p?void 0:p())===E,v=(null==p?void 0:p())!==null,A=a.createElement("div",{className:(0,s.Z)(S.expandContainer,{[S.applyBorderToElement]:!d&&!g})},E&&c&&c(E,-1),l?a.createElement("div",{className:(0,s.Z)({[S.iconContainerBorder]:!T&&!g},S.iconContainer),"data-testid":"icon-container"},a.createElement(m.W5,{open:u,className:(0,s.Z)(S.collapseIcon,{[S.collapseDisabled]:v}),orientation:g?m.K7.Right:m.K7.Down})):null);return a.createElement(o.AnalyticsTableCell,{role:"gridcell",analyticsId:`${e}.tableRowCell.${t.key}`,className:(0,s.Z)({[S.noBottomBorder]:T&&!!b&&b.editableStartingColumn>0&&(b.nonEditableColumnsPosition===h.c.BEGINNING?r<=b.editableStartingColumn:r>=b.editableStartingColumn),[S.disabledOnEdition]:!T&&v},S.cell,!T&&(null===(y=t.additionalClasses)||void 0===y?void 0:y.rows),T&&(null===(f=t.additionalClasses)||void 0===f?void 0:f.editableRow)),tabIndex:-1},a.createElement("div",{className:S.cellColumContentExpandContainer},a.createElement("div",{className:(0,s.Z)(S.cellColumContentExpandContainer,{[S.applyBorderToElement]:!(_&&1===r&&!g)&&!d,[S.cellIndented]:t.indentation})},g&&A,a.createElement(t.content,{analyticsId:`${e}.tableRowCell.${t.key}`,tabIndex:-1,data:i,isExpanded:u,rowKey:E})),!g&&A))},g=(0,d.makeStyles)(e=>({collapseIconCell:{width:"24px"},rowExpandable:{cursor:"pointer","&:hover":{backgroundColor:e.palette.background.b3}},rowIsChild:{"& td":{backgroundColor:e.palette.background.paper}},rowIsLastOnLevel:{"& td":{borderBottom:`1px solid ${e.palette.border.main}`}}})),y=(0,a.memo)(({analyticsId:e,getLocalizedEmptyKey:t,colSpan:n,row:r,getRowKey:i,loadRows:l,canRowExpand:u,indexOnLevel:d,lastItemOnLevel:c,level:E,numberOfItemsOnLevel:p,treeViewTableColumns:m,prependExpandIcon:h})=>{var I,y;let S;let _=g(),[T,v]=a.useState(!1),A=u(r),O=a.useCallback(e=>{v(e=>!e),e.stopPropagation()},[v]),C=(null===(I=r.rowKeyBeingEdited)||void 0===I?void 0:I.call(r))!==null;return A&&(S=`${T}`),a.createElement(a.Fragment,null,a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.tableRow`,"aria-level":E+1,"aria-expanded":S,"aria-posinset":d+1,"aria-setsize":p,role:"row",tabIndex:0===E&&0===d?0:-1,className:(0,s.Z)({[_.rowExpandable]:!C&&A,[_.rowIsChild]:!C&&E>0,[_.rowIsLastOnLevel]:!T&&c}),onClick:A&&!C?O:void 0},m.getColumnsData(m.defaultHeaders).map((t,n)=>{let o=n===m.defaultHeaders.length-1,s=(h?0===n:o)&&A;return a.createElement(b,{key:t.key,column:t,colIndex:n+1,data:r,level:E,analyticsId:`${e}.tableRow.cell`,showExpander:s,isExpanded:T,isLastItemOnLevel:!T&&c,additionalRowAction:o?r.rowAction:void 0,rowKey:i(r),rowKeyBeingEdited:r.rowKeyBeingEdited,nonEditableFieldsConfig:r.nonEditableFieldsConfig,prependedExpandIcon:h})})),null===(y=r.rowToolbar)||void 0===y?void 0:y.call(r,i(r)),T&&a.createElement(f,{getLocalizedEmptyKey:t,record:r,colSpan:n,getRowKey:i,loadRows:l,canRowExpand:u,level:E+1,lastItemOnLevel:c,treeViewTableColumns:m,analyticsId:`${e}.tableRowContainer`,prependExpandIcon:h}))}),f=(0,a.memo)(({analyticsId:e,getLocalizedEmptyKey:t,emptyRowIllustration:n,colSpan:r,record:i,getRowKey:u,loadRows:d,canRowExpand:c,lastItemOnLevel:m,level:h,treeViewTableColumns:I,prependExpandIcon:b})=>{let g=p(),f=(0,l.q)(),{rows:S,isLoading:_}=d(i);return a.createElement(a.Fragment,null,!_&&0===S.length&&a.createElement(E,{localizedMessage:t(i),emptyIllustration:n,colSpan:r,level:h,analyticsId:`${e}.tableRow.empty`}),_?a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.tableRow`},a.createElement(o.AnalyticsTableCell,{analyticsId:`${e}.tableRow.cell.loadingIcon`,colSpan:r,className:(0,s.Z)(g.loading,h>0?g.loadingBorder:void 0)},a.createElement("div",{className:(0,s.Z)(g.loadingSpinner,"js-treeview-loading-spinner")},a.createElement(o.AnalyticsCircularProgress,{ariaLabel:f("global.loading"),size:"medium"})))):S.map((n,i)=>{let o=(m||1===h)&&i===S.length-1;return a.createElement(y,{key:`tree-view-table-row-${u(n)}`,row:n,getLocalizedEmptyKey:t,colSpan:r,getRowKey:u,loadRows:d,canRowExpand:c,indexOnLevel:i,lastItemOnLevel:o,level:h,numberOfItemsOnLevel:S.length,treeViewTableColumns:I,analyticsId:`${e}.tableRow`,prependExpandIcon:b})}))})},386715:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});let r=(0,n(662176).makeStyles)(e=>({toolbarCell:{paddingLeft:0},toolbarContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},buttonsContainer:{display:"flex",justifyContent:"flex-end"},saveButton:{marginLeft:e.spacing(2)},messageContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.palette.error.main},message:{marginLeft:e.spacing(1.25)}}))},166177:function(e,t,n){"use strict";var r,i;n.d(t,{c:function(){return r}}),(i=r||(r={})).BEGINNING="beginning",i.ENDING="ending"},999371:function(e,t,n){"use strict";n.d(t,{$8:function(){return o},Ak:function(){return d},CO:function(){return S},NU:function(){return _},Q:function(){return I},RE:function(){return u},TN:function(){return f},V4:function(){return l},Y1:function(){return E},ZO:function(){return m},bm:function(){return y},f5:function(){return g},iT:function(){return p},jN:function(){return c},t1:function(){return h},tq:function(){return b}});var r=n(716241),i=n(435722);let o=104857600,s=["application/pdf","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-mspowerpoint","application/x-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-excel","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","text/plain","application/rtf"],a={"application/vnd.ms-excel":10485760,"application/vnd.ms-excel.sheet.binary.macroEnabled.12":10485760,"application/vnd.ms-excel.sheet.macroEnabled.12":10485760,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":10485760,"text/csv":10485760};function l(e){let t="";return e.mimeType&&(t=e.mimeType.substring(0,e.mimeType.indexOf("/"))),t}function u(e){return a[e.mimeType]}function d(e){return e.modifiedDate?(0,i.Ou)(e.resourceUrl,"bypassCache",e.modifiedDate):e.resourceUrl}function c(e){if(void 0===e.fileSize)return!0;let t=u(e);return!t||e.fileSize<t}function E(e){if(void 0===e.fileSize)return!0;let t=e.fileSize<o,n=c(e);return t&&n}function p(e){return!!e.viewerUrl&&!(null==e?void 0:e.hasError)}function m(e){return -1!==s.indexOf(e)}function h(e,t){return t&&E(e)&&m(e.mimeType)}function I(e,t=!1){if(null==e?void 0:e.hasError)return!1;if(e.mimeType){let n;let r=l(e),i=(n="",e.mimeType&&(n=e.mimeType.substring(e.mimeType.indexOf("/")+1)),n);switch(r){case"image":return null!==e.resourceUrl&&["jpeg","gif","png"].indexOf(i)>-1;case"audio":return null!==e.resourceUrl&&["mpeg","mp3","mp4","flac","wav","x-wav","ogg"].indexOf(i)>-1;case"video":return null!==e.resourceUrl&&["mp4"].indexOf(i)>-1;default:return void 0!==e.viewerUrl&&h(e,t)}}return!1}function b(e){return e===r.I_d.Inline||e===r.I_d.InlineOnly}function g(e){return void 0===e.render||b(e.render)}function y(e){return["image","video","audio"].indexOf(e)>-1}function f(e){return"audio"===e}function S(e){return"image"===e}function _(e){return"video"===e}},64191:function(e,t,n){"use strict";n.d(t,{J:function(){return i},y:function(){return o}});var r=n(662176);let i=(0,r.createStyles)({checkboxMarginFix:{marginInlineStart:"-4px"},switchMarginFix:{marginInlineStart:"-8px"},singleLineTextFieldFix:{"&&":{margin:"auto",border:"none"}},radioGroupFix:{marginInlineStart:"4px"}}),o=(0,r.makeStyles)(i)},346304:function(e,t,n){"use strict";n.d(t,{AO:function(){return s},Lk:function(){return i},U_:function(){return o},nM:function(){return a},sh:function(){return r}});let r=(e,t)=>e.toLowerCase().startsWith("ar-sa")&&t,i=(e,t,n,i,o,s)=>{r(o,s)&&(e=e.replace(/,/g,""));let a=i(e.substring(t,e.length-n));return 1===t&&(a*=-1),{value:a,integerString:e}},o=(e,t)=>{if(e.charAt(e.length-1)===t){let n=e.match(RegExp(`\\${t}`,"g"));return n&&n.length<=1}return!1},s=e=>{let t=0;for(;t<e.length&&[8207,8206,1564].includes(e.charCodeAt(t));)t+=1;return e.substring(t)},a=e=>45===e.charCodeAt(0)||8722===e.charCodeAt(0)},415240:function(e,t,n){"use strict";var r,i;n.d(t,{A:function(){return o},c:function(){return r}}),(i=r||(r={})).Aborted="Aborted",i.Unknown="Unknown",i.API="API";class o{constructor(e){this._type=e}get errorType(){return this._type}}},144342:function(e,t,n){"use strict";n.d(t,{F:function(){return o},b:function(){return i}});let r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3,9})?Z$/;function i(e){return JSON.parse(e,(e,t)=>"string"==typeof t&&r.test(t)?new Date(t):t)}async function o(e){return i(await e.text())}},631862:function(e,t,n){"use strict";function r(e){var t;let n;return"raw"in e.headers&&e.headers.raw?n=e.headers.raw()["set-cookie"]:"getSetCookie"in e.headers&&(n=e.headers.getSetCookie()),null!==(t=null==n?void 0:n.map(e=>e.split(";")[0]).join(";"))&&void 0!==t?t:""}function i(e){var t;return null!==(t=e.getResponseHeader("Set-Cookie"))&&void 0!==t?t:""}function o(e,t){let n=e.split(";");return t.split(";").forEach(e=>{var t;let r=e.split("=");t=r[0],n.some(e=>e.split("=")[0]===t)||n.push(`${r[0]}=${r[1]}`)}),n.join(";")}n.d(t,{dn:function(){return o},ej:function(){return r},mC:function(){return i}})},898531:function(e,t,n){"use strict";var r,i;n.d(t,{o:function(){return r}}),(i=r||(r={}))[i.Ok=200]="Ok",i[i.Created=201]="Created",i[i.Accepted=202]="Accepted",i[i.NoContent=204]="NoContent",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.Forbidden=403]="Forbidden",i[i.NotFound=404]="NotFound",i[i.Conflict=409]="Conflict",i[i.Gone=410]="Gone",i[i.TooManyRequests=429]="TooManyRequests",i[i.InternalServerError=500]="InternalServerError"},73589:function(e,t,n){"use strict";n.d(t,{V:function(){return y}});var r=n(202784),i=n(716241),o=n(200940),s=n(198022);let a=e=>e.dataset&&e.dataset.bbid||e.id||l(),l=()=>`bbml-editor-id_${(0,s.v4)()}`,u=e=>(e||"").startsWith('<!-- {"bbMLEditorVersion":'),d=e=>e.dataset&&e.dataset.bbtype||"file",c=e=>{let{bbFileUuid:t,alternativeText:n,viewerUrl:r,linkName:i,render:o,mimeType:s,viewerUuid:a,isDecorative:l,viewerTimeToWait:u}=e;return{isDecorative:l,alternativeText:n,linkName:i,viewerData:{...t?{bbFileUuid:t}:{},...a?{viewerUuid:a}:{},...r?{viewerUrl:r}:{},...u?{viewerTimeToWait:parseInt(`${u}`,10)}:{}},file:{},currentMimeType:s,ui:{isRenderedInline:"inline"===o}}},E=e=>{let t={file:{}},n=e.dataset&&e.dataset.bbfile;if(n)try{let e=JSON.parse(n);t=c(e)}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));let r=a(e),o=e.href;return o.startsWith("http://localhost")&&(o=(0,i.uIm)(o.substr(16))),t.downloadUrl=o,{fileBlock:t,id:r}},p=e=>{let t=[];if(!e)return{contentBlocks:t,isBbmlEditorCompliant:!0};let n=e.trim(),r=u(n),i=document.createElement("div");i.innerHTML=n;for(let e=0;e<i.children.length;e+=1){let n=i.children[e];if("A"===n.tagName&&"file"===d(n))t.push(E(n));else if("DIV"===n.tagName){let e=a(n),r=n.innerHTML.trim();r&&t.push({textBlock:r,id:e})}}return r||0!==t.length||(n.includes("https")||(r=!0),t.push({textBlock:n,id:l()})),{contentBlocks:t,isBbmlEditorCompliant:r}},m=e=>r.useMemo(()=>p(e),[e]);var h=n(336508);let I=e=>{let{textBlock:t}=e.block,{courseId:n,prepareEditorPlugins:i}=e,s=i(n);return r.createElement(o.BbEditor,{plugins:s,isReadOnly:!0,bbml:t})},b=e=>{var t,n,o,s,a;let{fileBlock:l}=e.block;if(!l)return null;let u={alternativeText:null!==(t=l.alternativeText)&&void 0!==t?t:"",displayName:l.linkName,fileName:l.linkName,resourceUrl:null!==(n=l.downloadUrl)&&void 0!==n?n:"",mimeType:null!==(o=l.currentMimeType)&&void 0!==o?o:"",viewerUrl:null===(s=l.viewerData)||void 0===s?void 0:s.viewerUrl,render:(null===(a=l.ui)||void 0===a?void 0:a.isRenderedInline)?i.I_d.Inline:i.I_d.Attachment};return r.createElement(h.$pJ,{file:u,analyticsId:"documents.bbmlFileBlock.fileViewer"})},g=e=>{var t;return(null===(t=e.block)||void 0===t?void 0:t.textBlock)?r.createElement(I,{...e}):r.createElement(b,{block:e.block})},y=e=>{let{contentBlocks:t}=m(e.bbml),{courseId:n,prepareEditorPlugins:s}=e,a=null!=s?s:e=>[(0,o.link)(),(0,o.image)(),(0,o.video)(),(0,o.insertLocalFile)({courseId:e,apiBasePath:i.vc.apiBasePath,xsrfToken:i.vc.xsrf}),(0,o.math)({courseId:e,apiBasePath:i.vc.apiBasePath,xsrfToken:i.vc.xsrf}),(0,o.contentMarket)({courseId:e,xsrfToken:i.vc.xsrf,apiBasePath:i.vc.apiBasePath,openContentMarket:()=>{},getEmbedSrc:()=>Promise.resolve("")})];return r.createElement("div",{className:"bbml-document-viewer"},t.map(e=>r.createElement(g,{block:e,key:e.id,courseId:n,prepareEditorPlugins:a})))}},740934:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var r=n(716241),i=n(202784),o=n(73589),s=n(44432),a=n(118717);let l=(0,s.$j)((e,t)=>({contentsByParentId:r.Ys.content.getContentsByParentContentId(e,t.documentId)}),e=>(0,a.DE)({loadContents:r.Nwg.content.loadContents},e))(e=>{var t;if(i.useEffect(()=>{e.courseId&&e.documentId&&e.loadContents({courseId:e.courseId,contentId:e.documentId,eagerFetchChildren:!0})},[e.courseId,e.documentId]),!e.contentsByParentId||!e.contentsByParentId.length)return i.createElement("div",null);let n=e.contentsByParentId[0],{courseId:r,prepareEditorPlugins:s}=e;return i.createElement(o.V,{bbml:null===(t=n.body)||void 0===t?void 0:t.rawText,courseId:r,prepareEditorPlugins:s})})},719372:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(13305);let i="bb-auto-resize",o={className:i,html:()=>`
<script class="${r.FX} ${i}" type="text/javascript">
  document.documentElement.style.height = 0;
  var resizeFunc = () => {
    var height = document.documentElement.scrollHeight;
    var source = new URL(document.referrer).origin;
    var w = window;
    while (w !== top) {
      w = w.parent;
      w.postMessage({ type: '${i}', height }, source);
    }
  }
  window.addEventListener('load', resizeFunc);
  window.addEventListener('resize', resizeFunc);
</script>
`,listener:e=>{let t=t=>{var n;if((null===(n=t.data)||void 0===n?void 0:n.type)===i&&e.contentWindow===t.source){let{height:n}=t.data;Number.isNaN(n)||(e.height=String(n))}};return window.addEventListener("message",t,!1),()=>window.removeEventListener("message",t)}}},666623:function(e,t,n){"use strict";n(990638),n(283834)},558282:function(e,t,n){"use strict";n(990638),n(283834)},509066:function(e,t,n){"use strict";n(990638),n(283834),n(348834).Buffer},952548:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(990638);class i extends r.wx{constructor(){super("v1/utilities/batch")}}var o=n(283834);async function s(e,t){let n=t.map(e=>({method:e.method,relativeUrl:e.getRelativeUrl(),body:e instanceof r.dx?e.getBody():void 0})),s=new i().withSession(e).withBody(n);return(0,o.fetchJsonApiResult)(s)}},701842:function(e,t,n){"use strict";n(990638),n(283834)},346961:function(e,t,n){"use strict";n.d(t,{Dw:function(){return o},E2:function(){return s},Y2:function(){return l},g_:function(){return a}});var r=n(990638);let i="/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules";class o extends r.B_{constructor(e){super(i,e)}}class s extends r.$v{constructor(e){super(`${i}/rules/%ruleId%`,e)}}class a extends r.Ds{constructor(e){super(i,e)}}class l extends r.wx{constructor(e){super(i,e)}}},731371:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(724713);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/assessments/attempts/%attemptId%/log",e)}}},537008:function(e,t,n){"use strict";n(990638),n(283834)},845709:function(e,t,n){"use strict";n.d(t,{ZM:function(){return i}});var r=n(990638);class i extends r.SB{constructor(){super("/v1/calendars/calendarEventsAvailable")}}},105538:function(e,t,n){"use strict";n(990638)},567293:function(e,t,n){"use strict";n(283834),n(105538)},954416:function(e,t,n){"use strict";n(283834),n(990638)},518211:function(e,t,n){"use strict";n.d(t,{B3:function(){return o},dv:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%",e)}}class o extends r.t9{constructor(e){super("/v1/courses/%courseId%",e)}}},816028:function(e,t,n){"use strict";n.d(t,{WR:function(){return i},tE:function(){return o}});var r=n(990638);class i extends r.t9{constructor(e){super("v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/states",e)}}class o extends r.SB{constructor(e){super("v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/states",e)}}},825493:function(e,t,n){"use strict";n(990638)},773988:function(e,t,n){"use strict";n(283834),n(825493)},615364:function(e,t,n){"use strict";n.d(t,{LT:function(){return i},eL:function(){return o},gC:function(){return a},o2:function(){return s}});var r=n(990638);class i extends r.B_{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class o extends r.Ds{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class s extends r.$v{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class a extends r.B_{constructor(e){super("/v1/courses/%courseId%/groupsets/import",e)}}},567009:function(e,t,n){"use strict";n.d(t,{C0:function(){return s},MQ:function(){return a},lZ:function(){return l},uV:function(){return o}});var r=n(283834),i=n(615364);async function o(e,t,n,o){let s=new i.LT({courseId:t,groupSetId:n}).withSession(e).withBody(o);return(0,r.fetchApiResult)(s)}async function s(e,t,n,o){let s=new i.eL({courseId:t,groupSetId:n}).withSession(e);return o.paging&&s.withPaging(o.paging),o.sort&&s.withSort(...o.sort),(0,r.fetchJsonApiResult)(s)}async function a(e,t,n,o){let s=new i.o2({courseId:t,groupSetId:n}).withSession(e).withQueryParams(o);return(0,r.fetchApiResult)(s)}async function l(e,t,n){let o=new i.gC({courseId:t}).withSession(e).withBody(n);return(0,r.fetchApiResult)(o)}},706106:function(e,t,n){"use strict";n.d(t,{$l:function(){return d},$p:function(){return u}});var r=n(990638);let i="/v1/courses/%courseId%",o=`${i}/contents/%contentId%`,s=`${i}/groupsets/%groupSetId%`,a=`${o}/assignedGroups`,l=`${s}/groups`;class u extends r.Ds{constructor(e){super(a,e)}}class d extends r.Ds{constructor(e){super(l,e)}}},80406:function(e,t,n){"use strict";n(990638)},649956:function(e,t,n){"use strict";n(80406),n(283834)},804630:function(e,t,n){"use strict";n(990638)},877089:function(e,t,n){"use strict";n(283834),n(804630),n(874506)},39602:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(990638);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/users/%userId%/studentActivityLog",e)}}var o=n(283834);async function s(e,t,n,r){let s=new i(t).withSession(e);return r&&s.withQueryParams(r),n.paging&&s.withPaging(n.paging),n.sort&&s.withSort(...n.sort),await (0,o.fetchJsonApiResult)(s)}},849873:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("v1/courses/%courseId%/users/%userId%",e)}}},21419:function(e,t,n){"use strict";n.d(t,{VM:function(){return s},hi:function(){return i},qd:function(){return o}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/conversations/counts",e)}}class o extends r.SB{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}class s extends r.t9{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}},965772:function(e,t,n){"use strict";n(990638),n(283834)},274409:function(e,t,n){"use strict";n(283834),n(990638)},252255:function(e,t,n){"use strict";n.d(t,{x7:function(){return a},WJ:function(){return l}});var r=n(283834),i=n(990638);class o extends i.B_{constructor(e){super("/v1/courses/%courseId%/resources/rpc/deleteUnused",e)}}class s extends i.Ds{constructor(e){super("/v1/courses/%courseId%/resources",e)}}async function a(e,t,n){let i=new o({courseId:t}).withBody(n).withSession(e);return(0,r.fetchJsonApiResult)(i)}async function l(e,t,n,i){let o=new s({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,r.fetchJsonApiResult)(o)}},540072:function(e,t,n){"use strict";n.d(t,{Oo:function(){return u},RA:function(){return l},oW:function(){return a}});var r=n(990638);let i="/v1/courses/%courseId%/rubrics",o=`${i}/%rubricId%/users/%userId%/preferences`,s=`${o}/%preferenceKey%`;class a extends r.B_{constructor(e){super(i,e)}}class l extends r.SB{constructor(e){super(s,e)}}class u extends r.wx{constructor(e){super(o,e)}}},211685:function(e,t,n){"use strict";n.d(t,{B2:function(){return l},Gm:function(){return a},aq:function(){return u},ho:function(){return s},nv:function(){return o}});var r=n(990638);let i="/v1/courses/%courseId%/safeassign/directSubmitItems";class o extends r.SB{constructor(e){super(i,e)}}class s extends r.SB{constructor(){super("v1/safeassign/pluginStatus")}}class a extends r.SB{constructor(e){super("/v1/courses/%courseId%/safeassign/pluginStatus",e)}}class l extends r.n6{constructor(e){super(i,e)}}class u extends r.n6{constructor(e){super(i,e)}}},339104:function(e,t,n){"use strict";n.d(t,{K:function(){return o},l:function(){return s}});var r=n(990638);let i="/v1/courses/%courseId%/tools/%toolId%";class o extends r.SB{constructor(e){super(i,e)}}class s extends r.t9{constructor(e){super(i,e)}}},217556:function(e,t,n){"use strict";n.d(t,{LQ:function(){return a},NR:function(){return s},Wx:function(){return l}});var r,i,o=n(990638);(r=i||(i={})).Landscape="landscape",r.Portrait="portrait",r.Squarish="squarish";class s extends o.SB{constructor(e){super("/v1/courses/%courseId%/unsplash/search",e)}withBaseQueryParams(e){return this.withQueryParams(e),this}setResizeQueryParam(e,t,n){e[t]=n}withResizeOptions(e){let t;let n={};for(t in e)e.hasOwnProperty.call(e,t)&&this.setResizeQueryParam(n,`size-${t}`,e[t]);return this.withQueryParams(n),this}}class a extends o.YX{constructor(e){super("/v1/courses/%courseId%/unsplash/downloadNotify",e)}}class l extends o.SB{constructor(e){super("/v1/courses/%courseId%/unsplash/settings",e)}}},137532:function(e,t,n){"use strict";n.d(t,{In:function(){return s},LX:function(){return a},Y0:function(){return o},i7:function(){return i}});var r=n(724713);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class o extends r.B_{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class s extends r.t9{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}class a extends r.$v{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}},366419:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("v1/courses/%courseId%/spreview",e)}}},708195:function(e,t,n){"use strict";n(283834),n(366419)},847044:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(990638);class i extends r.Ds{constructor(){super("/v1/dashboard")}}var o=n(283834);async function s(e,t){let n=new i;return n.withSession(e),n.withPaging(t),(0,o.fetchJsonApiResult)(n)}},511765:function(e,t,n){"use strict";n(972400),n(990638),n(283834)},55904:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/knowledgeCheckMetrics",e)}}},159744:function(e,t,n){"use strict";n.d(t,{ab:function(){return s},mH:function(){return i},qh:function(){return o}});var r=n(990638);class i extends r.Ds{constructor(){super("/v1/featureFlags")}}class o extends r.SB{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}class s extends r.wx{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}},409220:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/statistics",e)}}},688130:function(e,t,n){"use strict";n.d(t,{h:function(){return s},t:function(){return o}});var r=n(283834),i=n(529694);function o(e,t,n){let o=new i.Qr(t).withQueryParams(n).withSession(e);return(0,r.fetchJsonApiResult)(o)}function s(e,t,n){let o=new i.zm(t).withQueryParams(n).withSession(e);return(0,r.fetchJsonApiResult)(o)}},448401:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/memberships/%membershipId%/exceptions",e)}}},57543:function(e,t,n){"use strict";n.d(t,{Lw:function(){return o},Pp:function(){return l},b4:function(){return i},f7:function(){return s},fF:function(){return a}});var r=n(990638);class i extends r.SB{constructor(){super("/v1/gradebook/mastery/scale")}}class o extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/goals",e)}}class s extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/users/%userId%/goals",e)}}class a extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/users/%userId%/goals/%parentId%/children",e)}}class l extends r.B_{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/goals/bulkView",e)}}},519449:function(e,t,n){"use strict";n.d(t,{Q3:function(){return u},Q6:function(){return d},X5:function(){return c},cS:function(){return l},gQ:function(){return p},rp:function(){return E}});var r=n(990638);let i="/v1/courses/%courseId%/gradebook",o=`${i}/columns/%columnId%/attempts`,s=`${i}/columns/%columnId%/groupAssociations`,a=`${i}/groupAttempts/%groupAttemptId%`;class l extends r.t9{constructor(e){super(`${i}/attempts/%attemptId%`,e)}}class u extends r.B_{constructor(e){super(o,e)}}class d extends r.t9{constructor(e){super(`${i}/groupAttempts/%attemptId%`,e)}}class c extends r.$v{constructor(e){super(`${i}/attempts/%attemptId%`,e)}}class E extends r.$v{constructor(e){super(`${a}`,e)}}class p extends r.Ds{constructor(e){super(`${s}/%groupAssociationId%/groupAttempts`,e)}}},560398:function(e,t,n){"use strict";n(990638)},134755:function(e,t,n){"use strict";n(283834),n(560398)},621359:function(e,t,n){"use strict";n(283834),n(990638)},680884:function(e,t,n){"use strict";n(990638)},415356:function(e,t,n){"use strict";n(680884),n(283834)},500530:function(e,t,n){"use strict";n(990638)},298126:function(e,t,n){"use strict";n(500530),n(283834)},970168:function(e,t,n){"use strict";n.d(t,{hU:function(){return i}});var r=n(990638);class i extends r.t9{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%",e)}}},575561:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},g:function(){return s}});var r=n(990638);let i="/v1/courses/%courseId%/gradebook/settings";class o extends r.SB{constructor(e){super(i,e)}}class s extends r.t9{constructor(e){super(i,e)}}},645887:function(e,t,n){"use strict";n.d(t,{AD:function(){return s},YW:function(){return u},_2:function(){return a},j7:function(){return l},r:function(){return d}});var r=n(990638);let i="/v1/courses/%courseId%/gradebook/schemas",o=`${i}/%schemaId%`;class s extends r.SB{constructor(e){super(i,e)}}class a extends r.SB{constructor(e){super(o,e)}}class l extends r.B_{constructor(e){super(i,e)}}class u extends r.t9{constructor(e){super(o,e)}}class d extends r.$v{constructor(e){super(o,e)}}},804930:function(e,t,n){"use strict";n(990638)},973304:function(e,t,n){"use strict";n(804930),n(283834)},394857:function(e,t,n){"use strict";n.d(t,{A:function(){return i},y:function(){return o}});var r=n(990638);class i extends r.B_{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/aiChatAnswers/%questionAttemptId%/messages",e)}}class o extends r.YX{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/aiChatAnswers/%questionAttemptId%/retry",e)}}},157454:function(e,t,n){"use strict";n.d(t,{Pe:function(){return i},RF:function(){return l},W8:function(){return u},ZD:function(){return o},fm:function(){return d},jd:function(){return s},jz:function(){return a}});var r=n(990638);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers",e)}}class o extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/%questionId%/answers",e)}}class s extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/grades",e)}}class a extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}class l extends r.t9{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}class u extends r.t9{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}class d extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}},406453:function(e,t,n){"use strict";n.d(t,{L:function(){return i},U:function(){return o}});var r=n(990638);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/grading-status/summaries",e)}}class o extends r.Ds{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/%questionBlockId%/questions/grading-status/summaries",e)}}},964493:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/submissionResults",e)}}},852555:function(e,t,n){"use strict";n.d(t,{S:function(){return o},j:function(){return i}});var r=n(990638);class i extends r.Ds{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors",e)}}class o extends r.t9{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors/%placementHandle%",e)}}},275454:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(990638);class i extends r.Ds{constructor(){super("/v1/messages/summary")}}},591139:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(990638);class i extends r.SB{constructor(e){super("webapps/partner-cloud/app/v1/providers/%providerId%/settings",e)}}var o=n(283834);async function s(e,t){let n=new i({providerId:t}).withSession(e);return(0,o.fetchJsonApiResult)(n)}},244895:function(e,t,n){"use strict";n(283834),n(990638)},814922:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(990638);class i extends r.SB{constructor(){super("/v1/utilities/entitlements")}}},71436:function(e,t,n){"use strict";n(283834),n(990638)},355166:function(e,t,n){"use strict";n(283834),n(990638)},412786:function(e,t,n){"use strict";n.d(t,{ix:function(){return o},ke:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("v1/users/%userId%",e)}}class o extends r.$v{constructor(e){super("/v1/users/me/preferences/%key%",e)}}},951648:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(990638);class i extends r.SB{constructor(e){super("/public/v1/attemptReceipts/%receiptId%",e)}}},136796:function(e,t,n){"use strict";n(283834),n(990638)},922186:function(e,t,n){"use strict";n(283834),n(990638)},425111:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(990638);class i extends r.SB{constructor(){super("/public/v1/uploads/settings")}}},907558:function(e,t,n){"use strict";n(990638),n(283834)},948805:function(e,t,n){"use strict";n(990638),n(283834)},990638:function(e,t,n){"use strict";n.d(t,{$v:function(){return r.$v},B_:function(){return r.B_},Bn:function(){return i.Bn},Ds:function(){return r.Ds},SB:function(){return r.SB},YX:function(){return r.YX},dx:function(){return r.dx},h5:function(){return r.h5},n6:function(){return r.n6},t9:function(){return r.t9},w0:function(){return i.w0},we:function(){return r.we},wx:function(){return r.wx}});var r=n(724713),i=n(934434)},724713:function(e,t,n){"use strict";n.d(t,{$v:function(){return h},B_:function(){return y},Ds:function(){return d},SB:function(){return l},YX:function(){return p},dx:function(){return c},h5:function(){return g},n6:function(){return f},t9:function(){return I},we:function(){return u},wx:function(){return b}});var r=n(972400),i=n(934434),o=n(283834);class s extends i.Gr{getUrl(){let e=super.getRelativeUrl();return e&&(e=e.startsWith("/")?e:`/${e}`),o.urlManager.getUrl(this.getApiBasePath()+e)}getApiBasePath(){return"/learn/api"}requiresSession(){return!0}toString(){return`[LearnApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new r.Hy(await e.json())}}class a extends s{withFields(...e){return this.withQuery({fields:e})}}class l extends s{constructor(e,t){super(o.HttpMethod.Get,e,t)}}class u extends a{constructor(e,t){super(o.HttpMethod.Get,e,t)}}class d extends l{withPaging(e){return this.withQuery({limit:e.limit,offset:e.offset,...e.offsetId?{offsetId:e.offsetId}:{}})}withSort(...e){return this.withQuery({sort:(null!=e?e:[]).map(e=>`${e.field}(${e.direction})`)})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("offset")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class c extends s{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(i.Qh,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new r.jf("Request requires a body but none was provided")})}getBody(){return this.body}}class E extends c{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class p extends s{constructor(e,t){super(o.HttpMethod.Post,e,t)}}class m extends c{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,r;t.append(e,null!==(r=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==r?r:"")}),t}}class h extends s{constructor(e,t){super(o.HttpMethod.Delete,e,t)}}class I extends E{constructor(e,t){super(o.HttpMethod.Patch,e,t)}}class b extends E{constructor(e,t){super(o.HttpMethod.Put,e,t)}}class g extends s{constructor(e,t){super(o.HttpMethod.Put,e,t)}}class y extends E{constructor(e,t){super(o.HttpMethod.Post,e,t)}}class f extends m{constructor(e,t){super(o.HttpMethod.Post,e,t)}}},934434:function(e,t,n){"use strict";n.d(t,{Bn:function(){return l},Gr:function(){return s},Qh:function(){return o},w0:function(){return d}});var r=n(283834),i=n(972400);let o="Content-Type";class s{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){let e=this.path;if(this.pathParams)for(let[t,n]of Object.entries(this.pathParams))e=e.replace(`%${t}%`,encodeURIComponent(n));let t=this.getQueryString();return t&&(e+=`?${t}`),e}getUrl(){return r.urlManager.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){return this.session=e,e.xsrfToken&&this.headers.set("X-Blackboard-XSRF",e.xsrfToken),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(()=>{var e;if(this.requiresSession()&&!this.session)throw new i.jf("Request requires session but no session info was added");let t=(null!==(e=this.path.match(/%\w+%/g))&&void 0!==e?e:[]).map(e=>e.slice(1,-1)).filter(e=>!this.pathParams[e]);if(t.length>0)throw new i.jf(`Request is missing required path params: [${t}]`)})}async failed(e){throw new i.VL(await e.text(),e.status,this.getUrl())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[LearnRequest: ${this.method} ${this.getUrl()}]`}}class a extends s{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(o,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new i.jf("Request requires a body but none was provided")})}}class l extends s{constructor(e,t){super(r.HttpMethod.Get,e,t)}}class u extends a{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,r;t.append(e,null!==(r=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==r?r:"")}),t}}class d extends u{constructor(e,t){super(r.HttpMethod.Post,e,t)}}},418438:function(e,t,n){"use strict";function r(e,t){if(0===t.length)return"";let n=e.split("?")[0].split("/"),r=n.indexOf(t);return r+1<n.length?n[r+1]:""}n.d(t,{S:function(){return r}})},609977:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(583702);class i extends r.L{}},583702:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}},819847:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});class r extends Error{get statusCode(){return this.status}get responseMessage(){return this.response}constructor(e,t,n){super(`HTTP ${t}: ${n}`),this.response=e,this.status=t,Object.setPrototypeOf(this,new.target.prototype)}}},785844:function(){"use strict";var e,t;(t=e||(e={})).IP="IP",t.Link="LINK",t.Links="LINKS",t.Image="IMAGE",t.Content="CONTENT"},665410:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Enabled="0",i.SoftDelete="1",i.Disabled="2",i.DeletePending="3",i.CopyPending="4"},32789:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Group="group",i.User="user"},501104:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Success="SUCCESS",i.Incomplete="INCOMPLETE",i.Error="ERROR"},330405:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r="mdb-sa"},331520:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Absent="Absent",i.Excused="Excused",i.Late="Late",i.Present="Present"},903900:function(e,t,n){"use strict";var r,i;n.d(t,{D:function(){return r}}),(i=r||(r={})).Attendance="resource/x-bb-attendance",i.Audio="resource/x-bb-audio",i.Blog="resource/x-bb-bloglink",i.ClassicAssignment="resource/x-bb-assignment",i.CourseLink="resource/x-bb-courselink",i.Discussion="resource/x-bb-forumlink",i.Document="resource/x-bb-document",i.ExternalLink="resource/x-bb-externallink",i.File="resource/x-bb-file",i.Folder="resource/x-bb-folder",i.LearningModule="resource/x-bb-lesson",i.Image="resource/x-bb-image",i.Journal="resource/x-bb-journallink",i.Kaltura="resource/x-osv-kaltura/mashup",i.LtiLink="resource/x-bb-blti-link",i.LtiPlacement="resource/x-bb-bltiplacement",i.Page="resource/x-bb-page",i.PartnerCloud="resource/x-bbgs-partner-cloud",i.RusticiScorm="resource/x-plugin-scormengine",i.SurveyLink="resource/x-bb-asmt-survey-link",i.TestLink="resource/x-bb-asmt-test-link",i.Unknown="resource/x-bb-unknown",i.Video="resource/x-bb-video",i.Wiki="resource/x-bb-wiki"},385573:function(e,t,n){"use strict";n(855472)},994395:function(e,t,n){"use strict";var r,i;(i=r||(r={})).NothingToGrade="NOTHING_TO_GRADE",i.NeedsGrading="NEEDS_GRADING",i.NeedsPosting="NEEDS_POSTING",i.AllPosted="ALL_POSTED",i.AllGraded="ALL_GRADED",i.Restricted="RESTRICTED"},181797:function(e,t,n){"use strict";n.d(t,{k:function(){return i},u:function(){return r}});let r=2684354560,i="forbidden files"},185535:function(e,t,n){"use strict";var r,i,o,s;(o=r||(r={})).Approved="Approved",o.Excluded="Excluded",o.NeedsApproval="NeedsApproval",(s=i||(i={})).Never="Never",s.SslOnly="SSLOnly",s.Always="Always"},662594:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r=n(44432).I0},11931:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});let r=n(44432).v9},610171:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(716241),i=n(11931);let o=e=>(0,i.a)(t=>{if(e)return r.Ys.content.getContentById(t,e)})},102381:function(e,t,n){"use strict";n(610171)},473321:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(716241),i=n(202784),o=n(662594),s=n(610171);let a=(e,t)=>{let n=(0,o.L)(),a=(0,s.N)(t);return(0,i.useEffect)(()=>{t&&!a&&e&&n(r.Nwg.content.loadContents({courseId:e,contentId:t}))},[a,e,t,n]),a}},182596:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(716241),i=n(202784),o=n(662594),s=n(11931);let a=(e,t)=>{let n=(0,o.L)(),a=(0,s.a)(e=>{var t;return null===(t=r.Ys.app.getRoute(e).params)||void 0===t?void 0:t.courseId}),l=(0,s.a)(e=>{if(a)return r.Ys.course.getCourseById(e,a)});(0,i.useEffect)(()=>{a&&!l&&n(r.Nwg.course.fetchCourse(a))},[l,a,n]);let u=null==l?void 0:l.isOrganization;return n=>u&&n.startsWith(e)?n.replace(e,t):n}},66127:function(e,t,n){"use strict";n(202784),n(435722),n(388632)},440943:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(716241),i=n(202784),o=n(662594),s=n(11931);let a=e=>{let t=(0,o.L)();return(0,i.useEffect)(()=>{e&&t(r.Nwg.course.fetchCourse(e))},[t]),(0,s.a)(t=>e?r.Ys.course.getCourseById(t,e):void 0)}},236932:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(716241),i=n(11931);let o=e=>(0,i.a)(t=>r.Ys.featureFlags.getFeatureFlagValue(t,e))},589821:function(e,t,n){"use strict";n(561632),n(354114)},183168:function(e,t,n){"use strict";n(202784),n(716241),n(662594),n(11931)},578616:function(e,t,n){"use strict";n(158550)},968227:function(e,t,n){"use strict";function r(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>t[n]===e)}function i(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)}function o(e,t){if(e===t)return!0;let n=Object.keys(e);if(!r(n,Object.keys(t)))return!1;for(let r of n)if(e[r]!==t[r])return!1;return!0}n.d(t,{AD:function(){return i},TO:function(){return r},yZ:function(){return o}})},60394:function(e,t,n){"use strict";function r(e){let t={},n=e.split("#");if(n.length%2!=0)throw Error("Number of keys does not match number of values in id string.");for(let e=0;e<n.length;e+=2){let r=n[e],i=n[e+1];t[r]=i}return t}function i(e){let t=Object.keys(e);if(0===t.length)throw Error("Object must have at least one property.");return t.map(t=>`${t}#${e[t]}`).join("#")}n.d(t,{_:function(){return i},q:function(){return r}})},243038:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});let r=[2,2,4,8];class i{constructor(){this.currentStepIndex=0}next(){let e=1e3*r[this.currentStepIndex],t=Math.min(this.currentStepIndex+1,r.length-1);return this.currentStepIndex=t,e}}async function o(e,t){let n;let r=new Promise(t=>{n=setTimeout(t,e)});try{await Promise.race([r,...t?[t]:[]])}finally{clearTimeout(n)}}async function s(e,t,n){let r;let s=new i,a=new Promise((e,t)=>{n&&(r=()=>t(n.reason),n.addEventListener("abort",r,{once:!0}))});try{for(;!(null==n?void 0:n.aborted);){let n=await Promise.race([e(),a]);if(t(n))return n;await o(s.next(),a)}throw n.reason}finally{r&&(null==n||n.removeEventListener("abort",r))}}},503715:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(560985),i=n(715655),o=n(968227);let s=(0,r.wN)(i.PW,o.TO)},537672:function(e,t,n){"use strict";n.d(t,{T2:function(){return d},jQ:function(){return a},nP:function(){return u},vc:function(){return l}});var r=n(134129);let i={apiBasePath:"",xsrf:"",partnerCloudBasePath:""},o={userName:"",xsrfToken:""},s={fetchFoundationsToken:void 0,fetchFoundationsContext:void 0,cookies:void 0,foundationsToken:void 0,foundationsTokenContext:void 0};function a(e){Object.assign(i,e),Object.assign(o,{xsrfToken:e.xsrf,cookies:e.cookies}),Object.assign(s,e.foundationsApiSession),function(e){var t,n,i;let o;o=null!==(n=null===(t=null==globalThis?void 0:globalThis.location)||void 0===t?void 0:t.href)&&void 0!==n?n:e.apiBasePath;let s=/^[^\/]*\/\/[^\/]+/.exec(o);o=null!==(i=null==s?void 0:s[0])&&void 0!==i?i:o,r.qUl.setBaseUrl(o)}(e)}let l=i,u=o,d=s},956917:function(e,t,n){"use strict";n.d(t,{Nw:function(){return y},I6:function(){return g},Ys:function(){return f}});var r=n(715729),i=n(560985),o=n(961719),s=n(587637),a=n(436742);let l={ACHIEVEMENT_LOAD:"achievement.load",ACHIEVEMENT_CREATE:"achievement.create",ACHIEVEMENT_UPDATE:"achievement.update",ACHIEVEMENT_DELETE:"achievement.delete",ACHIEVEMENTS_LOAD:"achievements.load"};var u=n(968227);let d=(e,t)=>{var n;if(!(null==t?void 0:t.courseFoundationsId))return o.LW;let[r,i]=null!==(n=Object.entries(e.views.byCourseFoundationsId[null==t?void 0:t.courseFoundationsId]||{}).find(([,e])=>(0,u.AD)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:i}:o.LW},c=e=>["views","byCourseFoundationsId",e.courseFoundationsId],E=e=>["byId",e.achievementId],p=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseFoundationsId))return!1;let{view:r}=d(t.getState().achievement,e.query);return!r||!r.isLoading&&!r.isValid},m=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.M0)(null==n?void 0:n.status)},h=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.M5)(null==n?void 0:n.status)},I=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.BY)(null==n?void 0:n.status)},b=(e,t)=>{if(!t)return;let n=e.views.byCourseFoundationsId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},g=(0,o.Lq)({byId:{},views:{byCourseFoundationsId:{}}},{[l.ACHIEVEMENTS_LOAD]:(0,o.Li)(d,c),[(0,o.ok)(l.ACHIEVEMENTS_LOAD)]:(e,t)=>{var n;let{data:i}=t,a=(0,r.ZP)(e,e=>{Object.keys(i.achievementsById).forEach(t=>{e.byId[t]?e.byId[t]={value:i.achievementsById[t],status:e.byId[t].status}:e.byId[t]={value:i.achievementsById[t],status:s._B}})});return(0,o.NV)(a,t,{viewResolver:d,viewsPathResolver:c,values:null!==(n=null==i?void 0:i.achievementIds)&&void 0!==n?n:[]})},[(0,o.bG)(l.ACHIEVEMENTS_LOAD)]:(0,o.HT)(d,c),[l.ACHIEVEMENT_LOAD]:(0,s.gX)(E,s.yL.Load,s.hJ),[(0,o.ok)(l.ACHIEVEMENT_LOAD)]:(e,t)=>{let{achievement:n}=t;return(0,r.ZP)(e,e=>{e.byId[n.id]={value:n,status:(0,s.Tf)(s.yL.Load,e.byId[n.id],s._B)}})},[(0,o.bG)(l.ACHIEVEMENT_LOAD)]:(0,s.gX)(E,s.yL.Load,s.eV),[(0,o.ok)(l.ACHIEVEMENT_CREATE)]:(e,t)=>(0,r.ZP)(e,e=>{let{achievement:n,courseFoundationsId:r}=t;e.byId[n.id]={value:n,status:(0,s.Tf)(s.yL.Create,void 0,s._B)},b(e,r)}),[l.ACHIEVEMENT_DELETE]:(0,s.gX)(E,s.yL.Delete,s.zM),[(0,o.ok)(l.ACHIEVEMENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{achievementId:n,courseFoundationsId:r}=t;e.byId[n]={value:e.byId[n].value,status:(0,s.Tf)(s.yL.Delete,e.byId[n],s.ci)},b(e,r)}),[(0,o.bG)(l.ACHIEVEMENT_DELETE)]:(0,s.gX)(E,s.yL.Delete,s.eV),[l.ACHIEVEMENT_UPDATE]:(0,s.gX)(E,s.yL.Update,s.DK),[(0,o.ok)(l.ACHIEVEMENT_UPDATE)]:(e,t)=>(0,r.ZP)(e,e=>{let{achievement:n,courseFoundationsId:r}=t;e.byId[n.id]={value:n,status:(0,s.Tf)(s.yL.Update,e.byId[n.id],s._B)},b(e,r)}),[(0,o.bG)(l.ACHIEVEMENT_UPDATE)]:(0,s.gX)(E,s.yL.Update,s.eV)}),y={loadAchievementsByQuery:e=>(0,o.RU)(l.ACHIEVEMENTS_LOAD,async()=>{try{return{data:await (0,a.nP)(e),query:e}}catch(t){throw new o.GM(t).setData({query:e})}},{data:{query:e},condition:p}),loadAchievement:(e,t)=>(0,o.RU)(l.ACHIEVEMENT_LOAD,async()=>{try{let n=await (0,a.mJ)(e,t);return{courseFoundationsId:e,achievementId:n.id,achievement:n}}catch(n){throw new o.GM(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:m}),createAchievement:(e,t)=>(0,o.RU)(l.ACHIEVEMENT_CREATE,async()=>{let n=await (0,a.Zx)(e,t);return{courseFoundationsId:e,achievementId:n.id,achievement:n}}),deleteAchievement:(e,t)=>(0,o.RU)(l.ACHIEVEMENT_DELETE,async()=>{try{return await (0,a.OY)(e,t),{courseFoundationsId:e,achievementId:t}}catch(n){throw new o.GM(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:h}),updateAchievement:(e,t,n)=>(0,o.RU)(l.ACHIEVEMENT_UPDATE,async()=>{try{let r=await (0,a.u$)(e,t,n);return{courseFoundationsId:e,achievementId:t,achievement:r}}catch(n){throw new o.GM(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:I})},f={getAchievementsByQuery:(0,i.P1)([e=>e.achievement,(e,t)=>t],(e,t)=>{let{view:n}=d(e,t);return n?(n.values||[]).map(t=>e.byId[t]).filter(e=>(null==e?void 0:e.value)&&(null==e?void 0:e.status.status)!=="deleted").map(e=>e.value):[]}),getAchievementsViewByQuery:(0,i.P1)([e=>e.achievement,(e,t)=>t],(e,t)=>{let{view:n}=d(e,t);return n||null}),getAchievementById:(e,t)=>{var n;return null===(n=e.achievement.byId[t])||void 0===n?void 0:n.value},getAchievementStatusById:(e,t)=>{var n;return null===(n=e.achievement.byId[t])||void 0===n?void 0:n.status}}},8381:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return E}});var r=n(182267),i=n(961719);let o={ACHIEVEMENT_RECIPIENT_COUNTS_LOAD:"achievement.recipient.counts.load"};var s=n(715729),a=n(587637);let l=e=>["byCourseFoundationsId",e.courseFoundationsId],u=(e,t)=>{let n=t.getState().achievementRecipientCount.byCourseFoundationsId[e.courseFoundationsId];return(0,a.t)(null==n?void 0:n.status)},d=(0,i.Lq)({byCourseFoundationsId:{}},{[o.ACHIEVEMENT_RECIPIENT_COUNTS_LOAD]:(0,a.nt)(l,a.Em),[(0,i.ok)(o.ACHIEVEMENT_RECIPIENT_COUNTS_LOAD)]:(e,t)=>{let{courseFoundationsId:n,counts:r}=t;return(0,s.ZP)(e,e=>{e.byCourseFoundationsId[n]={value:r.achievements,status:a.vo}})},[(0,i.bG)(o.ACHIEVEMENT_RECIPIENT_COUNTS_LOAD)]:(0,a.nt)(l,a.gp)}),c={loadAchievementRecipientCounts:e=>(0,i.RU)(o.ACHIEVEMENT_RECIPIENT_COUNTS_LOAD,async()=>{try{let t=await (0,r.X69)(e);return{courseFoundationsId:e,counts:t}}catch(t){throw new i.GM(t).setData({courseFoundationsId:e})}},{data:{courseFoundationsId:e},condition:u})},E={getAchievementRecipientCountsByCourseFoundationsId:(e,t)=>{var n;return null===(n=e.achievementRecipientCount.byCourseFoundationsId[t])||void 0===n?void 0:n.value},getAchievementRecipientCountsStatusByCourseFoundationsId:(e,t)=>{var n;return null===(n=e.achievementRecipientCount.byCourseFoundationsId[t])||void 0===n?void 0:n.status}}},355293:function(e,t,n){"use strict";n.d(t,{Nw:function(){return T},I6:function(){return _},Ys:function(){return v}});var r=n(715729),i=n(961719),o=n(587637),s=n(182267),a=n(968227);let l={ACHIEVEMENT_RECIPIENT_LOAD:"achievement.recipient.load",ACHIEVEMENT_RECIPIENT_UPDATE:"achievement.recipient.update",ACHIEVEMENT_RECIPIENTS_LOAD_BY_MEMBERSHIP:"achievement.recipients.load.by.membership",ACHIEVEMENT_RECIPIENTS_LOAD_BY_ACHIEVEMENT:"achievement.recipients.load.by.achievement"},u=(e,t)=>`${e}#${t}`,d=e=>u(e.achievementId,e.membershipId),c=(e,t)=>{var n,r;if(!(null==t?void 0:t.achievementId))return i.LW;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byAchievementId[t.achievementId])&&void 0!==n?n:{}).find(([,e])=>(0,a.AD)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.LW},E=e=>["views","byAchievementId",e.achievementId],p=(e,t)=>{var n,r;if(!(null==t?void 0:t.membershipFoundationsId))return i.LW;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byMembershipFoundationsId[t.membershipFoundationsId])&&void 0!==n?n:{}).find(([,e])=>(0,a.AD)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.LW},m=e=>["views","byMembershipFoundationsId",e.membershipFoundationsId],h=e=>["byId",u(e.achievementId,e.membershipFoundationsId)],I=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.achievementId))return!1;let{view:r}=c(t.getState().achievementRecipient,e.query);return!r||!r.isLoading&&!r.isValid},b=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.membershipFoundationsId))return!1;let{view:r}=p(t.getState().achievementRecipient,e.query);return!r||!r.isLoading&&!r.isValid},g=(e,t)=>{let n=t.getState(),r=u(e.achievementId,e.membershipFoundationsId),i=n.achievementRecipient.byId[r];return(0,o.M0)(null==i?void 0:i.status)},y=(e,t)=>{let n=t.getState(),r=u(e.achievementId,e.membershipFoundationsId),i=n.achievementRecipient.byId[r];return(0,o.BY)(null==i?void 0:i.status)},f=(e,t)=>{if(!t)return;let n=e.views.byAchievementId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},S=(e,t)=>{if(!t)return;let n=e.views.byMembershipFoundationsId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},_=(0,i.Lq)({byId:{},views:{byAchievementId:{},byMembershipFoundationsId:{}}},{[l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_MEMBERSHIP]:(0,i.Li)(p,m),[(0,i.ok)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_MEMBERSHIP)]:(e,t)=>{var n;let{data:s}=t,a=(0,r.ZP)(e,e=>{s.results.forEach(t=>{var n,r;let i=d(t);e.byId[i]={value:t,status:null!==(r=null===(n=e.byId[i])||void 0===n?void 0:n.status)&&void 0!==r?r:o._B}})});return(0,i.NV)(a,t,{viewResolver:p,viewsPathResolver:m,values:null!==(n=null==s?void 0:s.results.map(e=>d(e)))&&void 0!==n?n:[]})},[(0,i.bG)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_MEMBERSHIP)]:(0,i.HT)(p,m),[l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_ACHIEVEMENT]:(0,i.Li)(c,E),[(0,i.ok)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_ACHIEVEMENT)]:(e,t)=>{var n,s;let{data:a}=t,l=(0,r.ZP)(e,e=>{a.results.forEach(t=>{let n=d(t);e.byId[n]={value:t,status:e.byId[n]?e.byId[n].status:o._B}})});return(0,i.NV)(l,t,{viewResolver:c,viewsPathResolver:E,values:null!==(s=null===(n=null==a?void 0:a.results)||void 0===n?void 0:n.map(e=>d(e)))&&void 0!==s?s:[],paging:{lastEvaluatedKey:null==a?void 0:a.lastEvaluatedKey}})},[(0,i.bG)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_ACHIEVEMENT)]:(0,i.HT)(c,E),[l.ACHIEVEMENT_RECIPIENT_LOAD]:(0,o.gX)(h,o.yL.Load,o.hJ),[(0,i.ok)(l.ACHIEVEMENT_RECIPIENT_LOAD)]:(e,t)=>{let{data:n}=t;return(0,r.ZP)(e,e=>{let t=d(n);e.byId[t]={value:n,status:(0,o.Tf)(o.yL.Load,e.byId[t],o._B)}})},[(0,i.bG)(l.ACHIEVEMENT_RECIPIENT_LOAD)]:(0,o.gX)(h,o.yL.Load,o.eV),[l.ACHIEVEMENT_RECIPIENT_UPDATE]:(0,o.gX)(h,o.yL.Update,o.DK),[(0,i.ok)(l.ACHIEVEMENT_RECIPIENT_UPDATE)]:(e,t)=>(0,r.ZP)(e,e=>{let{data:n}=t,r=d(n);e.byId[r]={value:n,status:(0,o.Tf)(o.yL.Update,e.byId[r],o._B)},f(e,n.achievementId),S(e,n.membershipId)}),[(0,i.bG)(l.ACHIEVEMENT_RECIPIENT_UPDATE)]:(0,o.gX)(h,o.yL.Update,o.eV)}),T={loadAchievementRecipientsByMembershipQuery:e=>(0,i.RU)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_MEMBERSHIP,async()=>{try{return{data:await (0,s.vBK)(e.courseFoundationsId,e.membershipFoundationsId),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:b}),loadAchievementRecipientsByAchievementQuery:e=>(0,i.RU)(l.ACHIEVEMENT_RECIPIENTS_LOAD_BY_ACHIEVEMENT,async()=>{try{return{data:await (0,s.dcZ)(e.courseFoundationsId,e.achievementId,e.paging),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:I}),loadAchievementRecipient:e=>(0,i.RU)(l.ACHIEVEMENT_RECIPIENT_LOAD,async()=>{try{return{data:await (0,s.VOw)(e.courseFoundationsId,e.achievementId,e.membershipFoundationsId),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{...e},condition:g}),updateAchievementRecipient:(e,t)=>(0,i.RU)(l.ACHIEVEMENT_RECIPIENT_UPDATE,async()=>{try{return{data:await (0,s.JlT)(e.courseFoundationsId,e.achievementId,e.membershipFoundationsId,t),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{...e},condition:y})},v={getAchievementRecipientsByMembershipQuery:(e,t)=>{var n;let{view:r}=p(e.achievementRecipient,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>e.achievementRecipient.byId[t]).filter(e=>void 0!==e&&void 0!==e.value&&"deleted"!==e.status.status).map(e=>e.value):[]},getAchievementRecipientsViewByMembershipQuery:(e,t)=>{let{view:n}=p(e.achievementRecipient,t);return null!=n?n:null},getAchievementRecipientsByAchievementQuery:(e,t)=>{var n;let{view:r}=c(e.achievementRecipient,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>e.achievementRecipient.byId[t]).filter(e=>void 0!==e&&void 0!==e.value&&"deleted"!==e.status.status).map(e=>e.value):[]},getAchievementRecipientsViewByAchievementQuery:(e,t)=>{let{view:n}=c(e.achievementRecipient,t);return null!=n?n:null},getAchievementRecipientById:(e,t)=>{var n;return null===(n=e.achievementRecipient.byId[t])||void 0===n?void 0:n.value}}},857842:function(e,t,n){"use strict";n.d(t,{I6:function(){return T},Nw:function(){return A},Ys:function(){return v}});var r=n(715729),i=n(968227),o=n(503715),s=n(182267),a=n(869075),l=n(617040),u=n(587637),d=n(720533),c=n(961719);let E=e=>["aclMembers","byRuleId",e.ruleId],p=(e,t)=>{let n=t.getState().adaptiveRelease.aclMembers.byRuleId[e.ruleId];return(0,u.t)(null==n?void 0:n.status)},m=e=>["aclGroups","byRuleId",e.ruleId],h=(e,t)=>{let n=t.getState().adaptiveRelease.aclGroups.byRuleId[e.ruleId];return(0,u.t)(null==n?void 0:n.status)},I=(e,t)=>{var n;if(!t)return c.LW;let[r,o]=null!==(n=Object.entries(e.views.byContentId[t.contentId]||{}).find(([,e])=>(0,i.AD)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:o}:c.LW},b=e=>["views","byContentId",e.contentId],g=(e,t)=>Object.keys(e).find(n=>{let r=e[n],o=(0,i.AD)(r.query.paging,t.paging),s=!("filter"in r.query)||!("filter"in t)||(0,i.AD)(r.query.filter,t.filter);return o&&s}),y=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byContentId[t.contentId]||{},r=g(n,t);return r?{id:r,view:n[r]}:c.LW},f=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byContentId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},S=(e,t)=>{var n;return(null===(n=e.criteria)||void 0===n?void 0:n.map(e=>e.id===t.id?t:e))||[]};function _(e,t){return(0,r.Uy)(e,e=>{t.rules.forEach(t=>{t.id&&(e.byId[t.id]={...e.byId[t.id],...t},delete e.aclMembers.byRuleId[t.id],delete e.aclGroups.byRuleId[t.id])}),f(e,t.contentId)})}let T=(0,c.Lq)({byId:{},views:{byContentId:{}},aclMembers:{byRuleId:{}},aclGroups:{byRuleId:{}}},{[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_RULES_CREATE)]:(e,t)=>_(e,t),[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_RULE_DELETE)]:(e,t)=>(0,r.Uy)(e,e=>{delete e.byId[t.ruleId],f(e,t.contentId)}),[l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT]:(0,c.Li)(I,b),[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(e,t)=>{let{data:n}=t,{rules:i,paging:o,permissions:s}=n,a=Object.keys(i);return e=(0,r.Uy)(e,e=>{a.forEach(t=>{e.byId[t]=i[t]})}),(0,c.NV)(e,t,{viewResolver:I,viewsPathResolver:b,paging:o,values:a,permissions:s})},[l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT]:(0,c.Li)(y,b),[(0,c.bG)(l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(0,c.HT)(y,b),[(0,c.bG)(l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(0,c.HT)(I,b),[l.V5.ADAPTIVE_RELEASE_RULES_PERSIST]:(e,t)=>(0,r.Uy)(e,e=>{t.rules.forEach(t=>{t.id&&!e.byId[t.id]&&(e.byId[t.id]={})})}),[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_RULES_PERSIST)]:(e,t)=>_(e,t),[(0,c.bG)(l.V5.ADAPTIVE_RELEASE_RULES_PERSIST)]:(e,t)=>(0,r.Uy)(e,e=>{t.rules.forEach(t=>{var n;t.id&&0===Object.keys(null!==(n=e.byId[t.id])&&void 0!==n?n:{}).length&&delete e.byId[t.id]})}),[(0,c.ok)(d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.Uy)(e,e=>{var n;if(!(null===(n=t.result)||void 0===n?void 0:n.ruleId))return;let{contentId:r,ruleId:i}=t.result,o=S(e.byId[i],t.result);e.byId[i].criteria=o,delete e.aclMembers.byRuleId[i],delete e.aclGroups.byRuleId[i],f(e,r)}),[(0,c.ok)(d.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>(0,r.Uy)(e,e=>{let{contentId:n}=t,r=e.views.byContentId[n];r&&Object.values(r).forEach(t=>{var n;null===(n=t.values)||void 0===n||n.forEach(t=>{delete e.byId[t],delete e.aclMembers.byRuleId[t],delete e.aclGroups.byRuleId[t]})}),f(e,n)}),[(0,c.ok)(d.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.Uy)(e,e=>{let{results:n}=t;Object.values(n).forEach(t=>{let n=t.id,r=e.views.byContentId[n];r&&Object.values(r).forEach(t=>{var n;null===(n=t.values)||void 0===n||n.forEach(t=>{delete e.byId[t],delete e.aclMembers.byRuleId[t],delete e.aclGroups.byRuleId[t]})}),f(e,n)})}),[(0,c.ok)(d.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,r.Uy)(e,e=>{Object.values(t.results).forEach(t=>{var n;if(!(null===(n=t.result)||void 0===n?void 0:n.ruleId))return;let{contentId:r,ruleId:i}=t.result,o=S(e.byId[i],t.result);e.byId[i].criteria=o,delete e.aclMembers.byRuleId[i],delete e.aclGroups.byRuleId[i],f(e,r)})}),[l.V5.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD]:(0,u.nt)(E,u.Em),[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD)]:(e,t)=>{let{ruleId:n,aclUsers:i}=t;return(0,r.Uy)(e,e=>{e.aclMembers.byRuleId[n]={value:i,status:u.vo}})},[(0,c.bG)(l.V5.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD)]:(0,u.nt)(E,u.gp),[l.V5.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD]:(0,u.nt)(m,u.Em),[(0,c.ok)(l.V5.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD)]:(e,t)=>{let{ruleId:n,aclGroups:i}=t;return(0,r.Uy)(e,e=>{e.aclGroups.byRuleId[n]={value:i,status:u.vo}})},[(0,c.bG)(l.V5.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD)]:(0,u.nt)(m,u.gp)}),v={getAdaptiveReleaseRulesByQuery:(0,o.U)((e,t)=>{let{view:n}=I(e.adaptiveRelease,t);return n&&n.isValid&&!n.isLoading?(n.values||[]).map(t=>e.adaptiveRelease.byId[t]):[]},e=>e),getAdaptiveReleaseRulesViewStatusByQuery:(e,t)=>{let{view:n}=y(e.adaptiveRelease,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getAdaptiveReleaseRulesPermissionsByQuery:(e,t)=>{var n;let{view:r}=I(e.adaptiveRelease,t);return null!==(n=null==r?void 0:r.permissions)&&void 0!==n?n:null},getAdaptiveReleaseAclMembersByRuleId:(e,t)=>{var n;return null===(n=e.adaptiveRelease.aclMembers.byRuleId[t])||void 0===n?void 0:n.value},getAdaptiveReleaseAclGroupsByRuleId:(e,t)=>{var n;return null===(n=e.adaptiveRelease.aclGroups.byRuleId[t])||void 0===n?void 0:n.value}},A={createAdaptiveReleaseRules:(e,t,n)=>(0,c.RU)(l.V5.ADAPTIVE_RELEASE_RULES_CREATE,async()=>{let r=await (0,a.Pz)(e,t,n);return{contentId:t,rules:r}}),deleteAdaptiveReleaseRule:(e,t,n)=>(0,c.RU)(l.V5.ADAPTIVE_RELEASE_RULE_DELETE,async()=>(await (0,a.jh)(e,t,n),{contentId:t,ruleId:n}),{data:{contentId:t,ruleId:n}}),loadAdaptiveReleaseRulesByQuery:e=>(0,c.RU)(l.V5.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT,async()=>({data:await (0,a.J_)(e),query:e}),{data:{query:e}}),persistAdaptiveReleaseRules:(e,t,n)=>(0,c.RU)(l.V5.ADAPTIVE_RELEASE_RULES_PERSIST,async()=>{let r=await (0,a.mR)(e,t,n);return{contentId:t,rules:r}},{data:{contentId:t}}),loadAdaptiveReleaseAclMembers:(e,t,n,r)=>{let i={courseId:e,contentId:t,ruleId:n,criteriaId:r,limit:l.yq,offset:0,expand:"user"};return(0,c.RU)(l.V5.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD,async()=>{try{let e=await (0,s.FAX)(i);return{contentId:t,ruleId:n,aclUsers:e.userPredicates}}catch(i){throw new c.GM(i).setData({courseId:e,contentId:t,ruleId:n,criteriaId:r})}},{data:{contentId:t,ruleId:n},condition:p})},loadAdaptiveReleaseAclGroups:(e,t,n,r)=>{let i={courseId:e,contentId:t,ruleId:n,criteriaId:r,limit:l.yq,offset:0,expand:"group"};return(0,c.RU)(l.V5.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD,async()=>{try{let e=await (0,s.JYP)(i);return{contentId:t,ruleId:n,aclGroups:e.groupPredicates}}catch(i){throw new c.GM(i).setData({courseId:e,contentId:t,ruleId:n,criteriaId:r})}},{data:{contentId:t,ruleId:n},condition:h})},clearAdaptiveReleaseInStoreByContentId:e=>(0,c.aU)((0,c.ok)(d.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e})}},792521:function(e,t,n){"use strict";n.d(t,{Nw:function(){return m},I6:function(){return c},Ys:function(){return p}});var r=n(134129),i=n(715729),o=n(806184),s=n(494615),a=n(961719);let l={AI_SETTINGS_LOAD:"aisettings.load"};var u=n(778510);let d={available:!1,contextPickerAvailable:!1,canGenerateKeywords:!1,canGenerateDocuments:!1,canGenerateOutlines:!1,canGenerateQuestions:!1,canGenerateRubrics:!1,canGenerateJournals:!1,canGenerateDiscussions:!1,canGenerateAssignments:!1,canChat:!1,chat:{questioning:!1,rolePlay:!1},images:{learningModules:!1,rtes:!1,outlines:"none"},premium:{available:!1}},c=(0,a.Lq)({byCourseId:{}},{[l.AI_SETTINGS_LOAD]:(e,t)=>(0,i.ZP)(e,e=>{let n=e.byCourseId[t.courseId];n||(n={aiSettings:d,isLoaded:!1,isLoading:!0},e.byCourseId[t.courseId]=n),n.isLoading=!0}),[(0,a.ok)(l.AI_SETTINGS_LOAD)]:(e,t)=>{let n=t.data;return(0,i.ZP)(e,e=>{let r=e.byCourseId[t.courseId];r||(r={aiSettings:n,isLoaded:!0,isLoading:!1},e.byCourseId[t.courseId]=r),r.aiSettings=n,r.isLoaded=!0,r.isLoading=!1})},[(0,a.bG)(l.AI_SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{let n=e.byCourseId[t.courseId];n&&(n.isLoading=!1)})}),E=Object.freeze({aiSettings:d,isLoaded:!1,isLoading:!1}),p={getAiSettings:(e,t)=>e.ai.byCourseId[t]||E},m={getAiSettings:e=>(0,a.c3)(async(t,n)=>{var i;let c=n().ai.byCourseId[e];if((null==c?void 0:c.isLoaded)||(null==c?void 0:c.isLoading))return null===(i=p.getAiSettings(n(),e))||void 0===i?void 0:i.aiSettings;t((0,a.aU)(l.AI_SETTINGS_LOAD,{courseId:e}));try{let n=await (0,o.I8)(e);return t((0,a.aU)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:n})),n}catch(n){if((0,u.Kn)((0,u.Gt)(n),[r.oji.NotFound]))return t((0,a.aU)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:d})),d;throw t((0,a.aU)((0,a.bG)(l.AI_SETTINGS_LOAD),{courseId:e,err:n})),t((0,a.aU)((0,a.ok)(s.Z.APP_ERROR),{error:n})),{err:n}}})}},779004:function(e,t,n){"use strict";n.d(t,{I6:function(){return E},Nw:function(){return p}});var r=n(715729),i=n(276635),o=n(961719),s=n(134129),a=n(494615),l=n(170209),u=n(468832),d=n(778510);let c={announcements:{},isLoading:!1,isSearchingSuccessful:null,searchInputState:{searchText:"",isCollapsed:!0},paging:null,announcementsCounts:{},courseContext:{id:"",courseId:"",permissions:{chooseUltraStatus:!1,export:!1,archive:!1,viewAutoArchive:!1,edit:!1,editName:!1,editAvailability:!1,editClosed:!1,editBanner:!1,editBannerVisibility:!1,copy:!1,convert:!1,import:!1,editLocale:!1,editDuration:!1,editTerm:!1,delete:!1,viewEnrollments:!1,messagesEnabled:!1}},announcement:null,detailPanelState:{},sortCriteria:[{field:s.SNh.StartDateRestriction,direction:s.SrV.Descending}],listener:{refreshAnnouncementsCounts:!1,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1},recentUpdatedAnnouncementIds:[]},E=(0,o.Lq)(c,{[u.V5.ANNOUNCEMENT_LOAD]:(e,t)=>(0,o.K4)(e,t,{isSearchingSuccessful:null}),[(0,o.ok)(u.V5.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,o.f2)(e,t,{announcements:t.announcements,paging:t.paging,listener:{...e.listener,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1}}),[(0,o.ok)(u.V5.ANNOUNCEMENT_LOAD_MORE)]:(e,t)=>(0,o.f2)(e,t,{announcements:{...e.announcements,...t.announcements}}),[(0,o.ok)(u.V5.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,o.f2)(e,t,{isSearchingSuccessful:!0}),[(0,o.bG)(u.V5.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,o.sT)(e,t,{announcements:{},paging:null}),[(0,o.bG)(u.V5.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,o.sT)(e,t,{isSearchingSuccessful:!1}),[u.V5.CHANGE_SEARCH_INPUT_STATE]:(e,t)=>({...e,searchInputState:t.searchInputState}),[u.V5.CHANGE_ANNOUNCEMENT_PANEL_STATE]:(e,t)=>({...e,detailPanelState:t.detailPanelState}),[(0,o.ok)(u.V5.ANNOUNCEMENT_SAVE)]:(e,t)=>{let n=e.recentUpdatedAnnouncementIds;return t.announcement&&-1===n.indexOf(t.announcement.id)&&(n=[...e.recentUpdatedAnnouncementIds,t.announcement.id]),(0,o.f2)(e,t,{announcements:{...e.announcements,[t.announcement.id]:{...t.announcement,isDraft:!1}},announcement:t.announcement,listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0},recentUpdatedAnnouncementIds:n})},[(0,o.bG)(u.V5.ANNOUNCEMENT_SAVE)]:(e,t)=>(0,o.sT)(e,t,{}),[(0,o.ok)(u.V5.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,o.f2)(e,t,{announcements:i.omit(e.announcements,t.announcementId),listener:{...e.listener,refreshAnnouncementsCounts:!0}}),[(0,o.bG)(u.V5.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,o.sT)(e,t,{}),[(0,o.ok)(u.V5.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS)]:(e,t)=>(0,o.f2)(e,t,{announcements:{...e.announcements,[t.announcement.id]:t.announcement},listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0}}),[(0,o.ok)(u.V5.GET_COURSE_CONTEXT)]:(e,t)=>(0,o.f2)(e,t,{courseContext:t.courseContext}),[(0,o.bG)(u.V5.GET_COURSE_CONTEXT)]:(e,t)=>(0,o.sT)(e,t,{courseContext:{}}),[(0,o.ok)(u.V5.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,o.f2)(e,t,{announcement:t.announcement}),[(0,o.bG)(u.V5.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,o.sT)(e,t,{announcement:{}}),[u.V5.SWITCH_SORT_CRITERIA]:(e,t)=>({...e,sortCriteria:t.sortCriteria}),[u.V5.ANNOUNCEMENT_CLEAR]:(e,t)=>({...c}),[u.V5.REMOVE_FROM_RECENT_UPDATED]:(e,t)=>(0,r.ZP)(e,e=>{e.recentUpdatedAnnouncementIds.length>0&&i.remove(e.recentUpdatedAnnouncementIds,e=>e===t.id)})}),p={loadAnnouncements:(e,t,n=!1)=>(0,o.c3)((r,i)=>m(i())?(r((0,o.aU)(u.V5.ANNOUNCEMENT_LOAD)),(0,l.Nf)({courseId:e,filter:{searchText:t.searchText},paging:t.paging,sort:t.sort}).then(e=>(n?r((0,o.aU)((0,o.ok)(u.V5.ANNOUNCEMENT_LOAD_MORE),{...e})):(r((0,o.aU)((0,o.ok)(u.V5.ANNOUNCEMENT_LOAD),{...e})),t.searchText&&r((0,o.aU)((0,o.ok)(u.V5.ANNOUNCEMENT_SEARCH)))),e),e=>(r((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),r((0,o.aU)((0,o.bG)(u.V5.ANNOUNCEMENT_LOAD),{err:e})),t.searchText&&r((0,o.aU)((0,o.bG)(u.V5.ANNOUNCEMENT_SEARCH))),Promise.resolve(null)))):Promise.resolve(null)),changeSearchInputState:e=>(0,o.aU)(u.V5.CHANGE_SEARCH_INPUT_STATE,{searchInputState:e}),changeReadStatusAnnouncement:(e,t,n)=>(0,o.c3)((r,i)=>(0,l.$w)(e,t.id,n).then(()=>{r((0,o.aU)((0,o.ok)(u.V5.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS),{announcement:{...t,readStatus:{isRead:n}}}))},e=>{r((0,o.aU)((0,o.bG)(u.V5.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS))),r((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e}))})),saveAnnouncement:(e,t)=>(0,o.c3)((n,r)=>(0,l.de)(e,t).then(t=>{n((0,o.aU)((0,o.ok)(u.V5.ANNOUNCEMENT_SAVE),{courseId:e,announcement:t.announcement}))},e=>{n((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(u.V5.ANNOUNCEMENT_SAVE),{err:e}))})),removeAnnouncement:(e,t)=>(0,o.c3)((n,r)=>(0,l._5)(e,t).then(r=>{n((0,o.aU)((0,o.ok)(u.V5.ANNOUNCEMENT_REMOVE),{courseId:e,announcementId:t}))},e=>{n((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(u.V5.ANNOUNCEMENT_REMOVE),{err:e}))})),getCourseContext:e=>(0,o.c3)((t,n)=>(0,l.on)(e).then(e=>{t((0,o.aU)((0,o.ok)(u.V5.GET_COURSE_CONTEXT),{...e}))},e=>{t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),t((0,o.aU)((0,o.bG)(u.V5.GET_COURSE_CONTEXT),{err:e}))})),getAnnouncement:(e,t)=>(0,o.c3)((n,r)=>(0,l.U_)(e,t).then(e=>{n((0,o.aU)((0,o.ok)(u.V5.GET_AN_ANNOUNCEMENT),{...e}))},e=>{let t=(0,d.Gt)(e);(0,d.Kn)(t,[s.oji.NotFound])||n((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(u.V5.GET_AN_ANNOUNCEMENT),{err:e}))})),changeAnnouncementPanelState:e=>(0,o.aU)(u.V5.CHANGE_ANNOUNCEMENT_PANEL_STATE,{detailPanelState:e}),switchSortCriteria:e=>(0,o.aU)(u.V5.SWITCH_SORT_CRITERIA,{sortCriteria:e}),clearAnnouncements:()=>(0,o.aU)(u.V5.ANNOUNCEMENT_CLEAR),removeFromRecentUpdated:e=>(0,o.aU)(u.V5.REMOVE_FROM_RECENT_UPDATED,{id:e})},m=e=>!e.announcement.isLoading},587637:function(e,t,n){"use strict";n.d(t,{BY:function(){return _},Bq:function(){return E},DK:function(){return h},Em:function(){return u},M0:function(){return S},M5:function(){return T},Tf:function(){return v},_B:function(){return l},by:function(){return c},ci:function(){return b},eV:function(){return m},gX:function(){return y},gp:function(){return p},hJ:function(){return d},nt:function(){return g},t:function(){return f},vo:function(){return a},yL:function(){return i},zM:function(){return I}});var r,i,o=n(276635),s=n(715729);(r=i||(i={}))[r.Load=0]="Load",r[r.Create=1]="Create",r[r.Update=2]="Update",r[r.Delete=3]="Delete";let a=Object.freeze({status:"success",fetchStatus:"idle"}),l=Object.freeze({status:"success",fetchStatus:"idle",mutationStatus:"idle"}),u=Object.freeze({status:"idle",fetchStatus:"fetching"}),d=Object.freeze({status:"idle",fetchStatus:"fetching",mutationStatus:"idle"}),c=Object.freeze({status:"invalid",fetchStatus:"idle"}),E=Object.freeze({status:"invalid",fetchStatus:"idle",mutationStatus:"idle"}),p=Object.freeze({status:"error",fetchStatus:"idle"}),m=Object.freeze({status:"error",fetchStatus:"idle",mutationStatus:"idle"}),h=Object.freeze({status:"idle",fetchStatus:"idle",mutationStatus:"updating"}),I=Object.freeze({status:"idle",fetchStatus:"idle",mutationStatus:"deleting"}),b=Object.freeze({status:"deleted",fetchStatus:"idle",mutationStatus:"idle"});function g(e,t){return(n,r)=>{let i=e(r);return(0,s.ZP)(n,e=>{(0,o.get)(n,[...i],void 0)?(0,o.set)(e,[...i,"status"],t):(0,o.set)(e,[...i],{status:t})})}}function y(e,t,n){return(r,a)=>{let l=e(a);return(0,s.ZP)(r,e=>{let s=(0,o.get)(r,[...l],void 0);if(!s){(0,o.set)(e,[...l],{status:n});return}(t===i.Delete||"deleted"!==s.status.status&&"deleting"!==s.status.mutationStatus)&&(t!==i.Delete||"deleted"!==s.status.status)&&(0,o.set)(e,[...l,"status"],n)})}}function f(e){return!e||("invalid"===e.status||"error"===e.status)&&"idle"===e.fetchStatus}function S(e){return!e||("invalid"===e.status||"error"===e.status)&&"idle"===e.fetchStatus&&"idle"===e.mutationStatus}function _(e){return"deleted"!==e.status&&"updating"!==e.mutationStatus&&"deleting"!==e.mutationStatus}function T(e){return"deleted"!==e.status&&"deleting"!==e.mutationStatus}function v(e,t,n){return e!==i.Delete&&((null==t?void 0:t.status.status)==="deleted"||(null==t?void 0:t.status.mutationStatus)==="deleting")?t.status:n}},494615:function(e,t){"use strict";t.Z={ROUTER_STATE_CHANGE_SUCCESS:"router.state.change.success",ROUTER_LOCATION_CHANGE_SUCCESS:"router.location.change.success",APP_ERROR:"app.error",APP_ERROR_CLEAR:"app.error.clear"}},319237:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(715729),i=n(276635),o=n(719784),s=n(961719),a=n(494615);let l=(0,s.Lq)({location:{},route:{},error:null},{[(0,s.ok)(a.Z.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>(0,r.ZP)(e,e=>{e.route=t.route}),[(0,s.ok)(a.Z.ROUTER_LOCATION_CHANGE_SUCCESS)]:(e,t)=>{let{queryParams:n}=t;return(0,r.ZP)(e,e=>{e.location.queryParams=n})},[(0,s.ok)(a.Z.APP_ERROR)]:(e,t)=>{let{error:n}=t,i=(0,o.Gt)(n);return console.error("Encountered application error",JSON.stringify(i)),(0,r.ZP)(e,e=>{e.error=i})},[(0,s.ok)(a.Z.APP_ERROR_CLEAR)]:e=>(0,r.ZP)(e,e=>{e.error=null})}),u={handleStateChangeSuccess:e=>(0,s.PH)(a.Z.ROUTER_STATE_CHANGE_SUCCESS,()=>{var t;let n=e||{},r=i.pick(n.toState,"name","panelClass","pageTitle"),o=Object.keys(null!==(t=n.toParams)&&void 0!==t?t:{}).filter(e=>"object"!=typeof n.toParams[e]&&"function"!=typeof n.toParams[e]).reduce((e,t)=>({...e,[t]:n.toParams[t]}),{});return Promise.resolve({route:{...r,params:o}})}),handleLocationChangeSuccess:e=>(0,s.PH)(a.Z.ROUTER_LOCATION_CHANGE_SUCCESS,()=>Promise.resolve({queryParams:e.queryParams||{}})),setError:e=>(0,s.c3)(t=>{t((0,s.aU)((0,s.ok)(a.Z.APP_ERROR),{error:e}))}),clearError:()=>(0,s.c3)(e=>{e((0,s.aU)((0,s.ok)(a.Z.APP_ERROR_CLEAR)))})},d={getRoute:e=>e.app.route,getLocation:e=>e.app.location,getQueryParams:e=>e.app.location.queryParams,getQueryParameterValue:e=>t=>t.app.location.queryParams[e],getAppError:e=>e.app.error}},941597:function(e,t,n){"use strict";n.d(t,{I6:function(){return w},Nw:function(){return k},Ys:function(){return M}});var r=n(715729),i=n(276635),o=n(961719),s=n(842330),a=n(720533),l=n(374899),u=n(728507),d=n(134129),c=n(494615),E=n(130789),p=n(175110),m=n(207849),h=n(537672),I=n(762319),b=n(873779),g=n(25859),y=n(211498),f=n(689033),S=n(64403);let _=0,T=(e,t,n)=>{let r=_;return _+=1,e((0,o.aU)(b.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD,{courseId:t,fileName:n,taskId:r})),r},v=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},A=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},O=e=>["views","byCourseId",e.courseId],C=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},s=Object.keys(r).find(e=>{let n=r[e];if("assessmentId"in n.query)return"assessmentId"in t&&t.assessmentId===n.query.assessmentId&&t.courseId===n.query.courseId;if("assessmentId"in t)return!1;let o=i.isEqual(n.query.paging,t.paging),s=i.isEqual(n.query.filter,t.filter),a=i.isEqual(n.query.sort,t.sort);return o&&a&&s});return s?{id:s,view:r[s]}:o.LW},R=(e,t)=>{let n=(0,S.GE)(t);if(!n)return;let{id:r}=n;if(!r)return;let i=e.byAssessmentId[r];e.byAssessmentId[r]={...i,...n,api:{...null==i?void 0:i.api,isInvalidated:!1,isDeleting:!1,isUpdating:!1}}};function L(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}let D=(e,t)=>e.assessment.importTasksByCourseId[t]||{},P=e=>`questionBanksImportShowTaskStatus${e.replace(/\_/g,".")}`,N=(e,t)=>({key:P(e),isRequired:!0,value:JSON.stringify(Object.keys(t).reduce((e,t)=>({...e,[t]:!0}),{}))}),U=new Set([d.hRl.Complete,d.hRl.CompleteErrors]),w=(0,o.Lq)({byAssessmentId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},permissions:null,paging:null,isLoading:!1,views:{byCourseId:{}}},{[a.V.CONTENT_LOAD]:o.K4,[(0,o.ok)(a.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{if(!i.has(t,"assessments"))return;let{assessments:r}=t;Object.keys(r).forEach(t=>{var i,o;n.byAssessmentId[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:null!==(o=null===(i=e.byAssessmentId[t])||void 0===i?void 0:i.ui)&&void 0!==o?o:{}}})});return(0,o.f2)(n,t)},[(0,o.bG)(a.V.CONTENT_LOAD)]:o.sT,[b.V.ASSESSMENT_LOAD]:(0,o.Li)(C,O),[(0,o.ok)(b.V.ASSESSMENT_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,o.f2)(e,t);let{data:n}=t,{assessmentIds:s,byAssessmentId:a,paging:l,permissions:u}=n,d=(0,r.ZP)(e,t=>{Object.keys(a).forEach(n=>{let r=e.byAssessmentId[n],o=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui});t.byAssessmentId[n]={...a[n],ui:{},...o,api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.NV)(d,t,{viewResolver:C,viewsPathResolver:O,paging:l,permissions:u,values:s})},[(0,o.bG)(b.V.ASSESSMENT_LOAD)]:(0,o.HT)(C,O),[b.V.ASSESSMENT_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=t.assessment.id;e.byAssessmentId[r]||(e.byAssessmentId[r]={});let i=null!==(n=e.byAssessmentId[r].api)&&void 0!==n?n:{};e.byAssessmentId[r].api=i,i.isUpdating=!0}),[(0,o.ok)(b.V.ASSESSMENT_PERSIST)]:(e,t)=>{let{updatedAssessment:n}=t,i=null==n?void 0:n.id;if(!i)return e;let o=e.byAssessmentId[i],s={...o,...n,api:{...null==o?void 0:o.api,isUpdating:!1},ui:{...null==o?void 0:o.ui}};return(0,r.ZP)(e,e=>{e.byAssessmentId[i]=s,L(e,s.courseId)})},[(0,o.bG)(b.V.ASSESSMENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessment.id].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessment.id].api=r,r.isUpdating=!1}),[b.V.ASSESSMENT_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!0}),[(0,o.ok)(b.V.ASSESSMENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e.byAssessmentId[t.assessmentId],L(e,t.courseId)}),[(0,o.bG)(b.V.ASSESSMENT_DELETE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!1});return(0,o.sT)(n,t)},[(0,o.ok)(b.V.ASSESSMENT_CREATE)]:(e,t)=>(0,r.ZP)(e,n=>{let r={...e.byAssessmentId},i={...t.assessment,api:{isDeleting:!1,isUpdating:!0}};r[i.id]=i,n.byAssessmentId=r,L(n,i.courseId)}),[(0,o.ok)(l.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n,question:r}=t;(null==n?void 0:n.id)&&0===n.id.indexOf(s.dc)&&L(e,r.courseId)}),[(0,o.ok)(l.V.QUESTIONS_COPY)]:(e,t)=>(0,r.ZP)(e,e=>{L(e,t.courseId)}),[l.V.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{L(e,t.courseId)}),[(0,o.ok)(l.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{L(e,t.prevQuestion.courseId)}),[(0,o.ok)(l.V.QUESTIONS_CREATE)]:(e,t)=>(0,r.ZP)(e,e=>{L(e,t.courseId)}),[(0,o.ok)(a.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,n=>{let{results:r}=t;r.forEach(t=>{let r=i.findKey(e.byAssessmentId,{contentId:t});if(r){let t=e.byAssessmentId[r];delete n.byAssessmentId[r],L(n,t.courseId)}})}),[(0,o.ok)(a.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{contentId:n}=t,o=i.findKey(e.byAssessmentId,{contentId:n});return o?(0,r.ZP)(e,t=>{let n=e.byAssessmentId[o];delete t.byAssessmentId[o],L(t,n.courseId)}):e},[(0,o.ok)(a.V.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{L(e,n)})},[b.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;v(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[b.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:o}=t,s=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...s,progress:i,fileLocation:o}}),[b.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;A(e.fileUploadTasksByCourseId,n,r)}),[b.V.ASSESSMENT_IMPORT_TASKS_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTasks:r}=t,o=e.importTasksByCourseId[n];o?r.forEach(e=>{o[e.taskId]=e}):e.importTasksByCourseId[n]=i.keyBy(r,"taskId")}),[b.V.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTask:r}=t;v(e.importTasksByCourseId,n,r.taskId,r)}),[b.V.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var o;n.importTasksByCourseId[r][i.taskId]=i;let s=null===(o=e.importTasksByCourseId[r])||void 0===o?void 0:o[i.taskId];i.taskStatus!==(null==s?void 0:s.taskStatus)&&U.has(i.taskStatus)&&L(n,t.courseId)})}),[(0,o.ok)(b.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;A(e.importTasksByCourseId,n,r)}),[(0,o.bG)(b.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,o.sT)(e,t),[g.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{L(e,n)})},[(0,o.ok)(y.V.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.attempt)}),[(0,o.ok)(f.V.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.groupAttempt)}),[(0,o.ok)(y.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.attempt)}),[(0,o.ok)(f.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>(0,r.ZP)(e,e=>{R(e,t.groupAttempt)})}),k={loadAssessments:e=>{let{courseId:t,types:n,offset:r,limit:i}=e;return k.loadAssessmentsByQuery({courseId:t,...n?{filter:{types:n}}:null,paging:{offset:null!=r?r:0,limit:null!=i?i:20}})},loadAssessmentsByQuery:e=>(0,o.c3)(t=>(t((0,o.aU)(b.V.ASSESSMENT_LOAD,{query:e})),(0,u.DA)(e).then(n=>(t((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:n})),t((0,o.aU)((0,o.bG)(b.V.ASSESSMENT_LOAD),{query:e})),n}))),loadAssessmentById:({courseId:e,assessmentId:t})=>(0,o.c3)(n=>{let r={assessmentId:t,courseId:e};return n((0,o.aU)(b.V.ASSESSMENT_LOAD,{query:r})),(0,u.sn)({courseId:e,assessmentId:t}).then(e=>(n((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_LOAD),{data:{assessmentIds:[e.id],byAssessmentId:{[e.id]:e}},query:r})),e)).catch(e=>{throw n((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(b.V.ASSESSMENT_LOAD),{query:r})),e})}),deleteAssessment:({courseId:e,assessmentId:t})=>(0,o.c3)(n=>(n((0,o.aU)(b.V.ASSESSMENT_DELETE,{assessmentId:t,courseId:e})),(0,d.A1x)(h.nP,e,t).then(()=>(n((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),{assessmentId:t})).catch(r=>{throw n((0,o.aU)((0,o.bG)(b.V.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),r instanceof d.h0v||n((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:r})),r}))),createAssessment:e=>(0,o.c3)(t=>(t((0,o.aU)(b.V.ASSESSMENT_CREATE,e)),(0,u.Be)(e).then(e=>(t((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_CREATE),{assessment:e})),{assessment:e})).catch(e=>{throw t((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:e})),e}))),uploadAssessmentFile:e=>(0,o.c3)((t,n)=>{let{courseId:r,file:i,fileName:s,fileType:a}=e;t((0,o.aU)(b.V.ASSESSMENT_FILE_UPLOAD,e));let l=T(t,r,s);(0,E.O)({fileType:a,fileName:s,file:i}).then(e=>{let i=n().assessment.fileUploadTasksByCourseId[r];if(!(null==i?void 0:i[l]))return;let{fileLocation:s}=e;t((0,o.aU)(b.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE,{courseId:r,taskId:l,progress:100,fileLocation:s}))}).catch(e=>{t((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:e}))})}),removeAssessmentFileUploadTask:(e,t)=>(0,o.c3)(async n=>{n((0,o.aU)(b.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE,{courseId:e,taskId:t}))}),importAssessment:e=>(0,o.c3)((t,n)=>{let{courseId:r,fileName:i,fileLocation:s}=e;return t((0,o.aU)(b.V.ASSESSMENT_IMPORT,e)),(0,p.V)({courseId:r,fileName:i,fileLocation:s},{cxAction:"CX_ACTION_IMPORT",includeItems:["cxConfigArea_POOL"]}).then(e=>{t((0,o.aU)(b.V.ASSESSMENT_IMPORT_TASK_ADD,{courseId:r,queueTask:e}));let i=N(r,D(n(),r));return(0,I.px)(i)}).catch(e=>{throw t((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:e})),e})}),updateImportTaskStatus:(e,t)=>(0,o.c3)(async n=>{let r=await Promise.all(t.map(e=>(0,m.j)(e)));return n((0,o.aU)(b.V.ASSESSMENT_IMPORT_TASK_UPDATE,{courseId:e,queueTasks:r})),r}),loadAssessmentImportTasks:e=>(0,o.c3)(async t=>{let n=await (0,I._s)({key:P(e)});if(!n)return;let r={};try{r=JSON.parse(n.value)}catch(e){console.error(Error(`Parsing of preference value failed: ${n.value}`).message),console.error(e);return}let i=Object.entries(r).filter(([e,t])=>!0===t&&"string"==typeof e).map(([e])=>e);if(!i.length)return;let s=i.map(e=>(0,m.j)(e)),a=await Promise.all(s);t((0,o.aU)(b.V.ASSESSMENT_IMPORT_TASKS_LOAD,{courseId:e,queueTasks:a}))}),removeAssessmentImportTask:(e,t)=>(0,o.c3)((n,r)=>{let s=i.omit(D(r(),e),t),a=N(e,s);return(0,I.px)(a).then(()=>{n((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t}))}).catch(r=>{n((0,o.aU)((0,o.bG)(b.V.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t})),n((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:r}))})}),persistAssessment:(e,t)=>(0,o.c3)(n=>(n((0,o.aU)(b.V.ASSESSMENT_PERSIST,{assessment:e})),(0,u.nO)(e,{...t,assessmentId:e.id}).then(t=>(n((0,o.aU)((0,o.ok)(b.V.ASSESSMENT_PERSIST),{assessment:e,updatedAssessment:t})),{assessment:e})).catch(t=>{throw n((0,o.aU)((0,o.bG)(b.V.ASSESSMENT_PERSIST),{assessment:e})),n((0,o.aU)((0,o.ok)(c.Z.APP_ERROR),{error:t})),t})))},M={getAssessmentById:(e,t)=>i.find(e.assessment.byAssessmentId,{id:t}),getAssessmentByContentId:(e,t)=>i.find(e.assessment.byAssessmentId,{contentId:t}),getAssessmentsByCourseId:(e,t,n,r)=>{let o=i.filter(e.assessment.byAssessmentId,{courseId:t});return n&&(o=o.filter(e=>n.includes(e.type))),r&&(o=o.filter(e=>!(e.type===d.IQK.Test&&void 0!==e.subtype&&r.includes(e.subtype)))),o},getAssessmentByCourseAndGradableItemId:(e,t,n)=>i.find(e.assessment.byAssessmentId,{courseId:t,gradableItemId:n}),getAssessmentsByQuery:(e,t)=>{let{view:n}=C(e.assessment,t);return n?(n.values||[]).map(t=>M.getAssessmentById(e,t)).filter(e=>!!e):[]},getAssessmentsByQueries:(e,t)=>{let n=new Set([]);return t.reduce((t,r)=>{let{view:i}=C(e.assessment,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>M.getAssessmentById(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getAssessmentViewStateByQuery:(e,t)=>{var n;let{view:r}=C(e.assessment,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getAssessmentViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=C(e.assessment,n),o=null;return i&&(o={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:o}]},[]),getAssessmentFileUploadTasks:e=>t=>t.assessment.fileUploadTasksByCourseId[e]||{},getAssessmentImportTasks:e=>t=>t.assessment.importTasksByCourseId[e]||{}}},873779:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={ASSESSMENT_LOAD:"assessment.load",ASSESSMENT_PERSIST:"assessment.persist",ASSESSMENT_DELETE:"assessment.delete",ASSESSMENT_CREATE:"assessment.create",ASSESSMENT_FILE_UPLOAD:"assessment.file.upload",ASSESSMENT_FILE_UPLOAD_TASK_ADD:"assessment.fileUploadTask.add",ASSESSMENT_FILE_UPLOAD_TASK_UPDATE:"assessment.fileUploadTask.update",ASSESSMENT_FILE_UPLOAD_TASK_REMOVE:"assessment.fileUploadTask.remove",ASSESSMENT_IMPORT:"assessment.import",ASSESSMENT_IMPORT_TASKS_LOAD:"assessment.importTasks.load",ASSESSMENT_IMPORT_TASK_ADD:"assessment.importTask.add",ASSESSMENT_IMPORT_TASK_UPDATE:"assessment.importTask.update",ASSESSMENT_IMPORT_TASK_REMOVE:"assessment.importTask.remove"}},230331:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(134129),i=n(537672);async function o(e){let{courseId:t,attemptId:n}=e;return await (0,r.czX)(i.nP,t,n)}let s={ATTEMPT_LOG_LOAD:"attempt-log.load"};var a=n(961719),l=n(715729),u=n(778510),d=n(494615);let c=(0,a.Lq)({byAttemptId:{}},{[s.ATTEMPT_LOG_LOAD]:(e,t)=>(0,l.Uy)(e,e=>{let n=e.byAttemptId[t.attemptId];n||(n={attemptLog:void 0,isLoaded:!1},e.byAttemptId[t.attemptId]=n)}),[(0,a.ok)(s.ATTEMPT_LOG_LOAD)]:(e,t)=>(0,l.Uy)(e,e=>{e.byAttemptId[t.attemptId]={attemptLog:t.data,isLoaded:!0}}),[(0,a.bG)(s.ATTEMPT_LOG_LOAD)]:(e,t)=>(0,l.Uy)(e,e=>{e.byAttemptId[t.attemptId]||(e.byAttemptId[t.attemptId]={attemptLog:void 0,isLoaded:!1})})}),E={loadAttemptLog:e=>(0,a.c3)(async(t,n)=>{let i=n().attemptLog.byAttemptId[e.attemptId];if(null==i?void 0:i.isLoaded)return p.getAttemptLog(n(),e.attemptId);t((0,a.aU)(s.ATTEMPT_LOG_LOAD,{attemptId:e.attemptId}));try{let n=await o(e);return t((0,a.aU)((0,a.ok)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId,data:n})),n}catch(n){if((0,u.Kn)((0,u.Gt)(n),[r.oji.NotFound])){t((0,a.aU)((0,a.ok)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId,data:void 0}));return}throw t((0,a.aU)((0,a.bG)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId})),t((0,a.aU)((0,a.ok)(d.Z.APP_ERROR),{error:n})),{err:n}}})},p={getAttemptLog:(e,t)=>{let n=e.attemptLog.byAttemptId[t];if(n)return n.attemptLog}}},800610:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(715729),i=n(87293),o=n(961719),s=n(134129);let a={ATTEMPT_RECEIPT_LOAD:"attempt-receipt.load"},l=(0,o.Lq)({byAttemptReceiptId:{},isLoading:!1},{[a.ATTEMPT_RECEIPT_LOAD]:o.K4,[(0,o.ok)(a.ATTEMPT_RECEIPT_LOAD)]:(e,t)=>{let{receiptId:n}=t,i=(0,r.ZP)(e,e=>{e.byAttemptReceiptId[n]=t});return(0,o.f2)(i,t)},[(0,o.cI)(a.ATTEMPT_RECEIPT_LOAD)]:o.f2,[(0,o.bG)(a.ATTEMPT_RECEIPT_LOAD)]:o.sT}),u={loadAttemptReceipt:e=>(0,o.PH)(a.ATTEMPT_RECEIPT_LOAD,async()=>{try{return await (0,i.B)(e)}catch(e){throw{err:e}}},null,[s.oji.NotFound])},d={getAttemptReceipt:(e,t)=>e.attemptReceipt.byAttemptReceiptId[t],isLoading:e=>e.attemptReceipt.isLoading}},24193:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(276635),i=n(715729),o=n(961719),s=n(708541),a=n(123555);let l=(0,o.Lq)({byId:{},paging:null,permissions:{canDeleteAnyComment:!1},isLoading:!1},{[a.V.BLOG_ENTRY_COMMENTS_LOAD]:o.K4,[(0,o.ok)(a.V.BLOG_ENTRY_COMMENTS_LOAD)]:(e,t)=>{let{byId:n,paging:r,permissions:s}=t,a=(0,i.Uy)(e,e=>{r&&(e.paging=r),s&&(e.permissions=s),n&&(e.byId={...e.byId,...n},Object.keys(n).forEach(t=>{e.byId[t].api={isUpdating:!1,isDeleting:!1}}))});return(0,o.f2)(a,t)},[(0,o.bG)(a.V.BLOG_ENTRY_COMMENTS_LOAD)]:o.sT,[a.V.BLOG_COMMENT_ADD]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api={isUpdating:!0,isDeleting:!0}}),[(0,o.ok)(a.V.BLOG_COMMENT_ADD)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.Uy)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})),(0,o.f2)(r,t)},[(0,o.bG)(a.V.BLOG_COMMENT_ADD)]:o.sT,[a.V.BLOG_COMMENT_MODIFY]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!0}),[(0,o.ok)(a.V.BLOG_COMMENT_MODIFY)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.Uy)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1}}})),(0,o.f2)(r,t)},[(0,o.bG)(a.V.BLOG_COMMENT_MODIFY)]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!1}),[a.V.BLOG_COMMENT_REMOVE]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!0}),[(0,o.bG)(a.V.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.Uy)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!1}),[(0,o.ok)(a.V.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.Uy)(e,e=>{delete e.byId[t.commentId]})}),u={loadEntryComments:(e,t,n,r={})=>(0,o.PH)(a.V.BLOG_ENTRY_COMMENTS_LOAD,async()=>{try{return await s.oc(e,t,n,r)}catch(e){throw{err:e}}}),addComment:e=>(0,o.PH)(a.V.BLOG_COMMENT_ADD,async()=>{let t;try{t=await s.Ir(e)}catch(e){throw{err:e}}return{comment:t}}),modifyComment:e=>(0,o.PH)(a.V.BLOG_COMMENT_MODIFY,async()=>{let t;try{t=await s.p5(e)}catch(e){throw{err:e}}return{comment:t}}),deleteComment:e=>(0,o.PH)(a.V.BLOG_COMMENT_REMOVE,async t=>{let{commentId:n}=e;try{let r=d.getCommentById(t(),n);return await s.YF(e),{commentId:n,comment:r}}catch(e){throw{err:e}}},{commentId:e.commentId})},d={getCommentsByEntryId:(e,t)=>(0,r.filter)(e.blog.comments.byId,{entryId:t}),getCommentById:(e,t)=>e.blog.comments.byId[t]}},123555:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_COMMENT_ADD:"blog.comment.add",BLOG_ENTRY_COMMENTS_LOAD:"blog.entry.comments.load",BLOG_COMMENT_REMOVE:"blog.comment.remove",BLOG_COMMENT_MODIFY:"blog.comment.modify"}},154400:function(e,t,n){"use strict";n.d(t,{I6:function(){return u},Nw:function(){return d},Ys:function(){return c}});var r=n(276635),i=n(961719),o=n(715729),s=n(720533),a=n(708541),l=n(817234);let u=(0,i.Lq)({byId:{},isLoading:!1},{[(0,i.ok)(s.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{let{blogs:n}=t;Object.keys(n||{}).forEach(t=>{e.byId[t]={...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.f2)(n,t)},[l.V.BLOG_LOAD]:i.K4,[(0,i.ok)(l.V.BLOG_LOAD)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{let{blog:n}=t;n&&(e.byId[n.id]=n)});return(0,i.f2)(n,t)},[(0,i.bG)(l.V.BLOG_LOAD)]:i.sT,[(0,i.ok)(s.V.CONTENT_PERSIST)]:(e,t)=>{let n=(0,o.ZP)(e,n=>{let{blogs:r}=t;Object.values(r||{}).forEach(t=>{let r=e.byId[t.id];n.byId[t.id]={...(0,i.PM)(r,t),api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.f2)(n,t)}}),d={loadBlog:e=>(0,i.PH)(l.V.BLOG_LOAD,async()=>{try{return{blog:await a.Xi(e)}}catch(e){throw{err:e}}})},c={getBlogById:(e,t)=>(0,r.find)(e.blog.blogs.byId,{id:t}),canCreateEntry:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.createEntry},canDeleteBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.delete},canModifyBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.modify}}},817234:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_LOAD:"blog.load"}},4059:function(e,t,n){"use strict";n.d(t,{I6:function(){return v},Nw:function(){return A},Ys:function(){return C}});var r=n(715729),i=n(961719),o=n(123555),s=n(708541),a=n(276635),l=n(494615),u=n(560985),d=n(715655),c=n(968227),E=n(280652),p=n(503715);let m={byId:{},views:{byBlogId:{}}},h=(e,t)=>t&&t.byId?(0,r.ZP)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]={...e[n],...t.byId[n]}})}):e,I=(e,t)=>t&&t.data.byId?(0,r.ZP)(e,e=>{Object.keys(t.data.byId||{}).forEach(n=>{e.byId[n]={...e.byId[n],...t.data.byId[n]}})}):e,b=(e,t)=>{let{blogId:n}=t,r=e.views.byBlogId[n];r&&Object.values(r).forEach(e=>{e.isValid=!1})},g=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byBlogId[t.blogId])||{},i=Object.keys(r).find(e=>{let n=r[e],i=(0,a.isEqual)(n.query.assignedUserId,t.assignedUserId),o=(0,a.isEqual)(n.query.expand,t.expand),s=(0,a.isEqual)(n.query.paging,t.paging);return i&&o&&s});return{id:i,view:i?r[i]:null}},y=e=>["views","byBlogId",e.blogId],f=(e,t)=>{let{view:n}=g(e.blog.entries,t);return!n||!n.isLoading&&!n.isValid},S=(0,i.Lq)(m.byId,{[(0,i.ok)(E.V.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]=t.byId[n],e[n].api||(e[n].api={}),e[n].userStatus||(e[n].userStatus={commentCount:0}),e[n].api.isUpdating=!1,e[n].api.isDeleting=!1})}),[E.V.BLOG_ENTRY_MODIFY]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!0}),[(0,i.bG)(E.V.BLOG_ENTRY_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1}),[(0,i.ok)(E.V.BLOG_ENTRY_MODIFY)]:(e,t)=>{let n=h(e,t);return(0,r.ZP)(n,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1})},[E.V.BLOG_ENTRY_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!0}),[(0,i.bG)(E.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!1}),[(0,i.ok)(E.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e[t.entryId]}),[(0,i.ok)(o.V.BLOG_COMMENT_ADD)]:(e,t)=>{let n=t.comment.entryId,i=e[n];return i&&i.userStatus?(0,r.ZP)(e,e=>{e[n]||(e[n]={}),e[n].userStatus||(e[n].userStatus={}),e[n].userStatus.commentCount=i.userStatus.commentCount+1}):e},[(0,i.ok)(o.V.BLOG_COMMENT_REMOVE)]:(e,t)=>{let n=t.comment,i=e[n.entryId];return i&&i.userStatus?(0,r.ZP)(e,e=>{e[n.entryId]||(e[n.entryId]={}),e[n.entryId].userStatus||(e[n.entryId].userStatus={}),e[n.entryId].userStatus.commentCount=i.userStatus.commentCount-1,new Date(n.createdDate)>new Date(i.userStatus.commentLastSeenDate)&&(e[n.entryId].userStatus.unreadCommentCount=i.userStatus.unreadCommentCount-1)}):e}}),_=(0,i.Lq)(m,{[E.V.BLOG_ENTRIES_LOAD]:(0,i.Li)(g,y),[(0,i.ok)(E.V.BLOG_ENTRIES_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,i.f2)(e,t);let{paging:r,entriesId:o}=n;return e=I(e,t),(0,i.NV)(e,t,{viewResolver:g,viewsPathResolver:y,paging:r,values:o})},[(0,i.bG)(E.V.BLOG_ENTRIES_LOAD)]:(0,i.HT)(g,y),[(0,i.ok)(E.V.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{entry:n}=t;b(e,n)}),[(0,i.ok)(E.V.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{b(e,Object.keys(t.byId||{}).map(e=>t.byId[e])[0])})}),T=(0,i.UY)({byId:S}),v=(0,i.vn)(_,T,m),A={loadBlogEntriesByQuery:e=>async(t,n)=>{if(f(n(),e)){t((0,i.aU)(E.V.BLOG_ENTRIES_LOAD,{query:e}));try{let n=await s.s3(e);t((0,i.aU)((0,i.ok)(E.V.BLOG_ENTRIES_LOAD),{query:e,data:n}))}catch(n){t((0,i.aU)((0,i.bG)(E.V.BLOG_ENTRIES_LOAD),{query:e})),t((0,i.aU)((0,i.ok)(l.Z.APP_ERROR),{error:n}))}}},addBlogEntry:e=>(0,i.PH)(E.V.BLOG_ENTRY_ADD,async()=>{let{nextEntry:t}=e;try{let n=await s.p2(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),modifyBlogEntry:e=>(0,i.PH)(E.V.BLOG_ENTRY_MODIFY,async()=>{let{nextEntry:t}=e;try{let n=await s.wc(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),removeBlogEntry:e=>(0,i.PH)(E.V.BLOG_ENTRY_REMOVE,async t=>{let{entryId:n}=e;try{let r=C.getBlogEntryById(t(),n);return{...await s.Y2(e),entryId:n,entry:r}}catch(e){throw{entryId:n,err:e}}})},O=(0,u.wN)(d.PW,c.AD)((e,t)=>{let{view:n}=g(e.blog.entries,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),C={getBlogEntriesByQuery:(0,p.U)((e,t)=>{let{view:n}=g(e.blog.entries,t);return n?(n.values||[]).map(t=>e.blog.entries.byId[t]):[]},e=>e),getBlogEntriesViewStatusByQuery:O,getBlogEntryById:(e,t)=>e.blog.entries.byId[t]}},280652:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_ENTRIES_LOAD:"blog.entries.load",BLOG_ENTRY_ADD:"blog.entry.add",BLOG_ENTRY_MODIFY:"blog.entry.modify",BLOG_ENTRY_REMOVE:"blog.entry.remove"}},856801:function(e,t,n){"use strict";n.d(t,{I6:function(){return f},Nw:function(){return S},Ys:function(){return _}});var r=n(961719),i=n(134129),o=n(715729),s=n(708541),a=n(817234),l=n(280652),u=n(211498),d=n(80155),c=n(269624),E=n(689033),p=n(494615),m=n(276635),h=n(66288);let I=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byBlogId[t.blogId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=(0,m.isEqual)(r.query.paging,t.paging),o=(0,m.isEqual)(r.query.searchText,t.searchText)||!r.query.searchText&&!t.searchText,s=(0,m.isEqual)(r.query.submissionStatus,t.submissionStatus)||!r.query.submissionStatus&&!t.submissionStatus,a=(0,m.isEqual)(r.query.gradingStatus,t.gradingStatus)||!r.query.gradingStatus&&!t.gradingStatus,l=(0,m.isEqual)(r.query.sortColumn,t.sortColumn)||!r.query.sortColumn&&!t.sortColumn,u=(0,m.isEqual)(r.query.sortDirection,t.sortDirection)||!r.query.sortDirection&&!t.sortDirection;return i&&o&&s&&a&&l&&u});return{id:r,view:r?n[r]:null}},b=e=>["views","byBlogId",e.blogId],g=(e,t)=>{let{view:n}=I(e.blog.participants,t);return!n||!n.isLoading&&!n.isValid},y=(e,t,n)=>{Object.keys(e.views.byBlogId[n]).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})},f=(0,r.Lq)({byBlogId:{},gradeColumnToBlog:{},views:{byBlogId:{}},isLoading:!1},{[h.V.BLOG_PARTICIPANTS_LOAD]:(0,r.Li)(I,b),[(0,r.ok)(h.V.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let{data:n,query:i}=t,{byCourseMembershipId:s,paging:a}=n,l=(0,o.ZP)(e,e=>{let t=i.blogId;e.byBlogId[t]||(e.byBlogId[t]={}),Object.keys(s).forEach(t=>{let n=s[t];e.byBlogId[i.blogId][t]={courseMembershipId:t,userId:n.user.id,attemptStatus:n.attemptStatus,entriesCount:n.entriesCount,lastAttemptDate:n.lastAttemptDate,hasNewActivity:n.hasNewActivity}})});return(0,r.NV)(l,t,{viewResolver:I,viewsPathResolver:b,paging:a,values:Object.keys(s)})},[(0,r.bG)(h.V.BLOG_PARTICIPANTS_LOAD)]:(0,r.HT)(I,b),[h.V.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG]:(e,t)=>{let{participantId:n,blogId:r}=t;return n&&r?(0,o.ZP)(e,e=>{var t;let i=null===(t=e.byBlogId[r])||void 0===t?void 0:t[n];i&&(i.hasNewActivity=!1)}):e},[(0,r.ok)(a.V.BLOG_LOAD)]:(e,t)=>(0,o.ZP)(e,e=>{let{blog:n}=t;n&&(e.gradeColumnToBlog[n.gradeColumnId]=n.id)}),[(0,r.ok)(l.V.BLOG_ENTRY_REMOVE)]:(e,t)=>{let{entry:n}=t;if(n.assignedUserId!==n.creatorId)return e;let r=e.byBlogId[n.blogId];return r&&r[n.assignedUserId]?(0,o.ZP)(e,e=>{let t=e.byBlogId[n.blogId][n.assignedUserId];t.entriesCount-=1,0===t.entriesCount&&t.attemptStatus===i.I$9.NeedsGrading&&(t.attemptStatus=null)}):e},[(0,r.ok)(d.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId];return e.byBlogId[r]&&e.byBlogId[r][n.memberId]?(0,o.ZP)(e,t=>{t.byBlogId[r][n.memberId].attemptStatus=i.I$9.Completed,y(e,t,r)}):e},[(0,r.ok)(d.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId];return e.byBlogId[r]&&e.byBlogId[r][n.memberId]?(0,o.ZP)(e,t=>{if(n.lastAttemptId){let e=n.displayGrade.score?i.I$9.Completed:i.I$9.NeedsGrading;t.byBlogId[r][n.memberId].attemptStatus=e}else{let e=n.manualScore?i.I$9.Completed:null;t.byBlogId[r][n.memberId].attemptStatus=e}y(e,t,r)}):e},[(0,r.ok)(u.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,o.ZP)(e,n=>{for(let[r,i]of Object.entries(e.views.byBlogId))Object.keys(i).forEach(e=>{n.views.byBlogId[r][e].query.courseId===t.attempt.courseId&&(n.views.byBlogId[r][e].isValid=!1),t.attempt.courseId||(n.views.byBlogId[r][e].isValid=!1)})}),[(0,r.ok)(E.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let n,r;let{groupAttempt:i}=t;if(i.columnId&&(n=e.gradeColumnToBlog[i.columnId],r=e.byBlogId[n]),!r)return e;let s=[];return(i.attempts&&i.attempts.length>0&&i.attempts.forEach(t=>{Object.keys(e.byBlogId[n]).forEach(r=>{e.byBlogId[n][r].userId===t.userId&&s.push(e.byBlogId[n][r])})}),0===s.length)?e:(0,o.ZP)(e,t=>{var r;for(let i of s)for(let o of Object.keys(e.views.byBlogId[n]))(null===(r=t.views.byBlogId[n][o].values)||void 0===r?void 0:r.includes(i.courseMembershipId))&&(t.views.byBlogId[n][o].isValid=!1)})},[(0,r.ok)(c.V.STUDENT_PREVIEW_EXIT)]:(e,t)=>(0,o.ZP)(e,t=>{for(let[n,r]of Object.entries(e.views.byBlogId))Object.keys(r).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})})}),S={loadParticipantList:e=>(0,r.c3)(async(t,n)=>{if(g(n(),e)){t((0,r.aU)(h.V.BLOG_PARTICIPANTS_LOAD,{query:e}));try{let n=await s.Ut(e);t((0,r.aU)((0,r.ok)(h.V.BLOG_PARTICIPANTS_LOAD),{query:e,data:n}))}catch(n){t((0,r.aU)((0,r.bG)(h.V.BLOG_PARTICIPANTS_LOAD),{query:e})),t((0,r.aU)((0,r.ok)(p.Z.APP_ERROR),{error:n}))}}}),updateParticipantActivity:(e,t)=>(0,r.aU)(h.V.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG,{participantId:e,blogId:t})},_={getBlogParticipantByMembershipId:(e,t,n)=>{let r=e.blog.participants.byBlogId[t];return r?r[n]:null},getBlogParticipantsByQuery:(e,t)=>{let{view:n}=I(e.blog.participants,t);return n&&n.values?n.values.map(n=>e.blog.participants.byBlogId[t.blogId][n]):null},getPagingByQuery:(e,t)=>{let{view:n}=I(e.blog.participants,t);return n?n.paging:null},isLoading:(e,t)=>{let{view:n}=I(e.blog.participants,t);return n?n.isLoading:null}}},66288:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={BLOG_PARTICIPANTS_LOAD:"blog.participants.load",BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG:"blog.participants.clear.ActivityFlag"}},342672:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(961719),i=n(708541),o=n(715729),s=n(276635);let a={BLOG_PARTICIPATION_SUMMARY_LOAD:"blog.participation.summary.load"},l={[a.BLOG_PARTICIPATION_SUMMARY_LOAD]:r.K4,[(0,r.ok)(a.BLOG_PARTICIPATION_SUMMARY_LOAD)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{let{byBlogId:n}=t;Object.keys(n).forEach(t=>{e.byBlogId[t]=n[t]})});return(0,r.f2)(n,t)},[(0,r.bG)(a.BLOG_PARTICIPATION_SUMMARY_LOAD)]:r.sT},u=(0,r.Lq)({byBlogId:{},isLoading:!1},l),d={loadParticipationSummary:(e,t)=>(0,r.PH)(a.BLOG_PARTICIPATION_SUMMARY_LOAD,()=>(0,i.JC)(e,t).then(e=>e).catch(e=>{throw{err:e}}))},c={getSummaryByBlogId:(e,t)=>(0,s.find)(e.blog.summary.byBlogId,{id:t}),isLoading:e=>e.blog.summary.isLoading}},716134:function(e,t,n){"use strict";n.d(t,{Nw:function(){return m},I6:function(){return p},Ys:function(){return h}});var r=n(715729),i=n(961719),o=n(245044),s=n(134129),a=n(842330);let l={CALENDARS_LOAD:"calendars.load",CALENDAR_UPDATE:"calendar.update",CALENDARS_BATCH_UPDATE:"calendars.batch.update",CALENDAR_CLEAR_IN_STORE:"calendar.clear.in.store",CALENDAR_EVENT_AVAILABLE_LOAD:"calendar.event.available.load"};var u=n(587637);let d=()=>["eventsAvailable"],c=(e,t)=>{let n=t.getState().calendar.eventsAvailable;return(0,u.t)(null==n?void 0:n.status)},E=e=>{e.sort((e,t)=>e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===s.J6F.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===s.J6F.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1)},p=(0,i.Lq)({byId:{},isLoading:!1,eventsAvailable:void 0},{[l.CALENDARS_LOAD]:i.K4,[(0,i.ok)(l.CALENDARS_LOAD)]:(e,t)=>{let{byId:n}=t,o=(0,r.Uy)(e,t=>{Object.keys(n).forEach(r=>{let i={...n[r],api:{isUpdating:!1,isDeleting:!1},ui:e.byId[r]&&e.byId[r].ui};t.byId[i.id]=i})});return(0,i.f2)(o,t)},[(0,i.bG)(l.CALENDARS_LOAD)]:i.sT,[l.CALENDAR_UPDATE]:(e,t)=>{let{id:n}=t;return(0,r.Uy)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0})},[(0,i.ok)(l.CALENDAR_UPDATE)]:(e,t)=>{let{calendar:n}=t;return(0,r.Uy)((0,i.f2)(e,t),t=>{t.byId[n.id]={...e.byId[n.id],...n,api:{...e.byId[n.id].api,isUpdating:!1},ui:e.byId[n.id]&&e.byId[n.id].ui}})},[(0,i.bG)(l.CALENDAR_UPDATE)]:(e,t)=>{let{id:n}=t;return(0,r.Uy)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1})},[l.CALENDARS_BATCH_UPDATE]:(e,t)=>{let{byId:n}=t;return(0,r.Uy)(e,e=>{Object.keys(n).forEach(t=>{e.byId[t]||(e.byId[t]={}),e.byId[t].api||(e.byId[t].api={}),e.byId[t].api.isUpdating=!0})})},[(0,i.ok)(l.CALENDARS_BATCH_UPDATE)]:(e,t)=>{let{byId:n}=t,o=e;return Object.keys(n).forEach(t=>{o=(0,r.Uy)(o,r=>{r.byId[t]={...o.byId[t],...n[t],api:{...e.byId[t].api,isUpdating:!1},ui:o.byId[t]&&o.byId[t].ui}})}),(0,i.f2)(o,t)},[(0,i.bG)(l.CALENDARS_BATCH_UPDATE)]:(e,t)=>{let{byId:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.Uy)(i,t=>{t.byId[e]||(t.byId[e]={}),t.byId[e].api||(t.byId[e].api={}),t.byId[e].api.isUpdating=!1})}),i},[l.CALENDAR_EVENT_AVAILABLE_LOAD]:(0,u.nt)(d,u.Em),[(0,i.ok)(l.CALENDAR_EVENT_AVAILABLE_LOAD)]:(e,t)=>{let{eventsAvailable:n}=t;return(0,r.Uy)(e,e=>{e.eventsAvailable={value:n,status:u.vo}})},[(0,i.bG)(l.CALENDAR_EVENT_AVAILABLE_LOAD)]:(0,u.nt)(d,u.gp),[l.CALENDAR_CLEAR_IN_STORE]:e=>(0,r.Uy)(e,e=>{e.byId={}})}),m={fetchCalendars:()=>(0,i.PH)(l.CALENDARS_LOAD,()=>(0,o.jX)().then(e=>e).catch(e=>{throw{err:e}})),updateCalendar:(e,t)=>(0,i.PH)(l.CALENDAR_UPDATE,()=>(0,o.NE)(e,t).then(e=>({calendar:e})).catch(t=>{throw{id:e,err:t}}),{id:e}),batchUpdateCalendar:e=>(0,i.PH)(l.CALENDARS_BATCH_UPDATE,()=>(0,o._F)(e).then(e=>e).catch(t=>{throw{byId:(0,a.MO)(e),err:t}}),{byId:(0,a.MO)(e)}),fetchCalendarEventsAvailable:()=>(0,i.RU)(l.CALENDAR_EVENT_AVAILABLE_LOAD,async()=>({eventsAvailable:await (0,o.F_)()}),{condition:c}),clearCalendarsInStore:()=>(0,i.aU)(l.CALENDAR_CLEAR_IN_STORE)},h={getCalendarsSortedByType:e=>{let t=Object.values(e.calendar.byId);return E(t),t},getCalendarEventsAvailable:e=>{var t,n,r;return null!==(r=null===(n=null===(t=e.calendar.eventsAvailable)||void 0===t?void 0:t.value)||void 0===n?void 0:n.isCalendarEventsAvailable)&&void 0!==r&&r}}},226949:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(961719);let o={COLUMN_STATISTICS_LOAD:"column-statistics.load"};var s=n(267105);let a=(0,i.Lq)({byColumnId:{}},{[o.COLUMN_STATISTICS_LOAD]:(e,t)=>{let n=(0,r.Uy)(e,e=>{let{columnId:n}=t;e.byColumnId[n]?e.byColumnId[n].isLoading=!0:e.byColumnId[n]={isLoading:!0}});return(0,i.K4)(n,t)},[(0,i.ok)(o.COLUMN_STATISTICS_LOAD)]:(e,t)=>{let n=(0,r.Uy)(e,e=>{let{columnId:n,columnStatistics:r}=t;e.byColumnId[n]={columnStatistics:r,isLoading:!1}});return(0,i.f2)(n,t)},[(0,i.bG)(o.COLUMN_STATISTICS_LOAD)]:(e,t)=>{let n=(0,r.Uy)(e,e=>{let{columnId:n}=t;e.byColumnId[n]={isLoading:!1}});return(0,i.sT)(n,t)}}),l={loadColumnStatistics:e=>(0,i.PH)(o.COLUMN_STATISTICS_LOAD,()=>(0,s.R)(e).then(t=>({columnId:e.columnId,columnStatistics:t})).catch(t=>{throw{columnId:e.columnId,err:t}}),{columnId:e.columnId})},u={getColumnStatisticsByColumnId:(e,t)=>{var n;return null===(n=e.columnStatistics.byColumnId[t])||void 0===n?void 0:n.columnStatistics},isColumnStatisticsLoading:(e,t)=>{var n,r;return null!==(r=null===(n=e.columnStatistics.byColumnId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}}},210359:function(e,t,n){"use strict";n.d(t,{Nw:function(){return L},I6:function(){return R},Ys:function(){return D}});var r=n(715729),i=n(842330),o=n(961719),s=n(182267);let a={COLUMN_SUMMARY_LOAD:"column-summary.load",COLUMN_SUMMARY_SET_LOADING:"column-summary.set.loading",COLUMN_SUMMARY_LOAD_MULTIPLE:"column-summary.multiple.load",COLUMN_SUMMARY_INVALIDATE:"column-summary-invalidate",COLUMN_SUMMARIES_OVERVIEW_LOAD_BY_QUERY:"column-summaries-overview.load.by.query",COLUMN_SUMMARIES_OVERVIEW_LOAD_COUNTS:"column-summaries-overview.load.counts",COLUMN_SUMMARY_INVALIDATE_BY_COURSE_ID:"column-summary-invalidate.by.course.id"};var l=n(80155),u=n(198165),d=n(471901),c=n(211498),E=n(689033),p=n(305870);let m=(0,n(560985).P1)((e,t)=>{var n;return null===(n=e.columnSummary.byCourseId[t])||void 0===n?void 0:n.columns},(e,t)=>t,(e,t,n)=>null!=n?n:i.WY.MyStudents,(e,t,n)=>{if(!e)return[];let r=null!=n?n:i.WY.MyStudents;return Object.values(e).filter(e=>void 0!==e[r]).map(e=>e[r])});var h=n(276635),I=n.n(h),b=n(720533),g=n(587637);let y=(e,t)=>(0,r.ZP)(e,e=>{var n;for(let r of Object.values(i.WY))(null===(n=e.byColumnId[t])||void 0===n?void 0:n[r])&&(e.byColumnId[t]={...e.byColumnId[t],[r]:{...e.byColumnId[t][r],status:g.by}})}),f=(e,t)=>(0,r.ZP)(e,e=>{var n;if(t){let r=e.views.byCourseId[t];r&&Object.keys(r).forEach(e=>r[e].isValid=!1);let i=null===(n=e.byCourseId[t])||void 0===n?void 0:n.columnSummariesCounts;i&&(void 0!==i.needsGrading&&(i.needsGrading.status=g.by),void 0!==i.needsPosting&&(i.needsPosting.status=g.by),void 0!==i.needsReconciling&&(i.needsReconciling.status=g.by))}}),S=(e,t)=>{var n;for(let r of[i.WY.Default,i.WY.MyStudents,i.WY.Overview]){let i=null===(n=e.byColumnId[t])||void 0===n?void 0:n[r];if(null==i?void 0:i.value)return i.value.courseId}},_=e=>["views","byCourseId",e.courseId],T=e=>["byColumnId",e.columnId,e.columnSummaryType],v=e=>["byCourseId",e.courseId,"columnSummariesCounts",e.filter],A=(e,t)=>{if(!t)return o.LW;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=I().isEqual(r.query.paging,t.paging),o=I().isEqual(r.query.filter,t.filter),s=I().isEqual(r.query.sort,t.sort);return i&&s&&o});return r?{id:r,view:n[r]}:o.LW},O=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=A(t.getState().columnSummary,e.query);return!r||!r.isLoading&&!r.isValid};function C(e,t,n){var r,o,s,a,l;let u=null!=n?n:i.WY.MyStudents,d=function(e,t,n){var r,o,s,a,l;let{columnId:u}=e,d=null===(o=null===(r=n.byColumnId[u])||void 0===r?void 0:r[t])||void 0===o?void 0:o.value,c=function(e,t,n){var r,o,s,a;if(n!==i.WY.Overview)return;let{columnId:l}=e,u=null===(s=null===(o=null===(r=t.byColumnId)||void 0===r?void 0:r[l])||void 0===o?void 0:o[i.WY.Overview])||void 0===s?void 0:s.value;return null!==(a=e.oldestUngradedAttempt)&&void 0!==a?a:null==u?void 0:u.oldestUngradedAttempt}(e,n,t);return t!==i.WY.Overview?{...e,oldestUngradedAttempt:c}:{...e,oldestUngradedAttempt:c,numSubmissionsNeedsGrading:null!==(s=e.numSubmissionsNeedsGrading)&&void 0!==s?s:null==d?void 0:d.numSubmissionsNeedsGrading,numStudentsSubmissionGradedNeedsPosting:null!==(a=e.numStudentsSubmissionGradedNeedsPosting)&&void 0!==a?a:null==d?void 0:d.numStudentsSubmissionGradedNeedsPosting,numSubmissionsNeedsReconciling:null!==(l=e.numSubmissionsNeedsReconciling)&&void 0!==l?l:null==d?void 0:d.numSubmissionsNeedsReconciling}}(t,u,e);e.byColumnId[t.columnId]={...e.byColumnId[t.columnId],[u]:{value:d,status:g.vo}},e.byCourseId[t.courseId]={...e.byCourseId[t.courseId],columns:{...null===(r=e.byCourseId[t.courseId])||void 0===r?void 0:r.columns,[t.columnId]:{...null===(s=null===(o=e.byCourseId[t.courseId])||void 0===o?void 0:o.columns)||void 0===s?void 0:s[t.columnId],[u]:d}},columnSummariesCounts:null!==(l=null===(a=e.byCourseId[t.courseId])||void 0===a?void 0:a.columnSummariesCounts)&&void 0!==l?l:{}}}let R=(0,o.Lq)({byColumnId:{},byCourseId:{},isLoading:!1,views:{byCourseId:{}}},{[a.COLUMN_SUMMARY_LOAD]:(0,g.nt)(T,g.Em),[a.COLUMN_SUMMARY_SET_LOADING]:(0,g.nt)(T,g.Em),[a.COLUMN_SUMMARY_INVALIDATE]:(e,t)=>{let n=t.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(l.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let n=t.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(u.V.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID)]:(e,t)=>{let n=t.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(l.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let n=t.grade.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(d.V.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{let n=t.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(l.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let n=t.grade.columnId,r=S(e=y(e,n),n);return f(e,r)},[(0,o.ok)(a.COLUMN_SUMMARY_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{columnSummary:n,columnSummaryType:r}=t;n&&C(e,n,r)});return(0,o.f2)(n,t)},[(0,o.bG)(a.COLUMN_SUMMARY_LOAD)]:(0,g.nt)(T,g.gp),[a.COLUMN_SUMMARY_LOAD_MULTIPLE]:o.K4,[(0,o.ok)(a.COLUMN_SUMMARY_LOAD_MULTIPLE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{columnSummaries:n,columnSummaryType:r}=t;n&&Object.keys(n).forEach(t=>{C(e,n[t],r)})});return(0,o.f2)(n,t)},[(0,o.bG)(a.COLUMN_SUMMARY_LOAD_MULTIPLE)]:o.sT,[(0,o.ok)(c.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t,r=n.columnId;return r&&(e=y(e,r)),f(e,n.courseId)},[(0,o.ok)(E.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,r=n.columnId;return r&&(e=y(e,r)),f(e,n.courseId)},[(0,o.ok)(p.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{columnId:n,courseId:r}=t.data.dependents;return n?f(e=y(e,n),r):e},[(0,o.ok)(p.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{columnId:n,courseId:r}=t.data.dependents;return n?f(e=y(e,n),r):e},[(0,o.ok)(d.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)?e:f(e=y(e,null==n?void 0:n.id),null==n?void 0:n.courseId)},[a.COLUMN_SUMMARIES_OVERVIEW_LOAD_BY_QUERY]:(0,o.Li)(A,_),[(0,o.ok)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_BY_QUERY)]:(e,t)=>{let{columnSummariesOverview:n,columnIds:s,paging:a}=t.data;return n?(e=(0,r.ZP)(e,e=>{Object.keys(n).forEach(t=>{C(e,n[t],i.WY.Overview)})}),(0,o.NV)(e,t,{viewResolver:A,viewsPathResolver:_,paging:a,values:s})):(0,o.f2)(e,t)},[(0,o.bG)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_BY_QUERY)]:o.sT,[(0,o.ok)(b.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{courseId:n}=t;return f(e,n)},[(0,o.ok)(d.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let{gradebookColumn:n}=t;return f(e,null==n?void 0:n.courseId)},[(0,o.bG)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_COUNTS)]:(0,g.nt)(v,g.gp),[a.COLUMN_SUMMARIES_OVERVIEW_LOAD_COUNTS]:(0,g.nt)(v,g.Em),[(0,o.ok)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_COUNTS)]:(e,t)=>{let{courseId:n,needsGrading:i,needsPosting:s,needsReconciling:a}=t.data;if(n){let t=e=>void 0!==e?{value:e,status:g.vo}:void 0,o=t(i),l=t(s),u=t(a);e=(0,r.ZP)(e,e=>{let t=e.byCourseId[n],r=t.columnSummariesCounts;e.byCourseId[n]={...t,columnSummariesCounts:{needsGrading:null!=o?o:r.needsGrading,needsPosting:null!=l?l:r.needsPosting,needsReconciling:null!=u?u:r.needsReconciling}}})}return(0,o.f2)(e,t)},[(0,o.ok)(a.COLUMN_SUMMARY_INVALIDATE_BY_COURSE_ID)]:(e,t)=>f(e,t.courseId),[(0,o.ok)(c.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:n}=t,r=n.columnId;return r&&(e=y(e,r)),f(e,n.courseId)}}),L={loadColumnSummary:({courseId:e,columnId:t,columnSummaryType:n=i.WY.MyStudents})=>(0,o.RU)(a.COLUMN_SUMMARY_LOAD,async()=>({columnSummary:await (0,s.Q6z)(e,t,n===i.WY.Default?{allStudents:!0}:void 0),columnSummaryType:n}),{data:{columnId:t,courseId:e,columnSummaryType:n},condition:(e,t)=>{var n;let r=null===(n=t.getState().columnSummary.byColumnId[e.columnId])||void 0===n?void 0:n[e.columnSummaryType];return(0,g.t)(null==r?void 0:r.status)}}),loadColumnSummaries:({courseId:e,columnIds:t,columnSummaryType:n=i.WY.MyStudents})=>(0,o.PH)(a.COLUMN_SUMMARY_LOAD_MULTIPLE,async r=>(0,s.Qqg)(e,t,n===i.WY.Default?{allStudents:!0}:void 0).then(e=>({columnSummaries:e.columnSummaries,columnSummaryType:n}))),loadColumnSummariesOverviewByQuery:e=>(0,o.RU)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_BY_QUERY,async()=>({data:await (0,s.Nj2)(e),query:e}),{data:{query:e},condition:O}),loadColumnSummariesOverviewCount:e=>(0,o.RU)(a.COLUMN_SUMMARIES_OVERVIEW_LOAD_COUNTS,async()=>({data:await (0,s.qvK)(e),query:e}),{data:{...e},condition:(e,t)=>{var n;let r=null===(n=t.getState().columnSummary.byCourseId[e.courseId])||void 0===n?void 0:n.columnSummariesCounts[e.filter];return(0,g.t)(null==r?void 0:r.status)}}),setColumnSummaryInStore:({columnSummary:e,columnSummaryType:t=i.WY.MyStudents})=>(0,o.aU)((0,o.ok)(a.COLUMN_SUMMARY_LOAD),{columnSummary:e,columnSummaryType:t}),invalidateColumnSummary:e=>(0,o.aU)(a.COLUMN_SUMMARY_INVALIDATE,{columnId:e}),invalidateColumnSummaryViewsByCourseId:e=>(0,o.c3)(async t=>{t((0,o.aU)((0,o.ok)(a.COLUMN_SUMMARY_INVALIDATE_BY_COURSE_ID),{courseId:e}))}),setLoading:({courseId:e,columnId:t,columnSummaryType:n=i.WY.MyStudents})=>(0,o.aU)(a.COLUMN_SUMMARY_SET_LOADING,{courseId:e,columnId:t,columnSummaryType:n})},D={getColumnSummaryByColumnId:(e,t,n=i.WY.MyStudents)=>{var r,o;return null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.value},getColumnSummariesByCourseId:m,isLoading:(e,t,n=i.WY.MyStudents)=>{var r,o;return(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)===g.Em},isValid:(e,t,n=i.WY.MyStudents)=>{var r,o;return(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)===g.vo},shouldFetchColumnSummary:(e,t,n=i.WY.MyStudents)=>{var r,o;return(0,g.t)(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)},getColumnSummariesOverviewByQuery:(e,t)=>{let{view:n}=A(e.columnSummary,t);return n?(n.values||[]).map(n=>{var r,o,s;return null===(s=null===(r=e.columnSummary.byColumnId[n])||void 0===r?void 0:r[null!==(o=t.columnSummaryType)&&void 0!==o?o:i.WY.MyStudents])||void 0===s?void 0:s.value}):[]},getColumnSummariesOverviewViewStatusByQuery:(e,t)=>{let{view:n}=A(e.columnSummary,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getColumnSummariesCount:(e,t)=>{var n,r;return null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.value},shouldFetchColumnSummariesCountbyQuery:(e,t)=>{var n,r;return(0,g.t)(null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.status)},isLoadingColumnSummariesCountByQuery:(e,t)=>{var n,r,i,o;if(null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.status)return(null===(o=null===(i=e.columnSummary.byCourseId[t.courseId])||void 0===i?void 0:i.columnSummariesCounts[t.filter])||void 0===o?void 0:o.status)===g.Em}}},75892:function(e,t,n){"use strict";n.d(t,{I6:function(){return D},Nw:function(){return U},Ys:function(){return w}});var r,i,o=n(715729),s=n(276635),a=n(961719),l=n(842330),u=n(494615),d=n(617040),c=n(471901),E=n(362834),p=n(720533),m=n(134129),h=n(986642),I=n(560985),b=n(778510),g=n(719200),y=n(515475);function f(e,t){var n;e.contents[t]||(e.contents[t]={});let r=null!==(n=e.contents[t].api)&&void 0!==n?n:{};return e.contents[t].api=r,r}function S(e,t,n,r){var o;let s=r===i.Criteria?{criteria:{type:""},api:{isUpdating:n}}:{rule:{},api:{isUpdating:n}},a=null!==(o=e.adaptiveRelease[r][t])&&void 0!==o?o:s;a.api.isUpdating=n,e.adaptiveRelease[r][t]=a}function _(e,t){(0,s.forEach)(e.views.byCourseId,(n,r)=>{(0,s.forEach)(n,(n,i)=>{var o;(null===(o=n.values)||void 0===o?void 0:o.includes(t))&&delete e.views.byCourseId[r][i]})})}(r=i||(i={})).Criteria="byCriteriaId",r.Rule="byRuleId";let T=(e,t)=>{let n=t.contents[e.id];return n?{...n,...e,permissions:{...n.permissions,...e.permissions},ui:null==n?void 0:n.ui}:e},v=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.filter.courseId])||{},i=Object.keys(r).find(e=>{let n=r[e];return(0,s.isEqual)(n.query,t)});return i?{id:i,view:r[i]}:a.LW},A=e=>["views","byCourseId",e.filter.courseId],O=(e,t,n)=>{if(!t)return;let r=e.views.byCourseId[t];r&&Object.keys(r).forEach(e=>{let t=r[e];t.query.filter.contentId!==n&&(t.isValid=!1)})};function C(e,t){let n={type:t.type};t.id&&(n=e.adaptiveRelease.byCriteriaId[t.id].criteria);let r={...n,...t};return n.type===m.faN.Date&&(r={...r,start:t.start,end:t.end}),{criteria:r,api:{isUpdating:!1}}}let R={[p.V.CONTENT_LOAD]:(e,t)=>{let n=(0,a.K4)(e,t),{query:r}=t;return r?(0,a.Li)(v,A)(n,{query:r,...t}):n},[(0,a.ok)(p.V.CONTENT_LOAD)]:(e,t)=>{let{query:n}=t,r=(0,l.MO)(Object.values(t.contents||{}).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e))),i=(0,a.f2)(e,t,{contents:{...e.contents,...r}});if(!n)return i;let o=Object.values(r).map(e=>e.id).filter(e=>!!e);return(0,a.NV)(i,t,{viewResolver:v,viewsPathResolver:A,values:o})},[(0,a.bG)(p.V.CONTENT_LOAD)]:(e,t)=>{let n=(0,a.sT)(e,t),{query:r}=t;return r?(0,a.HT)(v,A)(n,{query:r,...t}):n},[p.V.CONTENT_LOAD_BY_GROUP_ID]:(0,a.Li)(v,A),[(0,a.ok)(p.V.CONTENT_LOAD_BY_GROUP_ID)]:(e,t)=>{let{data:n}=t;if(!n)return(0,a.f2)(e,t);let{contents:r,paging:i}=n,s=Object.keys(r),u=(0,o.ZP)(e,t=>{let n=(0,l.MO)(Object.values(r).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e)));t.contents={...e.contents,...n}});return(0,a.NV)(u,t,{viewResolver:v,viewsPathResolver:A,paging:i,values:s})},[(0,a.bG)(p.V.CONTENT_LOAD_BY_GROUP_ID)]:(0,a.HT)(v,A),[p.V.CONTENT_PERSIST]:(e,t)=>(0,o.ZP)(e,e=>{f(e,t.prevContent.id).isUpdating=!0}),[(0,a.ok)(p.V.CONTENT_PERSIST)]:(e,t)=>(0,o.ZP)(e,n=>{let{contents:r}=t;Object.values(r||{}).forEach(t=>{let r=t.id,i=e.contents[r];n.contents[r]={...i,...t,api:{...null==i?void 0:i.api,isUpdating:!1}},O(n,t.courseId,r)})}),[(0,a.bG)(p.V.CONTENT_PERSIST)]:(e,t)=>(0,o.ZP)(e,e=>{f(e,t.prevContent.id).isUpdating=!1}),[p.V.CONTENT_PERSIST_MULTIPLE]:(e,t)=>(0,o.ZP)(e,e=>{let{prevContents:n}=t;(0,s.each)(n,t=>{f(e,t.content.id).isUpdating=!0})}),[(0,a.ok)(p.V.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,o.ZP)(e,n=>{let{contents:r}=t;Object.keys(r).forEach(t=>{let i=r[t];i.isOk?n.contents[t]={...i.result,api:{isUpdating:!1,isDeleting:!1},ui:e.contents[t]&&e.contents[t].ui}:f(n,t).isUpdating=!1})}),[(0,a.bG)(p.V.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,o.ZP)(e,e=>{let{prevContents:n}=t;(0,s.each)(n,t=>{f(e,t.content.id).isUpdating=!1})}),[p.V.CONTENT_DELETE]:(e,t)=>(0,o.ZP)(e,e=>{let{contents:n}=t;n.forEach(t=>{f(e,t).isDeleting=!0})}),[(0,a.ok)(p.V.CONTENT_DELETE)]:(e,t)=>(0,o.ZP)(e,e=>{let{results:n}=t;n.forEach(t=>{delete e.contents[t],_(e,t)})}),[(0,a.bG)(p.V.CONTENT_DELETE)]:(e,t)=>(0,o.ZP)(e,e=>{let{results:n}=t;n.forEach(t=>{f(e,t).isDeleting=!1})}),[(0,a.ok)(p.V.CONTENT_UPDATE_IN_STORE)]:(e,t)=>(0,o.ZP)(e,e=>{let{nextContent:n}=t;e.contents[n.id]=n}),[(0,a.ok)(p.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,o.ZP)(e,e=>{let{contentId:n}=t;delete e.contents[n],_(e,n)}),[(0,a.ok)(p.V.CONTENT_MOVE_IN_STORE)]:(e,t)=>{let{originalContent:n,movedContent:r,sortedTargetSiblings:i}=t;return n?(0,o.ZP)(e,t=>{let o=n.parentId===r.parentId,a=M(i,r.position);if(t.contents={...t.contents,...a.contents},t.contents[r.id]=r,!o){let r=M((0,s.filter)(e.contents,e=>e.parentId===n.parentId&&e.id!==n.id));t.contents={...t.contents,...r.contents}}}):e},[p.V.CONTENT_SEARCH_LOAD]:(0,a.Li)(v,A),[(0,a.ok)(p.V.CONTENT_SEARCH_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,a.f2)(e,t);let{contents:r,paging:i}=n,s=Object.keys(r);return e=(0,o.ZP)(e,t=>{let n=(0,l.MO)(Object.values(r||{}).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e)));t.contents={...e.contents,...n}}),(0,a.NV)(e,t,{viewResolver:v,viewsPathResolver:A,paging:i,values:s})},[(0,a.bG)(p.V.CONTENT_SEARCH_LOAD)]:(0,a.HT)(v,A),[(0,a.ok)(c.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>(0,o.ZP)(e,n=>{let{gradebookColumn:r}=t;if(r&&r.contentId){let t=(0,s.find)(e.contents,{id:r.contentId});t&&(n.contents[t.id].genericReadOnlyData={...e.contents[t.id].genericReadOnlyData,hasGradeColumn:!0,dueDate:r.dueDate})}}),[(0,a.ok)(E.V5.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,o.ZP)(e,t=>{if(n){let r=(0,l.MO)(Object.values(n).map(t=>T({id:t.contentId,state:t.state},e)));t.contents={...e.contents,...r}}})}},L={[(0,a.ok)(p.V.CONTENT_LOAD)]:(e,t)=>{let{adaptiveRelease:n}=t;return n?(0,o.ZP)(e,e=>{Object.keys(n).forEach(t=>{let r=n[t];e.adaptiveRelease.byCriteriaId[t]={api:{isUpdating:!1},criteria:{...r}}})}):e},[(0,a.ok)(p.V.CONTENT_LOAD_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.ZP)(e,n=>{let{adaptiveReleaseRules:r,content:i}=t;Object.keys(r).forEach(t=>{var o;n.adaptiveRelease.byRuleId[t]={api:{isUpdating:!1},rule:{...r[t],contentId:i.id}};let s=null!==(o=e.contents[t])&&void 0!==o?o:{};s={...s,api:{...s.api,isUpdating:!1},id:r[t].id,courseId:r[t].courseId},n.contents[t]=s})}),[p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE]:(e,t)=>(0,o.ZP)(e,n=>{var r;let{adaptiveReleaseRule:i}=t,o=null!==(r=e.contents[i.contentId])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!0}},n.contents[i.contentId]=o}),[(0,a.ok)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.ZP)(e,n=>{var r;let{result:i,isOk:o,contentId:s}=t;if(o){let{criteria:t}=i;t.forEach(t=>{t.id&&(n.adaptiveRelease.byCriteriaId[t.id]={criteria:{...t,ruleId:i.id,contentId:s,courseId:e.contents[s].courseId},api:{isUpdating:!1}})}),n.adaptiveRelease.byRuleId[i.id]={rule:i,api:{isUpdating:!1}};let o=null!==(r=e.contents[s])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!1}},n.contents[s]=o}}),[(0,a.bG)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.ZP)(e,n=>{var r;let{contentId:i}=t,o=null!==(r=e.contents[i])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!1}},n.contents[i]=o}),[p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA]:(e,t)=>(0,o.ZP)(e,n=>{let{adaptiveReleaseRuleId:r,content:o}=t;n.contents[o.id]={...e.contents[o.id],api:{isUpdating:!0}},S(n,r,!0,i.Rule),n.contents[r]={...e.contents[r],api:{isUpdating:!0}}}),[(0,a.ok)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.ZP)(e,n=>{var r;let{result:o,contentId:s,ruleId:a,id:l,isOk:u}=t;if(u){n.adaptiveRelease.byCriteriaId[l]={api:{isUpdating:!1},criteria:{...o,id:l,ruleId:a,contentId:s,courseId:e.contents[s].courseId}};let t=e.adaptiveRelease.byRuleId[a].rule,i={...t,criteria:[...null!==(r=t.criteria)&&void 0!==r?r:[],o]};n.adaptiveRelease.byRuleId[a]={rule:i,api:{isUpdating:!1}},n.contents[a]={...i,api:{isUpdating:!1}}}else S(n,a,!1,i.Rule),n.contents[a]={...e.contents[a],api:{isUpdating:!1}};n.contents[s]={...e.contents[s],api:{isUpdating:!1}}}),[(0,a.bG)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.ZP)(e,e=>{let{ruleId:n}=t;S(e,n,!1,i.Rule)}),[p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE]:(e,t)=>(0,o.ZP)(e,e=>{let{criteriaId:n}=t;S(e,n,!0,i.Criteria)}),[(0,a.ok)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.ZP)(e,n=>{let{isOk:r,id:o,result:s}=t;r&&s?n.adaptiveRelease.byCriteriaId[o]=C(e,s):S(n,o,!1,i.Criteria)}),[(0,a.bG)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.ZP)(e,e=>{let{id:n}=t;S(e,n,!1,i.Criteria)}),[p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE]:(e,t)=>(0,o.ZP)(e,e=>{let{criteriaList:n}=t;(0,s.each)(n,t=>{t.id&&S(e,t.id,!0,i.Criteria),t.ruleId&&S(e,t.ruleId,!0,i.Rule)})}),[(0,a.ok)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,o.ZP)(e,n=>{let{results:r}=t;Object.keys(r).forEach(t=>{let o=r[t];o.isOk&&o.result?n.adaptiveRelease.byCriteriaId[t]=C(e,o.result):S(n,t,!1,i.Criteria)})}),[(0,a.bG)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,o.ZP)(e,e=>{let{prevContents:n}=t;(0,s.forEach)(n,t=>{t.id&&S(e,t.id,!1,i.Criteria)})}),[p.V.CONTENT_DELETE_ADAPTIVE_RELEASE]:(e,t)=>(0,o.ZP)(e,n=>{let{contents:r}=t;r.forEach(t=>{Object.values(e.adaptiveRelease.byCriteriaId).filter(({criteria:e})=>e.contentId===t.id).forEach(e=>{e.criteria.id&&S(n,e.criteria.id,!0,i.Criteria)})})}),[(0,a.ok)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.ZP)(e,n=>{let{results:r}=t;Object.values(r).forEach(t=>{Object.values(e.adaptiveRelease.byCriteriaId).forEach(r=>{var o,s;if(r.criteria.contentId===t.id){if(t.isOk){let i=e.contents[t.id],s=null!==(o=null==i?void 0:i.inSequence)&&void 0!==o&&o;l.A.shouldRemoveReleaseCriteria(s,r.criteria.type)&&delete n.adaptiveRelease.byCriteriaId[r.criteria.id]}else S(n,null!==(s=r.criteria.id)&&void 0!==s?s:"",!1,i.Criteria)}})})}),[(0,a.bG)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.ZP)(e,n=>{let{contents:r}=t;r.reduce((t,n)=>t.concat((0,s.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}})),[]).forEach(e=>{e.criteria.id&&S(n,e.criteria.id,!1,i.Criteria)})}),[(0,a.ok)(p.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>(0,o.ZP)(e,n=>{var r;let{contentId:i}=t,o=e.contents[i],a=null!==(r=null==o?void 0:o.inSequence)&&void 0!==r&&r;(0,s.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.contentId===i&&l.A.shouldRemoveReleaseCriteria(a,e.criteria.type)&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),[(0,a.ok)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:(e,t)=>(0,o.ZP)(e,n=>{let{contentId:r,ruleType:i}=t;(0,s.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.contentId===r&&e.criteria.type===i&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),[p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA]:(e,t)=>(0,o.ZP)(e,e=>{let{criteriaId:n}=t;S(e,n,!0,i.Criteria)}),[(0,a.ok)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.ZP)(e,e=>{let{isOk:n,id:r,ruleId:o}=t;n?(delete e.adaptiveRelease.byCriteriaId[r],delete e.adaptiveRelease.byRuleId[o],delete e.contents[o]):S(e,r,!1,i.Criteria)}),[(0,a.bG)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.ZP)(e,e=>{let{id:n}=t;S(e,n,!1,i.Criteria)}),[(0,a.ok)(E.V5.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentStates:n}=t;return(0,o.ZP)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})},[(0,a.ok)(E.V5.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,o.ZP)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})},[(0,a.ok)(d.V5.ADAPTIVE_RELEASE_RULES_CREATE)]:(e,t)=>(0,o.ZP)(e,e=>{t.rules.forEach(t=>{t.id&&(e.adaptiveRelease.byRuleId[t.id]={rule:t,api:{isUpdating:!1}})})}),[(0,a.ok)(d.V5.ADAPTIVE_RELEASE_RULE_DELETE)]:(e,t)=>(0,o.ZP)(e,e=>{delete e.adaptiveRelease.byRuleId[t.ruleId]})},D=(0,a.Lq)({contents:{},adaptiveRelease:{byCriteriaId:{},byRuleId:{}},permissions:null,paging:void 0,isLoading:!1,views:{byCourseId:{}}},R,L);async function P(e){let{paging:t}=await h.dU({filter:{contentId:e.contentId,courseId:e.courseId},params:{paging:{limit:1}}});return t}async function N(e,t){let n=w.getContentsByParentContentId(e,t.contentId),r=w.getContentById(e,t.contentId),i=await P({contentId:t.contentId,courseId:t.courseId}),o={contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}},s=!!r&&Array.isArray(n)&&n.length===i.count;s&&n.forEach(e=>{(null==e?void 0:e.id)&&(o.contents[e.id]=e)});let a=await (s?Promise.resolve(o):h.d_(t)),{contents:u}=a,d=Object.values(u).filter(e=>e.id!==t.contentId&&l.Xg.isFolderOrLearningModule(e)).map(n=>N(e,{...t,contentId:n.id}));return o=await Promise.all(d).then(e=>e.reduce((e,t)=>{let n={...e.contents,...t.contents},r={...e.assessments,...t.assessments},i={...e.groups,...t.groups};return{contents:n,assessments:r,groups:i,columns:{...e.columns,...t.columns},adaptiveRelease:{...e.adaptiveRelease,...t.adaptiveRelease},blogs:{...e.blogs,...t.blogs}}},a))}let U={getTotalChildren:e=>(0,a.PH)(p.V.CONTENT_LOAD,async t=>await P(e)),loadAllChildren:e=>(0,a.PH)(p.V.CONTENT_LOAD,async t=>{let n=await N(t(),e);return{query:{filter:e},...n}}),loadContents:(e,t={force:!0})=>(0,a.c3)(async(n,r)=>{if(!function(e,t,n){if(n.force)return!0;let{view:r}=v(e.content,{filter:t});return null==r||!r.isValid||2!==Object.keys(t).length||!t.courseId||!t.contentId}(r(),e,t))return null;let i={filter:e};n((0,a.aU)(p.V.CONTENT_LOAD,{query:i}));try{let t={...await h.d_(e),query:i};return n((0,a.aU)((0,a.ok)(p.V.CONTENT_LOAD),t)),t}catch(t){n((0,a.aU)((0,a.bG)(p.V.CONTENT_LOAD),{query:i,err:t}));let e=(0,b.Gt)(t);throw n((0,a.aU)((0,a.ok)(u.Z.APP_ERROR),{error:e})),{err:t}}}),loadContentNeighbor:(e,t,n,r)=>{let i={query:{filter:{courseId:e,contentId:t},neighborDirection:r,contentOwnerId:n}};return(0,a.c3)(async(o,s)=>{let l=w.getNeighborContentViewStatus(s(),r,e,t,n);return(null==l?void 0:l.isLoading)?null:(o((0,a.aU)(p.V.CONTENT_SEARCH_LOAD,i)),h.KE(e,t,n,r).then(e=>o((0,a.aU)((0,a.ok)(p.V.CONTENT_SEARCH_LOAD),{...i,data:e}))).catch(e=>{let t=(0,b.Gt)(e);throw o((0,a.aU)((0,a.bG)(p.V.CONTENT_SEARCH_LOAD),{...i,err:e})),o((0,a.aU)((0,a.ok)(u.Z.APP_ERROR),{error:t})),{err:e}}))})},loadLinkedContent:(e,t)=>U.loadLinkedContentHelper(e,t,[]),loadLinkedContentHelper:(e,t,n)=>(0,a.c3)(async(r,i)=>{var o,s;let a=i(),u=w.getContentById(a,t);if(u||(u=null===(s=null===(o=await r(U.loadContents({courseId:e,contentId:t})))||void 0===o?void 0:o.contents)||void 0===s?void 0:s[t]),(null==u?void 0:u.id)&&l.A.isNonDiscussionCourseLink(u)){let t=l.A.getCourseLinkSourceId(u);if(t&&!n.find(e=>e===t))return await r(U.loadLinkedContentHelper(e,t,[...n,u.id]))}}),setContents:e=>(0,a.aU)((0,a.ok)(p.V.CONTENT_LOAD),h.dc(e)),createContent:e=>(0,a.PH)(p.V.CONTENT_PERSIST,async()=>await h.K1(e),{prevContent:{}}),persistContent:(e,t)=>(0,a.PH)(p.V.CONTENT_PERSIST,()=>h.YU(e,t).then(t=>({...t,prevContent:e})).catch(t=>{throw{prevContent:e,err:t}}),{prevContent:e,nextContent:t}),persistContentSync:e=>(0,a.c3)((t,n)=>{let r=n().content.contents[e.id];t((0,a.aU)((0,a.ok)(p.V.CONTENT_PERSIST),{prevContent:r,...h.dc([e])}))}),persistContents:e=>(0,a.PH)(p.V.CONTENT_PERSIST_MULTIPLE,()=>h._b(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{contents:e}),deleteContents:(e,t)=>(0,a.c3)((n,r)=>{let i=r(),o={};return e.forEach(e=>{let t=k(e.id,i);o[e.id]=t,n((0,a.aU)(p.V.CONTENT_DELETE,{contents:t}))}),h.Hl(e,t).then(e=>(Object.keys(e.results).forEach(r=>{let s=e.results[r],l=o[s.id];if(s.isOk){let e={};o[r].forEach(t=>{if(!i.content.contents[t])return;let{assessmentId:n,courseId:r}=i.content.contents[t];n&&r&&e[r]?e[r]=[...e[r],n]:r&&!e[r]&&(e[r]=n?[n]:[])}),n((0,a.aU)((0,a.ok)(p.V.CONTENT_DELETE),{courseAssessmentIds:Object.keys(e).length>0?e:void 0,results:o[r],deletedGrades:!t||!!(null==t?void 0:t.shouldDeleteGrades)}))}else n((0,a.aU)((0,a.bG)(p.V.CONTENT_DELETE),{results:l}))}),e)).catch(t=>{throw e.forEach(e=>{let t=o[e.id];n((0,a.aU)((0,a.bG)(p.V.CONTENT_DELETE),{results:t}))}),n((0,a.aU)((0,a.ok)(u.Z.APP_ERROR),{error:t})),{contents:e,err:t}})}),updateContentInStore:e=>(0,a.PH)(p.V.CONTENT_UPDATE_IN_STORE,()=>Promise.resolve({nextContent:e}),{nextContent:e}),deleteContentInStore:e=>(0,a.c3)((t,n)=>{let r=n();k(e,r).forEach(e=>{var n,i,o,s;let l=r.content.contents[e],u={assessmentId:null===(n=r.content.contents[e])||void 0===n?void 0:n.assessmentId,courseId:null===(i=r.content.contents[e])||void 0===i?void 0:i.courseId,contentId:e,invalidateGradingSchemas:(0,g.PI)(l)||(0,h.RF)(l)?null!==(s=null===(o=null==l?void 0:l.genericReadOnlyData)||void 0===o?void 0:o.hasGradeColumn)&&void 0!==s&&s:!!y.Ys.getGradebookColumnByContentId(r,e)};t((0,a.aU)(p.V.CONTENT_DELETE_IN_STORE,{contentId:e})),t((0,a.aU)((0,a.ok)(p.V.CONTENT_DELETE_IN_STORE),u))})}),moveContentInStore:(e,t,n)=>(0,a.PH)(p.V.CONTENT_MOVE_IN_STORE,r=>{let i=r(),o=w.getContentById(i,e);if(!o)return Promise.resolve({});let a=w.getContentsByParentContentId(i,t),l=(0,s.sortBy)((0,s.filter)(a,t=>t.id!==e),["position"]),u={...o,parentId:t,position:n};return Promise.resolve({originalContent:o,movedContent:u,sortedTargetSiblings:l})},{contentId:e,targetFolderId:t,targetPosition:n}),loadAdaptiveReleaseRule:e=>(0,a.PH)(p.V.CONTENT_LOAD_ADAPTIVE_RELEASE_RULE,()=>h.Ar(e).then(t=>({...t,content:e}))),createAdaptiveReleaseRule:(e,t)=>(0,a.PH)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE,()=>h.Nb(e,t).then(e=>({...e,contentId:t.id})).catch(e=>{throw{err:e}}),{adaptiveReleaseRule:e}),createAdaptiveReleaseCriteria:(e,t,n)=>(0,a.PH)(p.V.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA,()=>h.GS(e,t,n).then(e=>{var r;return{...e,contentId:null!==(r=n.id)&&void 0!==r?r:"",ruleId:t}}),{adaptiveReleaseRuleId:t,content:n}),persistAdaptiveReleaseCriteria:e=>(0,a.PH)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE,()=>h.yD(e),{criteriaId:e.id}),persistAdaptiveReleaseCriteriaMultiple:e=>(0,a.PH)(p.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE,()=>h.BE(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{criteriaList:e}),deleteAdaptiveReleaseRules:e=>(0,a.RU)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE,async()=>{try{let t={results:{}},n=await h.ID(e);return t.results=n.results,{results:t.results}}catch(t){throw new a.GM(t).setData({contents:e})}},{data:{contents:e}}),deleteAdaptiveReleaseRulesInStore:e=>(0,a.aU)((0,a.ok)(p.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e}),deleteAdaptiveReleaseRuleInStore:(e,t)=>(0,a.aU)((0,a.ok)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE),{contentId:e,ruleType:t}),deleteAdaptiveReleaseCriteria:e=>(0,a.PH)(p.V.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA,()=>h.CT(e),{criteriaId:e.id}),notifyContentImportComplete:e=>(0,a.aU)((0,a.ok)(p.V.CONTENT_IMPORT_COMPLETE),{courseId:e}),loadContentsByQuery:e=>(0,a.c3)(async(t,n)=>{if(function(e,t){let{view:n}=v(e.content,t);return null==n||!n.isValid}(n(),e)){t((0,a.aU)(p.V.CONTENT_SEARCH_LOAD,{query:e}));try{let n=await h.dU({filter:{contentId:m.x1x.Root,contentSearchMode:m.Ius.courseContent,...e.filter},params:e.params});t((0,a.aU)((0,a.ok)(p.V.CONTENT_SEARCH_LOAD),{query:e,data:n}))}catch(r){t((0,a.aU)((0,a.bG)(p.V.CONTENT_SEARCH_LOAD),{query:e,err:r}));let n=(0,b.Gt)(r);throw t((0,a.aU)((0,a.ok)(u.Z.APP_ERROR),{error:n})),r.error||r.type?r:new b.F7(r.message)}}}),loadContentsByGroupIdAndQuery:e=>(0,a.PH)(p.V.CONTENT_LOAD_BY_GROUP_ID,async()=>({data:await h.En(e),query:e}),{query:e})},w={getContentByAssessmentId:(e,t)=>(0,s.find)(e.content.contents,{assessmentId:t}),getContentById:(e,t)=>(0,s.find)(e.content.contents,{id:t}),getContentsByParentContentId:(e,t)=>(0,s.filter)(e.content.contents,{parentId:t}),getRootFolderByCourseId:(e,t,n)=>Object.values(e.content.contents).find(e=>e.courseId===t&&e.title===n&&!e.parentId),getContentLinksByLinkedContentId:(e,t)=>(0,s.filter)(e.content.contents,{contentDetail:{[l.GQ.CourseLink.toString()]:{linkSourceId:t}}}),getHasContentLinksByLinkedContentId:(e,t)=>Object.values(e.content.contents).some(e=>{var n,r,i;return(null===(n=e.contentDetail)||void 0===n?void 0:n[l.GQ.CourseLink.toString()])&&(null===(i=null===(r=e.contentDetail)||void 0===r?void 0:r[l.GQ.CourseLink.toString()])||void 0===i?void 0:i.linkSourceId)===t}),getAdaptiveReleaseCriteriaByContentId:(0,I.P1)(e=>e.content.adaptiveRelease,(e,t)=>t,(e,t)=>(0,s.filter)(e.byCriteriaId,{criteria:{contentId:t}})),getContentsByQuery:(e,t)=>{var n,r;let{view:i}=v(e.content,t);return i&&null!==(r=null===(n=i.values)||void 0===n?void 0:n.map(t=>(0,s.find)(e.content.contents,{id:t})))&&void 0!==r?r:[]},getNeighborContent:(e,t,n,r,i)=>{var o,a;let{view:l}=v(e.content,{filter:{courseId:n,contentId:r},neighborDirection:t,contentOwnerId:i});return null===(a=null===(o=null==l?void 0:l.values)||void 0===o?void 0:o.map(t=>(0,s.find)(e.content.contents,{id:t})))||void 0===a?void 0:a[0]},getNeighborContentViewStatus:(e,t,n,r,i)=>{let{view:o}=v(e.content,{filter:{courseId:n,contentId:r},neighborDirection:t,contentOwnerId:i});return o?{isLoading:o.isLoading,isValid:o.isValid,paging:o.paging}:null},getLinkedContent:(e,t)=>{let n=w.getContentById(e,t);for(;n&&l.A.isNonDiscussionCourseLink(n);){let t=l.A.getCourseLinkSourceId(n);t&&(n=w.getContentById(e,t))}return n},getContentsViewStatusByQuery:(e,t)=>{let{view:n}=v(e.content,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCountBySearchCriteria:(e,t)=>{var n,r;let{view:i}=v(e.content,t);return i&&null!==(r=null===(n=i.paging)||void 0===n?void 0:n.count)&&void 0!==r?r:0},isLoading:(e,t)=>{let{view:n}=v(e.content,t);return n?n.isLoading:e.content.isLoading}};function k(e,t){let n=w.getContentsByParentContentId(t,e).map(e=>e.id),r=[e].concat(n).map(e=>w.getContentLinksByLinkedContentId(t,e).map(e=>e.id)).reduce((e,t)=>t.concat(e),[]);return[e].concat(n).concat(r)}function M(e,t){let n={contents:{}};return(0,s.forEach)(e,(e,r)=>{n.contents[e.id]={...e,position:void 0!==t&&t>=0&&r>=t?r+1:r}}),n}},720533:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={CONTENT_LOAD:"content.load",CONTENT_PERSIST:"content.persist",CONTENT_PERSIST_MULTIPLE:"content.persist.multiple",CONTENT_DELETE:"content.delete",CONTENT_LOAD_ADAPTIVE_RELEASE_RULE:"content.load.adaptive.release.rule",CONTENT_CREATE_ADAPTIVE_RELEASE_RULE:"content.create.adaptive.release.rule",CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA:"content.create.adaptive.release.criteria",CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE:"content.persist.adaptive.release.multiple",CONTENT_PERSIST_ADAPTIVE_RELEASE:"content.persist.adaptive.release",CONTENT_DELETE_ADAPTIVE_RELEASE:"content.delete.adaptive.release",CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA:"content.delete.adaptive.release.criteria",CONTENT_UPDATE_IN_STORE:"content.update.in.store",CONTENT_DELETE_IN_STORE:"content.delete.in.store",CONTENT_MOVE_IN_STORE:"content.move.in.store",CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE:"content.delete.adaptive.release.in.store",CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE:"content.delete.adaptive.release.in.store.individual",CONTENT_IMPORT_COMPLETE:"content.import.complete",CONTENT_SEARCH_LOAD:"content.search.load",CONTENT_LOAD_BY_GROUP_ID:"content.load.by.group.id"}},158637:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return c},Ys:function(){return d}});var r=n(961719),i=n(782147),o=n(715729),s=n(167345);let a={[s.V.CONTENT_INDICATORS_LOAD]:(e,t)=>(0,o.ZP)(e,e=>{let{courseId:n}=t.meta;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!0}),[(0,r.ok)(s.V.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.ZP)(e,e=>{let n=t.meta.courseId,r=t.indicators;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),r&&(r.forEach(t=>{e.byContentId[t.contentId]=t}),e.contentIdsByCourseId[n]=new Set(r.map(e=>e.contentId)),e.dateLoadedByCourseId[n].dateLoaded=new Date),e.dateLoadedByCourseId[n].isLoading=!1}),[(0,r.bG)(s.V.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.ZP)(e,e=>{let n=t.meta.courseId;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!1}),[s.V.DISABLE_CLASS_CONVERSATION_INDICATOR]:(e,t)=>(0,o.ZP)(e,e=>{let n=t.payload.contentId;e.byContentId[n]||(e.byContentId[n]={}),e.byContentId[n].classConversationHasIndicator=!1}),[s.V.REMOVE_GROUPID_FROM_INDICATORS]:(e,t)=>(0,o.ZP)(e,e=>{let{contentId:n,groupId:r}=t.payload;e.byContentId[n]||(e.byContentId[n]={});let i=e.byContentId[n].groupIds;i&&(e.byContentId[n].groupIds=i.filter(e=>e!==r))})},l=(0,r.Lq)({byContentId:{},contentIdsByCourseId:{},dateLoadedByCourseId:{}},a),u=(e,t,n)=>{let r=e.contentIndicators.dateLoadedByCourseId[t];if(!r)return!0;let{isLoading:i,dateLoaded:o}=r;return!i&&(!!n||!o||Date.now()-o.getTime()>s.m)},d={getIndicatorByContentId:(e,t)=>e.contentIndicators.byContentId[t],isLoadingIndicators:(e,t)=>{var n,r;return null!==(r=null===(n=e.contentIndicators.dateLoadedByCourseId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}},c={loadIndicators:(e,t)=>(0,r.c3)(async(n,o)=>{let a=d.isLoadingIndicators(o(),e),l=u(o(),e,t);if(!a&&l){n({type:s.V.CONTENT_INDICATORS_LOAD,meta:{courseId:e}});try{let{indicators:t}=await (0,i.I)(e);n({type:(0,r.ok)(s.V.CONTENT_INDICATORS_LOAD),meta:{courseId:e},indicators:t})}catch(t){throw n({type:(0,r.bG)(s.V.CONTENT_INDICATORS_LOAD),meta:{courseId:e}}),{err:t}}}}),removeGroupIdFromIndicatorCache:(e,t)=>({type:s.V.REMOVE_GROUPID_FROM_INDICATORS,payload:{contentId:e,groupId:t}}),setClassConversationHasIndicatorToFalseInCache:e=>({type:s.V.DISABLE_CLASS_CONVERSATION_INDICATOR,payload:{contentId:e}})}},167345:function(e,t,n){"use strict";n.d(t,{V:function(){return i},m:function(){return o}});var r=n(961719);let i={CONTENT_INDICATORS_LOAD:"indicators.load",REMOVE_GROUPID_FROM_INDICATORS:"indicators.removeGroupId",DISABLE_CLASS_CONVERSATION_INDICATOR:"indicators.disableClassConversationIndicator"},o=9e5;(0,r.ok)(i.CONTENT_INDICATORS_LOAD)},362834:function(e,t,n){"use strict";n.d(t,{I6:function(){return b},Nw:function(){return g},V5:function(){return d},Ys:function(){return S}});var r=n(276635),i=n(842330),o=n(961719),s=n(715729),a=n(301211),l=n(720533),u=n(560985);let d={CONTENT_REVIEW_STATE_PERSIST:"content-review-state.persist",CONTENTS_REVIEW_STATES_GET:"contents-review-states-get",CONTENTS_REVIEW_STATES_USERS_GET:"contents-review-states-users-get",CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET:"contents-review-states-users-reports-states-get",CONTENTS_REVIEW_STATES_USER_CONTENT_GET:"contents-review-states-user-content-get"},c=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byContentId[t.contentId])||void 0===n?void 0:n.byViewId)||{},o=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=o?o:null,view:void 0!==o?i[o]:null}},E=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byViewId)||{},o=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=o?o:null,view:void 0!==o?i[o]:null}},p=e=>["contentReviewState","byContentId",e.contentId,"byViewId"],m=e=>["contentReviewState","byUserId",e.userId,"byViewId"];function h(e,t){e.contentReviewState.byContentId[t]||(e.contentReviewState.byContentId[t]={byUserId:{},byViewId:{},reports:{}})}function I(e){return(0,s.ZP)(e,e=>{e.contentReviewState.byUserId={}})}let b=(0,o.Lq)({contentReviewState:{byContentId:{},byUserId:{}}},{[d.CONTENT_REVIEW_STATE_PERSIST]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,o.ok)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,contentStates:r,userId:i}=t;return(0,s.ZP)(e,e=>{e.contentReviewState.byContentId[n].byUserId[i].isLoading=!1,r&&Object.values(r).forEach(t=>{let n=t.contentId;h(e,n),e.contentReviewState.byContentId[n].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,o.bG)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_GET]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n,contentId:r,userId:i}=t;return(0,s.ZP)(e,e=>{n&&Object.values(n).forEach(t=>{let n=t.contentId;h(e,n),e.contentReviewState.byContentId[n].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}}),e.contentReviewState.byContentId[r].byUserId[i].isLoading=!1})},[(0,o.bG)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.ZP)(e,e=>{h(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_USERS_GET]:(e,t)=>{let n=(0,s.ZP)(e,e=>{h(e,t.query.contentId)});return(0,o.Li)(c,p)(n,t)},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,s.ZP)(e,e=>{h(e,r.contentId),void 0===r.fields&&n.results.forEach(t=>{e.contentReviewState.byContentId[r.contentId].byUserId[t.courseMembership.userId]={status:t.status,isLoading:!1}}),e.contentReviewState.byContentId[r.contentId].permissions=n.permissions});return(0,o.NV)(i,t,{viewResolver:c,viewsPathResolver:p,paging:n.paging,values:n.results.map(e=>e.courseMembership.userId)})},[(0,o.bG)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(0,o.HT)(c,p),[d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET]:(e,t)=>{let n=(0,s.ZP)(e,n=>{e.contentReviewState.byUserId[t.query.userId]||(n.contentReviewState.byUserId[t.query.userId]={byContentId:{},byViewId:{}})});return(0,o.Li)(E,m)(n,t)},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,s.ZP)(e,e=>{n.results.forEach(t=>{e.contentReviewState.byUserId[r.userId].byContentId[t.contentId]=t})});return(0,o.NV)(i,t,{viewResolver:E,viewsPathResolver:m,paging:n.paging,values:n.results.map(e=>e.contentId)})},[(0,o.bG)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(0,o.HT)(E,m),[d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET]:(e,t)=>(0,s.ZP)(e,e=>{h(e,t.query.contentId),e.contentReviewState.byContentId[t.query.contentId].reports.states={isLoading:!0,states:void 0}}),[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>{let{data:n,query:{contentId:r}}=t;return(0,s.ZP)(e,e=>{h(e,r),e.contentReviewState.byContentId[r].reports.states.isLoading=!1,e.contentReviewState.byContentId[r].reports.states.states=n.states})},[(0,o.bG)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>(0,s.ZP)(e,e=>{e.contentReviewState.byContentId[t.query.contentId].reports.states.isLoading=!1}),[(0,o.ok)(l.V.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=(0,i.MO)(Object.values(n||{})),(0,s.ZP)(e,e=>{Object.values(n).forEach(t=>{let n=t.id;h(e,n),e.contentReviewState.byContentId[n].byUserId[a.Ep]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,o.ok)(l.V.CONTENT_DELETE)]:I,[(0,o.ok)(l.V.CONTENT_DELETE_ADAPTIVE_RELEASE)]:I,[(0,o.ok)(l.V.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:I,[(0,o.ok)(l.V.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:I,[(0,o.ok)(l.V.CONTENT_DELETE_IN_STORE)]:I,[(0,o.ok)(l.V.CONTENT_PERSIST)]:I,[(0,o.ok)(l.V.CONTENT_PERSIST_MULTIPLE)]:I,[(0,o.ok)(l.V.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:I,[(0,o.ok)(l.V.CONTENT_MOVE_IN_STORE)]:I,[(0,o.ok)(l.V.CONTENT_UPDATE_IN_STORE)]:I}),g={persistContentReviewState:(e,t,n)=>(0,o.PH)(d.CONTENT_REVIEW_STATE_PERSIST,async()=>{try{let r={courseId:e,contentId:t,userId:a.Ep,state:n};return await (0,a.MG)(r),{contentStates:(await (0,a.Pb)({courseId:e,contentId:t,includeRelated:!0,includeNextIncompleteChild:!1})).contentStates,contentId:t,userId:a.Ep}}catch(e){throw{contentId:t,userId:a.Ep,err:e}}},{contentId:t,userId:a.Ep}),getContentReviewState:(e,t,n,r=!1)=>(0,o.PH)(d.CONTENTS_REVIEW_STATES_GET,async()=>{try{return{contentStates:(await (0,a.Pb)({courseId:e,contentId:t,includeRelated:n,includeNextIncompleteChild:r})).contentStates,contentId:t,userId:a.Ep}}catch(e){throw{contentId:t,userId:a.Ep,err:e}}},{contentId:t,userId:a.Ep}),fetchContentReviewUserStatesByQuery:e=>(0,o.PH)(d.CONTENTS_REVIEW_STATES_USERS_GET,async()=>{try{return{data:await (0,a.Wm)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchContentReviewStateUsersReportStates:e=>(0,o.PH)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET,async()=>{try{return{data:await (0,a.Gs)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchMoreContentReviewStateUserContent:e=>(0,o.PH)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET,async()=>{try{return{data:await (0,a.Cv)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e})},y=(0,u.P1)([(e,t)=>e.contentReviewState.contentReviewState.byUserId[t.userId],(e,t)=>t],(e,t)=>{var n;return{byViewId:null!==(n=null==e?void 0:e.byViewId)&&void 0!==n?n:{},query:t}}),f=(0,u.P1)(y,({byViewId:e,query:t})=>({views:Object.values(e).filter(e=>e.query.courseId===t.courseId&&e.query.contentId===t.contentId).sort((e,t)=>{var n,r,i,o;return(null!==(r=null===(n=t.query.paging)||void 0===n?void 0:n.offset)&&void 0!==r?r:0)-(null!==(o=null===(i=e.query.paging)||void 0===i?void 0:i.offset)&&void 0!==o?o:0)}),query:t})),S={getContentReviewStateForContextUser:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.Ep])||void 0===r?void 0:r.status)||void 0===i?void 0:i.state},getLoadingStatusForContentReviewStateForContextUser:(e,t)=>{var n,r;return null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.Ep])||void 0===r?void 0:r.isLoading},getContentReviewStateUsersByQuery:(e,t)=>{var n;let{view:r}=c(e.contentReviewState,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(n=>{let r=e.contentReviewState.contentReviewState.byContentId[t.contentId].byUserId[n];return{contentId:t.contentId,status:r.status,courseMembership:Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t.courseId&&e.userId===n)}}):[]},getContentReviewStateUsersStatusByQuery:(e,t)=>{let{view:n}=c(e.contentReviewState,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getContentReviewStateUsersPermissions:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.permissions},getContentReviewStateUsersReportStates:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.reports.states},hasMoreContentReviewStateUserContent:(0,u.P1)(f,({views:e,query:t})=>{var n,r;if(0===e.length)return{isLoading:!1,canLoadMore:!0,nextOffset:0};let i=e[0],o=!!(null===(n=i.paging)||void 0===n?void 0:n.nextPage),s=o?i.paging.offset+t.limit:void 0;return{isLoading:i.isLoading,canLoadMore:o,nextOffset:s,count:null===(r=i.paging)||void 0===r?void 0:r.count}}),getContentReviewStateFirstUserContent:(0,u.P1)([(e,t)=>{var n,r;return null!==(r=null===(n=e.contentReviewState.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byContentId)&&void 0!==r?r:{}},(e,t)=>t],(e,t)=>Object.values(e).filter(e=>e.content.parentId===t.contentId&&(!t.visibility||t.visibility.includes(e.content.visibility))).sort((e,t)=>e.content.position-t.content.position))}},906052:function(e,t,n){"use strict";n.d(t,{Nw:function(){return g},I6:function(){return I},Ys:function(){return b}});let r={COURSE_ANNOUNCEMENTS_LOAD:"course-announcements.load",COURSE_ANNOUNCEMENTS_INVALIDATE:"course-announcements.invalidate",GET_COURSE_ANNOUNCEMENTS_COUNTS:"get.course-announcements.counts",UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS:"update.course-announcements.read.status"};var i=n(182267),o=n(961719),s=n(715729),a=n(494615),l=n(468832),u=n(25859),d=n(503715),c=n(276635);let E=(e,t)=>{var n;if(!t)return o.LW;let[r,i]=null!==(n=Object.entries(e.views.byCourseId[t.courseId]||{}).find(([,e])=>(0,c.isEqual)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:i}:o.LW},p=e=>["views","byCourseId",e.courseId],m=(e,t)=>{let{view:n}=E(e.courseAnnouncements,t);return!n||!n.isLoading&&!n.isValid},h=(e,t)=>e=(0,s.Uy)(e,e=>{var n;Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}),I=(0,o.Lq)({byId:{},views:{byCourseId:{}},announcementsCounts:{}},{[r.COURSE_ANNOUNCEMENTS_LOAD]:(0,o.Li)(E,p),[(0,o.ok)(r.COURSE_ANNOUNCEMENTS_LOAD)]:(e,t)=>{let{data:n}=t,{announcements:r,paging:i}=n,a=Object.keys(r);return e=(0,s.Uy)(e,e=>{a.forEach(t=>{e.byId[t]=r[t]})}),(0,o.NV)(e,t,{viewResolver:E,viewsPathResolver:p,paging:i,values:a})},[(0,o.bG)(r.COURSE_ANNOUNCEMENTS_LOAD)]:(0,o.HT)(E,p),[r.COURSE_ANNOUNCEMENTS_INVALIDATE]:(e,t)=>h(e,t.courseId),[u.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return h(e,n)},[(0,o.ok)(l.V5.ANNOUNCEMENT_SAVE)]:(e,t)=>{let{courseId:n}=t;return h(e,n)},[(0,o.ok)(l.V5.ANNOUNCEMENT_REMOVE)]:(e,t)=>{let{courseId:n}=t;return h(e,n)},[(0,o.ok)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,s.Uy)(e,e=>{e.announcementsCounts[t.courseId]=t.announcementsCounts}),[(0,o.ok)(r.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS)]:(e,t)=>{var n;let{courseId:r,id:i,readStatus:o}=t.announcement;if(void 0===r)return e;let a=null!==(n=e.announcementsCounts[r].unreadCount)&&void 0!==n?n:0;return(0,s.Uy)(e,t=>{var n;t.byId[i]={...e.byId[i],readStatus:{isRead:null!==(n=null==o?void 0:o.isRead)&&void 0!==n&&n}},t.announcementsCounts[r]={...e.announcementsCounts[r],unreadCount:(null==o?void 0:o.isRead)?a-1:a+1}})},[(0,o.bG)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,o.sT)(e,t)}),b={getCourseAnnouncementsByQuery:(0,d.U)((e,t)=>{let{view:n}=E(e.courseAnnouncements,t);return n?(n.values||[]).map(t=>e.courseAnnouncements.byId[t]):[]},e=>e),getAnnouncementsCounts:(e,t)=>{var n,r;return null!==(r=null===(n=e.courseAnnouncements)||void 0===n?void 0:n.announcementsCounts[t])&&void 0!==r?r:{}},getCourseAnnouncementsViewByQuery:(e,t)=>{let{view:n}=E(e.courseAnnouncements,t);return n},getCourseAnnouncementById(e,t){return e.courseAnnouncements.byId[t]}},g={loadCourseAnnouncementsByQuery:(e,t={})=>(0,o.c3)(async(n,s)=>{let l=!m(s(),e);if(!t.forceReload&&l)return b.getCourseAnnouncementsByQuery(s(),e);n((0,o.aU)(r.COURSE_ANNOUNCEMENTS_LOAD,{query:e}));try{let t=await (0,i.Nfh)(e);return n((0,o.aU)((0,o.ok)(r.COURSE_ANNOUNCEMENTS_LOAD),{query:e,data:t})),b.getCourseAnnouncementsByQuery(s(),e)}catch(t){throw n((0,o.aU)((0,o.bG)(r.COURSE_ANNOUNCEMENTS_LOAD),{query:e})),n((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:t})),t}}),loadAnnouncementsCounts:e=>(0,o.PH)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS,async()=>await (0,i.tHn)(e)),changeReadStatusAnnouncement:(e,t,n)=>(0,o.PH)(r.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS,async()=>(await (0,i.$wA)(e,t,n),{announcementId:t,isRead:n})),invalidateCourseAnnouncementViews:e=>(0,o.c3)(async t=>{t((0,o.aU)(r.COURSE_ANNOUNCEMENTS_INVALIDATE,{courseId:e}))})}},574459:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(715729),i=n(961719),o=n(187680);let s="/public/v1/courses/%courseId%/children",a=`${s}/%childCourseId%`;async function l(e){let t;try{t=await (0,o.U2)((0,o.Q2)(s,e))}catch(e){if(e.error.code&&"bb-blackboard-core-course-has-no-children"===e.error.code)t={results:[]};else throw e.error}return t}async function u(e){return await (0,o.U2)((0,o.Q2)(a,{courseId:e.parentCourseId,childCourseId:e.childCourseId,fields:e.fields}))}let d={CHILD_COURSES_LOAD:"child-courses.load",CHILD_COURSE_LOAD:"child-course.load"},c=(0,i.Lq)({byParentCourseId:{},byChildCourseId:{}},{[d.CHILD_COURSES_LOAD]:i.K4,[(0,i.ok)(d.CHILD_COURSES_LOAD)]:(e,t)=>{let n=t.childCourses,o=t.courseId;return(0,r.Uy)(e,t=>(t.byParentCourseId[o]=n.map(e=>e.id),n.forEach(n=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.PM)(r,n)}}),t))},[(0,i.bG)(d.CHILD_COURSES_LOAD)]:i.sT,[(0,i.ok)(d.CHILD_COURSE_LOAD)]:(e,t)=>{let{childCourse:n}=t;return(0,r.Uy)(e,t=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.PM)(r,n)}})}}),E={loadChildCourses:e=>(0,i.PH)(d.CHILD_COURSES_LOAD,async()=>{try{let t=await l({courseId:e,fields:["id","childCourse"]});return{courseId:e,childCourses:t.results}}catch(e){throw{err:e}}}),loadChildCourse:(e,t)=>(0,i.PH)(d.CHILD_COURSE_LOAD,async()=>{try{let n=await u({parentCourseId:e,childCourseId:t,fields:["id","childCourse"]});return{childCourseId:t,childCourse:n}}catch(e){throw{err:e}}})},p={byParentCourseId:(e,t)=>{let n=e.courseChildren.byParentCourseId[t];if(n)return n.map(t=>e.courseChildren.byChildCourseId[t])},byChildCourseId:(e,t)=>e.courseChildren.byChildCourseId[t]}},607162:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return E}});var r=n(715729),i=n(276635),o=n(961719),s=n(187680);async function a(e){let t=await (0,s.U2)((0,s.Q2)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/summary",e));return{courseId:t.courseId,courseName:t.courseName,tasks:{[t.taskId]:{risks:t.risks.reduce((e,t)=>(e[t.riskClassification.toLowerCase()]={count:t.count,messages:t.exceptionMessages.reduce((e,t)=>(e[t.name]={count:t.count},e),{})},e),{})}}}}async function l(e){let t=await (0,s.U2)((0,s.Q2)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/messages",e)),n=t.results;for(;t.paging.nextPage;)t=await (0,s.U2)("/"+t.paging.nextPage.split("/").slice(3).join("/")),n=n.concat(t.results);return{courseId:e.courseId,tasks:{[e.taskId]:n.reduce((e,t)=>{let n=t.riskClassification?t.riskClassification.toLowerCase():"null";return e[n]=e[n]||{},e[n][t.message]=e[n][t.message]||[],e[n][t.message].push(t),e},{})}}}let u={CONVERSION_SUMMARY_LOAD:"conversion.summary.load",CONVERSION_MESSAGES_LOAD:"conversion.messages.load"},d=(0,o.Lq)({conversionSummaries:{},conversionMessages:{},isLoading:!1},{[u.CONVERSION_SUMMARY_LOAD]:(e,t)=>(0,o.K4)(e,t),[(0,o.ok)(u.CONVERSION_SUMMARY_LOAD)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionSummaries:{[t.data.courseId]:t.data}}),(0,r.Uy)((0,o.f2)(e,t),e=>{i.merge(e,n)})},[(0,o.bG)(u.CONVERSION_SUMMARY_LOAD)]:(e,t)=>(0,o.sT)(e,t),[u.CONVERSION_MESSAGES_LOAD]:(e,t)=>(0,o.K4)(e,t),[(0,o.ok)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionMessages:{[t.data.courseId]:t.data}}),(0,r.Uy)((0,o.f2)(e,t),e=>{i.merge(e,n)})},[(0,o.cI)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>{let{courseId:n,taskId:i}=t,s=(0,r.Uy)(e,e=>{e.conversionMessages[n]&&e.conversionMessages[n].tasks||(e.conversionMessages[n]={courseId:n,tasks:{}}),e.conversionMessages[n].tasks[i]={}});return(0,o.f2)(s,t)},[(0,o.bG)(u.CONVERSION_MESSAGES_LOAD)]:(e,t)=>(0,o.sT)(e,t)}),c={loadSummary:e=>(0,o.PH)(u.CONVERSION_SUMMARY_LOAD,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionSummaries[r]&&n.courseConversion.conversionSummaries[r].tasks[i]?Promise.resolve(null):a({courseId:r,taskId:i}).then(e=>({data:e}))}),loadMessages:(e,t)=>(0,o.PH)(u.CONVERSION_MESSAGES_LOAD,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionMessages[r]&&n.courseConversion.conversionMessages[r].tasks[i]?Promise.resolve(null):l({courseId:r,taskId:i}).then(e=>({courseId:r,taskId:i,data:e})).catch(e=>{throw{err:e}})},e,t)},E={getConversionSummaryById:(e,t,n)=>e.courseConversion.conversionSummaries[t]&&e.courseConversion.conversionSummaries[t].tasks[n],getConversionMessagesById:(e,t,n)=>e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks[n],getRawConversionMessagesByTaskIds:(e,t,n)=>{let r=e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks;return i.transform(r,(e,t,r)=>{if(n.indexOf(r)>-1){let n=i.transform(t,(e,t)=>{let n=i.values(t);i.flatten(n).forEach(t=>{e.push(t)})},[]);e[r]=n}},{})}}},998273:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return E}});var r=n(715729),i=n(961719),o=n(281313),s=n(888663);let a={COURSE_LOAD:"course.load",COURSE_UPDATE:"course.update",COURSE_LOAD_STUDENT_COUNT:"course.load.student.count"};var l=n(587637);let u=e=>["byId",e.courseId],d=(0,i.Lq)({byId:{}},{[a.COURSE_LOAD]:(0,l.gX)(u,l.yL.Load,l.hJ),[(0,i.bG)(a.COURSE_LOAD)]:(0,l.gX)(u,l.yL.Load,l.eV),[(0,i.ok)(a.COURSE_LOAD)]:(e,t)=>{let{course:n}=t;return(0,r.Uy)(e,t=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,l.Tf)(l.yL.Load,t.byId[n.id],l._B)}})},[a.COURSE_UPDATE]:(0,l.gX)(u,l.yL.Update,l.DK),[(0,i.bG)(a.COURSE_UPDATE)]:(0,l.gX)(u,l.yL.Update,l.eV),[(0,i.ok)(a.COURSE_UPDATE)]:(e,t)=>{let{course:n}=t;return(0,r.Uy)(e,t=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,l.Tf)(l.yL.Update,t.byId[n.id],l._B)}})},[a.COURSE_LOAD_STUDENT_COUNT]:i.K4,[(0,i.ok)(a.COURSE_LOAD_STUDENT_COUNT)]:(e,t)=>{if(!t||!t.courseId)return(0,i.f2)(e,t);let{courseId:n,studentCount:o}=t,s=(0,r.Uy)(e,e=>{var t;(null===(t=e.byId[n])||void 0===t?void 0:t.value)&&(e.byId[n].value.studentCount=o)});return(0,i.f2)(s,t)},[(0,i.bG)(a.COURSE_LOAD_STUDENT_COUNT)]:i.sT,[(0,i.ok)(s.V.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{var n;let i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.courses;return i?(0,r.Uy)(e,t=>{Object.values(i).forEach(n=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,l.Tf)(l.yL.Load,t.byId[n.id],l._B)}})}):e}}),c={fetchCourse:e=>(0,i.RU)(a.COURSE_LOAD,async()=>{try{return{courseId:e,course:await (0,o.uH)(e)}}catch(t){throw new i.GM(t).setData({courseId:e})}},{data:{courseId:e},condition:(t,{getState:n})=>!!e&&(0,l.M0)(E.getCourseStatus(n(),e))}),updateCourse:(e,t,n,r)=>(0,i.RU)(a.COURSE_UPDATE,async()=>{try{return{courseId:e,course:await (0,o.Hf)(t,n,r)}}catch(t){throw new i.GM(t).setData({courseId:e})}},{data:{courseId:e}}),fetchCourseStudentCount:e=>(0,i.RU)(a.COURSE_LOAD_STUDENT_COUNT,async()=>{let t=await (0,o.oi)(e);return{courseId:e,studentCount:t}}),setCourseInStore:e=>(0,i.aU)((0,i.ok)(a.COURSE_LOAD),{course:e,courseId:e.id})},E={getCourseById:(e,t)=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.value},getCourseStatus:(e,t)=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.status},getCourseStudentCount:(e,t)=>{var n,r;return null!==(r=null===(n=e.course.byId[t].value)||void 0===n?void 0:n.studentCount)&&void 0!==r?r:0}}},998214:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COURSE_ENTITLEMENTS_LOAD:"courseEntitlements.load"}},26715:function(e,t,n){"use strict";n.d(t,{I6:function(){return U},Nw:function(){return w},Ys:function(){return k}});var r=n(715729),i=n(276635),o=n(961719),s=n(778510),a=n(494615),l=n(221952),u=n(576879),d=n(211675),c=n(901717),E=n(651948),p=n(8930),m=n(842330),h=n(75892),I=n(720533),b=n(284003),g=n(560985);let y={groups:{byId:{},byGroupSetId:{},views:{byCourseId:{},byContentId:{},byGroupSetId:{}},loadingStatus:b.S.HasNotStarted},groupMemberships:{},isLoading:!1},f=(0,o.Lq)(y,{[I.V.CONTENT_LOAD]:o.K4,[(0,o.ok)(I.V.CONTENT_LOAD)]:(e,t)=>{if(i.has(t,"groups")){let n=(0,r.ZP)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{var r;let i=null!==(r=e.groups.byId[t])&&void 0!==r?r:{};e.groups.byId[t]={...i,...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.f2)(n,t)}return(0,o.f2)(e,t)},[(0,o.bG)(I.V.CONTENT_LOAD)]:o.sT,[l.Z.GROUPS_LOAD_BY_CONTENT_ID]:o.K4,[(0,o.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{contentId:n,groups:r}=t;Object.keys(r).forEach(t=>{e.groups.byId[t]={...r[t],contentId:n}})});return(0,o.f2)(n,t)},[(0,o.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID)]:o.sT,[l.Z.GROUP_DELETE_BATCH]:(e,t)=>(0,r.ZP)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id]||(e.groups.byId[t.id]={}),e.groups.byId[t.id].api||(e.groups.byId[t.id].api={}),e.groups.byId[t.id].api.isDeleting=!0})}),[(0,o.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{let{deletedGroups:n,groupSetId:i}=t;return(0,r.ZP)(e,e=>{var r,o;n.forEach(t=>{delete e.groups.byId[t.id]}),n.length&&R(e.groups);let s=null!=i?i:null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.groupSetId;if(!s)return;let a=null!==(o=e.groups.byGroupSetId[s])&&void 0!==o?o:[],l=new Set(t.deletedGroups.map(e=>e.id)),u=a.filter(e=>!l.has(e));e.groups.byGroupSetId[i]=u})},[(0,o.bG)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>(0,r.ZP)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id].api.isDeleting=!1})}),[(0,o.ok)(l.Z.GROUP_LOAD_BY_ID)]:(e,t)=>{let{group:n,groupId:i}=t;return(0,r.ZP)(e,t=>{let r=e.groups.byId[i];t.groups.byId[i]={...(0,o.PM)(r,n)}})}}),S=(e,t)=>Object.keys(e).find(n=>{let r=e[n],o=i.isEqual(r.query.paging,t.paging),s=!("filter"in r.query)||!("filter"in t)||i.isEqual(r.query.filter,t.filter);return o&&s}),_=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=S(n,t);return r?{id:r,view:n[r]}:o.LW},T=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byContentId[t.contentId]||{},r=S(n,t);return r?{id:r,view:r?n[r]:null}:{id:null,view:null}},v=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byGroupSetId[t.groupSetId]||{},r=S(n,t);return r?{id:r,view:r?n[r]:null}:{id:null,view:null}},A=e=>["views","byCourseId",e.courseId],O=e=>["views","byContentId",e.contentId],C=e=>["views","byGroupSetId",e.groupSetId],R=e=>{Object.keys(e.views.byCourseId).forEach(t=>{let n=e.views.byCourseId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})}),Object.keys(e.views.byGroupSetId).forEach(t=>{let n=e.views.byGroupSetId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})})},L=(e,t)=>(0,r.ZP)(e,e=>{let n=!1;Object.keys(t).forEach(r=>{var i;e.byId[r]&&e.byId[r].title===t[r].title&&e.byId[r].studentCount===t[r].studentCount&&e.byId[r].isAvailable===t[r].isAvailable||(n=!0),e.byId[r]={...e.byId[r],...t[r],ui:{...null===(i=e.byId[r])||void 0===i?void 0:i.ui}},delete e.byId[r].groupSet}),n&&R(e)}),D=(0,o.Lq)(y.groups,{[l.Z.GROUPS_LOAD]:(e,t)=>(0,o.K4)(e,t,{loadingStatus:b.S.Loading}),[(0,o.ok)(l.Z.GROUPS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{let r=n[t];if(e.byId[t]={...r,api:{isUpdating:!1,isDeleting:!1}},!r.groupSetId)return;let i=new Set(e.byGroupSetId[r.groupSetId]).add(r.id);e.byGroupSetId[r.groupSetId]=Array.from(i)}),e.loadingStatus=b.S.Loaded}),[(0,o.bG)(l.Z.GROUPS_LOAD)]:e=>(0,r.ZP)(e,e=>{e.loadingStatus=b.S.Error}),[l.Z.GROUPS_LOAD_BY_QUERY]:(0,o.Li)(_,A),[(0,o.bG)(l.Z.GROUPS_LOAD_BY_QUERY)]:(0,o.HT)(_,A),[(0,o.ok)(l.Z.GROUPS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{groupIds:r,paging:i,groups:s}=n;return e=L(e,s),(0,o.NV)(e,t,{viewResolver:_,viewsPathResolver:A,paging:i,values:r})},[l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY]:(0,o.Li)(T,O),[(0,o.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(0,o.HT)(T,O),[(0,o.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{groupIds:r,paging:i,groups:s}=n,a={};return Object.values(s).forEach(e=>{if(e.memberships){let t=e.memberships.map(e=>{let{user:t,...n}=e;return n}),n={...e,memberships:t};e.id&&(a[e.id]=n)}else e.id&&(a[e.id]=e)}),e=L(e,a),(0,o.NV)(e,t,{viewResolver:T,viewsPathResolver:O,paging:i,values:r})},[l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY]:(0,o.Li)(v,C),[(0,o.bG)(l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY)]:(0,o.HT)(v,C),[(0,o.ok)(l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{groupIds:r,paging:i,groups:s}=n;return e=L(e,s),(0,o.NV)(e,t,{viewResolver:v,viewsPathResolver:C,paging:i,values:r})},[(0,o.ok)(c.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupSetId:r}=t;Object.keys(e.byId).forEach(t=>{e.byId[t].groupSetId===r&&delete n.byId[t]}),R(n)}),[(0,o.ok)(c.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupSet:r}=t,i=e.byGroupSetId[r.id];null==i||i.forEach(e=>n.byId[e].isAvailable=r.isAvailable)}),[(0,o.ok)(l.Z.GROUPS_ADD)]:(e,t)=>{let{addedGroupsById:n,groupSetId:i}=t,o=L(e,n);return i&&t.addedCourseGroupIds&&(o=(0,r.ZP)(o,n=>{var r;let o=null!==(r=e.byGroupSetId[i])&&void 0!==r?r:[],s=new Set([...t.addedCourseGroupIds,...o]);n.byGroupSetId[i]=Array.from(s)})),o},[(0,o.ok)(l.Z.GROUPS_UPDATE)]:(e,t)=>{let{updatedGroupsById:n}=t;return L(e,n)},[(0,o.bG)(l.Z.GROUPS_UPDATE)]:o.sT,[(0,o.ok)(l.Z.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.ZP)(e,n=>{let{groups:r}=t;Object.keys(r).forEach(t=>{n.byId[t]={...e.byId[t],...r[t]}})}),[(0,o.ok)(l.Z.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupId:r,userId:o}=t,s=e.byId[r];!s||!s.memberships||i.findIndex(s.memberships,["userId",o])>=0||(n.byId[r]={...s,memberships:[...s.memberships,{groupId:r,userId:o}],studentCount:s.studentCount+1})}),[(0,o.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{userId:r,enrolledGroupId:o}=t,s=e.byId[o];if(!s||!s.memberships||-1===i.findIndex(s.memberships,["userId",r]))return;let a=s.memberships.filter(e=>e.userId!==r);n.byId[s.id]={...s,memberships:a,studentCount:s.studentCount-1}})}),P=(0,o.Lq)(y.groupMemberships,{[(0,o.ok)(l.Z.GROUP_MEMBERSHIPS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{memberships:n}=t;Object.keys(n).forEach(t=>{e[t]={...n[t]}})}),[(0,o.ok)(l.Z.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{groupId:r,userId:o}=t,s=Array.from(e[r]||[]);i.findIndex(s,["userId",o])>=0||(n[r]=[...s,{groupId:r,userId:o}])}),[(0,o.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.ZP)(e,n=>{let{userId:r,enrolledGroupId:o}=t,s=e[o];s&&-1!==i.findIndex(s,["userId",r])&&(n[o]=s.filter(e=>e.userId!==r))})}),N=(0,o.UY)({groups:D,groupMemberships:P}),U=(0,o.vn)(f,N,y),w={deleteByContentId:e=>(0,o.c3)((t,n)=>{let r=k.getGroupsByContentId(n(),e),i=h.Ys.getContentById(n(),e).courseId;t((0,o.aU)(l.Z.GROUP_DELETE_BATCH,{deletedGroups:r}));let s=()=>{let t=h.Ys.getContentById(n(),e),r={...t,isGroupContent:!1,assignedGroups:[]};return{prevContent:t,nextContent:r}};return(0,p.Y)(i,r).then(()=>{let{prevContent:e,nextContent:n}=s();return t(h.Nw.persistContent(e,n))}).then(()=>{let{nextContent:e}=s();return t(h.Nw.persistContentSync(e))}).then(()=>{t((0,o.aU)((0,o.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:r}))}).catch(e=>{throw t((0,o.aU)((0,o.bG)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:r})),t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),{err:e}})}),loadGroupsByQuery:e=>(0,o.PH)(l.Z.GROUPS_LOAD_BY_QUERY,async()=>{try{return{data:await (0,p.EL)(e),query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadByContentId:(e,t)=>(0,o.PH)(l.Z.GROUPS_LOAD_BY_CONTENT_ID,n=>t||M(n(),e.contentId)?(0,p.G3)(e).catch(e=>{throw{err:e}}):Promise.resolve({groups:{}})),loadByContentIdAndQuery:e=>(0,o.c3)(async(t,n)=>{let{view:r}=T(n().group.groups,e);if(null==r||!r.isLoading){t((0,o.aU)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY,{query:e}));try{let n=await (0,p.d3)(e);t((0,o.aU)((0,o.ok)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{data:n,query:e}))}catch(n){t((0,o.aU)((0,o.bG)(l.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{err:n,query:e})),t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:n}))}}}),loadByGroupSetId:(e,t,n)=>(0,o.c3)(async(r,i)=>{if(!d.Ys.isLoading(i(),t))try{r((0,o.aU)(l.Z.GROUPS_LOAD,{groupSetId:t}));let i=await E.K0(e,t,n),s=Object.keys(i.groups);r((0,o.aU)((0,o.ok)(l.Z.GROUPS_LOAD),{...i,groupSetId:t,assignedGroups:s}))}catch(e){r((0,o.aU)((0,o.bG)(l.Z.GROUPS_LOAD),{err:e})),r((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e}))}}),loadByGroupSetIdAndQuery:e=>(0,o.c3)(async(t,n)=>{let{view:r}=v(n().group.groups,e);if(null==r||!r.isLoading){t((0,o.aU)(l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY,{query:e}));try{let n=await (0,p.SP)(e);t((0,o.aU)((0,o.ok)(l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY),{data:n,query:e}))}catch(n){t((0,o.aU)((0,o.bG)(l.Z.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY),{err:n,query:e})),t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:n}))}}}),loadGroupsByCourse:e=>(0,o.PH)(l.Z.GROUPS_LOAD,()=>(0,p.DV)(e).catch(e=>{throw{err:e}})),loadMembershipsByGroupSetId:(e,t)=>(0,o.PH)(l.Z.GROUP_MEMBERSHIPS_LOAD,async()=>{let n=await E.W$(e,t),r=n.memberships;return{...n,groupSetId:t,memberships:r}}),addGroupMembership:e=>(0,o.c3)(async(t,n)=>{t((0,o.aU)(l.Z.ADD_GROUP_MEMBERSHIP)),t((0,o.aU)(l.Z.REMOVE_GROUP_MEMBERSHIP));try{let n=await (0,p.iJ)(e);return t((0,o.aU)((0,o.ok)(l.Z.ADD_GROUP_MEMBERSHIP),n)),t((0,o.aU)((0,o.ok)(l.Z.REMOVE_GROUP_MEMBERSHIP),{userId:n.userId,enrolledGroupId:e.enrolledGroupId,courseId:e.courseId})),await t(u.Nw.loadUser(n.userId)),n}catch(e){if(t((0,o.aU)((0,o.bG)(l.Z.ADD_GROUP_MEMBERSHIP),e)),t((0,o.aU)((0,o.bG)(l.Z.REMOVE_GROUP_MEMBERSHIP),e)),e instanceof s.hq||e instanceof s.S6||e instanceof s.hm||e instanceof s.e9||e instanceof s.UP||e instanceof s.PG)throw e;return t((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e})),null}}),loadStudentCountByGroupSetId:(e,t)=>(0,o.PH)(l.Z.GROUP_STUDENT_COUNT_LOAD,async()=>{let n=await E.Fh(e,t),r=n.groups,i=Object.keys(r).reduce((e,t)=>e+r[t].studentCount,0);return{...n,groupSetId:t,groups:r,groupSetStudentCount:i}}),addByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");let n=(0,m.MO)(t);return(0,o.aU)((0,o.ok)(l.Z.GROUPS_ADD),{addedGroupsById:n,groupSetId:e,addedCourseGroupIds:Object.keys(n)})},updateByGroupSetId:(e,t,n)=>{if(!e)throw Error("Expected an existing group set id");let r=(0,m.MO)(t);return(0,o.aU)((0,o.ok)(l.Z.GROUPS_UPDATE),{updatedGroupsById:r,groupSetId:e,courseId:n})},deleteByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");return(0,o.aU)((0,o.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:t,groupSetId:e})},removeGroupsFromStore:e=>(0,o.aU)((0,o.ok)(l.Z.GROUP_DELETE_BATCH),{deletedGroups:e}),loadGroupById:(e,t)=>(0,o.PH)(l.Z.GROUP_LOAD_BY_ID,async()=>{let n=await p.zW(e,t);return(0,o.aU)((0,o.ok)(l.Z.GROUP_LOAD_BY_ID),{group:n,courseId:e,groupId:t})})},k={getGroupsByQuery:(e,t)=>{var n;let{view:r}=_(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,r;let i=e.group.groups.byId[t];if(!i)return null;let o={...i},s=null===(r=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===r?void 0:r.byId[i.groupSetId];return o.groupSet=s,o}).filter(e=>e):[]},getGroupByGroupId:(e,t)=>e.group.groups.byId[t],getCourseGroupsByIds:(e,t)=>t.map(t=>e.group.groups.byId[t]),getCourseGroupViewStatusByQuery:(e,t)=>{let{view:n}=_(e.group.groups,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseGroupByGroupSetIdViewStatusByQuery:(e,t)=>{var n;let{view:r}=v(e.group.groups,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null}:null},getGroupsByContentId:(e,t)=>i.filter(e.group.groups.byId,{contentId:t}),getGroupsByContentIdAndQuery:(e,t)=>{var n;let{view:r}=T(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{let n;let r=e.group.groups.byId[t];if(!r)return null;let i={...r};return r.groupSetId&&(n=d.Ys.getGroupSetById(e,r.groupSetId)),i.groupSet=n,i}).filter(e=>!!e):[]},getCourseGroupByContentIdViewStatusByQuery:(0,g.P1)((e,t)=>T(e.group.groups,t).view,e=>{var t;return e?{isLoading:e.isLoading,isValid:e.isValid,paging:null!==(t=e.paging)&&void 0!==t?t:null}:null}),getGroupsByGroupSetId:(e,t)=>{var n,r;return null!==(r=null===(n=e.group.groups.byGroupSetId[t])||void 0===n?void 0:n.map(t=>e.group.groups.byId[t]))&&void 0!==r?r:[]},getGroupsByGroupSetIdByQuery:(e,t)=>{var n;let{view:r}=v(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,r;let i=e.group.groups.byId[t];if(!i)return null;let o={...i};return i.groupSetId&&(o.groupSet=null===(r=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===r?void 0:r.byId[i.groupSetId]),o}).filter(e=>e):[]},getGroupMembershipsByGroupSetId:(e,t)=>{if(!t||!e.groupWorkspace.groupSets.byId.hasOwnProperty(t))return[];let n=e.group.groups.byGroupSetId[t];return Array.isArray(n)?n.map(t=>e.group.groupMemberships[t]):[]},hasJoined:(e,t)=>{let n=i.filter(e.group.groups.byId,{...t.contentId&&{contentId:t.contentId},...t.groupSetId&&{groupSetId:t.groupSetId}});return i.some(n,e=>!!e.memberships&&i.find(e.memberships,{userId:t.userId}))},getGroupsLoadingStatus:e=>e.group.groups.loadingStatus,isLoading:e=>e.group.isLoading},M=(e,t)=>0===k.getGroupsByContentId(e,t).length},284003:function(e,t,n){"use strict";var r,i;n.d(t,{S:function(){return r}}),(i=r||(r={})).HasNotStarted="hasNotStarted",i.Loading="loading",i.Loaded="loaded",i.Error="error"},211675:function(e,t,n){"use strict";n.d(t,{I6:function(){return O},Nw:function(){return C},Ys:function(){return R}});var r=n(715729),i=n(276635),o=n(961719),s=n(842330),a=n(494615),l=n(221952),u=n(651948),d=n(901717);let c={groupSets:{byId:{},byCourseId:{}},permissions:{},paging:{count:0},status:{isLoading:!1,loadingGroupSetIds:[]},totalGroupCount:0,lastGroupSetId:"",ui:{newGroupSetIds:[]},views:{byCourseId:{}}},E=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.courseId])||{},o=Object.keys(r).find(e=>{let n=r[e],o=i.isEqual(n.query.paging,t.paging),s=i.isEqual(n.query.filter,t.filter);return o&&s});return{id:o,view:o?r[o]:null}},p=e=>["views","byCourseId",e.courseId],m=(e,t)=>{let{groupSets:n}=t;return(0,r.ZP)(e,e=>{let t=Object.values(n.byId),r=[...Object.values(e.groupSets.byId),...t];e.groupSets.byId=(0,s.MO)(r)})},h=(e,t)=>{let n=e.loadingGroupSetIds.filter(e=>e!==t.groupSetId);return{...e,loadingGroupSetIds:n}},I=(0,o.Lq)(c.groupSets,{[(0,o.ok)(d.V.GROUP_SET_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.byId[t.groupSetId]={...e.byId[t.groupSetId],...t.groupSet}}),[(0,o.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{var n;e.byId=t.groupSets.byId;let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...Object.keys(t.groupSets.byId),...r])]}),[(0,o.ok)(d.V.GROUP_SETS_LOAD_MORE)]:(e,t)=>(0,r.ZP)(e,e=>{var n;i.merge(e.byId,t.groupSets.byId);let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...r,...Object.keys(t.groupSets.byId)])]}),[(0,o.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{var n;let{groupSet:r,courseId:i}=t;e.byId[r.id]=r;let o=null!==(n=e.byCourseId[i])&&void 0!==n?n:[];e.byCourseId[i]=[...new Set([...o,r.id])]}),[d.V.GROUP_SET_MODIFY]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0}),[(0,o.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]=t.groupSet,e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,o.bG)(d.V.GROUP_SET_MODIFY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,o.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{groupSetId:n,courseId:r}=t;delete e.byId[t.groupSetId],e.byCourseId[r]=e.byCourseId[r].filter(e=>e!==n)}),[(0,o.ok)(l.Z.GROUPS_ADD)]:(e,t)=>{var n;let i=null!==(n=e.byId[t.groupSetId].groupCount)&&void 0!==n?n:0;return(0,r.ZP)(e,e=>{e.byId[t.groupSetId].groupCount=i+t.addedCourseGroupIds.length})},[(0,o.ok)(l.Z.GROUPS_LOAD_BY_QUERY)]:(e,t)=>(0,r.ZP)(e,e=>{let n=Object.values(t.data.groups),r=[];n.forEach(e=>{e.groupSet&&(e.groupSet.permissions=e.permissions,r.push(e.groupSet))});let i=[...r,...Object.values(e.byId)];e.byId=(0,s.MO)(i)}),[(0,o.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{var n,i;let o=t.groupSetId||(null===(i=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===i?void 0:i.groupSetId),s=e.byId[o];if(o&&s){let n=s.groupCount||0;return(0,r.ZP)(e,e=>{e.byId[o].groupCount=n-t.deletedGroups.length})}return e},[(0,o.ok)(l.Z.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.byId[t.groupSetId]||(e.byId[t.groupSetId]={}),e.byId[t.groupSetId].studentCount=t.groupSetStudentCount})}),b=(0,o.Lq)(c.status,{[d.V.GROUP_SETS_LOAD]:o.K4,[d.V.GROUP_SET_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,o.ok)(d.V.GROUP_SETS_LOAD)]:o.f2,[(0,o.ok)(d.V.GROUP_SET_LOAD)]:h,[(0,o.bG)(d.V.GROUP_SETS_LOAD)]:o.sT,[(0,o.bG)(d.V.GROUP_SET_LOAD)]:h,[(0,o.ok)(d.V.GROUP_SETS_LOAD_MORE)]:o.f2,[l.Z.GROUPS_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,o.ok)(l.Z.GROUPS_LOAD)]:h,[(0,o.bG)(l.Z.GROUPS_LOAD)]:h}),g=(0,o.Lq)(c.permissions,{[(0,o.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>({...e,...t.permissions})),[(0,o.bG)(d.V.GROUP_SETS_LOAD)]:(e,t)=>({}),[(0,o.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>(0,r.ZP)(e,e=>({...e,...t.permissions})),[(0,o.bG)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>({})}),y=(0,o.Lq)(c.paging,{[(0,o.ok)(d.V.GROUP_SETS_LOAD)]:(e,t)=>t.paging,[(0,o.ok)(d.V.GROUP_SETS_LOAD_MORE)]:(e,t)=>t.paging,[(0,o.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>(0,r.ZP)(e,e=>{e.count+=1}),[(0,o.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{e.count-=1}),[(0,o.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.paging,[(0,o.bG)(d.V.GROUP_SETS_LOAD)]:(e,t)=>c.paging,[d.V.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.paging}),f=(0,o.Lq)(c.totalGroupCount,{[(0,o.ok)(d.V.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.results.map(e=>e.groupCount).reduce((e,t)=>e+t,0),[(0,o.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>e-t.groupCount,[(0,o.ok)(l.Z.GROUPS_ADD)]:(e,t)=>e+t.addedCourseGroupIds.length,[(0,o.ok)(l.Z.GROUPS_UPDATE)]:(e,t)=>e,[(0,o.ok)(l.Z.GROUP_DELETE_BATCH)]:(e,t)=>{var n,r;return t.groupSetId||(null===(r=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.groupSetId)?e-t.deletedGroups.length:e},[d.V.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.totalGroupCount}),S=(0,o.Lq)(c.lastGroupSetId,{[(0,o.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>t.groupSet.id,[(0,o.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>t.groupSet.id}),_=(0,o.Lq)(c.ui,{[(0,o.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.ZP)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[(0,o.ok)(d.V.GROUP_SET_MODIFY)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.ZP)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[d.V.GROUP_SET_MARK_AS_OLD]:(e,t)=>(0,r.ZP)(e,n=>{n.newGroupSetIds=e.newGroupSetIds.filter(e=>e!==t.groupSetId)})}),T=(0,o.Lq)(c.views,{[(0,o.ok)(d.V.GROUP_SET_ADD)]:(e,t)=>{let{courseId:n}=t;return e.byCourseId[n]?(0,r.ZP)(e,e=>{Object.keys(e.byCourseId[n]).forEach(t=>{e.byCourseId[n][t].isValid=!1})}):e},[(0,o.ok)(d.V.GROUP_SET_REMOVE)]:(e,t)=>{let{courseId:n}=t;return e.byCourseId[n]?(0,r.ZP)(e,e=>{Object.keys(e.byCourseId[n]).forEach(t=>{e.byCourseId[n][t].isValid=!1})}):e}}),v=(0,o.Lq)(c,{[d.V.GROUP_SETS_LOAD_BY_QUERY]:(0,o.Li)(E,p),[(0,o.ok)(d.V.GROUP_SETS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{groupSets:r,paging:i}=n;return e=m(e,n),(0,o.NV)(e,t,{viewResolver:E,viewsPathResolver:p,paging:i,values:Object.keys(r.byId)})},[(0,o.bG)(d.V.GROUP_SETS_LOAD_BY_QUERY)]:(0,o.HT)(E,p)}),A=(0,o.UY)({groupSets:I,permissions:g,paging:y,status:b,totalGroupCount:f,lastGroupSetId:S,ui:_,views:T}),O=(0,o.vn)(v,A,c),C={loadGroupSetsByQuery:e=>(0,o.PH)(d.V.GROUP_SETS_LOAD_BY_QUERY,async()=>{try{return{data:await u.fG(e),query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadGroupSets:(e,t,n=!1)=>(0,o.c3)(async(r,i)=>{if(!R.isLoading(i()))try{r((0,o.aU)(d.V.GROUP_SETS_LOAD));let i=await u.jC(e,t);r(n?(0,o.aU)((0,o.ok)(d.V.GROUP_SETS_LOAD_MORE),{...i,courseId:e}):(0,o.aU)((0,o.ok)(d.V.GROUP_SETS_LOAD),{...i,courseId:e}))}catch(e){r((0,o.aU)((0,o.bG)(d.V.GROUP_SETS_LOAD),{err:e})),r((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e}))}}),loadGroupSetById:(e,t)=>(0,o.c3)(async(n,r)=>{if(!R.isLoading(r(),t))try{n((0,o.aU)(d.V.GROUP_SET_LOAD,{groupSetId:t}));let r=await u.RD(e,t);n((0,o.aU)((0,o.ok)(d.V.GROUP_SET_LOAD),{...r,groupSetId:t}))}catch(e){n((0,o.aU)((0,o.bG)(d.V.GROUP_SET_LOAD),{groupSetId:t,err:e})),n((0,o.aU)((0,o.ok)(a.Z.APP_ERROR),{error:e}))}}),saveGroupSet:(e,t)=>(0,o.PH)(t.id?d.V.GROUP_SET_MODIFY:d.V.GROUP_SET_ADD,async()=>{try{let n=t.id&&"permissions,groupCount,studentCount,hasAssociatedContent";return{groupSet:await u.AG(e,t,n),courseId:e}}catch(e){throw{groupSet:t,err:e}}},{groupSet:t}),removeGroupSet:(e,t)=>(0,o.PH)(d.V.GROUP_SET_REMOVE,async n=>{try{return await u.wI(e,t),{groupSetId:t,groupCount:R.getGroupsCountByGroupSetId(n(),t),courseId:e}}catch(e){throw{err:e}}}),getGroupAndSetCount:e=>(0,o.PH)(d.V.GET_GROUP_AND_SET_COUNT,async()=>{try{return{...await u.at(e)}}catch(e){throw{err:e}}}),markAsOld:e=>(0,o.aU)(d.V.GROUP_SET_MARK_AS_OLD,{groupSetId:e}),reset:()=>(0,o.aU)(d.V.GROUP_WORKSPACE_RESET_COUNT)},R={getGroupsSetsByQuery:(e,t)=>{let{view:n}=E(e.groupWorkspace,t);return n?(n.values||[]).map(t=>e.groupWorkspace.groupSets.byId[t]).filter(e=>!!e):[]},getCourseGroupSetsViewStatusByQuery:(e,t)=>{let{view:n}=E(e.groupWorkspace,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getLastCreatedGroupSetId:e=>e.groupWorkspace.lastGroupSetId,getGroupSetById:(e,t)=>t&&e.groupWorkspace.groupSets.byId.hasOwnProperty(t)?e.groupWorkspace.groupSets.byId[t]:null,getGroupsCountByGroupSetId:(e,t)=>{var n,r;return t&&null!==(r=null===(n=e.groupWorkspace.groupSets.byId[t])||void 0===n?void 0:n.groupCount)&&void 0!==r?r:0},getTotalGroupSetCount:e=>e.groupWorkspace.paging&&e.groupWorkspace.paging.count,getTotalGroupCount:e=>e.groupWorkspace.totalGroupCount,isLoading:(e,t)=>t?-1!==e.groupWorkspace.status.loadingGroupSetIds.indexOf(t):e.groupWorkspace.status.isLoading,canCreate:e=>e.groupWorkspace.permissions.createGroups,isNew:(e,t)=>-1!==e.groupWorkspace.ui.newGroupSetIds.indexOf(t)}},901717:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GROUP_SETS_LOAD:"group.sets.load",GROUP_SETS_LOAD_BY_QUERY:"group.sets.load.by.query",GROUP_SETS_LOAD_MORE:"group.sets.load.more",GROUP_SETS_SWITCH_SORT_CRITERIA:"group.sets.switch.sort.criteria",GROUP_SET_ADD:"group.set.add",GROUP_SET_MODIFY:"group.set.modify",GROUP_SET_REMOVE:"group.set.remove",GROUP_SET_MARK_AS_OLD:"group.set.mark.as.old",GROUP_SET_LOAD:"group.set.load",GET_COURSE_CONTEXT:"get.course.context",GET_GROUP_AND_SET_COUNT:"get.group.and.set.count",GET_GROUP_MEMBERSHIP_COUNT:"get.group.membership.count",GROUP_WORKSPACE_RESET_COUNT:"group.workspace.reset.count"}},944789:function(e,t,n){"use strict";n.d(t,{Nw:function(){return g},I6:function(){return b},Ys:function(){return f}});var r=n(276635),i=n(715729),o=n(65671),s=n(494615),a=n(961719);let l={COURSE_LOGS_LOAD:"course-logs.load",COURSE_LOGS_DELETE:"course-logs.delete",COURSE_LOGS_INVALIDATE:"course-logs.invalidate"};var u=n(560985),d=n(715655),c=n(968227),E=n(503715);let p=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=e.views.byCourseId[t.courseId]||{},o=null!==(n=Object.keys(i).find(e=>{let n=i[e],o=r.isEqual(n.query.paging,t.paging),s=r.isEqual(n.query.queryParams,t.queryParams);return o&&s}))&&void 0!==n?n:null;return{id:o,view:o?i[o]:null}},m=e=>["views","byCourseId",e.courseId],h=(e,t)=>{let{view:n}=p(e.courseLogs,t);return!n||!n.isLoading&&!n.isValid},I=(e,t)=>e=(0,i.Uy)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),b=(0,a.Lq)({byCourseLogId:{},views:{byCourseId:{}}},{[l.COURSE_LOGS_LOAD]:(0,a.Li)(p,m),[(0,a.ok)(l.COURSE_LOGS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.f2)(e,t);let{logIds:r,logs:o,paging:s}=n;return e=(0,i.Uy)(e,e=>{Object.keys(o).forEach(t=>{e.byCourseLogId[t]={...e.byCourseLogId[t],...o[t]}})}),(0,a.NV)(e,t,{viewResolver:p,viewsPathResolver:m,paging:s,values:r})},[(0,a.bG)(l.COURSE_LOGS_LOAD)]:(0,a.HT)(p,m),[l.COURSE_LOGS_DELETE]:(e,t)=>(0,i.Uy)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!0};e.byCourseLogId[t.logId].api=n}),[(0,a.ok)(l.COURSE_LOGS_DELETE)]:(e,t)=>I(e,t.courseId),[(0,a.bG)(l.COURSE_LOGS_DELETE)]:(e,t)=>(e=(0,i.Uy)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!1};e.byCourseLogId[t.logId].api=n}),(0,a.sT)(e,t)),[l.COURSE_LOGS_INVALIDATE]:(e,t)=>I(e,t.courseId)}),g={loadCourseLogsByQuery:e=>(0,a.c3)(async(t,n)=>{if(h(n(),e)){t((0,a.aU)(l.COURSE_LOGS_LOAD,{query:e}));try{let n=await (0,o.v)(e);t((0,a.aU)((0,a.ok)(l.COURSE_LOGS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.aU)((0,a.bG)(l.COURSE_LOGS_LOAD),{query:e})),t((0,a.aU)((0,a.ok)(s.Z.APP_ERROR),{error:n})),{error:n}}}}),deleteCourseLogByLogId:(e,t)=>(0,a.c3)(async n=>{n((0,a.aU)(l.COURSE_LOGS_DELETE,{courseId:t,logId:e}));try{await (0,o.a)(e,t),n((0,a.aU)((0,a.ok)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e}))}catch(r){throw n((0,a.aU)((0,a.bG)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e})),n((0,a.aU)((0,a.ok)(s.Z.APP_ERROR),{error:r})),{error:r}}}),invalidateCourseLogViews:e=>(0,a.c3)(async t=>{t((0,a.aU)(l.COURSE_LOGS_INVALIDATE,{courseId:e}))})},y=(0,u.wN)(d.PW,c.AD)((e,t)=>{let{view:n}=p(e.courseLogs,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),f={getCourseLogsByQuery:(0,E.U)((e,t)=>{let{view:n}=p(e.courseLogs,t);return n?(n.values||[]).map(t=>e.courseLogs.byCourseLogId[t]):[]},e=>e),getCourseLogViewStatusByQuery:y}},521614:function(e,t,n){"use strict";n.d(t,{I6:function(){return k},Nw:function(){return M},Ys:function(){return B}});var r=n(276635),i=n(715729),o=n(961719),s=n(134129),a=n(280652),l=n(269624),u=n(80155),d=n(689033),c=n(221952),E=n(362834),p=n(71142),m=n(494615),h=n(888663),I=n(211498),b=n(703987),g=n(374899),y=n(305870);function f(e){return!!e.sort&&0!==e.sort.length}let S=e=>null==e||Array.isArray(e)&&0===e.length,_=(e,t)=>{let{courseId:n}=t,i=e.views.byCourseId[n];return Object.keys(i).filter(e=>{var n;let o=i[e];return!!(!f(t)&&!f(o.query)||r.isEqual(o.query.sort,t.sort))&&((n=o.query).filter?t.filter?Array.from(new Set([...Object.keys(n.filter),...Object.keys(t.filter)])).every(e=>{let i=n.filter[e],o=t.filter[e];return!!(i===o||r.isEqual(i,o))||S(i)&&S(o)}):Object.values(n.filter).every(S):!t.filter||Object.values(t.filter).every(S))})},T=(e,t)=>{if(!t)return o.LW;let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],o=r.isEqual(i.query.columnId,t.columnId),s=r.isEqual(i.query.paging,t.paging),a=r.isEqual(i.query.filter,t.filter),l=r.isEqual(i.query.sort,t.sort);return s&&l&&a&&o});return{id:i,view:i?n[i]:null}},v=e=>["views","byCourseId",e.courseId],A=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>n[e].query.userId===t.userId);return{id:r,view:r?n[r]:null}},O=e=>["views","byUserId",e.userId],C=(e,t)=>{let{view:n}=T(e.courseMembership,t);return!n||!n.isLoading&&!n.isValid},R=(e,t,n=!0)=>{let r=e.courseMembership.byCourseMembershipId[t];return n?!(null==r?void 0:r.user):!r},L=(e,t,n,r=!0)=>{let i=Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t&&e.userId===n);return r?!(null==i?void 0:i.user):!i},D=e=>null==e,P=(e,t,n)=>{if(!n)return;let r={};Object.values(n).forEach(e=>{e.courseId&&(r[e.courseId]||(r[e.courseId]=[]),r[e.courseId].push(e))}),Object.keys(r).forEach(n=>{var i;if(!n||!(null===(i=e.views.byCourseId)||void 0===i?void 0:i[n]))return;let o=N(e,r[n]);U(t,n,o)})},N=(e,t)=>t.reduce((t,n)=>{var r,i,o,s;let a=e.byCourseMembershipId[n.id];if(!a||!n)return t;let l=!D(n.dueDateExceptionType)&&!D(a.dueDateExceptionType)&&n.dueDateExceptionType!==a.dueDateExceptionType,u=!D(n.isAvailable)&&!D(a.isAvailable)&&n.isAvailable!==a.isAvailable,d=!D(n.role)&&!D(a.role)&&n.role!==a.role||!D(null===(r=n.user)||void 0===r?void 0:r.systemRole)&&!D(null===(i=a.user)||void 0===i?void 0:i.systemRole)&&(null===(o=n.user)||void 0===o?void 0:o.systemRole)!==(null===(s=a.user)||void 0===s?void 0:s.systemRole),c=!D(n.timeLimitExceptionType)&&!D(a.timeLimitExceptionType)&&n.timeLimitExceptionType!==a.timeLimitExceptionType,E=a.displayOrder!==n.displayOrder;return{accommodationChanged:t.accommodationChanged||l,availabilityChanged:t.availabilityChanged||u,roleChanged:t.roleChanged||d,timeLimitExceptionChanged:t.timeLimitExceptionChanged||c,displayOrderChanged:t.displayOrderChanged||E}},{}),U=(e,t,n)=>{var r;let i=n.accommodationChanged||n.availabilityChanged||n.roleChanged||n.timeLimitExceptionChanged||n.displayOrderChanged||n.gradesChanged||n.groupsChanged||n.studentPreviewStatusChanged||n.studentAttemptStatusChanged,o=null===(r=e.views.byCourseId)||void 0===r?void 0:r[t];i&&o&&Object.values(o).forEach(e=>{var t,r;if(!e.isValid)return;let i=null===(t=e.query)||void 0===t?void 0:t.filter,o=i&&(0,b.SH)(i)?i:void 0,a=(null==o?void 0:o.hasDueDateExceptionOnly)&&n.accommodationChanged,l=n.availabilityChanged,u=(null==o?void 0:o.roleBucket)&&n.roleChanged,d=(null==o?void 0:o.hasTimeLimitExceptionOnly)&&n.timeLimitExceptionChanged,c=n.displayOrderChanged,E=n.gradesChanged&&(null===(r=e.query.sort)||void 0===r?void 0:r.some(e=>e.field===s.PJt.Grade)),p=(0,b.Kw)(i)?i.studentStatusFilter&&n.studentAttemptStatusChanged:void 0,m=(0,b.Kw)(i)&&i.gradingStatusFilter!==s.qr.AllStatuses&&n.gradesChanged;(l||u||a||d||c||E||p||m||n.groupsChanged||n.studentPreviewStatusChanged)&&(e.isValid=!1)})},w=(e,t)=>{t&&Object.keys(t).forEach(n=>{var r,i;e.byCourseMembershipId[n]={...e.byCourseMembershipId[n],...t[n],displayOrder:t[n].displayOrder,assignedBlogEntries:(null===(r=e.byCourseMembershipId[n])||void 0===r?void 0:r.assignedBlogEntries)||[],ui:{...null===(i=e.byCourseMembershipId[n])||void 0===i?void 0:i.ui}}})},k=(0,o.Lq)({byCourseMembershipId:{},permissions:{byCourseId:{}},paging:null,isLoading:!1,views:{byCourseId:{},byUserId:{}}},{[(0,o.ok)(a.V.BLOG_ENTRIES_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{e.byCourseMembershipId[t.query.assignedUserId]||(e.byCourseMembershipId[t.query.assignedUserId]={}),e.byCourseMembershipId[t.query.assignedUserId].assignedBlogEntries=Object.keys(t.data.byId)}),[(0,o.ok)(a.V.BLOG_ENTRY_ADD)]:(e,t)=>{let{assignedUserId:n}=t,r=e.byCourseMembershipId[n];if(r&&t&&t.byId){let o=[...Object.keys(t.byId),...r.assignedBlogEntries];return(0,i.ZP)(e,e=>{e.byCourseMembershipId[n]||(e.byCourseMembershipId[n]={}),e.byCourseMembershipId[n].assignedBlogEntries=o})}return e},[(0,o.ok)(a.V.BLOG_ENTRY_REMOVE)]:(e,t)=>{let n=e.byCourseMembershipId[t.assignedUserId];if(n){let o=r.filter(n.assignedBlogEntries,e=>e!==t.entryId);return(0,i.ZP)(e,e=>{e.byCourseMembershipId[t.assignedUserId]||(e.byCourseMembershipId[t.assignedUserId]={}),e.byCourseMembershipId[t.assignedUserId].assignedBlogEntries=o})}return e},[(0,o.ok)(E.V5.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>(0,i.ZP)(e,e=>{void 0===t.query.fields&&t.data.results.forEach(t=>{e.byCourseMembershipId[t.courseMembership.id]=t.courseMembership})}),[(0,o.ok)(u.V.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.ZP)(e,e=>{n.forEach(t=>{U(e,t,{gradesChanged:!0})})}):e},[(0,o.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.ZP)(e,e=>{n.forEach(t=>{U(e,t,{gradesChanged:!0})})}):e},[(0,o.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{var n;return(null===(n=null==t?void 0:t.grade)||void 0===n?void 0:n.courseId)?(0,i.ZP)(e,e=>{U(e,t.grade.courseId,{gradesChanged:!0})}):e},[(0,o.ok)(y.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{courseId:n}=t.data.dependents;return(0,i.ZP)(e,e=>{U(e,n,{gradesChanged:!0})})},[(0,o.ok)(y.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{courseId:n}=t.data.dependents;return(0,i.ZP)(e,e=>{U(e,n,{gradesChanged:!0})})},[(0,o.ok)(h.V.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;return n?(0,i.ZP)(e,t=>{let r={[n.id]:n};P(e,t,r),w(t,r)}):(0,o.f2)(e,t)},[(0,o.ok)(h.V.COURSE_MEMBERSHIP_SET)]:(e,t)=>{let{data:n}=t;return(0,i.ZP)(e,t=>{let r={[n.id]:n};P(e,t,r),w(t,r)})},[h.V.COURSE_MEMBERSHIPS_LOAD]:(0,o.Li)(T,v),[(0,o.ok)(h.V.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{membershipIds:r,paging:s,courseId:a,permissions:l}=n;return e=(0,i.ZP)(e,t=>{U(t,a,N(e,Object.values(n.byCourseMembershipId))),w(t,n.byCourseMembershipId),t.permissions.byCourseId[a]=l}),(0,o.NV)(e,t,{viewResolver:T,viewsPathResolver:v,paging:s,values:r})},[(0,o.bG)(h.V.COURSE_MEMBERSHIPS_LOAD)]:(0,o.HT)(T,v),[h.V.USER_MEMBERSHIPS_LOAD]:(0,o.Li)(A,O),[(0,o.ok)(h.V.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{membershipIds:r,paging:s}=n;return e=(0,i.ZP)(e,t=>{P(e,t,n.byMembershipId),w(t,n.byMembershipId)}),(0,o.NV)(e,t,{viewResolver:A,viewsPathResolver:O,paging:s,values:r})},[(0,o.bG)(h.V.USER_MEMBERSHIPS_LOAD)]:(0,o.HT)(A,O),[(0,o.bG)(h.V.COURSE_MEMBERSHIP_USERS_LOAD)]:(0,o.HT)(T,v),[h.V.COURSE_MEMBERSHIP_USERS_LOAD]:(0,o.Li)(T,v),[(0,o.ok)(h.V.COURSE_MEMBERSHIP_USERS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.f2)(e,t);let{paging:r,permissions:i,userIds:s}=n;return(0,o.NV)(e,t,{viewResolver:T,viewsPathResolver:v,paging:r,permissions:i,values:s})},[(0,o.ok)(l.V.STUDENT_PREVIEW_EXIT)]:(e,t)=>{let{courseId:n}=t.data;return(0,i.ZP)(e,e=>{n&&U(e,t.data.courseId,{studentPreviewStatusChanged:!0})})},[(0,o.ok)(c.Z.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>{let{courseId:n}=t;return(0,i.ZP)(e,e=>{U(e,n,{groupsChanged:!0})})},[(0,o.ok)(c.Z.GROUPS_UPDATE)]:(e,t)=>{let{courseId:n}=t;return(0,i.ZP)(e,e=>{U(e,n,{groupsChanged:!0})})},[(0,o.ok)(I.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{courseId:n,studentAttemptStatusChanged:r}=t;return(0,i.ZP)(e,e=>{r&&U(e,n,{studentAttemptStatusChanged:!0})})},[(0,o.ok)(d.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n,groupAttemptStatusChanged:r}=t;return(0,i.ZP)(e,e=>{r&&U(e,n.courseId,{studentAttemptStatusChanged:!0})})},[(0,o.ok)(I.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let n=t.attempt.courseId;return(0,i.ZP)(e,e=>{U(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})},[(0,o.ok)(d.V.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let n=t.groupAttempt.courseId;return(0,i.ZP)(e,e=>{U(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})},[(0,o.ok)(g.V.QUESTION_PERSIST)]:(e,t)=>{let{courseId:n}=t.question;return(0,i.ZP)(e,e=>{n&&U(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})}}),M={loadCourseMembershipsByCourseId:e=>(0,o.c3)(async(t,n)=>{let{courseId:r,limit:i,offset:o,roleBucket:s}=e,a={courseId:r,paging:{...i?{limit:i}:{},...o?{offset:o}:{}},sort:null,filter:{...s?{roleBucket:[s]}:{}}};return t(M.loadCourseMembershipsByQuery(a))}),loadCourseMembershipsByQuery:e=>(0,o.c3)(async(t,n)=>{if(C(n(),e)){t((0,o.aU)(h.V.COURSE_MEMBERSHIPS_LOAD,{query:e}));try{let n=await (0,p.D8)(e);t((0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e}))}catch(n){throw t((0,o.aU)((0,o.bG)(h.V.COURSE_MEMBERSHIPS_LOAD),{query:e})),t((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:n})),{err:n}}}}),loadCourseMembershipUserIdsByCourseIdWithFields:e=>(0,o.c3)(async t=>{var n,r;let{courseId:i,columnId:s,filter:a}=e,l=(0,b.SH)(a)?a:void 0,u=(0,b.Ne)(a)?a:void 0,d=(0,b.ok)(a)?a:void 0,c=(0,b.Kw)(a)?a:void 0,E={courseId:i,filter:{...(null==l?void 0:l.roleBucket)?{roleBucket:[l.roleBucket]}:{},...(null==u?void 0:u.fields)?{fields:u.fields}:{},...c?{...c}:{},...(null==d?void 0:d.searchString)?{searchString:d.searchString}:{},...(null==l?void 0:l.membershipAvailable)?{membershipAvailable:[l.membershipAvailable]}:{}},columnId:s};t((0,o.aU)(h.V.COURSE_MEMBERSHIP_USERS_LOAD,{query:E}));try{let e;let i=[],s=0;do{let t={...E,paging:{limit:5e3,offset:s}},o=await (0,p.Dv)(t),a=o.paging;e=null!==(n=null==a?void 0:a.nextPage)&&void 0!==n?n:"",i.push(o),s=(null!==(r=null==a?void 0:a.offset)&&void 0!==r?r:0)+5e3}while(e);let a=(0,p.Nv)(i,E);t((0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIP_USERS_LOAD),{data:a,query:E}))}catch(e){throw t((0,o.aU)((0,o.bG)(h.V.COURSE_MEMBERSHIP_USERS_LOAD),{query:E})),t((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByMemberId:(e,t,n=!0)=>(0,o.c3)(async(r,i)=>{if(!R(i(),t,n))return B.getCourseMembershipByMembershipId(i(),t);try{r((0,o.aU)(h.V.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let i=await (0,p.ZJ)(e,t,n);return r((0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIP_LOAD),{data:i,courseId:e})),i}catch(e){throw r((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByUserId:(e,t,n=!0)=>(0,o.c3)(async(r,i)=>{if(!L(i(),e,t,n))return B.getCourseMembershipByUserId(i(),e,t);try{r((0,o.aU)(h.V.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let n=await (0,p.zJ)(e,t);return r((0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIP_LOAD),{data:n,courseId:e})),n}catch(e){if(e instanceof s.Hy0&&404===e.body.status)throw{err:e};throw r((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),{err:e}}}),setCourseMembershipsInStore:(e,t)=>{let n=(0,p.jQ)(t,e);return(0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e})},setUserMembershipsInStore:(e,t)=>{let n=(0,p.Rc)(t,e);return(0,o.aU)((0,o.ok)(h.V.USER_MEMBERSHIPS_LOAD),{data:n,query:e})},setMembershipInStore:e=>(0,o.c3)(async t=>{t((0,o.aU)((0,o.ok)(h.V.COURSE_MEMBERSHIP_SET),{data:e}))})},B={getCourseMembershipsByQuery:(e,t)=>{let{view:n}=T(e.courseMembership,t);return n?(n.values||[]).map(t=>e.courseMembership.byCourseMembershipId[t]):[]},getCourseMembershipsWithUsersByQuery:(e,t)=>B.getCourseMembershipsByQuery(e,t).map(t=>{let n=B.getUserFromMembershipId(e,t.id);return{...t,user:n}}),getCourseMembershipsByCourseId:(e,t,n,r,i)=>{let o={courseId:t,paging:{...r?{limit:r}:{},...i?{offset:i}:{}},sort:null,filter:{...n?{roleBucket:[n]}:{}}};return B.getCourseMembershipsByQuery(e,o)},getCourseMembershipUserIdsByCourseId:(e,t)=>{var n;let{courseId:r,columnId:i,filter:o}=t,s=(0,b.SH)(o)?o:void 0,a=(0,b.Ne)(o)?o:void 0,l=(0,b.ok)(o)?o:void 0,u=(0,b.Kw)(o)?o:void 0,d={courseId:r,filter:{...(null==s?void 0:s.roleBucket)?{roleBucket:[s.roleBucket]}:{},...(null==a?void 0:a.fields)?{fields:a.fields}:{},...u?{...u}:{},...(null==l?void 0:l.searchString)?{searchString:l.searchString}:{},...(null==s?void 0:s.membershipAvailable)?{membershipAvailable:[s.membershipAvailable]}:{}},columnId:i},{view:c}=T(e.courseMembership,d);return c?null!==(n=c.values)&&void 0!==n?n:[]:null},isLoading:(e,t)=>{let{view:n}=T(e.courseMembership,t);return n?n.isLoading:e.courseMembership.isLoading},getCourseMembershipViewStatusByQuery:(e,t)=>{let{view:n}=T(e.courseMembership,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseMembershipViewByQuery:(e,t)=>{let{view:n}=T(e.courseMembership,t);return n},getCourseMembershipByMembershipId:(e,t)=>e.courseMembership.byCourseMembershipId[t],getCourseMembershipsByMembershipIds:(e,t)=>t.map(t=>e.courseMembership.byCourseMembershipId[t]),getUserFromMembershipId:(e,t)=>{let n=e.courseMembership.byCourseMembershipId[t];return n?n.user?n.user:n.userId?e.user.byId[n.userId]:void 0:void 0},getUsersFromMembershipIds:(e,t)=>t.map(t=>B.getUserFromMembershipId(e,t)),getMembershipPermissions:(e,t)=>e.courseMembership.permissions.byCourseId[t],getCourseMembershipsByUserIds:(e,t,n)=>n.map(n=>r.find(e.courseMembership.byCourseMembershipId,e=>t===e.courseId&&n===e.userId)),getCourseMembershipByUserId:(e,t,n)=>Object.values(e.courseMembership.byCourseMembershipId).find(e=>t===e.courseId&&n===e.userId),getLatestViewWithMembershipId:(e,t,n)=>{let{courseId:r}=n;if(!(t in e.courseMembership.byCourseMembershipId)||!(r in e.courseMembership.views.byCourseId))return null;let i=_(e.courseMembership,n).map(n=>{var i,o,s;let a=e.courseMembership.views.byCourseId[r][n];if(a.isLoading||!a.isValid)return{viewId:n,indexInView:-1,indexInCollection:-1,lastFetched:-1};let l=null!==(i=a.values.indexOf(t))&&void 0!==i?i:-1,u={viewId:n,indexInView:l,indexInCollection:l,lastFetched:a.lastFetched};return l<0||(u.indexInCollection=(null!==(s=null===(o=a.paging)||void 0===o?void 0:o.offset)&&void 0!==s?s:0)+l),u}).filter(e=>e.indexInView>-1);return 0===i.length?null:i.reduce((e,t)=>e.lastFetched>t.lastFetched?e:t,i[0])}}},888663:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COURSE_MEMBERSHIPS_LOAD:"course.memberships.load",USER_MEMBERSHIPS_LOAD:"user.memberships.load",COURSE_MEMBERSHIP_SET:"course.membership.set",COURSE_MEMBERSHIP_LOAD:"course.membership.load",COURSE_MEMBERSHIP_USERS_LOAD:"course.membership.users.load"}},924522:function(e,t,n){"use strict";n.d(t,{I6:function(){return u},Nw:function(){return d},Ys:function(){return c}});var r=n(715729),i=n(504015),o=n(961719),s=n(211363);let a={totalCount:0,unreadCount:0},l={courseMessageCount:{...a},isLoading:!1,isValid:!1},u=(0,o.Lq)({counts:{overall:{totalCount:0,unreadCount:0},byCourseId:{}},isLoading:!1,courseMessageOption:{byCourseId:{}}},{[s.V.COURSE_MESSAGE_COUNT_LOAD_ALL]:o.K4,[(0,o.ok)(s.V.COURSE_MESSAGE_COUNT_LOAD_ALL)]:(e,t)=>{if(!(null==t?void 0:t.count))return(0,o.f2)(e,t);let n=(0,r.ZP)(e,e=>{e.counts.overall=t.count});return(0,o.f2)(n,t)},[(0,o.bG)(s.V.COURSE_MESSAGE_COUNT_LOAD_ALL)]:o.sT,[s.V.COURSE_MESSAGE_COUNT_LOAD_SINGLE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{e.counts.byCourseId[n]?e.counts.byCourseId[n].isLoading=!0:e.counts.byCourseId[n]={...l,isLoading:!0}})},[(0,o.ok)(s.V.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>{let{courseId:n,courseMessageCount:i}=t;return n?i?(0,r.ZP)(e,e=>{e.counts.byCourseId[n]={...l,courseMessageCount:i,isValid:!0}}):(0,r.ZP)(e,e=>{e.counts.byCourseId[n]={...l,isValid:!0}}):(0,o.f2)(e,t)},[(0,o.bG)(s.V.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{e.counts.byCourseId[n]?(e.counts.byCourseId[n].isLoading=!1,e.counts.byCourseId[n].isValid=!1):e.counts.byCourseId[n]={...l}})},[(0,o.ok)(s.V.COURSE_MESSAGE_OPTION_LOAD)]:(e,t)=>{let{courseId:n,courseMessageOption:i}=t;return n&&i?(0,r.ZP)(e,e=>{e.courseMessageOption.byCourseId[n]={courseMessageOption:i}}):(0,o.f2)(e,t)},[(0,o.bG)(s.V.COURSE_MESSAGE_OPTION_LOAD)]:(e,t)=>(0,o.sT)(e,t,{}),[(0,o.ok)(s.V.COURSE_MESSAGE_OPTION_UPDATE)]:(e,t)=>{let{courseId:n,courseMessageOption:i}=t;return(0,r.ZP)(e,e=>{e.courseMessageOption.byCourseId[n]={courseMessageOption:i}})},[(0,o.ok)(s.V.COURSE_MESSAGE_COUNT_UPDATE_SINGLE)]:(e,t)=>(0,r.ZP)(e,e=>{var n,r;let i=null!==(n=e.counts.byCourseId[t.courseId])&&void 0!==n?n:{...l},o=null!==(r=i.courseMessageCount)&&void 0!==r?r:{...a};o.unreadCount>0&&(o.unreadCount=o.unreadCount-t.readCount),i.courseMessageCount=o,e.counts.byCourseId[t.courseId]=i})}),d={loadOverallCourseMessageCount:e=>(0,o.PH)(s.V.COURSE_MESSAGE_COUNT_LOAD_ALL,async()=>{try{return{count:await i.Dc(e)}}catch(e){throw{err:e}}}),loadCourseMessageCount:e=>(0,o.PH)(s.V.COURSE_MESSAGE_COUNT_LOAD_SINGLE,async()=>({courseMessageCount:await i.jT(e),courseId:e})),loadCourseMessageOption:e=>(0,o.PH)(s.V.COURSE_MESSAGE_OPTION_LOAD,async()=>({courseMessageOption:await i.$R(e),courseId:e})),setCourseMessageOption:(e,t)=>(0,o.PH)(s.V.COURSE_MESSAGE_OPTION_UPDATE,async()=>({courseMessageOption:await i.J3(e,t),courseId:e})),updateCourseMessageCount:(e,t)=>(0,o.PH)(s.V.COURSE_MESSAGE_COUNT_UPDATE_SINGLE,async()=>({readCount:t,courseId:e}))},c={getOverallUnreadMessageCount:e=>{var t,n,r,i;return null!==(i=null===(r=null===(n=null===(t=e.courseMessage)||void 0===t?void 0:t.counts)||void 0===n?void 0:n.overall)||void 0===r?void 0:r.unreadCount)&&void 0!==i?i:0},getCourseUnreadMessageCount:(e,t)=>{var n,r,i;let o=null===(r=null===(n=e.courseMessage)||void 0===n?void 0:n.counts)||void 0===r?void 0:r.byCourseId[t];return null!==(i=null==o?void 0:o.courseMessageCount)&&void 0!==i?i:{...a}},getCourseMessageOption:(e,t)=>{var n,r;let i=null===(r=null===(n=e.courseMessage)||void 0===n?void 0:n.courseMessageOption)||void 0===r?void 0:r.byCourseId[t];if(i)return i.courseMessageOption}}},211363:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COURSE_MESSAGE_COUNT_LOAD_ALL:"course.message.count.load.all",COURSE_MESSAGE_COUNT_LOAD_SINGLE:"course.message.count.load.single",COURSE_MESSAGE_COUNT_UPDATE_SINGLE:"course.message.count.update.single",COURSE_MESSAGE_OPTION_LOAD:"course.message.option.load",COURSE_MESSAGE_OPTION_UPDATE:"course.message.option.update"}},93532:function(e,t,n){"use strict";n.d(t,{I6:function(){return u},Nw:function(){return d},Ys:function(){return c}});var r=n(715729),i=n(208923),o=n(961719),s=n(198371),a=n(211363);let l={},u=(0,o.Lq)({courses:l,paging:null,isLoading:!1,isValid:!0,canFetchCourseMessagesSummaries:!0},{[s.V.COURSE_MESSAGE_SUMMARIES_LOAD]:o.K4,[(0,o.ok)(s.V.COURSE_MESSAGE_SUMMARIES_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{var r;n.courses=(null===(r=t.paging)||void 0===r?void 0:r.offset)>0?{...e.courses,...t.courses}:t.courses,n.paging=t.paging,n.isValid=!0,n.canFetchCourseMessagesSummaries=Object.keys(t.courses).length>=s.w});return(0,o.f2)(n,t)},[(0,o.bG)(s.V.COURSE_MESSAGE_SUMMARIES_LOAD)]:(e,t)=>(0,o.sT)(e,t,{courses:l,paging:null}),[s.V.COURSE_MESSAGE_SUMMARIES_INVALIDATE]:e=>(0,r.ZP)(e,e=>{e.isValid=!1}),[(0,o.ok)(a.V.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>e.courses[t.courseId]?(0,r.ZP)(e,e=>{e.courses[t.courseId].numUnreadMessages=t.courseMessageCount.unreadCount}):e,[(0,o.ok)(a.V.COURSE_MESSAGE_COUNT_UPDATE_SINGLE)]:(e,t)=>e.courses[t.courseId]?(0,r.ZP)(e,e=>{let{numUnreadMessages:n}=e.courses[t.courseId];n>0&&(e.courses[t.courseId].numUnreadMessages=n-t.readCount)}):e}),d={loadCourseMessageSummaries:e=>(0,o.PH)(s.V.COURSE_MESSAGE_SUMMARIES_LOAD,async()=>{let t=null!=e?e:{offset:0,limit:s.w};return await (0,i.U)(t)}),invalidateCourseMessageSummaries:()=>(0,o.aU)(s.V.COURSE_MESSAGE_SUMMARIES_INVALIDATE)},c={getCourseMessageSummaries:e=>e.courseMessageSummary.courses,getCourseMessageSummariesCount:e=>{var t;return(null===(t=e.courseMessageSummary)||void 0===t?void 0:t.courses)?Object.keys(e.courseMessageSummary.courses).length:0},getCanFetchCourseMessageSummaries:e=>e.courseMessageSummary.canFetchCourseMessagesSummaries,isLoadingCourseMessageSummaries:e=>e.courseMessageSummary.isLoading,isValidCourseMessageSummaries:e=>e.courseMessageSummary.isValid}},198371:function(e,t,n){"use strict";n.d(t,{V:function(){return i},w:function(){return r}});let r=25,i={COURSE_MESSAGE_SUMMARIES_LOAD:"course.message.summaries.load",COURSE_MESSAGE_SUMMARIES_INVALIDATE:"course.message.summaries.invalidate"}},424799:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(276635),o=n(134129),s=n(961719),a=n(50500);let l={COURSE_PREFERENCE_LOAD:"course-preference.load",COURSE_PREFERENCE_PERSIST:"course-preference.persist",COURSE_PREFERENCE_DELETE:"course-preference.delete"},u=(0,s.Lq)({byCourseId:{},isLoading:!1},{[l.COURSE_PREFERENCE_LOAD]:s.K4,[(0,s.ok)(l.COURSE_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n}=t,{coursePreference:o}=t,a=i.get(e,["byCourseId",n],{});o={...o,api:{isUpdating:!1,isDeleting:!1},ui:i.get(a,[o.key,"ui"])};let l=(0,r.Uy)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][o.key]=o});return(0,s.f2)(l,t)},[(0,s.cI)(l.COURSE_PREFERENCE_LOAD)]:s.f2,[(0,s.bG)(l.COURSE_PREFERENCE_LOAD)]:s.sT,[l.COURSE_PREFERENCE_PERSIST]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!0}),[(0,s.ok)(l.COURSE_PREFERENCE_PERSIST)]:(e,t)=>{let{courseId:n}=t,{coursePreference:o}=t,s=i.get(e,["byCourseId",n],{});return o={...o,api:{...i.get(s,[o.key,"api"]),isUpdating:!1},ui:i.get(s,[o.key,"ui"])},(0,r.Uy)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][o.key]=o})},[(0,s.bG)(l.COURSE_PREFERENCE_PERSIST)]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!1}),[l.COURSE_PREFERENCE_DELETE]:(e,t)=>(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!0}),[(0,s.ok)(l.COURSE_PREFERENCE_DELETE)]:(e,t)=>{let{courseId:n,coursePreferenceKey:o}=t,s=i.get(e,["byCourseId",n],{});return s=(0,r.Uy)(s,e=>{delete e[o]}),(0,r.Uy)(e,e=>{e.byCourseId[n]=s})},[(0,s.bG)(l.COURSE_PREFERENCE_DELETE)]:(e,t)=>{let n=(0,r.Uy)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!1});return(0,s.sT)(n,t)}}),d={loadCoursePreference:e=>(0,s.PH)(l.COURSE_PREFERENCE_LOAD,t=>{var n;return t(),(0,a.xN)(e).then(t=>({coursePreference:t,courseId:e.courseId})).catch(e=>{throw{err:e}})},null,[o.oji.NotFound]),persistCoursePreference:(e,t)=>(0,s.PH)(l.COURSE_PREFERENCE_PERSIST,()=>(0,a.RB)(e,{courseId:t}).then(e=>({coursePreference:e,courseId:t})).catch(e=>{throw{err:e}}),{nextCoursePreference:e,courseId:t}),deleteCoursePreference:e=>(0,s.PH)(l.COURSE_PREFERENCE_DELETE,()=>(0,a.oN)(e).then(()=>({coursePreferenceKey:e.key,courseId:e.courseId})).catch(e=>{throw{err:e}}),{coursePreferenceKey:e.key,courseId:e.courseId})},c={getCoursePreferenceByKeyAndCourseId:(e,t,n)=>{var r,i,o;return null===(o=null===(i=null===(r=null==e?void 0:e.coursePreference)||void 0===r?void 0:r.byCourseId)||void 0===i?void 0:i[n])||void 0===o?void 0:o[t]},isPreferenceLoading:e=>e.coursePreference.isLoading}},309303:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(961719),i=n(710108),o=n(715729),s=n(494615),a=n(25859);let l={COURSE_PROGRESS_CONFIGURATION_LOAD:"course-progress.configuration.load",COURSE_PROGRESS_CONFIGURATION_PERSIST:"course-progress.configuration.persist",COURSE_PROGRESS_CONFIGURATION_INVALIDATE:"course-progress.configuration.invalidate"},u={courseProgressConfiguration:void 0,isLoading:!1,isValid:!1,hasError:!1},d=(e,t)=>(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[t]?e.courseProgressConfiguration.byCourseId[t].isValid=!1:e.courseProgressConfiguration.byCourseId[t]={...u}}),c=(0,r.Lq)({courseProgressConfiguration:{byCourseId:{}}},{[l.COURSE_PROGRESS_CONFIGURATION_LOAD]:(e,t)=>{let{courseId:n}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n,courseProgressConfiguration:r}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?(e.courseProgressConfiguration.byCourseId[n].isLoading=!1,e.courseProgressConfiguration.byCourseId[n].hasError=!0):e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_PERSIST]:(e,t)=>{let{courseId:n}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n,updatedCourseProgressConfiguration:r}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n}=t;return(0,o.ZP)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!1:e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE]:(e,t)=>{let{courseId:n}=t;return d(e,n)},[a.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return d(e,n)}}),E={loadCourseProgressConfiguration:e=>async(t,n)=>{if(!function(e,t){var n,r;let i=!!(null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.isLoading),o=!!(null===(r=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===r?void 0:r.isValid);return!i&&!o}(n(),e.courseId))return p.getCourseProgressConfiguration(n(),e.courseId);t((0,r.aU)(l.COURSE_PROGRESS_CONFIGURATION_LOAD,{courseId:e.courseId}));try{let n=await (0,i.f)(e);return t((0,r.aU)((0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseProgressConfiguration:n,courseId:e.courseId})),n}catch(n){throw t((0,r.aU)((0,r.bG)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseId:e.courseId,err:n})),t((0,r.aU)((0,r.ok)(s.Z.APP_ERROR),{error:n})),n}},persistCourseProgress:(e,t)=>(0,r.PH)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST,async()=>{try{return{updatedCourseProgressConfiguration:await (0,i.o)(e,{courseId:t}),courseId:t}}catch(e){throw{err:e}}},{courseId:t}),invalidateCourseProgressConfiguration:e=>(0,r.aU)(l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE,{courseId:e})},p={getCourseProgressConfiguration:(e,t)=>{var n;return null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.courseProgressConfiguration},getCourseProgressConfigurationView:(e,t)=>e.courseProgress.courseProgressConfiguration.byCourseId[t]}},648510:function(e,t,n){"use strict";n.d(t,{Nw:function(){return h},I6:function(){return m},Ys:function(){return I}});var r=n(715729);let i={COURSE_RESOURCES_BATCH_DELETE:"course.resources.batch.delete",COURSE_RESOURCES_INVALIDATE:"course.resources.invalidate",COURSE_RESOURCE_LOAD_ALL:"course.resources.load.all"};var o=n(961719),s=n(276635),a=n(182267),l=n(494615),u=n(503715);let d=(e,t)=>e=(0,r.ZP)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),c=(e,t)=>{if(!t)return o.LW;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=s.isEqual(r.query.paging,t.paging),o=s.isEqual(r.query.queryParams,t.queryParams);return i&&o});return r?{id:r,view:n[r]}:o.LW},E=e=>["views","byCourseId",e.courseId],p=(e,t)=>{let{view:n}=c(e.courseResources,t);return!n||!n.isLoading&&!n.isValid},m=(0,o.Lq)({byCourseResourceId:{},views:{byCourseId:{}},unusedFilesTotal:{}},{[i.COURSE_RESOURCES_BATCH_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{t.content.fileIdsToDelete.forEach(t=>{let n={...e.byCourseResourceId[t].api,isDeleting:!0};e.byCourseResourceId[t].api=n})}),[(0,o.ok)(i.COURSE_RESOURCES_BATCH_DELETE)]:(e,t)=>d(e,t.courseId),[(0,o.bG)(i.COURSE_RESOURCES_BATCH_DELETE)]:(e,t)=>(e=(0,r.ZP)(e,e=>{t.content.fileIdsToDelete.forEach(t=>{let n={...e.byCourseResourceId[t].api,isDeleting:!1};e.byCourseResourceId[t].api=n})}),(0,o.sT)(e,t)),[i.COURSE_RESOURCES_INVALIDATE]:(e,t)=>d(e,t.courseId),[i.COURSE_RESOURCE_LOAD_ALL]:(0,o.Li)(c,E),[(0,o.ok)(i.COURSE_RESOURCE_LOAD_ALL)]:(e,t)=>{let{data:n}=t,{resourceIds:i,resources:s,paging:a,unusedFilesTotal:l}=n;return e=(0,r.ZP)(e,e=>{l&&(e.unusedFilesTotal[t.query.courseId]=l),Object.keys(s).forEach(t=>{e.byCourseResourceId[t]={...s[t]}})}),(0,o.NV)(e,t,{viewResolver:c,viewsPathResolver:E,paging:a,values:i})},[(0,o.bG)(i.COURSE_RESOURCE_LOAD_ALL)]:(0,o.HT)(c,E)}),h={batchDelete:(e,t)=>(0,o.c3)(async n=>{n((0,o.aU)(i.COURSE_RESOURCES_BATCH_DELETE,{courseId:e,content:t}));try{await (0,a.qvt)(e,t),n((0,o.aU)((0,o.ok)(i.COURSE_RESOURCES_BATCH_DELETE),{courseId:e,content:t}))}catch(r){throw n((0,o.aU)((0,o.bG)(i.COURSE_RESOURCES_BATCH_DELETE),{courseId:e,content:t})),n((0,o.aU)((0,o.ok)(l.Z.APP_ERROR),{error:r})),{error:r}}}),invalidateCourseResourceViews:e=>(0,o.c3)(async t=>{t((0,o.aU)(i.COURSE_RESOURCES_INVALIDATE,{courseId:e}))}),loadCourseResourcesByQuery:e=>(0,o.c3)(async(t,n)=>{if(p(n(),e)){t((0,o.aU)(i.COURSE_RESOURCE_LOAD_ALL,{query:e}));try{let n=await (0,a.$t6)(e);t((0,o.aU)((0,o.ok)(i.COURSE_RESOURCE_LOAD_ALL),{query:e,data:n}))}catch(n){throw t((0,o.aU)((0,o.bG)(i.COURSE_RESOURCE_LOAD_ALL),{query:e})),t((0,o.aU)((0,o.ok)(l.Z.APP_ERROR),{error:n})),{error:n}}}})},I={getAllCourseResourcesByQuery:(0,u.U)((e,t)=>{let{view:n}=c(e.courseResources,t);return n?(n.values||[]).map(t=>e.courseResources.byCourseResourceId[t]):[]},e=>e),getCourseResourceViewStatusByQuery:(e,t)=>{var n;let{view:r}=c(e.courseResources,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null}:null},getUnusedFilesTotal:(e,t)=>e.courseResources.unusedFilesTotal[t]?e.courseResources.unusedFilesTotal[t]:null}},562890:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(961719),i=n(134129),o=n(537672);let s=(0,n(4041).W)(i.iW6,o.nP),a={createRubric:(e,t)=>(0,r.PH)("course.rubrics.create",async()=>{let n=await s({courseId:e},t);return{courseId:e,rubric:n}},{courseId:e})}},398049:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(134129),i=n(961719);let o={COURSE_RUBRICS_USER_PREFERENCE_LOAD:"course.rubrics.user.preference.load",COURSE_RUBRICS_USER_PREFERENCE_SAVE:"course.rubrics.user.preference.save"};var s=n(255570),a=n(715729),l=n(494615),u=n(778510);let d=Object.freeze({preference:void 0,isLoading:!1});function c(e,t,n){var r,i,o,s;let{courseId:a,userId:l,rubricId:u}=t,c=e.byCourseId[a]=null!==(r=e.byCourseId[a])&&void 0!==r?r:{byRubricId:{}},E=c.byRubricId[u]=null!==(i=c.byRubricId[u])&&void 0!==i?i:{byUserId:{}},p=E.byUserId[l]=null!==(o=E.byUserId[l])&&void 0!==o?o:{byPreferenceKey:{}};return p.byPreferenceKey[n]=null!==(s=p.byPreferenceKey[n])&&void 0!==s?s:{...d}}let E=(0,i.Lq)({byCourseId:{}},{[o.COURSE_RUBRICS_USER_PREFERENCE_LOAD]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o}=t;c(e,{courseId:n,rubricId:r,userId:i},o).isLoading=!0}),[(0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o,data:s}=t;return(0,a.ZP)(e,e=>{let t=c(e,{courseId:n,rubricId:r,userId:i},o);t.preference=s,t.isLoading=!1})},[(0,i.cI)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o,data:s}=t;return(0,a.ZP)(e,e=>{let t=c(e,{courseId:n,rubricId:r,userId:i},o);t.preference=s,t.isLoading=!1})},[(0,i.bG)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o}=t;return(0,a.ZP)(e,e=>{c(e,{courseId:n,rubricId:r,userId:i},o).isLoading=!1})},[(0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_SAVE)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,data:o}=t;return(0,a.ZP)(e,e=>{c(e,{courseId:n,rubricId:r,userId:i},o.key).preference=o})}}),p={getCourseRubricsUserPreference:(e,t)=>(0,i.c3)(async(n,a)=>{let c=m.getCourseRubricsUserPreference(a(),e,t);if(c.isLoading||c.preference)return c.preference;let E={...e,preferenceKey:t};n((0,i.aU)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD,E));try{let e=await (0,s.i)(E);return n((0,i.aU)((0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...E,data:e})),e}catch(e){if((0,u.Kn)((0,u.Gt)(e),[r.oji.NotFound])){let e=d.preference;return n((0,i.aU)((0,i.cI)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...E,data:e})),e}throw n((0,i.aU)((0,i.bG)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...E,err:e})),n((0,i.aU)((0,i.ok)(l.Z.APP_ERROR),{error:e})),{err:e}}}),saveCourseRubricsUserPreference:(e,t)=>(0,i.PH)(o.COURSE_RUBRICS_USER_PREFERENCE_SAVE,async()=>{let n=await (0,s.Y)({...e},t);return{...e,data:n}},e)},m={getCourseRubricsUserPreference:(e,t,n)=>{var r,i,o;let{courseId:s,userId:a,rubricId:l}=t,u=null===(o=null===(i=null===(r=e.courseRubricsUserPreference.byCourseId[s])||void 0===r?void 0:r.byRubricId[l])||void 0===i?void 0:i.byUserId[a])||void 0===o?void 0:o.byPreferenceKey[n];return null!=u?u:{...d}}}},41036:function(e,t,n){"use strict";n.d(t,{Nw:function(){return g},I6:function(){return b},Ys:function(){return f}});var r=n(276635),i=n(715729),o=n(993150),s=n(494615),a=n(961719);let l={COURSE_TASKS_LOAD:"course-tasks.load",COURSE_TASK_DELETE:"course-tasks.delete",COURSE_TASK_INVALIDATE:"course-tasks.invalidate"};var u=n(560985),d=n(715655),c=n(968227),E=n(503715);let p=(e,t)=>e=(0,i.Uy)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),m=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],o=r.isEqual(i.query.paging,t.paging),s=r.isEqual(i.query.queryParams,t.queryParams);return o&&s});return{id:i,view:i?n[i]:null}},h=e=>["views","byCourseId",e.courseId],I=(e,t)=>{let{view:n}=m(e.courseTasks,t);return!n||!n.isLoading&&!n.isValid},b=(0,a.Lq)({byCourseTaskId:{},views:{byCourseId:{}}},{[l.COURSE_TASKS_LOAD]:(0,a.Li)(m,h),[(0,a.ok)(l.COURSE_TASKS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.f2)(e,t);let{tasksIds:r,tasks:o,paging:s}=n;return e=(0,i.Uy)(e,e=>{Object.keys(o).forEach(t=>{e.byCourseTaskId[t]={...e.byCourseTaskId[t],...o[t]}})}),(0,a.NV)(e,t,{viewResolver:m,viewsPathResolver:h,paging:s,values:r})},[(0,a.bG)(l.COURSE_TASKS_LOAD)]:(0,a.HT)(m,h),[l.COURSE_TASK_DELETE]:(e,t)=>(0,i.Uy)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!0};e.byCourseTaskId[t.taskId].api=n}),[(0,a.ok)(l.COURSE_TASK_DELETE)]:(e,t)=>p(e,t.courseId),[(0,a.bG)(l.COURSE_TASK_DELETE)]:(e,t)=>(e=(0,i.Uy)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!1};e.byCourseTaskId[t.taskId].api=n}),(0,a.sT)(e,t)),[l.COURSE_TASK_INVALIDATE]:(e,t)=>p(e,t.courseId)}),g={deleteTaskByCourseIdAndTaskId:(e,t)=>(0,a.c3)(async n=>{n((0,a.aU)(l.COURSE_TASK_DELETE,{courseId:e,taskId:t}));try{await (0,o.Z)(e,t),n((0,a.aU)((0,a.ok)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t}))}catch(r){throw n((0,a.aU)((0,a.bG)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t})),n((0,a.aU)((0,a.ok)(s.Z.APP_ERROR),{error:r})),{error:r}}}),loadCourseTasksByQuery:e=>(0,a.c3)(async(t,n)=>{if(I(n(),e)){t((0,a.aU)(l.COURSE_TASKS_LOAD,{query:e}));try{let n=await (0,o.m)(e);t((0,a.aU)((0,a.ok)(l.COURSE_TASKS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.aU)((0,a.bG)(l.COURSE_TASKS_LOAD),{query:e})),t((0,a.aU)((0,a.ok)(s.Z.APP_ERROR),{error:n})),{error:n}}}}),invalidateCourseTaskViews:e=>(0,a.c3)(async t=>{t((0,a.aU)(l.COURSE_TASK_INVALIDATE,{courseId:e}))})},y=(0,u.wN)(d.PW,c.AD)((e,t)=>{let{view:n}=m(e.courseTasks,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),f={getCourseTasksById:(e,t)=>(0,r.find)(e.courseTasks.byCourseTaskId,{taskId:t}),getCourseTasksByQuery:(0,E.U)((e,t)=>{let{view:n}=m(e.courseTasks,t);return n?(n.values||[]).map(t=>e.courseTasks.byCourseTaskId[t]):[]},e=>e),getCourseTaskViewStatusByQuery:y}},177776:function(e,t,n){"use strict";n.d(t,{Nw:function(){return u},I6:function(){return l},Ys:function(){return d}});var r=n(134129),i=n(537672);let o={COURSE_TOOL:"course-tool",COURSE_TOOL_SET_VISIBILITY:"course-tool-set-visibility"};var s=n(961719),a=n(715729);let l=(0,s.Lq)({byCourseId:{}},{[(0,s.ok)(o.COURSE_TOOL)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i,observerAllowedSetting:o}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:i,observerAllowedSetting:o}})},[(0,s.ok)(o.COURSE_TOOL_SET_VISIBILITY)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n][r]={toolEnabledSetting:i}})},[(0,s.cI)(o.COURSE_TOOL)]:(e,t)=>{let{courseId:n,toolId:r}=t;return(0,a.ZP)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:{isAvailable:!1,isLocked:!0}}})},[(0,s.bG)(o.COURSE_TOOL)]:(e,{toolConfiguration:t})=>{let{courseId:n,toolId:r}=t;return(0,a.ZP)(e,e=>{delete e.byCourseId[n][r]})}}),u={loadCourseToolConfiguration:(e,t)=>(0,s.PH)(o.COURSE_TOOL,async()=>{try{let{toolEnabledSetting:n,observerAllowedSetting:o}=await (0,r.HU8)({courseId:e,toolId:t},i.nP);return{toolEnabledSetting:n,courseId:e,toolId:t,observerAllowedSetting:o}}catch(n){throw{err:n,courseId:e,toolId:t}}},{courseId:e,toolId:t},[r.oji.Forbidden]),setCourseToolConfiguration:(e,t,n)=>(0,s.PH)(o.COURSE_TOOL_SET_VISIBILITY,async()=>{let{toolEnabledSetting:o}=await (0,r.sUQ)({courseId:e,toolId:t},i.nP,n);return{toolEnabledSetting:o,courseId:e,toolId:t}})},d={getCourseTool:(e,t,n)=>{let r=e.courseTools.byCourseId[t];if(r)return r[n]}}},569887:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(961719);let i={COURSE_USER_NOTES_GET:"course.user.notes.get",COURSE_USER_NOTES_CREATE:"course.user.notes.create",COURSE_USER_NOTES_UPDATE:"course.user.notes.update",COURSE_USER_NOTES_DELETE:"course.user.notes.delete"};var o=n(134129),s=n(537672),a=n(715729),l=n(494615);let u=Object.freeze({hasError:!1,hasLoaded:!1,isLoading:!1,notes:[],totalNotes:void 0});function d(e,t,n){var r,i;let o=e.byCourseId[t]=null!==(r=e.byCourseId[t])&&void 0!==r?r:{byUserId:{}};return o.byUserId[n]=null!==(i=o.byUserId[n])&&void 0!==i?i:{...u}}let c=(0,r.Lq)({byCourseId:{}},{[i.COURSE_USER_NOTES_GET]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r}=t,i=d(e,n,r);i&&(i.isLoading=!0,i.hasLoaded=!1,i.hasError=!1)}),[(0,r.ok)(i.COURSE_USER_NOTES_GET)]:(e,t)=>{let{courseId:n,userId:r,response:{results:i,paging:o,permissions:s}}=t;return(0,a.ZP)(e,e=>{let t=d(e,n,r);return t.isLoading=!1,t.hasLoaded=!0,t.notes=t.notes.concat(i),t.totalNotes=null==o?void 0:o.count,t.permissions=s,e})},[(0,r.bG)(i.COURSE_USER_NOTES_GET)]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r}=t,i=d(e,n,r);i.isLoading=!1,i.hasLoaded=!0,i.hasError=!0}),[(0,r.ok)(i.COURSE_USER_NOTES_CREATE)]:(e,t)=>(0,a.ZP)(e,e=>{var n;let{courseId:r,userId:i,note:o}=t,s=d(e,r,i);s.notes.push(o),s.totalNotes=(null!==(n=s.totalNotes)&&void 0!==n?n:0)+1}),[(0,r.ok)(i.COURSE_USER_NOTES_UPDATE)]:(e,t)=>(0,a.ZP)(e,e=>{let{courseId:n,userId:r,note:i}=t,o=d(e,n,r),s=o.notes.findIndex(e=>e.id===i.id);-1!==s&&(o.notes[s]=i)}),[(0,r.ok)(i.COURSE_USER_NOTES_DELETE)]:(e,t)=>(0,a.ZP)(e,e=>{var n;let{courseId:r,userId:i,noteId:o}=t,s=d(e,r,i);s.notes=s.notes.filter(e=>e.id!==o),s.totalNotes=(null!==(n=s.totalNotes)&&void 0!==n?n:1)-1})}),E={fetchNotes:e=>(0,r.c3)(async(t,n)=>{var a,u;let{courseId:d,userId:c,limit:E}=e,p=null===(a=n().courseUserNotes.byCourseId[d])||void 0===a?void 0:a.byUserId[c];if((null==p?void 0:p.isLoading)||(null==p?void 0:p.hasError))return Promise.resolve(null);let m=i.COURSE_USER_NOTES_GET,h=null!==(u=null==p?void 0:p.notes.length)&&void 0!==u?u:0,I={courseId:d,userId:c};t((0,r.aU)(m,I));try{let e=await (0,o.hIc)(s.nP,I,{offset:h,limit:E},void 0);return t((0,r.aU)((0,r.ok)(m),{courseId:d,userId:c,response:e})),e}catch(n){throw t((0,r.aU)((0,r.bG)(m),{...e,err:n})),t((0,r.aU)((0,r.ok)(l.Z.APP_ERROR),{error:n})),n}}),createNote:(e,t,n)=>(0,r.PH)(i.COURSE_USER_NOTES_CREATE,async()=>{let r=await (0,o.JXy)(s.nP,{courseId:e,userId:t},n);return{courseId:e,userId:t,note:r}},{courseId:e,userId:t}),updateNote:(e,t,n,a)=>{let l={courseId:e,userId:t,noteId:n};return(0,r.PH)(i.COURSE_USER_NOTES_UPDATE,async()=>{let e=await (0,o.klr)(s.nP,l,a);return{...l,note:e}},l)},deleteNote:(e,t,n)=>{let a={courseId:e,userId:t,noteId:n};return(0,r.PH)(i.COURSE_USER_NOTES_DELETE,async()=>(await (0,o.fyg)(s.nP,a),a),a)}},p={getNotes:(e,t,n)=>{var r;let i=null===(r=e.courseUserNotes.byCourseId[t])||void 0===r?void 0:r.byUserId[n];return null!=i?i:u}}},517808:function(e,t,n){"use strict";n.d(t,{Nw:function(){return b},I6:function(){return I},Ys:function(){return f}});var r=n(276635),i=n.n(r),o=n(715729),s=n(560985),a=n(715655),l=n(968227),u=n(961719);let d={DASHBOARD_COURSES_LOAD:"dashboardCourses.load"};var c=n(182267);let E=e=>["views","byUserId",e.userId],p=(e,t)=>{if(!t)return u.LW;let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>{let r=n[e];return i().isEqual(r.query,t)});return r?{id:r,view:n[r]}:u.LW},m=(e,t)=>{let{view:n}=p(t.getState().dashboard,e.query);return!n||!n.isLoading&&!n.isValid},h=(e,t)=>{0!==Object.keys(t).length&&Object.keys(t).forEach(n=>{e.byCourseId[n]={...e.byCourseId[n],...t[n]}})},I=(0,u.Lq)({byCourseId:{},views:{byUserId:{}}},{[d.DASHBOARD_COURSES_LOAD]:(0,u.Li)(p,E),[(0,u.ok)(d.DASHBOARD_COURSES_LOAD)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,u.f2)(e,t);let{dashboardCourses:n,dashboardCourseIds:r,paging:i}=t.data,s=(0,o.ZP)(e,e=>{h(e,n)});return(0,u.NV)(s,t,{viewResolver:p,viewsPathResolver:E,values:r,paging:i})},[(0,u.bG)(d.DASHBOARD_COURSES_LOAD)]:(0,u.HT)(p,E)}),b={loadDashboardCoursesByQuery:e=>(0,u.RU)(d.DASHBOARD_COURSES_LOAD,async()=>{try{return{data:await (0,c._z4)(e),query:e}}catch(t){throw new u.GM(t).setData({query:e})}},{data:{query:e},condition:m})},g=(0,s.wN)(a.PW,l.TO),y=(0,s.wN)(a.PW,l.AD),f={getByCourseId:(e,t)=>Object.values(e.dashboard.byCourseId).find(e=>e.courseId===t),getDashboardCoursesByQuery:g((e,t)=>{let{view:n}=p(e.dashboard,t);return n?(n.values||[]).map(t=>f.getByCourseId(e,t)).filter(e=>!!e):null},e=>e),getDashboardViewStatusByQuery:y((e,t)=>{let{view:n}=p(e.dashboard,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e)}},183399:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD:"completed.delegatedAttemptGradeByGraderLoad",COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD:"completed.delegatedAttemptGradeOnAttemptLoad",PATCH_DELEGATED_ATTEMPT_GRADE:"patch.delegatedAttemptGrade",INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT:"instructor-submission-list-attempt-deleted-event",TOGGLE_VISIBILITY_DELEGATED_ATTEMPT_GRADE:"toggle.visibility.delegatedAttemptGrade"}},421893:function(e,t,n){"use strict";n.d(t,{I6:function(){return d},Nw:function(){return c},Ys:function(){return p}});var r=n(715729),i=n(439138),o=n(961719),s=n(576879),a=n(183399),l=n(494615);let u=(e,t)=>(0,r.ZP)(e,e=>{Object.keys(t.byStagedAttemptId).forEach(n=>{e.byStagedAttemptId[n]={...t.byStagedAttemptId[n],api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}})}),d=(0,o.Lq)({byStagedAttemptId:{}},{[(0,o.ok)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:u,[(0,o.ok)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:u,[(0,o.ok)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE)]:(e,t)=>{let n=t.stagedAttempt;return(0,r.ZP)(e,e=>{let t=e.byStagedAttemptId[n.stagedAttemptId];e.byStagedAttemptId[n.stagedAttemptId]={...t,...n,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}})},[(0,o.ok)(a.V.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT)]:(e,t)=>{let n=Object.values(e.byStagedAttemptId);return(0,r.ZP)(e,e=>{let{attemptId:r}=t;n.forEach(t=>{t.attemptId===r&&delete e.byStagedAttemptId[t.stagedAttemptId]})})}}),c={loadCompletedDelegatedAttemptGradesByGrader:e=>(0,o.PH)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD,async()=>{try{return await (0,i.z9)(e)}catch(e){throw{err:e}}}),loadDelegatedAttemptGradesOnAttempt:e=>(0,o.PH)(a.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD,async()=>{try{return await (0,i.FA)(e)}catch(e){throw{err:e}}}),patchDelegatedAttemptGrade:e=>(0,o.PH)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE,async()=>{try{return await (0,i.Xg)(e)}catch(e){throw{err:e}}}),deleteDelegatedAttemptsOnDeletedSubmission:e=>(0,o.aU)((0,o.ok)(a.V.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT),{attemptId:e.attemptId}),toggleVisibilityOfDelegatedAttemptGrade:e=>(0,o.c3)(async(t,n)=>{var r;try{let s=n().delegatedAttemptGrade.byStagedAttemptId[e];if(s){let{columnId:e,attemptId:l,stagedAttemptId:u}=s,d=null===(r=n().gradebookAttempt.byGradebookAttemptId[l])||void 0===r?void 0:r.value;if(!d)return;let{courseId:c,gradeId:E}=d,p=await (0,i.Xg)({courseId:c,columnId:e,gradeId:E,attemptId:l,stagedAttemptId:u,updatedProperties:{showFeedbackToStudent:!s.showFeedbackToStudent}});t((0,o.aU)((0,o.ok)(a.V.PATCH_DELEGATED_ATTEMPT_GRADE),p))}}catch(e){throw t((0,o.aU)((0,o.ok)(l.Z.APP_ERROR),{error:e})),{err:e}}})},E=(e,t)=>{let{graderId:n,userBeingGradedId:r}=t;return{...t,grader:n?s.Ys.getUserById(e,n):null,userBeingGraded:r?s.Ys.getUserById(e,r):null}},p={getCompletedDelegatedAttemptGradesByGrader:(e,t,n)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.graderId===t&&e.columnId===n).map(t=>E(e,t)),getCompletedDelegatedAttemptGradesOnAttempt:(e,t)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.attemptId===t).map(t=>E(e,t)),getDelegatedAttemptByStagedAttemptId:(e,t)=>E(e,Object.values(e.delegatedAttemptGrade.byStagedAttemptId).find(e=>e.stagedAttemptId===t))}},4410:function(e,t,n){"use strict";n.d(t,{Nw:function(){return b},I6:function(){return I},Ys:function(){return g}});var r=n(715729),i=n(537672),o=n(134129),s=n(4041);let a=(0,s.W)(o.joE,i.nP),l=(0,s.W)(o.bDe,i.nP);var u=n(961719);let d={DISCUSSION_MESSAGE_STATE_UPDATE:"discussion.message-state.update",DISCUSSION_MESSAGE_STATE_LOAD:"discussion.message-state.load",DISCUSSION_SUBSCRIPTION_MESSAGE_ID_PERSIST:"discussion.subscription.message.id.persist"};var c=n(720533),E=n(587637);let p=e=>["byMessageId",e.messageId],m=(e,t)=>{let n=t.getState().discussionBoardMessageState.byMessageId[e.messageId];return(0,E.M0)(null==n?void 0:n.status)},h=(e,t)=>{let n=t.getState().discussionBoardMessageState.byMessageId[e.messageId];return(0,E.BY)(null==n?void 0:n.status)},I=(0,u.Lq)({byMessageId:{},byForumId:{}},{[d.DISCUSSION_MESSAGE_STATE_UPDATE]:(0,E.gX)(p,E.yL.Update,E.hJ),[(0,u.bG)(d.DISCUSSION_MESSAGE_STATE_UPDATE)]:(0,E.gX)(p,E.yL.Update,E.eV),[(0,u.ok)(d.DISCUSSION_MESSAGE_STATE_UPDATE)]:(e,t)=>{let{messageId:n,discussionMessageState:i}=t;return(0,r.ZP)(e,e=>{e.byMessageId[n]={value:i,status:(0,E.Tf)(E.yL.Update,e.byMessageId[n],E._B)}})},[d.DISCUSSION_MESSAGE_STATE_LOAD]:(0,E.gX)(p,E.yL.Load,E.hJ),[(0,u.bG)(d.DISCUSSION_MESSAGE_STATE_LOAD)]:(0,E.gX)(p,E.yL.Load,E.eV),[(0,u.ok)(d.DISCUSSION_MESSAGE_STATE_LOAD)]:(e,t)=>{let{messageId:n,discussionMessageState:i}=t;return(0,r.ZP)(e,e=>{e.byMessageId[n]={value:i,status:(0,E.Tf)(E.yL.Load,e.byMessageId[n],E._B)}})},[(0,u.ok)(d.DISCUSSION_SUBSCRIPTION_MESSAGE_ID_PERSIST)]:(e,t)=>{let{forumId:n,messageId:i}=t;return(0,r.ZP)(e,e=>{n&&i&&(e.byForumId[n]={subscribableMessageId:i})})},[(0,u.ok)(c.V.CONTENT_LOAD)]:(e,t)=>{let{discussionsMessageStates:n}=t;return(0,r.ZP)(e,e=>{n&&0!==Object.keys(n).length&&Object.values(n).forEach(t=>{if(t){let n=t.msgMainId;e.byMessageId[n]={value:t,status:(0,E.Tf)(E.yL.Load,e.byMessageId[n],E._B)},t.forumId&&(e.byForumId[t.forumId]={subscribableMessageId:n})}})})}}),b={loadDiscussionMessageState:e=>(0,u.RU)(d.DISCUSSION_MESSAGE_STATE_LOAD,async()=>{try{let t=await l(e);return{messageId:e.messageId,discussionMessageState:t}}catch(t){throw new u.GM(t).setData({messageId:e.messageId})}},{data:{messageId:e.messageId},condition:m}),updateDiscussionMessageState:(e,t)=>(0,u.RU)(d.DISCUSSION_MESSAGE_STATE_UPDATE,async()=>{try{let n=await a(e,t);return{messageId:e.messageId,discussionMessageState:n}}catch(t){throw new u.GM(t).setData({messageId:e.messageId})}},{data:{messageId:e.messageId},condition:h}),persistSubscribableMessageId:(e,t)=>(0,u.c3)(async n=>{n((0,u.aU)((0,u.ok)(d.DISCUSSION_SUBSCRIPTION_MESSAGE_ID_PERSIST),{messageId:e,forumId:t}))})},g={getDiscussionMessageStateByMessageId:(e,t)=>{var n;return null===(n=e.discussionBoardMessageState.byMessageId[t])||void 0===n?void 0:n.value},getSubscribableMessageIdByForumId:(e,t)=>{var n;return null===(n=e.discussionBoardMessageState.byForumId[t])||void 0===n?void 0:n.subscribableMessageId}}},780615:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return E}});var r=n(715729),i=n(276635),o=n(961719),s=n(187680);let a="/v1/courses/%courseId%/discussionboards/settings";async function l(e){return(0,s.U2)((0,s.Q2)(a,e))}async function u(e,t,n){let r=(0,s.T8)(e,t);return(0,i.isEmpty)(r)?t:(0,s.r$)((0,s.Q2)(a,n),r)}let d={DISCUSSIONBOARD_SETTINGS_LOAD:"discussionboard-settings.load",DISCUSSIONBOARD_SETTINGS_PERSIST:"discussionboard-settings.persist"},c=(0,o.Lq)({byCourseId:{},isLoading:!1},{[d.DISCUSSIONBOARD_SETTINGS_LOAD]:(e,t)=>(0,o.K4)(e,t),[(0,o.ok)(d.DISCUSSIONBOARD_SETTINGS_LOAD)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,s=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,o.f2)(s,t)},[(0,o.bG)(d.DISCUSSIONBOARD_SETTINGS_LOAD)]:(e,t)=>(0,o.sT)(e,t),[d.DISCUSSIONBOARD_SETTINGS_PERSIST]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{let t=e.byCourseId[n];e.byCourseId[n]={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}})},[(0,o.ok)(d.DISCUSSIONBOARD_SETTINGS_PERSIST)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,s=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,o.f2)(s,t)},[(0,o.bG)(d.DISCUSSIONBOARD_SETTINGS_PERSIST)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{e.byCourseId[n].api.isUpdating=!1})}}),E={getDiscussionboardSettings:(e,t)=>(0,i.get)(e,["discussionBoardSettings","byCourseId",t],{allowStudentsToCreateDiscussionContent:!1}),isSettingLoading:e=>(0,i.get)(e,["discussionBoardSettings","isLoading"])},p={loadDiscussionboardSetting:e=>(0,o.PH)(d.DISCUSSIONBOARD_SETTINGS_LOAD,async t=>{var n,r;if(n=t(),r=e.courseId,E.isSettingLoading(n)&&null!=n.discussionBoardSettings.byCourseId[r])return Promise.resolve(null);try{return{discussionSettings:await l(e),courseId:e.courseId}}catch(e){throw{err:e}}}),persistDiscussionSettings:e=>(0,o.PH)(d.DISCUSSIONBOARD_SETTINGS_PERSIST,t=>u((0,i.get)(t(),["discussionBoardSettings","byCourseId",e.courseId],{}),e.settings,{courseId:e.courseId}).then(t=>({discussionSettings:t,courseId:e.courseId})).catch(t=>{throw{err:t,courseId:e.courseId}}),{courseId:e.courseId})}},744905:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(715729),i=n(40781),o=n(379739),s=n(887705),a=n(961719);let l=(0,n(560985).P1)(e=>e.exceptionDetails.byCourseMembershipId,(e,t)=>t,(e,t)=>Object.values(e).map(e=>null==e?void 0:e.byColumnId[t]).filter(e=>void 0!==e));var u=n(276635);let d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"membershipId"in n.query?t.columnId===n.query.columnId&&"membershipId"in t&&t.membershipId===n.query.membershipId:(0,u.isEqual)(n.query,t)});return{id:null!=i?i:null,view:i?r[i]:null}},E=(0,a.Lq)({views:{byCourseId:{}},byCourseMembershipId:{},isLoading:!1},{[o.V.EXCEPTION_DETAILS_LOAD]:(e,t)=>{let n=(0,r.Uy)(e,e=>{let{courseId:n,columnIds:r,membershipId:i}=t.query;r.forEach(t=>{(0,a.o_)(e,(0,a.Li)(c,d)(e,{type:o.V.EXCEPTION_DETAILS_LOAD,query:{courseId:n,columnId:t,membershipId:i}}))})});return(0,a.K4)(n,t)},[(0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{query:n,data:{learnExceptionDetails:i}}=t,{courseId:s,columnIds:l,membershipId:u}=n,E=(0,r.Uy)(e,e=>{i&&i.length>0?i.forEach(t=>{var n,r,i,l;let E=null!==(r=e.byCourseMembershipId[null!==(n=t.membershipId)&&void 0!==n?n:u])&&void 0!==r?r:{byColumnId:{}};E.byColumnId[t.columnId]=t,e.byCourseMembershipId[null!==(i=t.membershipId)&&void 0!==i?i:u]=E,(0,a.o_)(e,(0,a.NV)(e,{type:(0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t.columnId,membershipId:null!==(l=t.membershipId)&&void 0!==l?l:u}},{viewResolver:c,viewsPathResolver:d}))}):(u&&!l.length&&(0,a.o_)(e,(0,a.NV)(e,{type:(0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:u}},{viewResolver:c,viewsPathResolver:d})),l.forEach(t=>{var n,r;(null===(n=e.byCourseMembershipId[u])||void 0===n?void 0:n.byColumnId[t])&&(null===(r=e.byCourseMembershipId[u])||void 0===r||delete r.byColumnId[t]),(0,a.o_)(e,(0,a.NV)(e,{type:(0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t,membershipId:u}},{viewResolver:c,viewsPathResolver:d}))})),u&&l.forEach(t=>{(0,a.o_)(e,(0,a.NV)(e,{type:(0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t,membershipId:u}},{viewResolver:c,viewsPathResolver:d}))})});return(0,a.f2)(E,t)},[(0,a.bG)(o.V.EXCEPTION_DETAILS_LOAD)]:a.sT,[s.V5.GRADABLE_USER_OPTION_ITEM_LOAD]:(0,a.Li)(c,d),[(0,a.ok)(s.V5.GRADABLE_USER_OPTION_ITEM_LOAD)]:(e,t)=>{let{courseId:n,columnId:i,byCourseMembershipId:o,byGroupId:s,type:l,...u}=t,E=(0,r.Uy)(e,e=>{u.fullDetails&&(o&&Object.keys(o).forEach(t=>{var r;let s={...o[t]};e.byCourseMembershipId={...e.byCourseMembershipId,[t]:{byColumnId:{...null===(r=e.byCourseMembershipId[t])||void 0===r?void 0:r.byColumnId,[i]:s}}},(0,a.o_)(e,(0,a.NV)(e,{type:l,query:{courseId:n,columnId:i,membershipId:t}},{viewResolver:c,viewsPathResolver:d}))}),u.membershipIds&&u.membershipIds.forEach(t=>{(0,a.o_)(e,(0,a.NV)(e,{type:l,query:{courseId:n,columnId:i,membershipId:t}},{viewResolver:c,viewsPathResolver:d}))}))});return(0,a.NV)(E,{type:l,query:{courseId:n,columnId:i,...u}},{viewResolver:c,viewsPathResolver:d})},[(0,a.bG)(s.V5.GRADABLE_USER_OPTION_ITEM_LOAD)]:(0,a.HT)(c,d),[(0,a.ok)(s.V5.GRADABLE_USER_OPTION_ITEM_PUT)]:(e,t)=>{let{courseId:n,columnId:i,membershipId:o,groupId:s}=t.params;return(0,r.Uy)(e,e=>{if(o){let t=c(e,{courseId:n,columnId:i,membershipId:o});t.view&&(t.view.isValid=!1)}})},[(0,a.ok)(s.V5.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>(0,r.Uy)(e,e=>{var n,r;(null===(n=e.byCourseMembershipId[t.membershipId])||void 0===n?void 0:n.byColumnId[t.columnId])&&(null===(r=e.byCourseMembershipId[t.membershipId])||void 0===r||delete r.byColumnId[t.columnId])}),[o.V.EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.Uy)(e,e=>{Object.values(e.views.byCourseId).forEach(e=>{Object.values(e).forEach(e=>{e.query.columnId===n&&(e.isValid=!1)})})})}}),p={fetchExceptionDetails:(e,t)=>{var n;let r={courseId:e.courseId,columnIds:null!==(n=t.columnId)&&void 0!==n?n:[],membershipId:e.membershipId},s={type:o.V.EXCEPTION_DETAILS_LOAD,query:r};return(0,a.PH)(o.V.EXCEPTION_DETAILS_LOAD,async()=>({query:r,data:await (0,i.G)(e,t)}),s)},deleteExceptionDetailByColumnIdAndMembershipIdInStore:(e,t)=>(0,a.aU)((0,a.ok)(s.V5.GRADABLE_USER_OPTION_ITEM_DELETE),{columnId:e,membershipId:t}),setExceptionDetailInStore:(e,t)=>(0,a.aU)((0,a.ok)(o.V.EXCEPTION_DETAILS_LOAD),{data:{learnExceptionDetails:t},query:{courseId:e,columnIds:[],membershipId:""}}),invalidateExceptionDetailsByColumnId:e=>(0,a.aU)(o.V.EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID,{columnId:e})},m={getExceptionDetailsMembershipId:(e,t)=>e.exceptionDetails.byCourseMembershipId[t],getExceptionDetailsByColumnIdAndMembershipId:(e,t,n)=>{var r;return null===(r=e.exceptionDetails.byCourseMembershipId[n])||void 0===r?void 0:r.byColumnId[t]},getExceptionDetailsByColumnId:l,isExceptionDetailsLoading:e=>e.exceptionDetails.isLoading,getExceptionDetailsViewStatusByQuery:(e,t)=>{let{view:n}=c(e.exceptionDetails,t);return n?{isLoading:n.isLoading,isValid:n.isValid}:null}}},379739:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={EXCEPTION_DETAILS_LOAD:"exception.details.load",EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID:"exception.invalidate.byColumnId"}},48563:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return u},Ys:function(){return d}});var r=n(68070),i={},o=n(961719),s=n(715729),a=n(134129);let l={FEATURE_FLAG_LOAD_ALL:"feature.flags.load.all",FEATURE_FLAG_GET_VALUE_BY_KEY:"feature.flags.get.by.key",FEATURE_FLAG_UPDATE_VALUE_BY_KEY:"feature.flags.update.by.key"},u=(0,o.Lq)({featureFlags:{byKey:{}},featureFlagValues:{byKey:{}},isLoading:!1},{[l.FEATURE_FLAG_LOAD_ALL]:o.K4,[(0,o.ok)(l.FEATURE_FLAG_LOAD_ALL)]:(e,t)=>{if(!t||!t.featureFlags)return(0,o.f2)(e,t);let{featureFlags:n}=t;return(0,s.ZP)(e,e=>{let t={};Object.keys(n.byKey).forEach(e=>{let r={...n.byKey[e],api:{isUpdating:!1,isDeleting:!1}};t[e]=r}),e.featureFlags.byKey=t,e.isLoading=!1})},[(0,o.bG)(l.FEATURE_FLAG_LOAD_ALL)]:o.sT,[l.FEATURE_FLAG_GET_VALUE_BY_KEY]:(e,t)=>(0,s.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!0}),[(0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,o.f2)(e,t);let{flagKey:n,flagValue:r}=t;return(0,s.ZP)(e,e=>{e.featureFlagValues.byKey[n]={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:r},e.featureFlagValues.byKey[n].isLoading=!1})},[(0,o.cI)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,s.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[(0,o.bG)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,s.ZP)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY]:(e,t)=>(0,s.ZP)(e,e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!0}),[(0,o.ok)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,o.f2)(e,t);let{flagKey:n,flagValue:r}=t,a={...e.featureFlags.byKey[n],flagValue:{...e.featureFlags.byKey[n].flagValue,value:r},api:{...e.featureFlags.byKey[n].api,isUpdating:!1}},l={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:i[n]?i[n]:r};return(0,s.ZP)(e,e=>{e.featureFlags.byKey[n]=a,e.featureFlagValues.byKey[n]=l})},[(0,o.bG)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>(0,s.ZP)(e,e=>{e.featureFlags.byKey[t.flagKey].api||(e.featureFlags.byKey[t.flagKey].api={}),e.featureFlags.byKey[t.flagKey].api.isUpdating=!1})}),d={getFeatureFlags:e=>e.featureFlags.featureFlags.byKey,getFeatureFlagValues:e=>e.featureFlags.featureFlagValues.byKey,getFeatureFlagValue:(e,t)=>e.featureFlags.featureFlagValues.byKey[t],isLoading:e=>e.featureFlags.isLoading},c={loadFeatureFlags:()=>(0,o.PH)(l.FEATURE_FLAG_LOAD_ALL,()=>r.Vw()),loadFeatureFlagValueByKey:e=>(0,o.c3)(async(t,n)=>{var s;if(function(e,t){let n=e.featureFlags.featureFlagValues.byKey[t.flagKey];return!n||!1===n.isLoading}(n(),e)){if(t((0,o.aU)(l.FEATURE_FLAG_GET_VALUE_BY_KEY,e)),i[e.flagKey]){let n={flagKey:e.flagKey,flagValue:i[e.flagKey]};t((0,o.aU)((0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),n));return}try{let n=await r.Y1(e);t((0,o.aU)((0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),n))}catch(n){if((null===(s=null==n?void 0:n.body)||void 0===s?void 0:s.status)===a.oji.NotFound){t((0,o.aU)((0,o.cI)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{flagKey:e.flagKey}));return}t((0,o.aU)((0,o.bG)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{err:n,flagKey:e.flagKey}))}}}),updateFeatureFlagValueByKey:e=>(0,o.PH)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY,()=>r.ep(e),{flagKey:e.flagKey,flagValue:e.flagValue})}},107976:function(e,t,n){"use strict";n.d(t,{I6:function(){return m},MT:function(){return p},Nw:function(){return E},Ys:function(){return c}});var r=n(961719),i=n(886940),o=n(715729),s=n(349800),a=n(142345),l=n(842330),u=n(182267);let d=Object.freeze({}),c={getFileConversionSettings:(e,t)=>{var n;return null!==(n=e.fileConversion.settingsByCourseId[t])&&void 0!==n?n:d},getFileConversionById:(e,t)=>e.fileConversion.byId[t],getFileConversionStatusById:(e,t)=>{var n,r,o,u;let{source:d,...E}=c.getFileConversionById(e,t),p="uploadId"in d?s.Ys.getFileUploadById(e,d.uploadId):void 0,m=null==p?void 0:p.filename,h="fileName"in d?d.fileName:void 0,I=null!==(n=null!=m?m:h)&&void 0!==n?n:"";return"body"in E?{status:"complete",fileName:I,body:E.body}:"error"in E?{status:"failed",fileName:I,conversionError:E.error}:l.ud.isUploadingFile(null==p?void 0:p.status)?{status:"uploading",fileName:I,percent:null!==(o=l.ud.calculateUploadPercentage(null===(r=p.uploadProgress)||void 0===r?void 0:r.progress))&&void 0!==o?o:0}:(null==p?void 0:p.status)===a.XX.Canceled?{status:"failed",fileName:I,conversionError:{errorType:i.T.Aborted}}:(null==p?void 0:p.status)===a.XX.Failed?{status:"failed",fileName:I,uploadError:null!==(u=p.error)&&void 0!==u?u:{errorType:a.Te.Api}}:{status:"converting",fileName:I}}},E={loadConversionSettings:(e,t)=>(0,r.RU)(i.V.LOAD_CONVERSION_SETTINGS,async()=>{try{let n=await (0,u.sIA)(e,t);return{payload:{courseId:e,contentId:t,settings:n}}}catch(n){throw new r.GM(n,{payload:{courseId:e,contentId:t}})}},{condition:({payload:{courseId:e}},{getState:t})=>{let{isLoading:n,isFailed:r,settings:i}=c.getFileConversionSettings(t(),e);return!n&&!r&&!i},data:{payload:{courseId:e,contentId:t}}}),abortConversion:e=>({type:i.V.ABORT_CONVERSION,meta:{conversionId:e}}),startConversion:(e,t,n,r)=>({type:i.V.START_CONVERSION,meta:{conversionId:n},payload:{courseId:e,contentId:t,source:r}})},p={conversionSuccessful:(e,t)=>({type:(0,r.ok)(i.V.START_CONVERSION),meta:{conversionId:e},payload:{body:t}}),conversionFailed:(e,t)=>({type:(0,r.bG)(i.V.START_CONVERSION),meta:{conversionId:e},payload:{error:t}})},m=(0,r.Lq)({byId:{},settingsByCourseId:{}},{[i.V.LOAD_CONVERSION_SETTINGS]:(e,t)=>(0,o.ZP)(e,e=>{var n,r,i;(null!==(n=(r=e.settingsByCourseId)[i=t.payload.courseId])&&void 0!==n?n:r[i]={...d}).isLoading=!0}),[(0,r.ok)(i.V.LOAD_CONVERSION_SETTINGS)]:(e,t)=>(0,o.ZP)(e,e=>{let n=e.settingsByCourseId[t.payload.courseId];n&&(n.isLoading=!1,n.isFailed=!1,n.settings=t.payload.settings)}),[(0,r.bG)(i.V.LOAD_CONVERSION_SETTINGS)]:(e,t)=>(0,o.ZP)(e,e=>{let n=e.settingsByCourseId[t.payload.courseId];n&&(n.isLoading=!1,n.isFailed=!0)}),[i.V.START_CONVERSION]:(e,t)=>{let{meta:{conversionId:n},payload:{source:r}}=t;return(0,o.ZP)(e,e=>{e.byId[n]={source:r}})},[(0,r.ok)(i.V.START_CONVERSION)]:(e,t)=>{let{meta:{conversionId:n},payload:{body:r}}=t;return(0,o.ZP)(e,e=>{e.byId[n]={source:e.byId[n].source,body:r}})},[(0,r.bG)(i.V.START_CONVERSION)]:(e,t)=>{let{meta:{conversionId:n},payload:{error:r}}=t;return(0,o.ZP)(e,e=>{e.byId[n]={source:e.byId[n].source,error:r}})}})},88666:function(e,t,n){"use strict";n.d(t,{x:function(){return b}});var r=n(886940),i=n(107976),o=n(142345),s=n(349800),a=n(961719),l=n(714772),u=n(182267),d=n(842330);function*c(e,t,n){let{meta:{conversionId:o},payload:{courseId:s,contentId:a}}=e;try{let e=yield(0,l.RE)(u.g4g,s,a,t,n);yield(0,l.gz)(i.MT.conversionSuccessful(o,e))}catch(e){e instanceof DOMException&&"AbortError"===e.name?yield(0,l.gz)(i.MT.conversionFailed(o,{errorType:r.T.Aborted})):yield(0,l.gz)(i.MT.conversionFailed(o,{errorType:r.T.Unknown}))}}function*E(e){let t=yield(0,l.qn)(t=>-1!==[(0,a.ok)(o.V5.FILE_UPLOAD),(0,s.JG)(o.V5.FILE_UPLOAD),(0,a.bG)(o.V5.FILE_UPLOAD)].indexOf(t.type)&&t.meta.uploadId.correlationId===e);if("payload"in t&&"file"in t.payload)return t.payload.file}function*p(e){let{status:t,uploadedFile:n}=yield(0,l.Ys)(s.Ys.getFileUploadById,e);if(d.ud.didNotCompleteFileUpload(t))return;let r=null!=n?n:yield(0,l.RE)(E,e);if(!r)return;let{fileLocation:i,fileName:o}=r;if(!i||!o)throw Error("Invalid file upload");return{fileLocation:i,fileName:o}}function*m(e){let{payload:{source:t}}=e;return"fileLocation"in t?t:yield(0,l.RE)(p,t.uploadId)}function*h(e,t){let{meta:{conversionId:n},payload:{source:i}}=e;yield(0,l.qn)(e=>e.type===r.V.ABORT_CONVERSION&&e.meta.conversionId===n),t.abort(),"uploadId"in i&&(yield(0,l.gz)(s.Nw.abortUpload({correlationId:i.uploadId})))}function*I(e){let t=new AbortController,n=yield(0,l.rM)(h,e,t);yield(0,l.rM)(function*(){try{let n=yield(0,l.RE)(m,e);if(!n)return;yield(0,l.RE)(c,e,n,t.signal)}finally{yield(0,l.al)(n)}})}function*b(){yield(0,l.ib)(r.V.START_CONVERSION,I)}},886940:function(e,t,n){"use strict";var r,i;n.d(t,{T:function(){return r},V:function(){return o}});let o={ABORT_CONVERSION:"file-conversion.abort",START_CONVERSION:"file-conversion.start",LOAD_CONVERSION_SETTINGS:"file-conversion.settings.load"};(i=r||(r={})).Aborted="aborted",i.Unknown="unknown"},685116:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return l},Ys:function(){return u}});var r=n(961719),i=n(494615),o=n(134129),s=n(537672);let a={FILE_UPLOAD_SETTINGS_LOAD:"file-upload-settings.load"},l=(0,r.Lq)({fileUploadSettings:{},isLoading:!1},{[a.FILE_UPLOAD_SETTINGS_LOAD]:r.K4,[(0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD)]:(e,t)=>(0,r.f2)(e,t,{fileUploadSettings:t}),[(0,r.cI)(a.FILE_UPLOAD_SETTINGS_LOAD)]:r.f2,[(0,r.bG)(a.FILE_UPLOAD_SETTINGS_LOAD)]:r.sT}),u={getFileUploadSettings:e=>e.fileUploadSettings.fileUploadSettings,isFileUploadSettingsLoading:e=>e.fileUploadSettings.isLoading},d={loadFileUploadSettings:()=>(0,r.c3)(async(e,t)=>{if(!function(e){let{maxUploadSizeInBytes:t}=u.getFileUploadSettings(e);return void 0===t&&!u.isFileUploadSettingsLoading(e)}(t()))return u.getFileUploadSettings(t());try{let t=await (0,o.GSC)(s.nP);return e((0,r.aU)((0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD),{...t})),t}catch(n){e((0,r.aU)((0,r.ok)(i.Z.APP_ERROR),{error:n})),e((0,r.aU)((0,r.bG)(a.FILE_UPLOAD_SETTINGS_LOAD),{err:n}));let t={maxUploadSizeInBytes:2684354560,recommendedAlternatives:"",supportLink:""};return e((0,r.aU)((0,r.ok)(a.FILE_UPLOAD_SETTINGS_LOAD),t)),t}})}},349800:function(e,t,n){"use strict";n.d(t,{I6:function(){return g},JG:function(){return E},LD:function(){return _},Nw:function(){return p},Ys:function(){return y}});var r=n(134129),i=n(103528),o=n(714772),s=n(961719),a=n(130789),l=n(142345),u=n(715729),d=n(685116),c=n(993822);function E(e){return`${e}.aborted`}let p={updateDirectoryUploadStatus:(e,t)=>({type:l.V5.DIRECTORY_UPLOAD_STATUS,meta:{groupId:e,status:t}}),filesUploadRequest:(e,t,n={})=>(0,s.c3)(async(r,i)=>{let o=i();if(t){let e=o.fileUpload.byGroupId[t];if((null==e?void 0:e.status)===l.XX.Canceled)return}let s=e;n.skipMaxSizeCheck||(s=await h(r,e,{groupUploadId:t,maxFileSizeLimit:n.maxFileSizeLimit})),s.forEach(({file:e,queryParams:n,correlationId:i})=>{r(p.fileUploadRequest({file:e},{correlationId:i,groupId:t},n))})}),cloudFilesUploadRequest:(e,t,n={})=>(0,s.c3)(async r=>{let i=e;n.skipMaxSizeCheck||(i=await h(r,e,{groupUploadId:t,maxFileSizeLimit:n.maxFileSizeLimit})),i.forEach(({file:e,accessToken:n,correlationId:i})=>{r(p.cloudFileUploadRequest(e,n,{correlationId:i,groupId:t}))})}),fileUploadRequest:(e,t,n)=>({type:l.V5.FILE_UPLOAD_REQUEST,payload:{file:e,queryParams:n},meta:{uploadId:t}}),cloudFileUploadRequest:(e,t,n)=>({type:l.V5.CLOUD_FILE_UPLOAD_REQUEST,payload:{file:e,accessToken:t},meta:{uploadId:n}}),invalidFileUpload:(e,t,n)=>({type:l.V5.INVALID_FILE_UPLOAD,payload:{file:e,isCloudUpload:n},meta:{uploadId:t}}),startFileUpload:(e,t)=>({type:l.V5.FILE_UPLOAD,payload:{aborter:t},meta:{uploadId:e}}),updateFileUploadProgress:(e,t)=>({type:l.V5.FILE_UPLOAD,payload:{progress:t},meta:{uploadId:e}}),fileUploadSuccess:(e,t)=>({type:(0,s.ok)(l.V5.FILE_UPLOAD),payload:{file:t},meta:{uploadId:e}}),fileUploadFailure:(e,t)=>({type:(0,s.bG)(l.V5.FILE_UPLOAD),payload:t,meta:{uploadId:e}}),fileUploadAborted:e=>({type:E(l.V5.FILE_UPLOAD),meta:{uploadId:e}}),canUpdateFileDetails:e=>({type:l.V5.CAN_UPDATE_FILE_DETAILS,meta:{uploadId:e}}),fileDetailsUpdated:(e,t=!1)=>({type:l.V5.UPDATED_FILE_DETAILS,meta:{uploadId:e},payload:{cancelled:t}}),abortGroupUploads:e=>(0,s.c3)((t,n)=>{let r=n().fileUpload.byGroupId[e];r&&(r.pendingUploads.forEach(n=>{t(p.abortUpload({groupId:e,correlationId:n}))}),t(p.updateDirectoryUploadStatus(e,l.XX.Canceled)))}),abortUpload:e=>(0,s.c3)((t,n)=>{let r=n().fileUpload.byId[e.correlationId];if(!r)return;let i=r.uploadProgress.aborter;i?i.abort():r.status===l.XX.Queued&&t(p.fileUploadAborted(e))}),overSizedFiles:(e,t)=>({type:l.V5.FILE_UPLOAD_OVERSIZED,payload:t,meta:{groupUploadId:e}})};async function m(e,t,n){var i,o;let s=await e(d.Nw.loadFileUploadSettings()),a=null!==(i=s.maxUploadSizeInBytes)&&void 0!==i?i:r.u4M,l=null!==(o=s.customFileUploadSettings)&&void 0!==o?o:[],u=[],E=[];return t.forEach(e=>{let{file:t}=e;if(!t.name)return;let r=(0,c.A_)(t.name,l,a,n);t.size>r?u.push({request:e,fileSizeLimit:r}):E.push(e)}),{oversizedRequests:u,validRequests:E}}async function h(e,t,{groupUploadId:n,maxFileSizeLimit:r}){let{validRequests:i,oversizedRequests:o}=await m(e,t,r);return o.length>0&&e(p.overSizedFiles(n,o)),i}function I(e,t,n){var r;let{correlationId:i,groupId:o}=t,s={...e.byId[i],filename:n.name,filesize:n.size,groupId:o,status:l.XX.InProgress,uploadProgress:{},isCloudUpload:!1};if(e.byId[i]=s,o){let t=null!==(r=e.byGroupId[o])&&void 0!==r?r:{groupId:o,pendingUploads:[],uploads:[],oversizedFiles:[],status:l.XX.InProgress};t.uploads.push(i),t.pendingUploads.push(i),e.byGroupId[o]=t}return s}function b(e,t,n){let r=n&&e.byGroupId[n];if(r){let e=r.pendingUploads.indexOf(t);r.pendingUploads.splice(e,1),r.pendingUploads.length||r.status!==l.XX.InProgress||(r.status=l.XX.Complete)}}let g=(0,s.Lq)({byGroupId:{},byId:{}},{[l.V5.DIRECTORY_UPLOAD_STATUS]:(e,t)=>(0,u.ZP)(e,e=>{!function(e,t,n){if(t){let r=e.byGroupId[t],i=r?{...r,groupId:t,status:n}:{groupId:t,pendingUploads:[],uploads:[],oversizedFiles:[],status:n};e.byGroupId[t]=i}}(e,t.meta.groupId,t.meta.status)}),[l.V5.FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.ZP)(e,e=>{let n=t.payload.file.file;I(e,t.meta.uploadId,n);let r=e.byId[t.meta.uploadId.correlationId];r&&(r.status=l.XX.Queued)}),[l.V5.CLOUD_FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.ZP)(e,e=>{let{file:n}=t.payload;I(e,t.meta.uploadId,n).isCloudUpload=!0}),[l.V5.INVALID_FILE_UPLOAD]:(e,t)=>{let n=(0,u.ZP)(e,e=>{let{file:n,isCloudUpload:r}=t.payload,{correlationId:i,groupId:o}=t.meta.uploadId,s=I(e,t.meta.uploadId,n);s.status=l.XX.Failed,s.error={errorType:l.Te.Invalid},r&&(s.isCloudUpload=!0),b(e,i,o)});return(0,s.sT)(n,t)},[l.V5.FILE_UPLOAD]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{progress:r,aborter:i}=t.payload,{correlationId:o}=t.meta.uploadId,s=null!==(n=e.byId[o])&&void 0!==n?n:I(e,t.meta.uploadId,{});s&&(s.status=l.XX.InProgress,s.uploadProgress.progress=r,i&&(s.uploadProgress.aborter=i))});return(0,s.K4)(n,t)},[(0,s.ok)(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{file:r}=t.payload,{correlationId:i,groupId:o}=t.meta.uploadId,s=e.byId[i],a=null===(n=e.byId[i])||void 0===n?void 0:n.uploadProgress;a&&(delete a.progress,delete a.aborter),s&&(s.status=l.XX.Complete,s.uploadedFile=r),b(e,i,o)});return(0,s.f2)(n,t)},[(0,s.bG)(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,o=e.byId[r],s=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;s&&(delete s.progress,delete s.aborter),o&&(o.status=l.XX.Failed,o.error=t.payload),b(e,r,i)});return(0,s.sT)(n,t)},[E(l.V5.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.ZP)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,o=e.byId[r],s=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;s&&(delete s.progress,delete s.aborter),o&&(o.status=l.XX.Canceled),b(e,r,i)});return(0,s.sT)(n,t)},[l.V5.CAN_UPDATE_FILE_DETAILS]:(e,t)=>(0,u.ZP)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];r&&(r.uploadDetails={canUpdateFileDetails:!0})}),[l.V5.UPDATED_FILE_DETAILS]:(e,t)=>(0,u.ZP)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];(null==r?void 0:r.uploadDetails)&&(r.uploadDetails.canUpdateFileDetails=!1)}),[l.V5.FILE_UPLOAD_OVERSIZED]:(e,t)=>(0,u.ZP)(e,e=>{let{groupUploadId:n}=t.meta;t.payload.forEach(({request:{correlationId:t,file:r},fileSizeLimit:i})=>{I(e,{correlationId:t,groupId:n},r),function(e,t,n,r){let i=e.byId[t];i&&(i.status=l.XX.Failed,i.error={errorType:l.Te.Oversized,fileSizeLimit:r});let o=n&&e.byGroupId[n];o&&(o.oversizedFiles.push(t),b(e,t,n))}(e,t,n,i)})})}),y={getFileUploadById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byId[t]},getGroupStatusById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byGroupId[t]},getAllFileUploads:e=>{var t,n;return Object.entries(null!==(n=null===(t=e.fileUpload)||void 0===t?void 0:t.byId)&&void 0!==n?n:{}).map(([e,t])=>({correlationId:e,...t}))}};function*f(e,t,n,s){let u=yield(0,o.Ys)(y.getFileUploadById,t);if((null==u?void 0:u.status)===l.XX.Canceled)return;let{result:d,progress:c,abort:E}=(0,a.b)(e,s,["mimeType","isMedia"]);yield(0,o.gz)(p.startFileUpload({correlationId:t,groupId:n},E));let m=(0,i.GG)(e=>{let o=c.subscribe(r=>{e(p.updateFileUploadProgress({correlationId:t,groupId:n},r))});return d.then(r=>{e(p.fileUploadSuccess({correlationId:t,groupId:n},r)),e(i.uR)}).catch(()=>{}),d.catch(o=>{if(o.errorType===r.cwi.Aborted)e(p.fileUploadAborted({correlationId:t,groupId:n}));else{let i;o instanceof r.srx&&(i=o.status),e(p.fileUploadFailure({correlationId:t,groupId:n},{errorType:l.Te.Api,errorCode:i}))}e(i.uR)}),o});for(;;){let e=yield(0,o.qn)(m);yield(0,o.gz)(e)}}function*S(e){for(;;){let t=yield(0,o.qn)(e),{file:n,queryParams:r}=t.payload,{correlationId:i,groupId:s}=t.meta.uploadId;yield(0,o.RE)(f,n,i,s,r)}}function*_(){let e=yield(0,o.RE)(i.CE);for(let t=0;t<5;t++)yield(0,o.rM)(S,e);for(;;){let t=yield(0,o.qn)(l.V5.FILE_UPLOAD_REQUEST);yield(0,o.gz)(e,t)}}},142345:function(e,t,n){"use strict";var r,i,o,s;n.d(t,{Te:function(){return i},V5:function(){return a},XX:function(){return r}});let a={FILE_UPLOAD_REQUEST:"file-upload.request",CLOUD_FILE_UPLOAD_REQUEST:"cloud.file-upload.request",INVALID_FILE_UPLOAD:"invalid-file-upload",FILE_UPLOAD:"file-upload",FILE_UPLOAD_ABORT:"file-upload.abort",FILE_UPLOAD_GROUP_ABORT:"file-upload.group.abort",FILE_UPLOAD_OVERSIZED:"file-upload.oversized",CAN_UPDATE_FILE_DETAILS:"file-upload.can-update-file-details",UPDATED_FILE_DETAILS:"file-upload.updated-file-details",DIRECTORY_UPLOAD_STATUS:"file-upload.status"};(o=r||(r={})).Queued="QUEUED",o.InProgress="IN PROGRESS",o.Complete="COMPLETE",o.Failed="FAILED",o.Canceled="CANCELED",(s=i||(i={})).Api="API",s.Oversized="OVERSIZED",s.Invalid="INVALID"},129185:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(961719),o=n(802692);let s={FTUE_REGISTER:"ftue.register",FTUE_DISPLAY_NEXT:"ftue.displayNext",FTUE_PAUSE:"ftue.pause",FTUE_RESUME:"ftue.resume"},a=(0,i.Lq)({ftueCollectionMap:{}},{[(0,i.ok)(s.FTUE_REGISTER)]:(e,t)=>{let n=e;if(e.ftueCollectionMap[t.collectionKey]){let i=[...e.ftueCollectionMap[t.collectionKey].ftueKeys,t.ftueKey];n=(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=i})}else{let i={isPaused:!1,ftueKeys:[t.ftueKey]};n=(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]=i})}return(0,i.f2)(n,t)},[(0,i.bG)(s.FTUE_REGISTER)]:i.sT,[(0,i.ok)(s.FTUE_DISPLAY_NEXT)]:(e,t)=>{let n=Array(...e.ftueCollectionMap[t.collectionKey].ftueKeys);return n.shift(),(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=n})},[(0,i.bG)(s.FTUE_DISPLAY_NEXT)]:i.sT,[(0,i.ok)(s.FTUE_PAUSE)]:(e,t)=>(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!0}),[(0,i.bG)(s.FTUE_PAUSE)]:i.sT,[(0,i.ok)(s.FTUE_RESUME)]:(e,t)=>(0,r.Uy)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!1}),[(0,i.bG)(s.FTUE_RESUME)]:i.sT}),l={registerFtue:(e,t)=>(0,i.c3)(async(n,r)=>{var a,l;let u,d;let c=`${e}.${t}`;try{await n(o.Nw.loadUserPreference({key:c})),u=null===(l=null===(a=o.Ys.getUserPreferenceByKey(r(),c))||void 0===a?void 0:a.value)||void 0===l?void 0:l.value}catch(e){e&&"error"in e&&(d=e.error)}(u&&2>parseInt(u,10)||d&&404===d.status)&&n((0,i.aU)((0,i.ok)(s.FTUE_REGISTER),{collectionKey:e,ftueKey:t}))}),markCurrentFtueAsShown:e=>(0,i.c3)((t,n)=>{let r=u.getCurrentFtueKey(n(),e);if(!r)return t((0,i.aU)((0,i.bG)(s.FTUE_DISPLAY_NEXT))),Promise.resolve(null);let a=`${e}.${r}`;t((0,i.aU)((0,i.ok)(s.FTUE_DISPLAY_NEXT),{collectionKey:e}));let l=o.Ys.getUserPreferenceByKey(n(),a),d=(null==l?void 0:l.value)?parseInt(l.value.value,10)+1:1;return t(o.Nw.persistUserPreference({key:a,value:`${d}`}))}),pauseFtueSequence:e=>(0,i.aU)((0,i.ok)(s.FTUE_PAUSE),{collectionKey:e}),resumeFtueSequence:e=>(0,i.aU)((0,i.ok)(s.FTUE_RESUME),{collectionKey:e})},u={getCurrentFtueKey:(e,t)=>{let n=e.ftue.ftueCollectionMap[t];if(n){let{ftueKeys:e,isPaused:t}=n;return!t&&e?e[0]:null}return null}}},315094:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(715729),i=n(961719),o=n(587637),s=n(570848);let a={GOAL_MASTERY_GOALS_LOAD:"goal.mastery.goals.load"};var l=n(968227);let u=(e,t)=>{var n,r;if(!t.courseId)return i.LW;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{}).find(([,e])=>(0,l.AD)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.LW},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=u(t.getState().goalMastery.goal,e.query);return!r||!r.isLoading&&!r.isValid},E=(0,i.Lq)({byId:{},views:{byCourseId:{}}},{[a.GOAL_MASTERY_GOALS_LOAD]:(0,i.Li)(u,d),[(0,i.ok)(a.GOAL_MASTERY_GOALS_LOAD)]:(e,t)=>{let{data:n}=t,s=(0,r.ZP)(e,e=>{Object.keys(n.goalsById).forEach(t=>{e.byId[t]?e.byId[t]={value:n.goalsById[t],status:e.byId[t].status}:e.byId[t]={value:n.goalsById[t],status:o._B}})});return(0,i.NV)(s,t,{viewResolver:u,viewsPathResolver:d,values:n.goalIds,paging:n.paging})},[(0,i.bG)(a.GOAL_MASTERY_GOALS_LOAD)]:(0,i.HT)(u,d)}),p={loadMasteryGoalsByQuery:e=>(0,i.RU)(a.GOAL_MASTERY_GOALS_LOAD,async()=>{try{return{data:await (0,s.qw)(e),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:c})},m={getMasteryGoalsByQuery:(e,t)=>{let{view:n}=u(e.goalMastery.goal,t);return n?(n.values||[]).map(t=>{var n;return null===(n=e.goalMastery.goal.byId[t])||void 0===n?void 0:n.value}).filter(e=>!!e):[]},getMasteryGoalsViewByQuery:(e,t)=>{let{view:n}=u(e.goalMastery.goal,t);return n}}},92281:function(e,t,n){"use strict";n.d(t,{I6:function(){return I},Nw:function(){return g},Ys:function(){return y}});var r=n(715729),i=n(961719),o=n(570848),s=n(895049),a=n(968227),l=n(587637),u=n(60394);let d=(e,t)=>{var n,r;if(!t.courseId)return i.LW;let[o,s]=null!==(r=Object.entries(null!==(n=e.bulkViews.byCourseId[t.courseId])&&void 0!==n?n:{}).find(([,e])=>(0,a.AD)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.LW},c=(e,t)=>{var n,r,o;let[s,l]=null!==(o=Object.entries(null!==(r=null===(n=e.views.byCourseId[t.courseId])||void 0===n?void 0:n.byUserId[t.userId])&&void 0!==r?r:{}).find(([,e])=>(0,a.AD)(e.query,t)))&&void 0!==o?o:[null,null];return s?{id:s,view:l}:i.LW},E=e=>["bulkViews","byCourseId",e.courseId],p=e=>["views","byCourseId",e.courseId,"byUserId",e.userId],m=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=d(t.getState().goalMastery.performance,e.query);return!r||!r.isLoading&&!r.isValid},h=(e,t)=>{let{view:n}=c(t.getState().goalMastery.performance,e.query);return!n||!n.isLoading&&!n.isValid},I=(0,i.Lq)({byCourseId:{},bulkViews:{byCourseId:{}},views:{byCourseId:{}}},{[s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD]:(0,i.Li)(c,p),[(0,i.ok)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD)]:(e,t)=>{let n=b(e,t.query,t.data);return(0,i.NV)(n,t,{viewResolver:c,viewsPathResolver:p,values:t.data.performanceIds})},[(0,i.bG)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD)]:(0,i.HT)(c,p),[s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD]:(0,i.Li)(d,E),[(0,i.ok)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD)]:(e,t)=>{let n=b(e,t.query,t.data);return(0,i.NV)(n,t,{viewResolver:d,viewsPathResolver:E,values:t.data.performanceIds})},[(0,i.bG)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD)]:(0,i.HT)(d,E),[s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE]:(e,t)=>(0,r.ZP)(e,e=>{e.bulkViews.byCourseId[t.courseId]&&Object.values(e.bulkViews.byCourseId[t.courseId]).forEach(e=>{e.isValid=!1})}),[s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE]:(e,t)=>(0,r.ZP)(e,e=>{var n,r;(null===(n=e.views.byCourseId[t.courseId])||void 0===n?void 0:n.byUserId[t.userId])&&Object.values(null===(r=e.views.byCourseId[t.courseId])||void 0===r?void 0:r.byUserId[t.userId]).forEach(e=>{e.isValid=!1})})}),b=(e,t,n)=>(0,r.ZP)(e,e=>{n.performance.forEach(n=>{var r,i,o,a,u,d,c,E,p;let m=null!==(o=(E=(null!==(i=(d=(null!==(r=(a=e.byCourseId)[u=t.courseId])&&void 0!==r?r:a[u]={byGoalId:{}}).byGoalId)[c=n.goalId])&&void 0!==i?i:d[c]={byUserId:{}}).byUserId)[p=n.userId])&&void 0!==o?o:E[p]={value:n,status:l._B};(0,s.h)(n)?m.value=n:m.value={...n,...(0,s.h)(m.value)?{contentItems:m.value.contentItems}:{}}})}),g={loadMasteryGoalPerformanceBulkViewByQuery:e=>(0,i.RU)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD,async()=>{try{return{data:await (0,o.JR)(e),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:m}),loadMasteryGoalPerformanceUserByQuery:e=>(0,i.RU)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD,async()=>{try{return{data:await (0,o.Cz)(e),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:h}),invalidateBulkViewsByCourseId:e=>(0,i.aU)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE,{courseId:e}),invalidateUserViewsByCourseIdAndUserId:(e,t)=>(0,i.aU)(s.V.GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE,{courseId:e,userId:t})},y={getMasteryGoalPerformanceBulkViewByQuery:(e,t)=>{var n;let{view:r}=d(e.goalMastery.performance,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,i,o;let s=(0,u.q)(t);return null===(o=null===(i=null===(n=e.goalMastery.performance.byCourseId[r.query.courseId])||void 0===n?void 0:n.byGoalId[s.goalId])||void 0===i?void 0:i.byUserId[s.userId])||void 0===o?void 0:o.value}).filter(e=>!!e):[]},getMasteryGoalPerformanceBulkViewViewByQuery:(e,t)=>{let{view:n}=d(e.goalMastery.performance,t);return n},getMasteryGoalPerformanceUserByQuery:(e,t)=>{var n;let{view:r}=c(e.goalMastery.performance,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,i,o;let s=(0,u.q)(t);return null===(o=null===(i=null===(n=e.goalMastery.performance.byCourseId[r.query.courseId])||void 0===n?void 0:n.byGoalId[s.goalId])||void 0===i?void 0:i.byUserId[s.userId])||void 0===o?void 0:o.value}).filter(e=>!!e):[]},getMasteryGoalPerformanceUserViewByQuery:(e,t)=>{let{view:n}=c(e.goalMastery.performance,t);return n}}},895049:function(e,t,n){"use strict";n.d(t,{V:function(){return r},h:function(){return i}});let r={GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD:"goal.mastery.goals.performance.bulk-view.load",GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD:"goal.mastery.goals.performance.user.load",GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE:"goal.mastery.goals.performance.bulk.invalidate",GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE:"goal.mastery.goals.performance.user.invalidate"},i=e=>!!e&&"contentItems"in e},143297:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return d},Ys:function(){return E}});let r={GOAL_MASTERY_SCALE_LOAD:"goal.mastery.scale.load"};var i=n(961719),o=n(715729),s=n(587637),a=n(570848);let l=(e,t)=>{let n=t.getState().goalMastery.scale.scale;return(0,s.t)(null==n?void 0:n.status)},u=()=>["scale"],d=(0,i.Lq)({scale:void 0},{[r.GOAL_MASTERY_SCALE_LOAD]:(0,s.nt)(u,s.Em),[(0,i.ok)(r.GOAL_MASTERY_SCALE_LOAD)]:(e,t)=>{let{scale:n}=t;return(0,o.ZP)(e,e=>{e.scale={value:n,status:s.vo}})},[(0,i.bG)(r.GOAL_MASTERY_SCALE_LOAD)]:(0,s.nt)(u,s.gp)}),c={loadGoalMasterScale:()=>(0,i.RU)(r.GOAL_MASTERY_SCALE_LOAD,async()=>({scale:(await (0,a.hP)()).results}),{condition:l})},E={getGoalMasteryScale:e=>{var t,n;return null!==(n=null===(t=e.goalMastery.scale.scale)||void 0===t?void 0:t.value)&&void 0!==n?n:[]},isLoading:e=>{var t,n;return null===(t=e.goalMastery.scale.scale)||void 0===t||!t.value||(null===(n=e.goalMastery.scale.scale)||void 0===n?void 0:n.status)!==s.vo}}},887705:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},V5:function(){return a},Ys:function(){return d}});var r=n(961719),i=n(526541),o=n(715729),s=n(379739);let a={GRADABLE_USER_OPTION_ITEM_PUT:"gradable.user.option.item.put",GRADABLE_USER_OPTION_ITEM_DELETE:"gradable.user.option.item.delete",GRADABLE_USER_OPTION_ITEM_LOAD:"gradable.item.user.option.load",GRADABLE_USER_OPTION_COUNT_ITEM_LOAD:"gradable.item.user.option.count.load",GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD:"gradable.item.user.option.exceptions.load"},l=(0,r.Lq)({byColumnId:{},isLoading:!1,exceptionsCount:{fixedDueDateExceptionCount:void 0,relativeDueDateExceptionCount:void 0,unlimitedDueDateExceptionCount:void 0,withDueDateExceptionCount:void 0}},{[a.GRADABLE_USER_OPTION_ITEM_PUT]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:(e,t)=>{let{item:n}=t,{membershipId:i,groupId:s,columnId:a}=n,l=(0,o.ZP)(e,e=>{var t,r,o,l,u,d;let c={[a]:{}};i&&(c[a].byCourseMembershipId={...null===(t=e.byColumnId[a])||void 0===t?void 0:t.byCourseMembershipId,[i]:{...null===(o=null===(r=e.byColumnId[a])||void 0===r?void 0:r.byCourseMembershipId)||void 0===o?void 0:o[i],...n}}),s&&(c[a].byGroupId={...null===(l=e.byColumnId[a])||void 0===l?void 0:l.byGroupId,[s]:{...null===(d=null===(u=e.byColumnId[a])||void 0===u?void 0:u.byGroupId)||void 0===d?void 0:d[s],...n}}),e.byColumnId={...e.byColumnId,[n.columnId]:c[a]}});return(0,r.f2)(l,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:r.sT,[a.GRADABLE_USER_OPTION_ITEM_DELETE]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byColumnId[t.columnId]&&delete e.byColumnId[t.columnId]});return(0,r.f2)(n,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:r.sT,[a.GRADABLE_USER_OPTION_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:(e,t)=>{let n;let{columnId:i,byCourseMembershipId:s,byGroupId:a}=t;return s?n=(0,o.ZP)(e,e=>{var t;e.byColumnId[i]||(e.byColumnId[i]={byCourseMembershipId:{}}),e.byColumnId[i].byCourseMembershipId={...null!==(t=e.byColumnId[i].byCourseMembershipId)&&void 0!==t?t:{},...Object.keys(s).reduce((e,t)=>({...e,[t]:{...s[t],groupId:void 0}}),{})}}):a&&(n=(0,o.ZP)(e,e=>{var t;e.byColumnId[i]||(e.byColumnId[i]={byGroupId:{}}),e.byColumnId[i].byGroupId={...null!==(t=e.byColumnId[i].byGroupId)&&void 0!==t?t:{},...Object.keys(a).reduce((e,t)=>({...e,[t]:{...a[t],membershipId:void 0}}),{})}})),(0,r.f2)(null!=n?n:e,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:r.sT,[a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.exceptionsCount=t.results});return(0,r.f2)(n,t)},[(0,r.bG)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:r.sT,[a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD]:r.K4,[(0,r.ok)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:(e,t)=>{let{membershipId:n,byColumnId:i}=t,s=(0,o.ZP)(e,e=>{Object.keys(i).forEach(t=>{let n=i[t];if(null==n?void 0:n.hasDueDateException){let r=n.membershipId,i=n.groupId;e.byColumnId[t]||(e.byColumnId[t]={}),r?(e.byColumnId[t].byCourseMembershipId||(e.byColumnId[t].byCourseMembershipId={}),e.byColumnId[t].byCourseMembershipId[r]=n):i&&(e.byColumnId[t].byGroupId||(e.byColumnId[t].byGroupId={}),e.byColumnId[t].byGroupId[i]=n)}})});return(0,r.f2)(s,t)},[(0,r.ok)(s.V.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{data:{learnExceptionDetails:n}}=t;return(0,o.ZP)(e,e=>{n&&n.length>0&&n.forEach(t=>{let{membershipId:n,groupId:r,columnId:i}=t;e.byColumnId[i]||(e.byColumnId[i]={}),(null==t?void 0:t.hasDueDateException)&&(n?(e.byColumnId[i].byCourseMembershipId||(e.byColumnId[i].byCourseMembershipId={}),e.byColumnId[i].byCourseMembershipId[n]=t):r&&(e.byColumnId[i].byGroupId||(e.byColumnId[i].byGroupId={}),e.byColumnId[i].byGroupId[r]=t))})})},[(0,r.bG)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:r.sT}),u={persistGradableItemUserOptionByMembershipId:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_PUT,()=>(0,i.jd)(e,t).then(t=>({params:e,item:t})).catch(e=>{throw{err:e}}),{}),deleteGradableItemUserOptionByMembershipId:e=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_DELETE,async()=>{try{return await (0,i.bw)(e),{courseId:e.courseId,columnId:e.columnId,membershipId:e.membershipId,byCourseMembershipId:{}}}catch(e){throw{err:e}}}),persistGradableItemUserOptionByGroupId:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_PUT,async()=>{try{let n=await (0,i.jZ)(e,t);return{params:e,item:n}}catch(e){throw{err:e}}},{}),deleteGradableItemUserOptionByGroupId:e=>(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_DELETE,async()=>{try{return await (0,i._8)(e),{courseId:e.courseId,columnId:e.columnId,byGroupId:{}}}catch(e){throw{err:e}}}),fetchGradableItemUserOption:(e,t)=>{let n={courseId:e.courseId,columnId:e.columnId,...t};return(0,r.PH)(a.GRADABLE_USER_OPTION_ITEM_LOAD,async()=>{try{return await (0,i.TL)(e,t)}catch(e){throw{err:e,query:n}}},{query:n})},fetchGradableItemUserOptionCount:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD,async()=>{try{return await (0,i.sH)(e)}catch(e){throw{err:e}}}),fetchGradableItemUserOptionExceptions:(e,t)=>(0,r.PH)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD,async()=>{try{return await (0,i.nH)(e,t)}catch(e){throw{err:e}}})},d={getGradableItemUserOptionByColumnAndMembershipId:(e,t,n)=>{var r;let i=e.gradableItemUserOption.byColumnId[t];return null===(r=null==i?void 0:i.byCourseMembershipId)||void 0===r?void 0:r[n]},getGradableItemUserOptionByColumnAndGroupId:(e,t,n)=>{var r;let i=e.gradableItemUserOption.byColumnId[t];return null===(r=null==i?void 0:i.byGroupId)||void 0===r?void 0:r[n]}}},64403:function(e,t,n){"use strict";n.d(t,{GE:function(){return v},I6:function(){return C},Nw:function(){return R},Ys:function(){return L}});var r=n(715729),i=n(560985),o=n(276635),s=n(67913),a=n(494615),l=n(961719),u=n(374899),d=n(305870),c=n(736352),E=n(842330),p=n(778510),m=n(211498),h=n(720533),I=n(587637);let b=e=>["views","byColumnId",e.columnId],g=e=>["byGradebookAttemptId",e.attemptId];function y(e){return{columnId:e.columnId,gradeId:"gradeId"in e?e.gradeId:void 0,attemptId:"attemptId"in e?e.attemptId:void 0,expand:"expand"in e?e.expand:void 0}}let f=["columnId","gradeId","attemptId","expand"],S=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>o.isEqual(o.pick(y(t),...r),o.pick(y(e.query),...r)))},_=(e,t)=>{var n;if(!t)return l.LW;let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return o.isEqual(o.pick(y(t),...f),o.pick(y(n.query),...f))});return i?{id:i,view:r[i]}:l.LW},T=(e,t)=>{let{view:n}=_(t.getState().gradebookAttempt,e.query);return!(null==n?void 0:n.isLoading)&&(!!e.needsRefresh||!(null==n?void 0:n.isValid))},v=e=>{var t,n;return null===(n=null===(t=e.toolAttemptDetail)||void 0===t?void 0:t[E.u$.Test.toString()])||void 0===n?void 0:n.assessment},A=(e,t)=>{var n;let r=null===(n=v(t))||void 0===n?void 0:n.id;if(r&&t.id){let n=e.byGradebookAttemptId[t.id].value;n&&(n.assessmentId=r)}},O=(e,t)=>{let n=e.views.byColumnId[t];n&&Object.values(n).forEach(t=>{t.values&&(t.values.some(t=>{var n;return null===(n=e.byGradebookAttemptId[t])||void 0===n?void 0:n.value})||(t.isValid=!1))})},C=(0,l.Lq)({views:{byColumnId:{}},byGradebookAttemptId:{},deletedAttemptsByColumnId:{},paging:void 0,isLoading:!1},{[m.V.GRADEBOOK_ATTEMPT_LOAD]:(0,l.Li)(_,b),[m.V.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED]:(e,t)=>{let{attemptId:n}=t;return(0,r.ZP)(e,t=>{let r=e.byGradebookAttemptId[n].value;if(r){let e={...r};delete e.studentSubmissionViewUrlExpanded,t.byGradebookAttemptId[n].value=e}})},[(0,l.ok)(m.V.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>{let{attempt:n,courseId:i,columnId:o,viewUrlRequested:s}=t,a=(0,r.ZP)(e,t=>{var r;if(n){let a=null===(r=e.byGradebookAttemptId[n.id])||void 0===r?void 0:r.value;t.byGradebookAttemptId[n.id]={value:{...a,...n,studentSubmissionViewUrlExpanded:s?n.studentSubmission:null==a?void 0:a.studentSubmissionViewUrlExpanded,courseId:i,columnId:o},status:I._B},A(t,n)}});return(0,l.NV)(a,t,{viewResolver:_,viewsPathResolver:b,values:[n.id]})},[(0,l.bG)(m.V.GRADEBOOK_ATTEMPT_LOAD)]:(0,l.HT)(_,b),[m.V.GRADEBOOK_ATTEMPT_DELETE]:(0,I.gX)(g,I.yL.Delete,I.zM),[(0,l.ok)(m.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:n}=t,i=n.id;return(0,r.ZP)(e,e=>{delete e.byGradebookAttemptId[i]})},[(0,l.bG)(m.V.GRADEBOOK_ATTEMPT_DELETE)]:(0,I.gX)(g,I.yL.Delete,I.eV),[m.V.GRADEBOOK_ATTEMPTS_LOAD]:(e,t)=>(0,l.Li)(_,b)((0,l.K4)(e,t),t),[(0,l.ok)(m.V.GRADEBOOK_ATTEMPTS_LOAD)]:(e,t)=>{let{byGradebookAttemptId:n={},deletedAttempts:i,courseId:o,columnId:s,viewUrlRequested:a,gradeId:u,query:d}=t,c=(0,r.ZP)(e,t=>{s&&!u&&(t.deletedAttemptsByColumnId[s]={value:[...i].sort((e,t)=>{var n,r;return(null!==(n=e.delegatedGraderOrder)&&void 0!==n?n:1/0)-(null!==(r=t.delegatedGraderOrder)&&void 0!==r?r:1/0)}),status:I._B}),Object.entries(n).forEach(([n,r])=>{var i;let u=null===(i=e.byGradebookAttemptId[n])||void 0===i?void 0:i.value;t.byGradebookAttemptId[n]={value:{...u,...r,studentSubmissionViewUrlExpanded:a?r.studentSubmission:null==u?void 0:u.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:I._B},(0,l.o_)(t,(0,l.NV)(t,{type:m.V.GRADEBOOK_ATTEMPTS_LOAD,query:{...d,attemptId:n}},{viewResolver:_,viewsPathResolver:b,values:[n]}))}),(0,l.o_)(t,(0,l.NV)(t,{type:m.V.GRADEBOOK_ATTEMPTS_LOAD,query:d},{viewResolver:_,viewsPathResolver:b,values:Object.keys(n)}))});return(0,l.f2)(c,t)},[(0,l.bG)(m.V.GRADEBOOK_ATTEMPTS_LOAD)]:(0,l.HT)(_,b),[m.V.GRADEBOOK_ATTEMPT_UPDATE]:(0,I.gX)(g,I.yL.Update,I.DK),[(0,l.ok)(m.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n,columnId:i}=t,{byGradebookAttemptId:o}=e;return(0,r.ZP)(e,e=>{var t;let r=null===(t=o[n.id])||void 0===t?void 0:t.value;r?e.byGradebookAttemptId[n.id]={value:{...r,...n},status:I._B}:(e.byGradebookAttemptId[n.id]={value:n,status:I._B},O(e,i)),A(e,n)})},[(0,l.bG)(m.V.GRADEBOOK_ATTEMPT_UPDATE)]:(0,I.gX)(g,I.yL.Update,I.eV),[(0,l.ok)(u.V.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{let t=e.views.byColumnId[n];t&&Object.values(t).forEach(e=>{e.isValid=!1})})},[(0,l.ok)(d.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{dependents:{columnId:n,attemptId:i}}=t.data;return(0,r.ZP)(e,e=>{if(n)for(let t of S(e,{columnId:n,attemptId:i}))t.isValid=!1})},[m.V.GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{for(let t of S(e,{columnId:n}))("attemptId"in t.query&&t.query.attemptId||"gradeId"in t.query&&t.query.gradeId)&&(t.isValid=!1)})},[(0,l.ok)(h.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{var n,r;let{contents:i,prevContent:o,columns:s}=t;if(i&&(null==o?void 0:o.id)&&s){let t=i[o.id];(null===(n=null==t?void 0:t.gradingColumn)||void 0===n?void 0:n.gradingSchemaId)!==(null===(r=null==o?void 0:o.gradingColumn)||void 0===r?void 0:r.gradingSchemaId)&&Object.keys(s).forEach(t=>{for(let n of S(e,{columnId:t}))n.isValid=!1})}}),[(0,l.ok)(c.V.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>{let{data:n,columnId:i}=t;return(0,r.ZP)(e,e=>{Object.values(n).forEach(t=>{var n;let r=null===(n=t.result)||void 0===n?void 0:n.attemptId;if(i)for(let t of S(e,{columnId:i,attemptId:r}))t.isValid=!1})})},[(0,l.bG)(c.V.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>(0,l.sT)(e,t),[m.V.GRADEBOOK_ATTEMPT_CREATE]:l.K4,[(0,l.ok)(m.V.GRADEBOOK_ATTEMPT_CREATE)]:(e,t)=>{let{attempt:n,columnId:i}=t,o=n.id,s=(0,r.ZP)(e,e=>{e.byGradebookAttemptId[o]={value:n,status:I._B};let t=e.views.byColumnId[i];t&&Object.values(t).forEach(e=>{e.isValid=!1})});return(0,l.f2)(s,t)},[(0,l.bG)(m.V.GRADEBOOK_ATTEMPT_CREATE)]:l.sT}),R={loadGradebookAttemptByAttemptId:({needsRefresh:e,...t},n)=>(0,l.RU)(m.V.GRADEBOOK_ATTEMPT_LOAD,async()=>{var e;try{let n=await (0,s.AN)(t),r=o.includes(null===(e=t.expand)||void 0===e?void 0:e.split(","),"viewUrl");return{...n,query:t,viewUrlRequested:r}}catch(e){throw new l.GM(e).setData({query:t})}},{data:{query:t,needsRefresh:e},condition:T,allowedErrors:n}),clearSubmissionTextWithViewUrlByAttemptId:e=>(0,l.aU)(m.V.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED,{attemptId:e}),loadGradebookAttemptsByColumnId:e=>(0,l.RU)(m.V.GRADEBOOK_ATTEMPTS_LOAD,async()=>{var t;try{let n=await (0,s.KV)(e),r=o.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,query:o.pick(e,...f),viewUrlRequested:r}}catch(t){throw new l.GM(t).setData({query:o.pick(e,...f)})}},{data:{query:e},condition:T}),loadGradebookAttemptsByGradeId:e=>(0,l.RU)(m.V.GRADEBOOK_ATTEMPTS_LOAD,async()=>{var t;try{let n=await (0,s.KV)(e),r=o.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,query:o.pick(e,...f),viewUrlRequested:r,gradeId:e.gradeId}}catch(t){throw new l.GM(t).setData({query:o.pick(e,...f)})}},{data:{query:e},condition:T}),createAttempt:(e,t,n)=>(0,l.RU)(m.V.GRADEBOOK_ATTEMPT_CREATE,async()=>({attempt:await (0,s.lF)(e,n,t),columnId:t})),updateAttemptById:e=>(0,l.PH)(m.V.GRADEBOOK_ATTEMPT_UPDATE,async(t,n)=>{let{courseId:r,attemptId:i,payload:o,columnId:a,queryParams:u}=e;try{return await (0,s.Oc)(r,i,o,{columnId:a},u)}catch(e){throw n((0,l.aU)((0,l.bG)(m.V.GRADEBOOK_ATTEMPT_UPDATE),{attemptId:i})),e}},{attemptId:e.attemptId,courseId:e.courseId,studentAttemptStatusChanged:!!e.payload.status}),deleteAttemptById:e=>(0,l.PH)(m.V.GRADEBOOK_ATTEMPT_DELETE,async t=>{let{courseId:n,attemptId:r}=e,i=t().gradebookAttempt.byGradebookAttemptId[r].value;try{return await (0,s.g2)(n,r),{attempt:i}}catch(t){throw new l.GM(t).setData(e)}},{attemptId:e.attemptId}),assignNewAttemptForPeerReview:e=>(0,l.c3)(async t=>{try{let n=await (0,s.gA)(e),r={courseId:e.courseId,columnId:e.columnId,gradeId:n.gradeId,reviewableAttemptsOnly:!0};return await t(R.loadGradebookAttemptsByColumnId(r)),{...n}}catch(e){throw e instanceof p.jM||t((0,l.aU)((0,l.ok)(a.Z.APP_ERROR),{error:e})),e}}),setGradeAttemptInStore:(e,t,n,r)=>(0,l.aU)((0,l.ok)(m.V.GRADEBOOK_ATTEMPT_UPDATE),{attempt:e,courseId:t,studentAttemptStatusChanged:r,columnId:n}),invalidateGradebookAttemptsByColumnId:e=>(0,l.aU)(m.V.GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID,{columnId:e}),setNewAttemptInStore:(e,t)=>(0,l.aU)((0,l.ok)(m.V.GRADEBOOK_ATTEMPT_CREATE),{attempt:e,columnId:t})},L={getGradebookAttemptByAttemptId:(e,t)=>{var n;return null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.value},isGradebookAttemptStatusUpdatingByAttemptId:(e,t)=>{var n;return(null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.status)===I.DK},getGradebookAttemptsByColumnId:(e,t)=>{var n;let{view:r}=_(e.gradebookAttempt,t);if(r)return null===(n=r.values)||void 0===n?void 0:n.map(t=>e.gradebookAttempt.byGradebookAttemptId[t].value).filter(e=>!!e)},isGradebookAttemptsLoadingByGradeId:(e,t)=>{let{view:n}=_(e.gradebookAttempt,t);return(null==n?void 0:n.isLoading)===!0},getGradebookAttemptsByGradeId:(e,t)=>{var n;let{view:r}=_(e.gradebookAttempt,t);if(r)return null===(n=r.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.value}).filter(e=>!!e)},getGradebookAttemptsByUserId:(e,t,n,r)=>Object.values(e.gradebookAttempt.byGradebookAttemptId).filter(e=>{var i,o,s;return(null===(i=e.value)||void 0===i?void 0:i.courseId)===t&&(null===(o=e.value)||void 0===o?void 0:o.columnId)===n&&(null===(s=e.value)||void 0===s?void 0:s.userId)===r}).map(e=>e.value),getReviewableGradebookAttempts:(e,t,n,r)=>Object.values(e.gradebookAttempt.byGradebookAttemptId).filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.courseId)===t&&e.value.columnId===n&&e.value.userId!==r}).map(e=>e.value),getDeletedReviewableGradebookAttempts:(e,t)=>{var n,r;return null!==(r=null===(n=e.gradebookAttempt.deletedAttemptsByColumnId[t])||void 0===n?void 0:n.value)&&void 0!==r?r:[]},isLoading:e=>e.gradebookAttempt.isLoading,getGradebookAttemptViewStateByQuery:(0,i.P1)((e,t)=>_(e.gradebookAttempt,t).view,e=>{if(!e)return null;let{query:t,...n}=e;return n})}},211498:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_ATTEMPTS_LOAD:"gradebook-attempts.load",GRADEBOOK_ATTEMPT_LOAD:"gradebook-attempt.load",GRADEBOOK_ATTEMPT_CREATE:"gradebook-attempt.create",GRADEBOOK_ATTEMPT_UPDATE:"gradebook-attempt.update",GRADEBOOK_ATTEMPT_DELETE:"gradebook-attempt.delete",GRADEBOOK_ATTEMPT_LOAD_BY_GRADE_ID_AND_QUERY:"gradebook-attempt.load.by.grade.id.by.query",GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED:"gradebook-attempt.clear-student-submission-with-view-url-expanded",GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID:"gradebook-attempts.invalidate.byColumnId",GRADEBOOK_ATTEMPTS_LIST_INVALIDATE_BY_COLUMN_ID:"gradebook-attempts.list.invalidate.byColumnId"}},830844:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(961719),o=n(838246);let s={GRADEBOOK_CATEGORIES_LOAD_BY_COURSE:"gradebook-categories.load.by.course.id",GRADEBOOK_CATEGORY_LOAD_BY_ID:"gradebook-categories.load.by.id"},a=(0,i.Lq)({byCourseId:{},byId:{}},{[(0,i.ok)(s.GRADEBOOK_CATEGORIES_LOAD_BY_COURSE)]:(e,t)=>{let{courseId:n,response:o}=t;return(0,r.ZP)(e,t=>{t.byCourseId[n]=o.results.map(e=>e.id),o.results.forEach(n=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.PM)(r,n)}})})},[(0,i.ok)(s.GRADEBOOK_CATEGORY_LOAD_BY_ID)]:(e,t)=>{let{response:n}=t;return(0,r.ZP)(e,t=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.PM)(r,n)}})}}),l={loadGradebookCategoriesByCourseId:e=>(0,i.PH)(s.GRADEBOOK_CATEGORIES_LOAD_BY_COURSE,async()=>{try{let t=await o.X(e);return{courseId:e,response:t}}catch(e){throw{err:e}}})},u={getGradebookCategoriesByCourseId:(e,t)=>{let n=e.gradebookCategory.byCourseId[t];if(n)return n.map(t=>e.gradebookCategory.byId[t])},getGradebookCategoryById:(e,t)=>e.gradebookCategory.byId[t]}},515475:function(e,t,n){"use strict";n.d(t,{I6:function(){return T},Nw:function(){return v},Ys:function(){return C}});var r=n(715729),i=n(276635),o=n(961719),s=n(166992),a=n(941597),l=n(720533),u=n(494615),d=n(25859),c=n(374899),E=n(471901),p=n(560985),m=n(715655),h=n(968227),I=n(719200);let b=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],o=i.isEqual(r.query.paging,t.paging),s=i.isEqual(r.query.filter,t.filter),a=i.isEqual(r.query.sort,t.sort);return o&&a&&s});return{id:r,view:r?n[r]:null}},g=e=>["views","byCourseId",e.courseId],y=(e,t)=>{let{view:n}=b(e.gradebookColumn,t);return!n||!n.isLoading&&!n.isValid},f=(e,t,n,r=!1)=>{let{courseId:i,id:o}=t,s=e.views.byCourseId[i];s&&Object.values(s).forEach(e=>{let t=e.values.some(e=>e===o);(r||n&&t||!n&&!t)&&(e.isValid=!1)})};function S(e,t){let{courseId:n,id:r}=t;if(!n)return;let i=e.views.byCourseId[n];i&&Object.values(e.byColumnId).find(e=>!!e.externalGrade&&e.courseId===n)&&Object.values(i).forEach(e=>{var t;(null===(t=e.values)||void 0===t?void 0:t.some(e=>e===r))&&(e.isValid=!1)})}function _(e,t,n,i=!1){let s=(0,r.ZP)(e,t=>{var r;Object.values(null!==(r=n.columns)&&void 0!==r?r:{}).forEach(n=>{let r=e.byColumnId[n.id];t.byColumnId[n.id]={...(0,o.PM)(r,n),api:{isUpdating:!1,isDeleting:!1},ui:e.byColumnId[n.id]&&e.byColumnId[n.id].ui},i&&r&&r.possible!==n.possible&&S(t,n)})});return(0,o.f2)(s,t)}let T=(0,o.Lq)({byColumnId:{},permissions:{byCourseId:{}},isLoading:!1,views:{byCourseId:{}}},{[E.V.GRADEBOOK_COLUMN_LOAD]:o.K4,[(0,o.ok)(E.V.GRADEBOOK_COLUMN_LOAD)]:(e,t)=>{let{gradebookColumn:n}=t,i=(0,r.ZP)(e,e=>{if(!n)return;let r={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1,isInvalidated:!1}};e.byColumnId[n.id]=r});return(0,o.f2)(i,t)},[(0,o.cI)(E.V.GRADEBOOK_COLUMN_LOAD)]:e=>(0,r.ZP)(e,e=>{e.isLoading=!1}),[(0,o.bG)(E.V.GRADEBOOK_COLUMN_LOAD)]:o.sT,[E.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE]:o.K4,[(0,o.ok)(E.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:(e,t)=>{let{gradebookColumns:n}=t,i=(0,r.ZP)(e,e=>{n&&Object.keys(n).forEach(t=>{let r={...n[t],api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[r.id]=r})});return(0,o.f2)(i,t)},[(0,o.bG)(E.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:o.sT,[E.V.GRADEBOOK_COLUMN_PERSIST]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let n=t.columnId;if(!n)return;let r=e.byColumnId[n];r||(r={}),r.api||(r.api={}),r.api={isUpdating:!0}});return(0,o.f2)(n,t)},[(0,o.ok)(E.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{gradebookColumn:n}=t;n&&(f(e,n,!1),S(e,n),e.byColumnId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}})});return(0,o.f2)(n,t)},[(0,o.bG)(E.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let n=t.columnId;if(!n)return;let r=e.byColumnId[n];if(r.api){r.api.isUpdating=!1;return}r.api={isUpdating:!1}});return(0,o.sT)(n,t)},[E.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE]:o.K4,[(0,o.ok)(E.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(0,r.ZP)(e,e=>{e.byColumnId[n.id].rubricAssociations=n.rubricAssociations})},[(0,o.bG)(E.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:o.sT,[E.V.GRADEBOOK_COLUMN_DELETE]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!0})),e},[(0,o.ok)(E.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{let t=e.byColumnId[n.id];t&&(f(e,t,!0),delete e.byColumnId[n.id])})),(0,o.f2)(e,t)},[(0,o.bG)(E.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.ZP)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!1})),e},[(0,o.ok)(l.V.CONTENT_LOAD)]:(e,t)=>_(e,t,t,!0),[(0,o.ok)(l.V.CONTENT_SEARCH_LOAD)]:(e,t)=>_(e,t,t.data),[(0,o.ok)(l.V.CONTENT_DELETE)]:(e,t)=>t.deletedGrades?(0,r.ZP)(e,n=>{t.results.forEach(t=>{let r=(0,i.find)(e.byColumnId,{contentId:t});r&&(f(n,r,!0),delete n.byColumnId[r.id])})}):e,[(0,o.ok)(l.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,n=>{let{contentId:r}=t,o=(0,i.find)(e.byColumnId,{contentId:r});o&&(f(n,o,!0),delete n.byColumnId[o.id])}),[E.V.GRADEBOOK_COLUMN_INVALIDATE_DATA]:(e,t)=>(0,r.ZP)(e,n=>{let{id:r}=t,i=e.byColumnId[r];i&&f(n,i,!1,!0)}),[(0,o.ok)(l.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{let{columns:r,contents:i,prevContent:s}=t;Object.values(r||{}).forEach(t=>{let r=e.byColumnId[t.id];n.byColumnId[t.id]={...(0,o.PM)(r,t),api:{isDeleting:!1,isUpdating:!1}},f(n,t,!1)}),Object.values(null!=i?i:{}).forEach(e=>{var t,r,i;let o=null!==(t=e.result)&&void 0!==t?t:e;if(o&&s&&o.contentDetail&&s.contentDetail&&o.contentHandler&&o.id===s.id&&(0,I.PI)(o)){let e=null===(r=null==o?void 0:o.contentDetail[o.contentHandler.toString()])||void 0===r?void 0:r.blog,t=null===(i=null==s?void 0:s.contentDetail[o.contentHandler.toString()])||void 0===i?void 0:i.blog;if(t&&e&&t.gradingAllowed&&!e.gradingAllowed&&t.gradeColumnId){let e=n.byColumnId[t.gradeColumnId];e&&(f(n,e,!0),delete n.byColumnId[e.id])}}}),Object.values(null!=i?i:{}).forEach(e=>{var t,r;let{title:i,id:o}=null!==(t=e.result)&&void 0!==t?t:e;if(!i)return;let s=null===(r=Object.values(n.byColumnId).find(e=>e.contentId===o))||void 0===r?void 0:r.id;s&&(n.byColumnId[s].columnName=i,n.byColumnId[s].effectiveColumnName=i,n.byColumnId[s].localizedColumnName&&(n.byColumnId[s].localizedColumnName={...n.byColumnId[s].localizedColumnName,languageKey:i}))})}),[E.V.GRADEBOOK_COLUMNS_LOAD]:(0,o.Li)(b,g),[(0,o.ok)(E.V.GRADEBOOK_COLUMNS_LOAD)]:(e,t)=>{let{data:n,query:{courseId:i}}=t;if(!n)return(0,o.f2)(e,t);let{results:s,paging:a,permissions:l}=n;return e=(0,r.ZP)(e,t=>{s.forEach(n=>{let r=e.byColumnId[n.id];t.byColumnId[n.id]={...(0,o.PM)(r,n)}}),t.permissions.byCourseId[i]=l}),(0,o.NV)(e,t,{viewResolver:b,viewsPathResolver:g,paging:a,values:s.map(e=>e.id)})},[(0,o.bG)(E.V.GRADEBOOK_COLUMNS_LOAD)]:(0,o.HT)(b,g),[(0,o.ok)(c.V.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t;return n?(0,r.ZP)(e,t=>{let r=e.byColumnId[n];t.byColumnId[n]={...r,api:{...null==r?void 0:r.api,isInvalidated:!0}}}):e},[d.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{var t;n&&Object.values(null!==(t=e.views.byCourseId[n])&&void 0!==t?t:{}).forEach(e=>{e.isValid=!1})})}}),v={loadGradebookColumn:({courseId:e,columnId:t,allowedErrors:n})=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;n();try{i=await (0,s.gI)(e,t)}catch(e){throw{err:e}}return{gradebookColumn:i}},void 0,n),loadGradebookColumns:({courseId:e,columnIds:t})=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async n=>{var r;return n(),(0,s.HA)(e,t)}),loadGradebookColumnsByCourseId:e=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async t=>{var n;return t(),(0,s.YM)(e)}),loadGradebookColumnByContentId:({courseId:e,contentId:t})=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;return n(),{gradebookColumn:i=await (0,s.Vh)({courseId:e,contentId:t})}}),loadGradebookColumnsByQuery:e=>async(t,n)=>{if(y(n(),e)){t((0,o.aU)(E.V.GRADEBOOK_COLUMNS_LOAD,{query:e}));try{let n=await (0,s.$J)(e);t((0,o.aU)((0,o.ok)(E.V.GRADEBOOK_COLUMNS_LOAD),{data:n,query:e}))}catch(n){throw t((0,o.aU)((0,o.bG)(E.V.GRADEBOOK_COLUMNS_LOAD),{query:e})),t((0,o.aU)((0,o.ok)(u.Z.APP_ERROR),{error:n})),{err:n}}}},setGradebookColumnInStore:e=>(0,o.aU)((0,o.ok)(E.V.GRADEBOOK_COLUMN_LOAD),{gradebookColumn:e}),updateGradebookColumn:(e,t,n)=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_PERSIST,()=>(0,s.AV)(e,t,n).then(e=>({gradebookColumn:e})).catch(e=>{throw{columnId:t,err:e}}),{columnId:t}),persistGradebookColumn:(e,t)=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_PERSIST,()=>(0,s.Rc)(e,t).then(e=>({gradebookColumn:e})).catch(n=>{throw{columnId:t.id||(null==e?void 0:e.id),err:n}}),{columnId:t.id||(null==e?void 0:e.id)}),postReadyGradesByColumnId:(e,t,n)=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_POST_READY_GRADES,async()=>{try{return await (0,s.mo)(e,t,n)}catch(e){throw{err:e}}},null),persistGradebookColumns:(e,t)=>(0,o.c3)(async n=>{e.forEach(e=>{n((0,o.aU)(E.V.GRADEBOOK_COLUMN_PERSIST,{prevColumn:e.prevColumn,nextColumn:e.nextColumn}))});let r=await (0,s.Mq)(e,t),i=e.reduce((e,t)=>{var n;return(null===(n=null==t?void 0:t.prevColumn)||void 0===n?void 0:n.id)&&(e[t.prevColumn.id]=t.prevColumn),e},{});return Object.keys(r.columns).forEach(e=>{let t=r.columns[e];t.isOk?n((0,o.aU)((0,o.ok)(E.V.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:t.result,previousGradebookColumn:i[e]})):(n((0,o.aU)((0,o.bG)(E.V.GRADEBOOK_COLUMN_PERSIST),{prevColumn:t.previous,err:t.error})),n((0,o.aU)((0,o.ok)(u.Z.APP_ERROR),{error:t.error})))}),r}),removeRubricAssociations:e=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE,async t=>{let n=C.getGradebookColumnById(t(),e);return{gradebookColumn:n=await (0,s.QI)(n.courseId,n.id)}}),removeGradebookColumnFromStore:e=>(0,o.aU)((0,o.ok)(E.V.GRADEBOOK_COLUMN_DELETE),{gradebookColumn:{id:e}}),addGradebookColumnToStore:e=>(0,o.c3)((t,n)=>{t((0,o.aU)((0,o.ok)(E.V.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:e,previousGradebookColumn:n().gradebookColumn.byColumnId[e.id]}))}),removeColumn:e=>(0,o.PH)(E.V.GRADEBOOK_COLUMN_DELETE,async t=>{let n=C.getGradebookColumnById(t(),e);return await (0,s.XS)(n.courseId,n.id),{gradebookColumn:n}}),invalidateGradebookColumn:e=>(0,o.aU)(E.V.GRADEBOOK_COLUMN_INVALIDATE_DATA,e)},A=(0,p.wN)(m.PW,h.TO),O=(0,p.wN)(m.PW,h.AD),C={getGradebookColumnById:(e,t)=>(0,i.find)(e.gradebookColumn.byColumnId,{id:t}),getGradebookColumnsByIds:(e,t)=>{let n={};return t.forEach(t=>n[t]=e.gradebookColumn.byColumnId[t]),n},getGradebookColumnByContentId:(e,t)=>{let n=a.Ys.getAssessmentByContentId(e,t);return n?e.gradebookColumn.byColumnId[n.gradableItemId]:(0,i.find)(e.gradebookColumn.byColumnId,{contentId:t})},getGradebookColumnsByCourseId:(0,p.P1)([e=>e.gradebookColumn.byColumnId,(e,t)=>t],(e,t)=>(0,i.filter)(e,{courseId:t})),getGradebookColumnsByQuery:A((e,t)=>{let{view:n}=b(e.gradebookColumn,t);return n&&n.isValid?(n.values||[]).map(t=>e.gradebookColumn.byColumnId[t]):[]},e=>e),isLoading:(e,t)=>{let{view:n}=b(e.gradebookColumn,t);return n?n.isLoading:e.gradebookColumn.isLoading},getGradebookColumnViewStatusByQuery:O((e,t)=>b(e.gradebookColumn,t),({view:e})=>e?{isLoading:e.isLoading,isValid:e.isValid,paging:e.paging}:null)}},471901:function(e,t,n){"use strict";var r,i;n.d(t,{V:function(){return o},e:function(){return r}});let o={GRADEBOOK_COLUMN_LOAD:"gradebook-column.load",GRADEBOOK_COLUMN_LOAD_MULTIPLE:"gradebook-column.multiple.load",GRADEBOOK_COLUMN_PERSIST:"gradebook-column.persist",GRADEBOOK_COLUMN_POST_READY_GRADES:"gradebook-column.ready.grades.post",GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE:"gradebook-column.rubricAssociations.delete",GRADEBOOK_COLUMN_DELETE:"gradebook-column.delete",GRADEBOOK_COLUMNS_LOAD:"gradebook-columns.load",GRADEBOOK_COLUMN_INVALIDATE_DATA:"gradebook-column.invalidate.data"};(i=r||(r={}))[i.AllStudents=0]="AllStudents",i[i.MyStudentsToGrade=1]="MyStudentsToGrade"},80155:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_GRADE_LOAD_BY_USER:"gradebook-grade.load.by.user",GRADEBOOK_GRADE_LOAD_BY_QUERY:"gradebook-grade.load.by.query",GRADEBOOK_BULKVIEW_LOAD:"gradebook-grade-bulk-view.load",GRADEBOOK_GRADES_LOAD:"gradebook-grades.load",GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID:"gradebook-grade.persist.by.grade.id",GRADEBOOK_GRADE_PERSIST_BY_USER_ID:"gradebook-grade.persist.by.user.id",GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID:"gradebook-grade.post.grade.by.grade.id",GRADEBOOK_GRADES_INVALIDATE:"gradebook-grades.invalidate",GRADEBOOK_GRADES_INVALIDATE_BY_COLUMN_ID:"gradebook-grades.invalidate.byColumnId",GRADEBOOK_GRADE_DETAIL_LOAD:"gradebook-grade-detail.load",GRADEBOOK_UNREAD_GRADES_COUNT_LOAD:"gradebook-grades.unread-grades-count.load",GRADEBOOK_GRADE_REMOVE_UNREAD_INDICATOR:"gradebook-grade.unread-indicator.remove",GRADEBOOK_GRADE_REMOVE_UNREAD_INDICATOR_BATCH:"gradebook-grade.unread-indicator.remove.batch"}},241724:function(e,t,n){"use strict";n.d(t,{KL:function(){return u},PQ:function(){return l},o4:function(){return d}});var r=n(560985),i=n(715655),o=n(968227),s=n(182267);let a=(0,r.wN)(i.PW,o.AD),l=e=>null==e||!e.api||!e.api.isUpdating&&!!e.api.isInvalidated,u=a((e,t,n)=>{let r=(0,s.nqI)(n),i=r?n.gradeIds:n.membershipIds,o=e.gradebookGrade.byColumnId[t];if(!o)return n;let a=i.filter(e=>{if(void 0===(r?o.grades:o.byMemberId)[e])return!0;let t=r?e:o.byMemberId[e];if(!t)return!1;let n=o.grades[t];return!!r&&null!=n&&!!n.lastAttemptUrl&&!(null==n?void 0:n.lastAttemptId)||l(n)});return r?{gradeIds:a}:{membershipIds:a}},e=>e),d=a((e,t,n)=>{let r=e.gradebookGrade.byColumnId[t];if(!r)return{};let i=r.byMemberId,o=r.grades,a={},l=(0,s.nqI)(n);return(l?n.gradeIds:n.membershipIds).forEach(e=>{let t=l?e:i[e];if(t){let n=o[t];n&&(a[e]=n)}}),a},e=>e)},724773:function(e,t,n){"use strict";n.d(t,{I6:function(){return f},Nw:function(){return S},Ys:function(){return _}});var r=n(715729),i=n(560985),o=n(276635),s=n(100038),a=n(961719),l=n(64403),u=n(689033),d=n(305870),c=n(587637);function E(e){return{columnId:e.columnId,groupAttemptId:"groupAttemptId"in e?e.groupAttemptId:void 0,expand:"expand"in e?e.expand:void 0,groupAssociationId:"groupAssociationId"in e?e.groupAssociationId:void 0}}let p=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>o.isEqual(o.pick(E(t),...r),o.pick(E(e.query),...r)))},m=e=>["views","byColumnId",e.columnId],h=["columnId","groupAttemptId","groupAssociationId","expand"],I=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return o.isEqual(o.pick(E(t),...h),o.pick(E(n.query),...h))});return i?{id:i,view:r[i]}:a.LW},b=(e,t)=>{let{view:n}=I(t.getState().gradebookGroupAttempt,e.query);return!n||!n.isLoading&&!n.isValid},g=(e,t)=>{let{view:n}=I(t.getState().gradebookGroupAttempt,e.query);return!n||!n.isLoading&&(!n.isValid||!!e.forceRefresh)},y=(e,t)=>{var n;let r=null===(n=(0,l.GE)(t))||void 0===n?void 0:n.id;if(r&&t.id){let n=e.byGradebookGroupAttemptId[t.id].value;n&&(n.assessmentId=r)}},f=(0,a.Lq)({views:{byColumnId:{}},byGradebookGroupAttemptId:{}},{[u.V.GRADEBOOK_GROUP_ATTEMPT_LOAD]:(0,a.Li)(I,m),[(0,a.ok)(u.V.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(e,t)=>{var n;let{groupAttempt:i,courseId:o,columnId:s,viewUrlRequested:l}=t,u=(0,r.ZP)(e,t=>{var n;if(null==i?void 0:i.id){let r=null===(n=e.byGradebookGroupAttemptId[i.id])||void 0===n?void 0:n.value;t.byGradebookGroupAttemptId[i.id]={value:{...r,...i,studentSubmissionViewUrlExpanded:l?i.studentSubmission:null==r?void 0:r.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:c._B},y(t,i)}});return(0,a.NV)(u,t,{viewResolver:I,viewsPathResolver:m,values:[null!==(n=i.id)&&void 0!==n?n:""]})},[(0,a.bG)(u.V.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(0,a.HT)(I,m),[(0,a.ok)(u.V.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{id:n}}=t;return(0,r.ZP)(e,e=>{n&&delete e.byGradebookGroupAttemptId[n]})},[u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD]:(0,a.Li)(I,m),[(0,a.ok)(u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD)]:(e,t)=>{let{query:n,data:i}=t;return(0,r.ZP)(e,t=>{if(!i){(0,a.o_)(t,(0,a.NV)(t,{type:u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:n},{viewResolver:I,viewsPathResolver:m,values:[]}));return}let{results:r,courseId:o,columnId:s,viewUrlRequested:l,paging:d,permissions:E}=i;r.forEach(r=>{var i;let d=null===(i=e.byGradebookGroupAttemptId[r.id])||void 0===i?void 0:i.value;t.byGradebookGroupAttemptId[r.id]={value:{...d,...r,studentSubmissionViewUrlExpanded:l?r.studentSubmission:null==d?void 0:d.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:c._B},y(t,r);let{groupAssociationId:E,...p}=n;(0,a.o_)(t,(0,a.NV)(t,{type:u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:{...p,groupAttemptId:r.id}},{viewResolver:I,viewsPathResolver:m,values:[r.id]}))}),(0,a.o_)(t,(0,a.NV)(t,{type:u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:n},{viewResolver:I,viewsPathResolver:m,paging:d,permissions:E,values:r.map(e=>e.id)}))})},[(0,a.bG)(u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD)]:(0,a.HT)(I,m),[u.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE]:(e,t)=>{let{groupAttemptId:n}=t;return(0,r.ZP)(e,e=>{e.byGradebookGroupAttemptId[n]={...e.byGradebookGroupAttemptId[n],status:c.DK}})},[(0,a.bG)(u.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttemptId:n}=t;return n?(0,r.ZP)(e,e=>{e.byGradebookGroupAttemptId[n]={...e.byGradebookGroupAttemptId[n],status:c.eV}}):e},[(0,a.ok)(u.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,{byGradebookGroupAttemptId:i}=e;return(0,r.ZP)(e,e=>{if(null==n?void 0:n.id){let t=i[n.id];e.byGradebookGroupAttemptId[n.id]={value:{...null==t?void 0:t.value,...n},status:c._B}}y(e,n)})},[(0,a.ok)(d.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{dependents:{columnId:n,groupAttemptId:i}}=t.data;return(0,r.ZP)(e,e=>{if(n)for(let t of p(e,{columnId:n,groupAttemptId:i}))t.isValid=!1})},[u.V.GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{for(let t of p(e,{columnId:n}))"groupAssociationId"in t.query&&t.query.groupAssociationId&&(t.isValid=!1)})},[u.V.GRADEBOOK_GROUP_ATTEMPT_CREATE]:(e,t)=>{let n=t.groupAttempt,i=t.courseId,o=t.columnId,s=null==n?void 0:n.groupAssociationId;return(null==n?void 0:n.id)&&i&&o?(e=(0,r.ZP)(e,e=>{for(let t of(e.byGradebookGroupAttemptId[n.id]={value:{...n,columnId:o,courseId:i},status:c._B},p(e,{columnId:o,groupAssociationId:s})))"groupAssociationId"in t.query&&t.query.groupAssociationId&&(t.isValid=!1);y(e,n)}),(0,a.NV)(e,{type:u.V.GRADEBOOK_GROUP_ATTEMPT_CREATE,query:{groupAttemptId:n.id,columnId:o,courseId:i}},{viewResolver:I,viewsPathResolver:m,values:[n.id]})):e}}),S={loadGradebookGroupAttemptById:(e,t)=>(0,a.RU)(u.V.GRADEBOOK_GROUP_ATTEMPT_LOAD,async()=>{var t,n,r;try{let i=await (0,s.dm)(e),o=null!==(r=null===(n=null===(t=e.expand)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.includes("viewUrl"))&&void 0!==r&&r,a=e.courseId,l=e.columnId;return{groupAttempt:i.groupAttempt,courseId:a,columnId:l,query:e,viewUrlRequested:o}}catch(t){throw new a.GM(t).setData({query:e})}},{allowedErrors:t,data:{query:e,forceRefresh:e.needsRefresh},condition:g}),deleteGroupAttemptById:e=>(0,a.RU)(u.V.GRADEBOOK_GROUP_ATTEMPT_DELETE,async(t,{getState:n})=>{var r;let i=n(),{courseId:o,groupAttemptId:l}=e,u=null===(r=i.gradebookGroupAttempt.byGradebookGroupAttemptId[l])||void 0===r?void 0:r.value;try{return await (0,s.ki)(o,l),{groupAttempt:u}}catch(e){throw new a.GM(e).setData({groupAttempt:u})}},{data:{groupAttemptId:e.groupAttemptId}}),loadGradebookGroupAttemptsByGroupAssocationId:e=>(0,a.RU)(u.V.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,async()=>{var t,n,r;try{let i=await (0,s.ae)(e),o=null!==(r=null===(n=null===(t=e.expand)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.includes("viewUrl"))&&void 0!==r&&r;return i.viewUrlRequested=o,{data:i,query:e}}catch(t){throw new a.GM(t).setData({query:e})}},{data:{query:e},condition:b}),updateGroupAttemptById:e=>(0,a.RU)(u.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE,async()=>{let{courseId:t,columnId:n,groupAttemptId:r,payload:i,queryParams:o}=e;try{return{groupAttempt:{...(await (0,s.JS)(t,r,i,o)).groupAttempt,columnId:n}}}catch(e){throw new a.GM(e).setData({groupAttemptId:r})}},{data:{groupAttemptId:e.groupAttemptId,courseId:e.courseId,groupAttemptStatusChanged:!!e.payload.status}}),invalidateGradebookGroupAttemptsByColumnId:e=>(0,a.aU)(u.V.GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID,{columnId:e}),setNewGroupAttemptInStore:e=>(0,a.aU)(u.V.GRADEBOOK_GROUP_ATTEMPT_CREATE,e)},_={getGradebookGroupAttemptById:(e,t)=>e.gradebookGroupAttempt.byGradebookGroupAttemptId[t],getGradebookGroupAttemptsByGroupAssociationId:(e,t)=>{var n;let{view:r}=I(e.gradebookGroupAttempt,t);return null===(n=null==r?void 0:r.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.gradebookGroupAttempt.byGradebookGroupAttemptId[t])||void 0===n?void 0:n.value}).filter(e=>!!e)},getGradebookGroupAttemptViewStateByQuery:(0,i.P1)((e,t)=>I(e.gradebookGroupAttempt,t).view,e=>{if(!e)return null;let{query:t,...n}=e;return n})}},689033:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_GROUP_ATTEMPT_LOAD:"gradebook-group-attempt.load",GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD:"gradebook-group-attempts-for-group.load",GRADEBOOK_GROUP_ATTEMPT_UPDATE:"gradebook-group-attempt.update",GRADEBOOK_GROUP_ATTEMPT_DELETE:"gradebook-group-attempt.delete",GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID:"gradebook-group-attempts.invalidate.byColumnId",GRADEBOOK_GROUP_ATTEMPT_CREATE:"gradebook-group-attempt.create"}},252542:function(e,t,n){"use strict";n.d(t,{Nw:function(){return w},I6:function(){return U},Ys:function(){return k}});var r=n(715729),i=n(961719),o=n(871365),s=n(198165),a=n(689033),l=n(560985),u=n(715655),d=n(968227),c=n(587637);let E=(0,l.wN)(u.PW,d.TO),p=(0,l.wN)(u.PW,d.yZ),m=E((e,t,n)=>{let r=e.gradebookGroupGrade.byColumnId[t];return r?n.filter(e=>{var t;if(!r.grades[e])return!0;let n=r.grades[e];return null!==(t=null==n?void 0:n.value)&&void 0!==t&&!!t.lastAttemptUrl&&!n.value.lastAttemptId||!n.status||n.status===c.Bq}):n},e=>e),h=p((e,t,n)=>{let r=e.gradebookGroupGrade.byColumnId[t];if(!r)return{};let i={};return n.forEach(e=>{var t;let n=null===(t=r.grades[e])||void 0===t?void 0:t.value;n&&(i[e]=n)}),i},e=>e);var I=n(471901),b=n(134129),g=n(305870),y=n(276635),f=n.n(y);function S(){return{isLoading:!1,grades:{}}}function _(e){return{columnId:e.columnId,groupAssociationIds:"groupAssociationIds"in e?e.groupAssociationIds:void 0}}let T=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>f().isEqual(f().pick(_(t),...r),f().pick(_(e.query),...r)))};function v(e,t,n){var r;let i=e.byColumnId;for(let e of t){let t=null==e?void 0:e.value,o=null==t?void 0:t.id;if(!o)continue;i[t.columnId]||(i[t.columnId]=S());let s=i[t.columnId],a=null===(r=s.grades[o])||void 0===r?void 0:r.value;if(!n&&a&&a.version>t.version)return;s.grades[o]={value:t,status:!function(e,t){var r;return!!n&&(!e||(null===(r=null==e?void 0:e.displayGrade)||void 0===r?void 0:r.isOverride)||e.isCalculatedColumnGrade||(null==e?void 0:e.id)===t)}(a,o)?c._B:c.Bq}}}function A(e,t){return(0,r.ZP)(e,e=>{v(e,t,!0)})}let O=["columnId","groupAssociationIds"],C=(e,t)=>{var n;let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},o=Object.keys(r).find(e=>{let n=r[e];return f().isEqual(f().pick(_(t),...O),f().pick(_(n.query),...O))});return o?{id:o,view:r[o]}:i.LW},R=e=>["views","byColumnId",e.columnId],L=(e,t)=>{let{view:n}=C(t.getState().gradebookGroupGrade,e.query);return!n||!n.isLoading&&!n.isValid},D=(e,t)=>!P(t.getState(),e.columnId),P=(e,t)=>{var n;return!!(null===(n=e.gradebookGroupGrade.byColumnId[t])||void 0===n?void 0:n.isLoading)},N=(e,t,n)=>{e.byColumnId[t]||(e.byColumnId[t]=S()),e.byColumnId[t].isLoading=n},U=(0,i.Lq)({byColumnId:{},views:{byColumnId:{}}},{[s.V.GRADEBOOK_GROUP_BULKVIEW_LOAD]:(0,i.Li)(C,R),[(0,i.ok)(s.V.GRADEBOOK_GROUP_BULKVIEW_LOAD)]:(e,t)=>{var n,o;let s=null!==(o=null===(n=t.data)||void 0===n?void 0:n.grades)&&void 0!==o?o:[];return e=(0,r.ZP)(e,e=>{v(e,s.map(e=>({value:e,status:c._B})))}),(0,i.NV)(e,t,{viewResolver:C,viewsPathResolver:R,values:s.map(e=>e.id).filter(e=>!!e)})},[(0,i.bG)(s.V.GRADEBOOK_GROUP_BULKVIEW_LOAD)]:(0,i.HT)(C,R),[s.V.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=S())})},[(0,i.ok)(I.V.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{var n;let{columnId:i}=t;if(!i)return e;let o=(null===(n=e.byColumnId[i])||void 0===n?void 0:n.grades)?Object.values(e.byColumnId[i].grades):[];return(0,r.ZP)(e,e=>{v(e,o,!0)})},[(0,i.ok)(s.V.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID)]:(e,t)=>{let{columnId:n,gradeId:i}=t;return(0,r.ZP)(e,e=>{var t;let r=null===(t=e.byColumnId[n])||void 0===t?void 0:t.grades[i];(null==r?void 0:r.value)&&v(e,[{value:{...r.value,manualStatus:b.WTZ.IsPosted,hasGradeBeenPosted:!0},status:c._B}])})},[s.V.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{let t=e.byColumnId[n];for(let r of(t&&v(e,Object.values(t.grades),!0),T(e,{columnId:n})))"groupAssociationIds"in r.query&&r.query.groupAssociationIds&&(r.isValid=!1)})},[s.V.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{N(e,n,!0)})},[(0,i.ok)(s.V.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD)]:(e,t)=>{let{grade:n}=t;return(0,r.ZP)(e,e=>{v(e,[{value:n,status:c._B}]),N(e,n.columnId,!1)})},[(0,i.bG)(s.V.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD)]:(e,t)=>{let{columnId:n}=t;return(0,r.ZP)(e,e=>{N(e,n,!1)})},[(0,i.ok)(a.V.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{var n;let{groupAttempt:r}=t,{groupAssociationId:i}=null!=r?r:{};if(i&&r.columnId){let t=null===(n=e.byColumnId[r.columnId])||void 0===n?void 0:n.grades[i];if(t)return A(e,[t])}return e},[(0,i.ok)(a.V.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{groupAssociationId:n,columnId:i}}=t;return i&&n?(0,r.ZP)(e,e=>{!function(e,t,n){let r=e.byColumnId[n].grades[t];r&&(r.status=c.Bq)}(e,n,i)}):e},[(0,i.ok)(g.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{var n;let{columnId:r,groupAssociationId:i}=t.data.dependents;if(!r||!i)return e;let o=null===(n=e.byColumnId[r])||void 0===n?void 0:n.grades[i];return o?A(e,[o]):e}}),w={loadGroupGradesBulkView:e=>(0,i.RU)(s.V.GRADEBOOK_GROUP_BULKVIEW_LOAD,async()=>{try{return{data:await o.LX(e),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:L}),postGroupGradeByGroupAssociationId:(e,t,n)=>(0,i.RU)(s.V.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID,async()=>(await o.qm(e,t,n),{columnId:t,gradeId:n}),{data:{columnId:t,gradeId:n}}),invalidateGradebookGroupGradesByColumnId:e=>(0,i.aU)(s.V.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID,{columnId:e}),loadGroupGradeByGroupAssociationId:(e,t,n)=>(0,i.RU)(s.V.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD,async()=>{try{return{grade:await o.fH(e,t,n)}}catch(e){throw new i.GM(e).setData({columnId:t})}},{data:{columnId:t},condition:D})},k={getGroupAssociationIdsWithMissingOrInvalidatedGradesInColumn:m,getGradebookGradesByColumnIdAndGroupAssociationIds:h,getGroupGradeByColumnIdAndGroupAssociationId:(e,t,n)=>{var r;return null===(r=e.gradebookGroupGrade.byColumnId[t])||void 0===r?void 0:r.grades[n]}}},198165:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADEBOOK_GROUP_BULKVIEW_LOAD:"gradebook-group-grade-bulk-view.load",GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID:"gradebook-group-grade.post.grade.by.group.association.id",GRADEBOOK_GROUP_GRADE_DETAIL_LOAD:"gradebook-group-grade-detail.load",GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID:"gradebook-group-grades.invalidate.byColumnId"}},927360:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return y},Ys:function(){return S}});var r=n(715729),i=n(961719),o=n(276635),s=n(241225);let a={GRADEBOOK_SCHEMA_LOAD:"gradebook-schema.load",GRADEBOOK_SCHEMAS_LOAD_BY_COURSE:"gradebook-schema.load.by.course.id",GRADEBOOK_SCHEMA_PERSIST_BY_COURSE:"gradebook-schema.persist.by.course.id",GRADEBOOK_SCHEMA_UPDATE_BY_COURSE:"gradebook-schema.update.by.course.id",GRADEBOOK_SCHEMA_DELETE_BY_COURSE:"gradebook-schema.delete.by.course.id",GRADEBOOK_SCHEMAS_INVALIDATE_DATA:"gradebook-schema.invalidate.data"};var l=n(471901),u=n(720533),d=n(494615),c=n(25859),E=n(895543),p=n(719200);let m=(e,t)=>{let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e];return(0,o.isEqual)(r.query,t)});return r?{id:r,view:n[r]}:i.LW},h=e=>["views","byCourseId",e.courseId],I=(e,t)=>{let n=e.views.byCourseId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})},b=(e,t)=>(0,r.ZP)(e,e=>{if(t){let n=e.views.byCourseId[t];n&&Object.keys(n).forEach(e=>n[e].isValid=!1)}}),g=(e,t)=>{let{view:n}=m(e.gradebookSchema,t);return!(null==n?void 0:n.isLoading)&&!(null==n?void 0:n.isValid)},y=(0,i.Lq)({byId:{},isLoading:!1,isValid:!1,paging:null,permissions:{createGradingSchemas:!1},views:{byCourseId:{}}},{[a.GRADEBOOK_SCHEMA_LOAD]:(0,i.Li)(m,h),[a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE]:(0,i.Li)(m,h),[(0,i.ok)(a.GRADEBOOK_SCHEMA_LOAD)]:function(e,t){let{schema:n}=t;if(!n)return(0,i.f2)(e,t);let o=(0,r.ZP)(e,e=>{n.id&&(e.byId[n.id]=n)});return(0,i.NV)(o,t,{viewResolver:m,viewsPathResolver:h,values:n.id?[n.id]:void 0})},[(0,i.ok)(a.GRADEBOOK_SCHEMA_PERSIST_BY_COURSE)]:function(e,t){let n=t.schema;if(!n)return(0,i.f2)(e,t);let o=(0,r.ZP)(e,e=>{if(n.id&&(e.byId[n.id]=n,n.courseId&&e.views.byCourseId)){let t=e.views.byCourseId[n.courseId];t&&Object.keys(t).forEach(e=>{let r=t[e];(null==r?void 0:r.values)&&(null==n?void 0:n.id)&&!r.values.includes(n.id)&&r.values.push(n.id)})}});return(0,i.f2)(o,t)},[(0,i.ok)(a.GRADEBOOK_SCHEMA_UPDATE_BY_COURSE)]:function(e,t){let n=t.schema,o=(0,r.ZP)(e,e=>{(null==n?void 0:n.id)&&(null==n?void 0:n.courseId)&&(e.byId[n.id]=n)});return(0,i.f2)(o,t)},[(0,i.bG)(a.GRADEBOOK_SCHEMA_LOAD)]:i.sT,[(0,i.bG)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE)]:(0,i.HT)(m,h),[(0,i.ok)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE)]:(e,t)=>{let{schema:n,paging:o,permissions:s}=t;if(!(null==n?void 0:n.byId))return(0,i.f2)(e,t);let a=(0,r.ZP)(e,e=>{for(let t of Object.keys(n.byId))e.byId[t]=n.byId[t];o&&(e.paging=o),s&&(e.permissions=s)});return(0,i.NV)(a,t,{viewResolver:m,viewsPathResolver:h,values:Object.keys(n.byId||{})})},[(0,i.ok)(a.GRADEBOOK_SCHEMA_DELETE_BY_COURSE)]:(e,t)=>{let{schemaId:n,courseId:s}=t.query,a=(0,r.ZP)(e,e=>{let t=e.views.byCourseId[s];t&&Object.keys(t).forEach(e=>{t[e]&&t[e].values&&(t[e].values=(0,o.filter)(t[e].values,e=>e!==n))}),e.byId[n]&&delete e.byId[n]});return(0,i.f2)(a,t)},[(0,i.ok)(a.GRADEBOOK_SCHEMAS_INVALIDATE_DATA)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{I(e,n)})},[c.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{I(e,n)})},[(0,i.ok)(l.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let n=t.gradebookColumn;return(null==n?void 0:n.courseId)?b(e,null==n?void 0:n.courseId):e},[(0,i.ok)(l.V.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=t.gradebookColumn,r=t.previousGradebookColumn;return(null==n?void 0:n.courseId)&&(void 0===r||n.gradingSchemaId!==r.gradingSchemaId)?b(e,n.courseId):e},[(0,i.ok)(u.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{invalidateGradingSchemas:n,courseId:r}=t;return r&&n?b(e,r):e},[(0,i.ok)(u.V.CONTENT_PERSIST)]:(e,t)=>{let n;let{contents:r,prevContent:i}=t,o=!!Object.values(r).find(e=>(void 0===n&&(n=e.courseId),e.contentHandler&&E.ZP.isLtiPlacement(e.contentHandler.toString()))?E.ZP.getGradingSchemaIdFromCourseContent(e)!==E.ZP.getGradingSchemaIdFromCourseContent(i):!!(0,p.PI)(e)&&(0,p.nP)(e)!==(0,p.nP)(i));return n&&o?b(e,n):e},[(0,i.ok)(d.Z.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>{var n,r;let i=null===(r=null===(n=null==t?void 0:t.route)||void 0===n?void 0:n.params)||void 0===r?void 0:r.courseId;return i?b(e,i):e}}),f={loadGradebookSchema:e=>(0,i.RU)(a.GRADEBOOK_SCHEMA_LOAD,async()=>({schema:await s.yx(e.courseId,e.schemaId),query:e}),{data:{query:e},condition:(t,{getState:n})=>g(n(),e)}),loadGradebookSchemasByCourseId:e=>(0,i.RU)(a.GRADEBOOK_SCHEMAS_LOAD_BY_COURSE,async()=>{try{return{schema:await s.QM(e.courseId),query:e}}catch(t){throw new i.GM(t).setData({query:e})}},{data:{query:e},condition:(t,{getState:n})=>g(n(),e)}),persistGradebookSchema:({courseId:e,schema:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_PERSIST_BY_COURSE,async()=>({schema:await s.Ew(e,t)})),updateGradebookSchema:({courseId:e,schema:t})=>(0,i.PH)(a.GRADEBOOK_SCHEMA_UPDATE_BY_COURSE,async()=>({schema:await s.ov(e,t)})),deleteGradebookSchema:e=>(0,i.PH)(a.GRADEBOOK_SCHEMA_DELETE_BY_COURSE,async()=>(await s.uV(e.courseId,e.schemaId),{query:e})),invalidateData:e=>(0,i.aU)((0,i.ok)(a.GRADEBOOK_SCHEMAS_INVALIDATE_DATA),e)},S={areGradebookSchemasLoading:(e,t)=>{var n;let{view:r}=m(e.gradebookSchema,{courseId:t});return null!==(n=null==r?void 0:r.isLoading)&&void 0!==n&&n},getGradebookSchemaById:(e,t)=>(0,o.find)(e.gradebookSchema.byId,{id:t}),getGradebookSchemasByCourseId:(e,t)=>{var n;let{view:r}=m(e.gradebookSchema,{courseId:t});return r&&null!==(n=(r.values||[]).filter(t=>void 0!==e.gradebookSchema.byId[t]).map(t=>e.gradebookSchema.byId[t]))&&void 0!==n?n:[]},isGradebookSchemaDataValid:(e,t)=>{var n;let{view:r}=m(e.gradebookSchema,{courseId:t});return null!==(n=null==r?void 0:r.isValid)&&void 0!==n&&n}}},159669:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(715729),i=n(961719);let o={GRADEBOOK_SETTINGS_LOAD:"gradebook-settings-load",GRADEBOOK_SETTINGS_UPDATE:"gradebook-settings-update"};var s=n(182267),a=n(587637);let l=(e,t,n)=>{e.byCourseId[t]={value:n,status:a.vo}},u=(e,t)=>{let n=t.getState().gradebookSettings.byCourseId[e.courseId];return(0,a.t)(null==n?void 0:n.status)},d=e=>["byCourseId",e.courseId],c=(0,i.Lq)({byCourseId:{}},{[o.GRADEBOOK_SETTINGS_LOAD]:(0,a.nt)(d,a.Em),[(0,i.ok)(o.GRADEBOOK_SETTINGS_LOAD)]:(e,t)=>{let{courseId:n,courseGradeBookSettings:i}=t;return(0,r.ZP)(e,e=>{l(e,n,i)})},[(0,i.ok)(o.GRADEBOOK_SETTINGS_UPDATE)]:(e,t)=>{let{courseId:n,courseGradeBookSettings:i}=t;return(0,r.ZP)(e,e=>{l(e,n,i)})},[(0,i.bG)(o.GRADEBOOK_SETTINGS_LOAD)]:(0,a.nt)(d,a.gp)}),E={loadGradebookSettings:e=>(0,i.RU)(o.GRADEBOOK_SETTINGS_LOAD,async()=>{try{return{courseGradeBookSettings:await (0,s.dTj)(e),courseId:e}}catch(t){throw new i.GM(t).setData({courseId:e})}},{data:{courseId:e},condition:u}),updateGradebookSettingsByCourseID:(e,t)=>(0,i.RU)(o.GRADEBOOK_SETTINGS_UPDATE,async()=>{try{return{courseGradeBookSettings:await (0,s.niG)(e,t),courseId:e}}catch(t){throw new i.GM(t).setData({courseId:e})}})},p={getGradebookSettings:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.gradebookSettings)||void 0===n?void 0:n.byCourseId)||void 0===r?void 0:r[t])||void 0===i?void 0:i.value}}},25859:function(e,t,n){"use strict";n.d(t,{N:function(){return o},V:function(){return i}});var r=n(961719);let i={GRANULAR_CONTENT_COPY_COMPLETE:"granular.content.copy.complete"},o={notifyGCCCompleted:e=>(0,r.aU)(i.GRANULAR_CONTENT_COPY_COMPLETE,{courseId:e})}},221952:function(e,t){"use strict";t.Z={GROUP_DELETE_BATCH:"group.delete.batch",GROUPS_LOAD:"groups.load",GROUPS_LOAD_BY_CONTENT_ID:"groups.load.by.content.id",GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY:"groups.load.by.content.id.by.query",GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY:"groups.load.by.group.set.id.by.query",GROUPS_LOAD_BY_QUERY:"groups.load.by.query",GROUPS_ADD:"groups.add",GROUPS_UPDATE:"groups.update",GROUP_LOAD_BY_ID:"groups.load.by.id",GROUP_MEMBERSHIPS_LOAD:"group.memberships.load",ADD_GROUP_MEMBERSHIP:"group.membership.add",REMOVE_GROUP_MEMBERSHIP:"group.membership.remove",GROUP_STUDENT_COUNT_LOAD:"group.student.count.load"}},836407:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(280284),i=n(961719),o=n(715729),s=n(182267);let a=(0,i.Lq)({byCourseId:{},isLoading:!1},{[r.V.IMPORT_GROUP_MEMBERS]:i.K4,[(0,i.ok)(r.V.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.sT)(n,t)},[(0,i.ok)(r.V.CLEAR_IMPORT_GROUP_MEMBERS_STATUS)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.FILE_UPLOAD_GROUP_MEMBERS_ERROR)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.sT)(n,t)}}),l={importGroupMembers:(e,t)=>(0,i.PH)(r.V.IMPORT_GROUP_MEMBERS,async()=>{try{return await (0,s.i7$)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupMembersStatus:e=>(0,i.aU)((0,i.ok)(r.V.CLEAR_IMPORT_GROUP_MEMBERS_STATUS),{courseId:e}),setFileUploadGroupMembersError:(e,t)=>(0,i.aU)((0,i.bG)(r.V.FILE_UPLOAD_GROUP_MEMBERS_ERROR),{courseId:e,error:t})},u={getImportGroupMembersStatus:(e,t)=>e.groupMembersImport.byCourseId[t]}},362752:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(961719),i=n(715729);let o={EXPORT_GROUP_SET:"export.group.set",CLEAR_EXPORT_GROUP_SET_STATUS:"clear.export.group.set.status",GET_EXPORTED_FILES:"get.exported.files",DELETE_EXPORTED_FILE:"delete.exported.file"};var s=n(182267);let a=(0,r.Lq)({byCourseId:{},isLoading:!1},{[o.EXPORT_GROUP_SET]:r.K4,[(0,r.ok)(o.EXPORT_GROUP_SET)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"SUCCESS",ui:{source:t.source}}});return(0,r.f2)(n,t)},[(0,r.bG)(o.EXPORT_GROUP_SET)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"ERROR",ui:{source:t.source}}});return(0,r.sT)(n,t)},[(0,r.ok)(o.CLEAR_EXPORT_GROUP_SET_STATUS)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"NONE",ui:{source:t.source}}});return(0,r.f2)(n,t)},[o.GET_EXPORTED_FILES]:r.K4,[(0,r.ok)(o.GET_EXPORTED_FILES)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={byGroupSetId:{}}),e.byCourseId[t.courseId].byGroupSetId[t.groupSetId]={files:t.payload.results,paging:t.payload.paging}});return(0,r.f2)(n,t)},[(0,r.bG)(o.GET_EXPORTED_FILES)]:r.sT,[o.DELETE_EXPORTED_FILE]:r.K4,[(0,r.ok)(o.DELETE_EXPORTED_FILE)]:r.f2,[(0,r.bG)(o.DELETE_EXPORTED_FILE)]:r.sT}),l={exportGroupSet:(e,t,n,i)=>(0,r.PH)(o.EXPORT_GROUP_SET,async()=>{try{return await (0,s.siz)(e,t,n),{courseId:e,groupSetId:t,source:i}}catch(n){throw{err:n,courseId:e,groupSetId:t,source:i}}}),clearExportGroupSetStatus:e=>(0,r.aU)((0,r.ok)(o.CLEAR_EXPORT_GROUP_SET_STATUS),{courseId:e}),getExportedFiles:(e,t,n)=>(0,r.PH)(o.GET_EXPORTED_FILES,async()=>{try{let r=await (0,s.GTb)(e,t,n);return{courseId:e,groupSetId:t,payload:r}}catch(n){throw{err:n,courseId:e,groupSetId:t}}}),deleteFile:(e,t,n)=>(0,r.PH)(o.DELETE_EXPORTED_FILE,async()=>{try{await (0,s.vWI)(e,t,n)}catch(e){throw{err:e}}})},u={getExportGroupSet:(e,t)=>e.groupSetExport.byCourseId[t]}},527242:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(280284),i=n(961719),o=n(715729),s=n(182267);let a=(0,i.Lq)({byCourseId:{},isLoading:!1},{[r.V.IMPORT_GROUP_SET]:i.K4,[(0,i.ok)(r.V.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.sT)(n,t)},[(0,i.ok)(r.V.CLEAR_IMPORT_GROUP_SET_STATUS)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.f2)(n,t)},[(0,i.bG)(r.V.FILE_UPLOAD_GROUP_SET_ERROR)]:(e,t)=>{let n=(0,o.ZP)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.sT)(n,t)}}),l={importGroupSet:(e,t)=>(0,i.PH)(r.V.IMPORT_GROUP_SET,async()=>{try{return await (0,s.i7$)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupSetStatus:e=>(0,i.aU)((0,i.ok)(r.V.CLEAR_IMPORT_GROUP_SET_STATUS),{courseId:e}),setFileUploadGroupSetError:(e,t)=>(0,i.aU)((0,i.bG)(r.V.FILE_UPLOAD_GROUP_SET_ERROR),{courseId:e,error:t})},u={getImportGroupSetStatus:(e,t)=>e.groupSetImport.byCourseId[t]}},280284:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={IMPORT_GROUP_SET:"import.group.set",CLEAR_IMPORT_GROUP_SET_STATUS:"clear.import.group.set",FILE_UPLOAD_GROUP_SET_ERROR:"file.upload.group.set.error",IMPORT_GROUP_MEMBERS:"import.group.members",CLEAR_IMPORT_GROUP_MEMBERS_STATUS:"clear.import.group.members.status",FILE_UPLOAD_GROUP_MEMBERS_ERROR:"file.upload.group.members.error"}},670226:function(e,t,n){"use strict";n.d(t,{I6:function(){return E},Nw:function(){return h},Ys:function(){return I}});var r=n(715729),i=n(276635),o=n(961719),s=n(988765),a=n(134129),l=n(494615),u=n(441642),d=n(719784),c=n(778510);let E=(0,o.Lq)({institutionBrands:{byId:{}},brandAssociations:{byId:{}},brandHosts:{hostnames:[],paging:null,isLoading:!1},paging:null,permissions:null,isLoading:!1},{[u.V.INSTITUTION_BRANDS_LOAD]:o.K4,[(0,o.ok)(u.V.INSTITUTION_BRANDS_LOAD)]:(e,t)=>{if(!t||!t.institutionBrands)return(0,o.f2)(e,t);let{permissions:n,paging:i}=t,s=m(e,t);return(0,r.ZP)(s,e=>{e.isLoading=!1,e.paging=i,e.permissions=n})},[(0,o.bG)(u.V.INSTITUTION_BRANDS_LOAD)]:o.sT,[u.V.INSTITUTION_BRAND_LOAD]:o.K4,[(0,o.ok)(u.V.INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=m(e,t)),(0,o.f2)(e,t)),[(0,o.bG)(u.V.INSTITUTION_BRAND_LOAD)]:o.sT,[(0,o.ok)(u.V.INSTITUTION_BRAND_CREATE)]:(e,t)=>m(e,t),[(0,o.bG)(u.V.INSTITUTION_BRAND_CREATE)]:o.sT,[u.V.INSTITUTION_BRANDS_UPDATE]:(e,t)=>{let{ultraBranding:n,brandAssociations:o}=t,s=n.id,a=e;return a=(0,r.ZP)(a,e=>{e.institutionBrands.byId[s]||(e.institutionBrands.byId[s]={}),e.institutionBrands.byId[s].api||(e.institutionBrands.byId[s].api={}),e.institutionBrands.byId[s].api.isUpdating=!0}),(0,i.filter)(e.brandAssociations.byId,{brandId:s}).forEach(e=>{a=(0,i.find)(o,{id:e.id})?(0,r.ZP)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isUpdating=!0}):(0,r.ZP)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isDeleting=!0})}),a},[(0,o.ok)(u.V.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{institutionBrands:n,brandAssociations:o}=t,s=Object.keys(n.byId)[0],a=e,l=(0,i.chain)(e.brandAssociations.byId).filter({brandId:s}).filter(e=>!o.byId[e.id]).value();return m(a=(0,r.ZP)(a,e=>{l.forEach(t=>{delete e.brandAssociations.byId[t.id]})}),t)},[(0,o.bG)(u.V.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{brandWithAssociations:n}=t,s=e;if(n){let t=n.ultraBranding.id,o=(0,i.filter)(e.brandAssociations.byId,{brandId:t});s=(0,r.ZP)(s,e=>{o.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api={isDeleting:!1,isUpdating:!1}}),e.institutionBrands.byId[t]||(e.institutionBrands.byId[t]={}),e.institutionBrands.byId[t].api||(e.institutionBrands.byId[t].api={}),e.institutionBrands.byId[t].api.isUpdating=!1})}return(0,o.sT)(s,t)},[u.V.INSTITUTION_BRAND_DELETE]:(e,t)=>{let{brandId:n}=t,o=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.ZP)(e,e=>{o.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!0}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!0})},[(0,o.ok)(u.V.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,o=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.ZP)(e,e=>{o.forEach(t=>{delete e.brandAssociations.byId[t.id]}),delete e.institutionBrands.byId[n]})},[(0,o.bG)(u.V.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,s=(0,i.filter)(e.brandAssociations.byId,{brandId:n}),a=e;return a=(0,r.ZP)(a,e=>{s.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!1}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!1}),(0,o.sT)(a,t)},[u.V.DEFAULT_INSTITUTION_BRAND_LOAD]:o.K4,[(0,o.ok)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=m(e,t)),(0,o.f2)(e,t)),[(0,o.bG)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD)]:o.sT,[u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!0}),[(0,o.ok)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>{if(!t||!t.hostnames)return(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!1});let{hostnames:n,paging:i}=t;return(0,r.ZP)(e,e=>{e.brandHosts.hostnames=n,e.brandHosts.paging=i,e.brandHosts.isLoading=!1})},[(0,o.bG)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.brandHosts.isLoading=!1})}),p=e=>(0,i.find)(e.institutionBrand.institutionBrands.byId,{isDefault:!0}),m=(e,t)=>{let{institutionBrands:n,brandAssociations:i}=t;return(0,r.ZP)(e,e=>{Object.keys(n.byId).forEach(t=>{let r={...n.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.institutionBrands.byId[r.id]=r}),Object.keys(i.byId).forEach(t=>{let n={...i.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.brandAssociations.byId[n.id]=n})})},h={createBrand:e=>(0,o.PH)(u.V.INSTITUTION_BRAND_CREATE,()=>(0,s.Vb)(e).catch(t=>{throw{err:t,brandWithAssociations:e}})),updateBrand:e=>(0,o.PH)(u.V.INSTITUTION_BRANDS_UPDATE,()=>(0,s.yL)(e.ultraBranding.id,e).catch(t=>{throw{err:t,brandWithAssociations:e}}),e),fetchInstitutionBrand:e=>(0,o.c3)((t,n)=>{var r;return t((0,o.aU)(u.V.INSTITUTION_BRAND_LOAD)),((r=n(),I.getInstitutionBrandById(r,e))?Promise.resolve(null):(0,s.gM)(e).catch(t=>{throw{err:t,brandId:e}})).then(e=>t((0,o.aU)((0,o.ok)(u.V.INSTITUTION_BRAND_LOAD),e))).catch(e=>{let n=(0,d.Gt)(e);if(t((0,o.aU)((0,o.bG)(u.V.INSTITUTION_BRAND_LOAD),e)),!(0,c.Kn)(n,[a.oji.NotFound]))return t((0,o.aU)((0,o.ok)(l.Z.APP_ERROR),{error:n})),null;throw n.originalException})}),fetchInstitutionBrands:()=>(0,o.PH)(u.V.INSTITUTION_BRANDS_LOAD,e=>null!=e().institutionBrand.paging?Promise.resolve(null):(0,s.N3)().catch(e=>{throw{err:e}})),deleteInstitutionBrand:e=>(0,o.PH)(u.V.INSTITUTION_BRAND_DELETE,()=>(0,s.GN)(e).then(()=>({brandId:e})).catch(t=>{throw{err:t,brandId:e}}),{brandId:e}),fetchDefaultInstitutionBrand:()=>(0,o.PH)(u.V.DEFAULT_INSTITUTION_BRAND_LOAD,e=>{var t;return(t=e(),I.getDefaultInstitutionBrand(t))?Promise.resolve(null):(0,s.gM)("default").catch(e=>{throw{err:e}})}),fetchInstitutionBrandHostnames:()=>(0,o.PH)(u.V.INSTITUTION_BRAND_HOSTNAMES_LOAD,e=>null!=e().institutionBrand.brandHosts.paging?Promise.resolve(null):(0,s.k9)().catch(e=>{throw{err:e}}))},I={getInstitutionBrandById:(e,t)=>t===u.v?p(e):(0,i.find)(e.institutionBrand.institutionBrands.byId,{id:t}),getAssociationsByBrandId:(e,t)=>{let n=p(e),r=t===u.v?n&&n.id:t;return(0,i.filter)(e.institutionBrand.brandAssociations.byId,{brandId:r})},getAllAssociationsByBrandId:e=>(0,i.groupBy)(e.institutionBrand.brandAssociations.byId,"brandId"),getDefaultInstitutionBrand:e=>p(e)}},441642:function(e,t,n){"use strict";n.d(t,{V:function(){return r},v:function(){return i}});let r={INSTITUTION_BRAND_CREATE:"institution.brand.create",INSTITUTION_BRANDS_UPDATE:"institution.brand.update",INSTITUTION_BRAND_DELETE:"institution.brand.delete",INSTITUTION_BRAND_LOAD:"institution.brand.load",INSTITUTION_BRANDS_LOAD:"institution.brands.load",DEFAULT_INSTITUTION_BRAND_LOAD:"institution.brands.default.load",INSTITUTION_BRAND_HOSTNAMES_LOAD:"institution.brand.hostnames.load",INSTITUTION_CUSTOM_CSS_UPSERT:"institution.custom.css.upsert"},i="default"},624870:function(e,t,n){"use strict";n.d(t,{Nw:function(){return c},I6:function(){return u},Ys:function(){return E}});var r=n(715729),i=n(276635),o=n(961719),s=n(642438),a=n(441642);let l={INSTITUTION_ROLE_LOAD:"institution.role.load",INSTITUTION_ROLES_LOAD:"institution.roles.load"},u=(0,o.Lq)({institutionRoles:{byId:{}},paging:null,isLoading:!1},{[l.INSTITUTION_ROLES_LOAD]:o.K4,[(0,o.ok)(l.INSTITUTION_ROLES_LOAD)]:(e,t)=>{if(!t||!t.institutionRoles)return(0,o.f2)(e,t);let{institutionRoles:n,paging:i}=t,s=e;return Object.keys(n.byId).forEach(e=>{let t={...n.byId[e],api:{isUpdating:!1,isDeleting:!1}};s=(0,r.ZP)(s,e=>{e.institutionRoles.byId[t.id]=t})}),(0,r.ZP)(s,e=>{e.isLoading=!1,e.paging=i})},[(0,o.bG)(l.INSTITUTION_ROLES_LOAD)]:o.sT,[l.INSTITUTION_ROLE_LOAD]:o.K4,[(0,o.ok)(l.INSTITUTION_ROLE_LOAD)]:(e,t)=>{if(!t||!t.institutionRole)return(0,o.f2)(e,t);let{institutionRole:n}=t;return(0,o.f2)(e,t,{institutionRoles:{byId:(0,r.ZP)(e.institutionRoles.byId,e=>{e[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})}})},[(0,o.bG)(l.INSTITUTION_ROLE_LOAD)]:o.sT,[(0,o.ok)(a.V.INSTITUTION_BRANDS_LOAD)]:d,[(0,o.ok)(a.V.INSTITUTION_BRAND_LOAD)]:d});function d(e,t){if(!t||!t.institutionRoles)return e;let{institutionRoles:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.ZP)(i,t=>{t.institutionRoles.byId[e]={...n[e],api:{isUpdating:!1,isDeleting:!1}}})}),i}let c={fetchInstitutionRole:e=>(0,o.PH)(l.INSTITUTION_ROLE_LOAD,t=>{var n;return(n=t(),E.getInstitutionRoleById(n,e))?Promise.resolve(null):(0,s.pS)(e).then(e=>({institutionRole:e})).catch(e=>{throw{err:e}})}),fetchInstitutionRoles:()=>(0,o.PH)(l.INSTITUTION_ROLES_LOAD,e=>null!=e().institutionRole.paging?Promise.resolve(null):(0,s.B)().then(e=>e).catch(e=>{throw{err:e}}))},E={getInstitutionRoleById:(e,t)=>(0,i.find)(e.institutionRole.institutionRoles.byId,{id:t}),getAllInstitutionRolesById:e=>e.institutionRole.institutionRoles.byId}},954263:function(e,t,n){"use strict";n.d(t,{Nw:function(){return I},I6:function(){return h},Ys:function(){return b}});var r=n(961719);let i={KNOWLEDGE_CHECK_METRIC_LOAD:"knowledge-check-metric.load"};var o=n(134129),s=n(715729),a=n(537672);async function l(e,t){return(0,o.Sf5)(a.nP,{courseId:e,columnId:t})}var u=n(276635),d=n(374899);let c=(e,t)=>{let n=e.views.byColumnId[t.columnId]||{},i=Object.keys(n).find(e=>{let r=n[e];return(0,u.isEqual)(r.query,t)});return i?{id:i,view:n[i]}:r.LW},E=e=>["views","byColumnId",e.columnId],p=(e,t)=>{let n=e.views.byColumnId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})},m=(e,t)=>{let{view:n}=c(t.knowledgeCheckMetric,e),r=t.knowledgeCheckMetric.byColumnId[e.columnId];return!(null==n?void 0:n.isLoading)&&(!r||!(null==n?void 0:n.isValid))},h=(0,r.Lq)({byColumnId:{},views:{byColumnId:{}}},{[i.KNOWLEDGE_CHECK_METRIC_LOAD]:(0,r.Li)(c,E),[(0,r.ok)(i.KNOWLEDGE_CHECK_METRIC_LOAD)]:(e,t)=>{let{query:n,knowledgeCheckMetric:i}=t,o=(0,s.ZP)(e,e=>{e.byColumnId[n.columnId]=i});return(0,r.NV)(o,t,{viewResolver:c,viewsPathResolver:E,values:[n.columnId]})},[(0,r.bG)(i.KNOWLEDGE_CHECK_METRIC_LOAD)]:(0,r.HT)(c,E),[(0,r.cI)(i.KNOWLEDGE_CHECK_METRIC_LOAD)]:(e,t)=>{let{query:n}=t,i=(0,s.ZP)(e,e=>{e.views.byColumnId[n.columnId]&&delete e.views.byColumnId[n.columnId]});return(0,r.f2)(i,t)},[(0,r.ok)(d.V.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t,i=(0,s.ZP)(e,e=>{n&&p(e,n)});return(0,r.f2)(i,t)}}),I={loadKnowledgeCheckMetric:e=>{let{columnId:t,courseId:n}=e;return(0,r.RU)(i.KNOWLEDGE_CHECK_METRIC_LOAD,async()=>{try{return{knowledgeCheckMetric:await l(n,t),query:e}}catch(t){throw new r.GM(t).setData({query:e})}},{allowedErrors:[o.oji.Forbidden],data:{query:e},condition:(t,{getState:n})=>m(e,n())})}},b={getKnowledgeCheckMetric:(e,t)=>e.knowledgeCheckMetric.byColumnId[t]}},937265:function(e,t,n){"use strict";n.d(t,{Nw:function(){return m},I6:function(){return p},Ys:function(){return h}});var r=n(715729),i=n(276635),o=n(187680);async function s(e){return null==e.locale&&(e.locale="en_US"),(0,o.U2)((0,o.Q2)("/v1/locales/%locale%?exactMatch=false",e))}var a=n(134129),l=n(494615),u=n(961719);let d={LOCALE_SETTINGS_LOAD:"locale.load"};var c=n(719784),E=n(219034);let p=(0,u.Lq)({byLocale:{},isLoading:!1},{[d.LOCALE_SETTINGS_LOAD]:(e,t)=>(0,u.K4)(e,t),[(0,u.ok)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{localeSettings:n}=t;e.byLocale[n.languageTag]=n});return(0,u.f2)(n,t)},[(0,u.bG)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.sT)(e,t),[(0,u.cI)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.f2)(e,t)}),m={getLocaleSettings:e=>(0,u.c3)((t,n)=>{var r,o;return(r=n(),o=e.locale,i.isEmpty(h.getLocaleSettings(r,o))&&!h.isLocaleLoading(r))?(t((0,u.aU)(d.LOCALE_SETTINGS_LOAD)),s(e).then(e=>(e&&(e.calendar.firstDayOfWeek=a.r5d[e.calendar.firstDayOfWeek]),t((0,u.aU)((0,u.ok)(d.LOCALE_SETTINGS_LOAD),{localeSettings:e})),{localeSettings:e})).catch(e=>{let n=(0,c.Gt)(e);(0,E.K)(n,[a.oji.NotFound])?t((0,u.aU)((0,u.cI)(d.LOCALE_SETTINGS_LOAD))):(t((0,u.aU)((0,u.bG)(d.LOCALE_SETTINGS_LOAD),e)),t((0,u.aU)((0,u.ok)(l.Z.APP_ERROR),{error:e})))})):Promise.resolve(null)})},h={getLocaleSettings:(e,t)=>i.get(e,["locale","byLocale",t],{}),isLocaleLoading:e=>i.get(e,["locale","isLoading"])}},967091:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(276635),i=n(715729),o=n(961719),s=n(134129),a=n(537672);let l={DOMAINS_LOAD:"lti.domains.load",DOMAIN_CREATE:"lti.domain.create"};var u=n(503715);let d=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},c=()=>["views"],E=(0,o.Lq)({views:{},byDomainId:{}},{[l.DOMAINS_LOAD]:(0,o.Li)(d,c),[(0,o.bG)(l.DOMAINS_LOAD)]:(0,o.HT)(d,c),[(0,o.ok)(l.DOMAINS_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{t.data.results.forEach(t=>{e.byDomainId[t.id]=t})});return(0,o.NV)(n,t,{viewResolver:d,viewsPathResolver:c,paging:t.data.paging,values:t.data.results.map(e=>e.id)})}}),p={loadDomains:e=>(0,o.c3)(async t=>{try{t((0,o.aU)(l.DOMAINS_LOAD,{query:e}));let n=await (0,s.QK1)(a.nP,e);return t((0,o.aU)((0,o.ok)(l.DOMAINS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,o.aU)((0,o.bG)(l.DOMAINS_LOAD),{query:e,error:n})),n}}),createDomain:e=>(0,o.c3)(async t=>{try{t((0,o.aU)(l.DOMAIN_CREATE,{data:e}));let n=await (0,s.rjU)(a.nP,e);return t((0,o.aU)((0,o.ok)(l.DOMAIN_CREATE),{data:n})),n}catch(e){throw t((0,o.aU)((0,o.bG)(l.DOMAIN_CREATE),e)),e}})},m={shouldLoadView:(e,t)=>{let n=d(e.ltiDomain,t);return!n.view||!n.view.isValid&&!n.view.isLoading},domains:(0,u.U)((e,t)=>{var n,r,i;return null!==(i=null===(r=null===(n=d(e.ltiDomain,t).view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiDomain.byDomainId[t]))&&void 0!==i?i:[]},e=>e)}},206668:function(e,t,n){"use strict";n.d(t,{Nw:function(){return I},I6:function(){return m},Ys:function(){return h}});var r=n(276635),i=n(715729),o=n(961719),s=n(134129),a=n(537672);let l={PLACEMENTS_LOAD:"lti.placements.load",PLACEMENT_CREATE:"lti.placement.create",ASSET_PROCESSOR_LINK_UPDATE:"lti.placement.processor.update",INVALIDATE_ASSET_PROCESSOR:"lti.placement.processor.invalidate"};var u=n(494615),d=n(503715);let c=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},E=()=>["views"],p=(e,t)=>{let n=c(e,t);n.view&&(n.view.isValid=!1)},m=(0,o.Lq)({views:{},byPlacementId:{},assetProcessorLinks:{byContentId:{}}},{[l.PLACEMENTS_LOAD]:(0,o.Li)(c,E),[(0,o.bG)(l.PLACEMENTS_LOAD)]:(0,o.HT)(c,E),[(0,o.ok)(l.PLACEMENTS_LOAD)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{t.data.results.forEach(t=>{var n;e.byPlacementId[t.id]=t,null===(n=t.processorLinks)||void 0===n||n.forEach(n=>{e.assetProcessorLinks.byContentId[n.contentId]={...n,placementId:t.id}})})});return(0,o.NV)(n,t,{viewResolver:c,viewsPathResolver:E,paging:t.data.paging,values:t.data.results.map(e=>e.id)})},[(0,o.ok)(l.ASSET_PROCESSOR_LINK_UPDATE)]:(e,t)=>(0,i.ZP)(e,e=>{let n=Object.values(e.byPlacementId).find(e=>e.handle===t.data.ltiPlacementHandle);n&&(e.assetProcessorLinks.byContentId[t.data.contentId]={...t.data,placementId:n.id})}),[(0,o.ok)(l.INVALIDATE_ASSET_PROCESSOR)]:(e,t)=>(0,i.ZP)(e,e=>{p(e,{pathParams:t.query})})}),h={shouldLoadView:(e,t)=>{let n=c(e.ltiPlacement,t);return!n.view||!n.view.isValid&&!n.view.isLoading},getPlacementsByQuery:(0,d.U)((e,t)=>{var n,r,i;return null!==(i=null===(r=null===(n=c(e.ltiPlacement,t).view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiPlacement.byPlacementId[t]))&&void 0!==i?i:[]},e=>e),getPlacementById:(e,t)=>e.ltiPlacement.byPlacementId[t],getAssetProcessorLinkByContentId:(e,t)=>e.ltiPlacement.assetProcessorLinks.byContentId[t]},I={loadPlacements:e=>(0,o.c3)(async(t,n)=>{if(!h.shouldLoadView(n(),e))return{query:e,data:h.getPlacementsByQuery(n(),e)};try{t((0,o.aU)(l.PLACEMENTS_LOAD,{query:e}));let n=await (0,s.yZB)(a.nP,e);return t((0,o.aU)((0,o.ok)(l.PLACEMENTS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,o.aU)((0,o.bG)(l.PLACEMENTS_LOAD),{query:e,error:n})),t((0,o.aU)((0,o.ok)(u.Z.APP_ERROR),{error:n})),n}}),loadAssetProcessors:e=>(0,o.c3)(async(t,n)=>{if(!h.shouldLoadView(n(),{pathParams:e}))return{pathParams:e,data:h.getPlacementsByQuery(n(),{pathParams:e})};try{t((0,o.aU)(l.PLACEMENTS_LOAD,{query:{pathParams:e}}));let n=await (0,s.p6X)(a.nP,e);return t((0,o.aU)((0,o.ok)(l.PLACEMENTS_LOAD),{query:{pathParams:e},data:n})),{pathParams:e,data:n}}catch(n){throw t((0,o.aU)((0,o.bG)(l.PLACEMENTS_LOAD),{query:{pathParams:e},error:n})),t((0,o.aU)((0,o.ok)(u.Z.APP_ERROR),{error:n})),n}}),updateAssetProcessorLink:(e,t,n,r)=>(0,o.PH)(l.ASSET_PROCESSOR_LINK_UPDATE,async()=>({data:await (0,s.wFA)(a.nP,{courseId:e,contentId:t,placementHandle:n},r)})),invalidateAssetProcessor:e=>(0,o.aU)((0,o.ok)(l.INVALIDATE_ASSET_PROCESSOR),{query:e}),createPlacement:e=>(0,o.c3)(async t=>{try{t((0,o.aU)(l.PLACEMENT_CREATE,{data:e}));let n=await (0,s._Bo)(a.nP,e);t((0,o.aU)((0,o.ok)(l.PLACEMENT_CREATE),{data:n}))}catch(e){t((0,o.aU)((0,o.bG)(l.PLACEMENT_CREATE),e))}})}},961461:function(e,t,n){"use strict";n.d(t,{Nw:function(){return h},I6:function(){return m},Ys:function(){return I}});var r=n(715729),i=n(961719),o=n(187680);let s=e=>{let t={};return e.forEach(e=>{let n=e.context.toString()+"_"+e.source+"_"+e.event;t[n]?t[n].distributionMethods.push({method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}):t[n]={context:e.context,source:e.source,event:e.event,distributionMethods:[{method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}]}}),Object.values(t)},a=e=>{let t=[];return e.forEach(e=>{e.distributionMethods&&e.distributionMethods.forEach(n=>{let r={context:e.context,source:e.source,event:e.event,...n};t.push(r)})}),t},l=e=>{let t=e.courseId||"",n=e.ownerId||"";return e.context.toString()+"_"+e.source+"_"+e.event+"_"+e.method+"_"+t+"_"+n},u=e=>e.reduce((e,t)=>(e[l(t)]=t,e),{}),d="/public/v1/administration/notifications/settings";async function c(){let e=await (0,o.U2)((0,o.Q2)(d,{})),t=e.results;for(;e.paging&&e.paging.nextPage;)e=await (0,o.U2)("/"+e.paging.nextPage.split("/").slice(3).join("/")),t=t.concat(e.results);return{notificationMethodSettings:u(a(t))}}async function E(e){return{notificationMethodSettings:u(a((await (0,o.r$)((0,o.Q2)(d,{}),s(e))).results))}}let p={NOTIFICATION_METHOD_SETTINGS_LOAD_ALL:"notification.method.settings.load.all",NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE:"notification.method.settings.multiple.update"},m=(0,i.Lq)({byId:{},isLoading:!1},{[p.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL]:i.K4,[(0,i.ok)(p.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL)]:(e,t)=>{let n=e;return t.notificationMethodSettings&&(n=(0,r.ZP)(n,e=>{Object.entries(t.notificationMethodSettings).forEach(t=>{e.byId[t[0]]=t[1]})})),(0,i.f2)(n,t)},[(0,i.bG)(p.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL)]:i.sT,[p.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE]:(e,t)=>{let{toUpdate:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!0})})},[(0,i.ok)(p.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE)]:(e,t)=>{let{notificationMethodSettings:n}=t;return(0,r.ZP)(e,e=>{Object.entries(n).forEach(t=>{e.byId[t[0]]=t[1],e.byId[t[0]].api||(e.byId[t[0]].api={}),e.byId[t[0]].api.isUpdating=!1})})},[(0,i.bG)(p.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE)]:(e,t)=>{let{toUpdate:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!1})})}}),h={loadAdminNotificationMethodSettings:()=>(0,i.PH)(p.NOTIFICATION_METHOD_SETTINGS_LOAD_ALL,e=>b(e())?c():Promise.resolve(null)),persistAdminNotificationMethodSettings:e=>(0,i.PH)(p.NOTIFICATION_METHOD_SETTINGS_MULTIPLE_UPDATE,()=>E(e).then(e=>({...e})).catch(t=>{throw{toUpdate:e,err:t}}),{toUpdate:e})},I={getAdminNotificationMethodSettings:e=>Object.values(e.notificationMethodSetting.byId).filter(e=>!e.courseId&&!e.ownerId),isLoading:e=>e.notificationMethodSetting.isLoading},b=e=>0===I.getAdminNotificationMethodSettings(e).length},766275:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a},Ys:function(){return u}});var r=n(715729),i=n(961719);let o={PARTNER_CLOUD_SETTINGS_LOAD:"partner.cloud.settings.load"};var s=n(182267);let a=(0,i.Lq)({byId:{},isLoading:!1},{[o.PARTNER_CLOUD_SETTINGS_LOAD]:i.K4,[(0,i.ok)(o.PARTNER_CLOUD_SETTINGS_LOAD)]:(e,t)=>{let{providerId:n,settings:o}=t,s=e;return n&&o&&(s=(0,r.ZP)(e,e=>{e.byId[n]={settings:o}})),(0,i.f2)(s,t)},[(0,i.bG)(o.PARTNER_CLOUD_SETTINGS_LOAD)]:i.sT}),l={loadProviderSettings:e=>(0,i.PH)(o.PARTNER_CLOUD_SETTINGS_LOAD,t=>{var n;return(n=t(),u.getProviderSettingsById(n,e))?Promise.resolve(null):(0,s.iyb)(e).then(t=>({providerId:e,settings:t}))})},u={getProviderSettingsById:(e,t)=>{var n;return null===(n=e.partnerCloud.byId[t])||void 0===n?void 0:n.settings}}},554552:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(961719),o=n(499832),s=n(134129);let a={PROCTORING_SERVICES_LOAD:"proctoringServices.load"},l=e=>e.reduce((e,t)=>({...e,[t.handle]:t}),{}),u=(0,i.Lq)({byHandle:{},isLoading:!1},{[a.PROCTORING_SERVICES_LOAD]:i.K4,[(0,i.ok)(a.PROCTORING_SERVICES_LOAD)]:(e,t)=>{let{proctoringServices:n}=t;if(null===n)return(0,i.f2)(e,t);let o=(0,r.ZP)(e,e=>{e.byHandle=n});return(0,i.f2)(o,t)},[(0,i.bG)(a.PROCTORING_SERVICES_LOAD)]:i.sT}),d={loadProctoringServices:()=>(0,i.PH)(a.PROCTORING_SERVICES_LOAD,async e=>{if(0!==Object.keys(e().proctoringServices.byHandle).length)return Promise.resolve({proctoringServices:c.getProctoringServices(e())});try{let e=await (0,o.tt)();return{proctoringServices:l(e)}}catch(e){throw{err:e}}}),setProctoringServicesInStore:e=>(0,i.aU)((0,i.ok)(a.PROCTORING_SERVICES_LOAD),{proctoringServices:l(e)})},c={getAvailableProctoringServices:e=>Object.values(e.proctoringServices.byHandle).filter(e=>e.availability.available===s.y67.Yes),getProctoringServices:e=>Object.values(e.proctoringServices.byHandle)}},639605:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(715729),i=n(276635),o=n(961719),s=n(76967);let a=(0,o.Lq)({isLoading:!1,byId:{}},{[s.V.QUESTION_DETAILS_LOAD]:o.K4,[(0,o.ok)(s.V.QUESTION_DETAILS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{questionDetails:n}=t;e.byId=n});return(0,o.f2)(n,t)},[(0,o.bG)(s.V.QUESTION_DETAILS_LOAD)]:o.sT}),l={},u={getByAnalysisId:(e,t)=>i.filter(e.questionAnalysis.questionDetails.byId,{analysisId:t})}},76967:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_DETAILS_LOAD:"question-analysis.question-details.load"}},615606:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(715729),i=n(276635),o=n(961719),s=n(494615),a=n(76967),l=n(134129),u=n(182267),d=n(778510);let c={REPORTS_LOAD:"question-analysis.reports.load",REPORT_CREATE:"question-analysis.reports.create"},E=(0,o.Lq)({byId:{},isLoading:!1},{[c.REPORTS_LOAD]:o.K4,[(0,o.ok)(c.REPORTS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{reports:n}=t;n&&(e.byId=n)});return(0,o.f2)(n,t)},[(0,o.bG)(c.REPORTS_LOAD)]:o.sT,[(0,o.ok)(c.REPORT_CREATE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{report:n}=t;e.byId[n.id]=n});return(0,o.f2)(n,t)},[(0,o.bG)(c.REPORT_CREATE)]:o.sT}),p={fetchReports:e=>(0,o.c3)((t,n)=>(t((0,o.aU)(c.REPORTS_LOAD)),(0,u.RC3)(e).then(e=>(t((0,o.aU)((0,o.ok)(c.REPORTS_LOAD),e)),t((0,o.aU)((0,o.ok)(a.V.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{t((0,o.aU)((0,o.ok)(s.Z.APP_ERROR),{error:e})),t((0,o.aU)((0,o.bG)(c.REPORTS_LOAD))),t((0,o.aU)((0,o.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),fetchReport:(e,t)=>(0,o.c3)((n,r)=>!function(e,t){let n=m.getMostRecentByAssessmentId(e,t);return!h(e)&&(null==n||n.analysisReportDetails.state===l.dPk.InProgress)}(r(),t)?Promise.resolve(null):(n((0,o.aU)(c.REPORTS_LOAD)),(0,u.OH6)(e,t).then(e=>(n((0,o.aU)((0,o.ok)(c.REPORTS_LOAD),e)),n((0,o.aU)((0,o.ok)(a.V.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,o.aU)((0,o.ok)(s.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(c.REPORTS_LOAD))),n((0,o.aU)((0,o.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),fetchMultipleReports:(e,t)=>(0,o.c3)((n,r)=>h(r())?Promise.resolve(null):(n((0,o.aU)(c.REPORTS_LOAD)),(0,u.KFz)(e,t).then(e=>(n((0,o.aU)((0,o.ok)(c.REPORTS_LOAD),e)),n((0,o.aU)((0,o.ok)(a.V.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,o.aU)((0,o.ok)(s.Z.APP_ERROR),{error:e})),n((0,o.aU)((0,o.bG)(c.REPORTS_LOAD))),n((0,o.aU)((0,o.bG)(a.V.QUESTION_DETAILS_LOAD)))}))),generateReport:(e,t)=>(0,o.PH)(c.REPORT_CREATE,()=>(0,u.OEz)(e,t).then(e=>({...e})).catch(e=>{throw{err:(0,d.xh)(e)}}))},m={getById:(e,t)=>i.find(e.questionAnalysis.reports.byId,{id:t}),getMostRecentByAssessmentId:(e,t)=>{let n=i.filter(e.questionAnalysis.reports.byId,{assessmentId:t});return i.reduce(n,(e,t)=>{let n=e.analysisReportDetails.executionTimeStamp,r=t.analysisReportDetails.executionTimeStamp;return null==e||r>n?t:e})},getByCourseId:(e,t)=>i.filter(e.questionAnalysis.reports.byId,{courseId:t})};function h(e){return e.questionAnalysis.reports.isLoading}},289143:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(182267),i=n(961719),o=n(653071);let s={sendChatMessage(e,t,n,s){return(0,i.RU)(o.V.QUESTION_ATTEMPT_CHAT_MESSAGE_SEND,async i=>{let o=await (0,r.hV9)(e,t,n,s);return{...i,attempt:o}},{data:{courseId:e,attemptId:t,questionAttemptId:n,message:s}})},retryChatMessage(e,t,n){return(0,i.RU)(o.V.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY,async i=>{let o=await (0,r.wV4)(e,t,n);return{...i,attempt:o}},{data:{courseId:e,attemptId:t,questionAttemptId:n}})},pollChatAttempt(e,t,n,s){return(0,i.RU)(o.V.QUESTION_ATTEMPT_CHAT_POLL,async o=>{try{let i=await (0,r.mQn)(e,t,n,s);return{...o,attempt:{...i,task:void 0}}}catch(e){throw new i.GM(e).setData({...o})}},{data:{courseId:e,attemptId:t,questionAttemptId:n}})}}},653071:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_ATTEMPT_CHAT_MESSAGE_SEND:"question.attempt.chat.message.send",QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY:"question.attempt.chat.message.retry",QUESTION_ATTEMPT_CHAT_POLL:"question.attempt.chat.poll"}},345430:function(e,t,n){"use strict";n.d(t,{Nw:function(){return S},I6:function(){return y},Ys:function(){return _}});var r=n(715729),i=n(961719),o=n(560985);let s=e=>e.questionAttempt.questionAttemptsById,a=(0,o.P1)(s,(e,t)=>t,(e,t)=>e[t]),l=(0,o.P1)(s,(e,t)=>e.questionAttempt.questionAttemptsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>e[t]));var u=n(134129),d=n(216501),c=n(736352),E=n(305870),p=n(374899),m=n(653071);let h=(e,t,{initialize:n=!0,preserveAttemptIdOrder:r=!1}={})=>{let i=(e,t,i)=>{if(!t||!i)return;let o=e.questionAttemptsByAttemptIds[t];if(o){let e=o.indexOf(i);r&&-1!==e?(o.splice(e,1),o.push(i)):-1===e&&o.push(i)}else n&&(e.questionAttemptsByAttemptIds[t]=[i])};"groupAttemptId"in t&&i(e,t.groupAttemptId,t.id),i(e,t.attemptId,t.id)},I=(e,t,n,{initialize:i=!0,preserveAttemptIdOrder:o=!1}={})=>(0,r.ZP)(e,e=>{t.forEach(t=>{var r;let s=e.questionAttemptsById[t.id];h(e,t,{initialize:i,preserveAttemptIdOrder:o}),!t.questionType&&(null===(r=t.question)||void 0===r?void 0:r.questionType)&&(t.questionType=t.question.questionType);let a=(null!=n?n:null==s?void 0:s.api)&&{...null==s?void 0:s.api,...n};e.questionAttemptsById[t.id]={...s,...t,api:a}})});function b(e,t){let n=e.questionAttemptsById[t];return n?I(e,[{...n,task:void 0}]):e}let g=(e,t)=>({...e,id:e.id||"",attemptId:t||""}),y=(0,i.Lq)({questionAttemptsById:{},questionAttemptsByAttemptIds:{}},{[(0,i.ok)(c.V.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:n}=t;return I(e,[n])},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return I(e,n)},[(0,i.ok)(c.V.QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{data:n}=t;return I(e,[n])},[(0,i.ok)(m.V.QUESTION_ATTEMPT_CHAT_MESSAGE_SEND)]:(e,t)=>{let{attempt:n}=t;return I(e,[n])},[(0,i.ok)(m.V.QUESTION_ATTEMPT_CHAT_POLL)]:(e,t)=>{let{attempt:n}=t;return I(e,[n])},[(0,i.bG)(m.V.QUESTION_ATTEMPT_CHAT_POLL)]:(e,t)=>{let{questionAttemptId:n}=t;return b(e,n)},[(0,i.ok)(m.V.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY)]:(e,t)=>{let{attempt:n}=t;return I(e,[n])},[(0,i.bG)(m.V.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY)]:(e,t)=>{let{questionAttemptId:n}=t;return b(e,n)},[E.V.GRADED_QUESTION_ATTEMPTS_LOAD]:i.K4,[(0,i.ok)(E.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{results:n,attemptId:r}=t.data;return(0,i.f2)(I(e,n.map(e=>g(e.questionAttempt,r)),{isInvalidated:!1},{preserveAttemptIdOrder:!0}),t)},[E.V.GRADED_QUESTION_ATTEMPT_LOAD]:i.K4,[(0,i.ok)(E.V.GRADED_QUESTION_ATTEMPT_LOAD)]:(e,t)=>{let{questionAttempt:n}=t.data;return(0,i.f2)(I(e,[n],{isInvalidated:!1}),t)},[(0,i.ok)(E.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return I(e,(n||[]).map((e,t)=>g(e.questionAttempt,n[t].questionAttempt.attemptId)),{isInvalidated:!1},{initialize:!1})},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return I(e,n,{isInvalidated:!1})},[(0,i.ok)(c.V.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>{let{data:n}=t;return I(e,Object.values(n).filter(e=>e.isOk).map(e=>e.result))},[(0,i.ok)(p.V.QUESTION_PERSIST)]:(e,t)=>{let{question:n}=t;return(0,r.ZP)(e,e=>{Object.values(e.questionAttemptsById).forEach(t=>{t.questionId===n.id&&(0,i.o_)(e,I(e,[{...t,question:n}],{isInvalidated:!0}))})})}}),f=async(e,t,n,r,i)=>{let o=n.map(t=>{if((null==t?void 0:t.id)===void 0)throw Error("no attempt id present");let n=_.getQuestionAttemptById(e(),t.id);return n?{questionType:n.questionType,attemptId:n.attemptId,...t}:t});return{data:(await (0,d.Ay)(r,o)).data,columnId:i}},S={loadQuestionAttemptsByAttemptId:(e,t)=>(0,i.PH)(c.V.QUESTION_ATTEMPTS_LOAD,()=>(0,d.Bj)(t,e).then(t=>{if(t.results.length<1||t.results[0].attemptId===e)return{data:t};let n=t.results.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e}));return{data:{...t,results:n}}}).catch(e=>{throw{err:e}})),setQuestionAttemptInStore:e=>(0,i.aU)((0,i.ok)(c.V.QUESTION_ATTEMPT_SET),{data:e}),setQuestionAttemptsInStore:e=>(0,i.aU)((0,i.ok)(c.V.QUESTION_ATTEMPTS_SET),{data:e}),persistQuestionAttempts:(e,t,n)=>(0,i.PH)(c.V.QUESTION_ATTEMPTS_PERSIST,(r,i)=>f(r,i,e,t,n),{data:e}),markQuestionAttemptsMovedOn(e,t){let n=e.map(e=>({id:e,attemptStatus:u.I$9.InProgress}));return this.persistQuestionAttempts(n,t)}},_={getQuestionAttemptById:a,getQuestionAttemptsByAttemptId:l}},736352:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_ATTEMPT_PERSIST:"question.attempt.persist",QUESTION_ATTEMPT_SET:"question.attempt.set",QUESTION_ATTEMPTS_LOAD:"question.attempts.load",QUESTION_ATTEMPTS_SET:"question.attempts.set",QUESTION_ATTEMPTS_PERSIST:"question.attempts.persist"}},383831:function(e,t,n){"use strict";n.d(t,{Nw:function(){return q},I6:function(){return x},Ys:function(){return Z}});var r=n(715729),i=n(961719),o=n(134129),s=n(182267),a=n(305870),l=n(333050),u=n(560985),d=n(715655),c=n(968227),E=n(276635),p=n.n(E);let m=e=>["views","byQuestionId",e.questionId];function h(e){return{questionId:e.questionId,assessmentId:"assessmentId"in e?e.assessmentId:void 0,courseId:"courseId"in e?e.courseId:void 0,paging:"paging"in e?e.paging:void 0,questionAttemptId:"questionAttemptId"in e?e.questionAttemptId:void 0,filterParams:"filterParams"in e?e.filterParams:void 0,includeOnlyAvailableUsers:"includeOnlyAvailableUsers"in e?e.includeOnlyAvailableUsers:void 0}}let I=["questionId","assessmentId","courseId","paging","questionAttemptId","filterParams","includeOnlyAvailableUsers"],b=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byQuestionId[t.questionId];if(!n)return{id:null,view:null};let r=Object.keys(n).find(e=>{let r=n[e];return p().isEqual(p().pick(h(t),...I),p().pick(h(r.query),...I))});return{id:null!=r?r:null,view:r?n[r]:null}},g=(0,u.wN)(d.PW,c.AD),y=e=>e.questionAttemptGrade.questionAttemptGradeById,f=(0,u.P1)(y,(e,t)=>t,(e,t)=>{var n;return(n={questionAttemptIds:t,allQuestionAttempts:e}).questionAttemptIds.map(e=>n.allQuestionAttempts[e])});function S(e){return e.allQuestionAttemptGrades[e.questionAttemptId]}let _=(0,u.P1)(y,(e,t)=>t,(e,t)=>S({questionAttemptId:t,allQuestionAttemptGrades:e})),T=(0,u.P1)(y,(e,t)=>e.questionAttemptGrade.questionAttemptIdsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>S({questionAttemptId:t,allQuestionAttemptGrades:e}))),v=g((e,t)=>t.map(t=>{var n;if(!t)return;let r=b(e.questionAttemptGrade,t);if(null==r?void 0:r.view)return{...r.view,values:(null!==(n=r.view.values)&&void 0!==n?n:[]).map(t=>_(e,t)).filter(e=>!!e)}}),e=>e);var A=n(941597),O=n(459530),C=n(64403),R=n(724773),L=n(211498),D=n(689033),P=n(374899),N=n(471901);let U=e=>"gradeId"in e,w=(e,t,n,r=!1)=>{let i=e.questionAttemptGradeById[t];if(r){let r;i&&U(i)&&(r={gradeId:i.gradeId,userId:i.userId}),e.questionAttemptGradeById[t]={...r,...n}}else e.questionAttemptGradeById[t]={...i,...n}},k=(e,t,n,r=!0)=>{let i=e.questionAttemptIdsByAttemptIds[t];i?-1===i.indexOf(n)&&i.push(n):r&&(e.questionAttemptIdsByAttemptIds[t]=[n])},M=(e,t)=>{for(let n of Object.values(e.views.byQuestionId))for(let e of Object.values(n))"assessmentId"in e.query&&e.query.assessmentId===t&&(e.isValid=!1)},B=(e,t)=>{let n=e.views.byQuestionId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})};function G(e,t,n,o=!0){return(0,r.ZP)(e,e=>{t.forEach(({questionAttempt:t,...r})=>{let s=t.id;if(!s)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");w(e,s,{...r,attemptId:n,questionAttemptId:s}),k(e,n,s,o);let a=t.questionId;a&&(0,i.o_)(e,(0,i.NV)(e,{query:{questionId:a,questionAttemptId:s}},{viewResolver:b,viewsPathResolver:m}))})})}let V=(e,t,n)=>{let r=e.views.byQuestionId[t];r&&Object.values(r).forEach(e=>{var t,r;"filterParams"in e.query&&n.gradeUpdated&&(null===(r=null===(t=e.query)||void 0===t?void 0:t.filterParams)||void 0===r?void 0:r.find(e=>e===o.YsZ.NeedsGradingStudents))&&(e.isValid=!1)})},x=(0,i.Lq)({questionAttemptGradeById:{},views:{byQuestionId:{}},questionAttemptIdsByAttemptIds:{}},{[(0,i.ok)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{attemptId:n,results:r}}=t;return G(e,r,n)},[a.V.GRADED_QUESTION_ATTEMPT_LOAD]:(0,i.Li)(b,m),[(0,i.ok)(a.V.GRADED_QUESTION_ATTEMPT_LOAD)]:(e,t)=>{if(!t.data)return e;let{attemptId:n,...r}=t.data;return(0,i.NV)(G(e,[r],n,!1),t,{viewResolver:b,viewsPathResolver:m})},[a.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID]:(0,i.Li)(b,m),[(0,i.bG)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(0,i.HT)(b,m),[(0,i.ok)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n,paging:o,permissions:s}}=t,l=(0,r.ZP)(e,e=>{n.forEach(t=>{var n;let{questionAttempt:r,...o}=t,s=r.id;if(!s)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");let l=t.questionAttempt.attemptId;if(!l)throw Error("Graded Question Attempts Load reducer failed: Attempt has no `id` value");w(e,s,{...o,attemptId:l,questionAttemptId:s});let u=null===(n=t.questionAttempt)||void 0===n?void 0:n.questionId;u&&(0,i.o_)(e,(0,i.NV)(e,{type:a.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID,query:{questionId:u,questionAttemptId:s}},{viewResolver:b,viewsPathResolver:m}))})});return(0,i.NV)(l,t,{viewResolver:b,viewsPathResolver:m,paging:o,permissions:s,values:n.map(e=>e.questionAttempt.id).filter(e=>!!e)})},[a.V.GRADED_QUESTION_ATTEMPT_PERSIST]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.ZP)(e,e=>{let{view:t}=b(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!0)})},[(0,i.ok)(a.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{questionAttempt:n,dependents:i,...o}=t.data;return(0,r.ZP)(e,e=>{let{id:t,attemptId:r,questionId:s}=n;if(!t||!r)throw Error("Expected question attempt ID and attempt ID on question attempt object");let a={...o,attemptId:i.attemptId,questionAttemptId:t};if(w(e,t,a,!0),k(e,i.attemptId,t,!1),!s)throw Error("Expected question ID on the attempt object");let{view:l}=b(e,{questionId:s,questionAttemptId:t});l&&(l.isUpdating=!1),V(e,s,{gradeUpdated:!0})})},[(0,i.bG)(a.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{questionAttempt:n}=t.data,{id:i,questionId:o}=n;return(0,r.ZP)(e,e=>{let{view:t}=b(e,{questionId:o,questionAttemptId:i});t&&(t.isUpdating=!1)})},[a.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.ZP)(e,e=>{let{view:t}=b(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!0)})},[(0,i.ok)(a.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{questionAttempt:n,dependents:i,...o}=t.data;return(0,r.ZP)(e,e=>{let{id:t,attemptId:r,questionId:s}=n;if(!t||!r)throw Error("Expected question attempt ID and attempt ID on question attempt object");if(!s)throw Error("Expected question ID on the attempt object");let a={...o,attemptId:i.userAttemptId,questionAttemptId:t};w(e,t,a,!0),k(e,i.userAttemptId,t,!1);let{view:l}=b(e,{questionId:s,questionAttemptId:t});l&&(l.isUpdating=!1),V(e,s,{gradeUpdated:!0})})},[(0,i.bG)(a.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.ZP)(e,e=>{let{view:t}=b(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!1)})},[(0,i.ok)(L.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:{assessmentId:n}}=t;return(0,r.ZP)(e,e=>{n&&M(e,n)})},[(0,i.ok)(D.V.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{assessmentId:n}}=t;return(0,r.ZP)(e,e=>{n&&M(e,n)})},[(0,i.ok)(P.V.QUESTION_PERSIST)]:(e,t)=>{var n;let i=null===(n=t.question)||void 0===n?void 0:n.id;return i?(0,r.ZP)(e,e=>{B(e,i)}):e}}),q={loadGradedQuestionAttemptsByAttemptId:(e,t,n)=>(0,i.PH)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD,()=>(0,s._pd)(e,t,n).then(e=>({data:{...e,attemptId:t}}))),loadGradedQuestionAttemptByQuestionAttemptId:(e,t,n,r)=>(0,i.PH)(a.V.GRADED_QUESTION_ATTEMPT_LOAD,async()=>{let i=await (0,s.$dN)(e,t,n.questionAttemptId,r);return{data:{attemptId:t,...i},query:n}},{query:n}),updateGradedQuestionAttempt:(e,t,n)=>(0,i.PH)(a.V.GRADED_QUESTION_ATTEMPT_PERSIST,async(r,i)=>{var o;let{courseId:a,questionAttemptId:u,attemptId:d}=e,c=Z.getQuestionAttemptGradeById(u)(r()),E={manualPoints:null==c?void 0:c.points,...t},p=await (0,s.XEK)(e,E),{questionId:m}=p.questionAttempt;if(!d)throw Error("Expected Attempt ID in question attempt object");let{columnId:h,gradeId:I,assessmentId:b}={gradeId:void 0,columnId:void 0,assessmentId:void 0,...C.Ys.getGradebookAttemptByAttemptId(r(),d)},g=null!=b?b:h?null===(o=A.Ys.getAssessmentByCourseAndGradableItemId(r(),a,h))||void 0===o?void 0:o.id:void 0;return g&&m&&i(O.Nw.refreshCachedQuestionGradeStatusesByQuestionId(a,g,m,n===N.e.MyStudentsToGrade?l.s6.MyStudents:l.s6.Default)),{data:{...p,dependents:{columnId:h,courseId:a,gradeId:I,attemptId:d}}}},{questionAttemptId:e.questionAttemptId,questionId:e.questionId}),updateGradedQuestionAttemptForGroup:(e,t)=>(0,i.RU)(a.V.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST,async(n,{getState:r,dispatch:i})=>{var o,a;let{courseId:u,questionAttemptId:d,attemptId:c,groupAttemptId:E}=e;if(!c)throw Error("Expected Attempt ID in question attempt object");let p=Z.getQuestionAttemptGradeById(d)(r()),m={manualPoints:null==p?void 0:p.points,...t},h=await (0,s.XEK)(e,m),{questionId:I}=h.questionAttempt,{columnId:b,groupAssociationId:g,assessmentId:y}={columnId:void 0,...null===(o=R.Ys.getGradebookGroupAttemptById(r(),E))||void 0===o?void 0:o.value},f=null!=y?y:b?null===(a=A.Ys.getAssessmentByCourseAndGradableItemId(r(),u,b))||void 0===a?void 0:a.id:void 0;return f&&I&&i(O.Nw.refreshCachedQuestionGradeStatusesByQuestionId(u,f,I,l.s6.Default)),{data:{...h,dependents:{courseId:u,columnId:b,groupAssociationId:g,userAttemptId:c,groupAttemptId:E}}}},{data:{questionAttemptId:e.questionAttemptId,questionId:e.questionId}}),loadGradedQuestionAttemptsByQuestionIdQuery:e=>(0,i.PH)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID,async()=>({data:await (0,s.ks9)(e.courseId,e.assessmentId,e.questionId,{paging:e.paging,expandParams:["questionAttempt.question","questionAttempt.question.usageCount","questionAttempt.question.sourceInfo","questionAttempt.answerCorrectness"],filterParams:e.filterParams,includeOnlyAvailableUsers:e.includeOnlyAvailableUsers}),query:e}),{query:e}),setGradedQuestionAttempts:(e,t)=>(0,i.aU)((0,i.ok)(a.V.GRADED_QUESTION_ATTEMPTS_LOAD),{data:{attemptId:e,...t}})},Z={getQuestionAttemptGradesByAttemptId:e=>t=>T(t,e),getQuestionAttemptGradeById:e=>t=>_(t,e),getQuestionAttemptGradeByIds:e=>t=>f(t,e),getQuestionAttemptGradesByQuestionIdQuery:(...e)=>t=>v(t,e),getQuestionAttemptGradeViewStateByQuery:(e,t)=>{var n;return null!==(n=b(e.questionAttemptGrade,t).view)&&void 0!==n?n:null}}},305870:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={GRADED_QUESTION_ATTEMPTS_LOAD:"question.gradedAttempts.load",GRADED_QUESTION_ATTEMPT_LOAD:"question.gradedAttempt.load",GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID:"question.gradedAttempts.load.by.questionId",GRADED_QUESTION_ATTEMPT_PERSIST:"question.gradedAttempts.persist",GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST:"question.gradedAttemptForGroup.persist"}},463157:function(e,t,n){"use strict";n.d(t,{Nw:function(){return B},I6:function(){return M},Ys:function(){return G}});var r=n(715729),i=n(276635),o=n(961719),s=n(842330),a=n(134129),l=n(207849),u=n(903641),d=n(941597),c=n(873779),E=n(720533),p=n(25859),m=n(494615),h=n(374899),I=n(736352);let b=(0,n(560985).P1)(e=>e.question.questions,(e,t)=>t,(e,t)=>i.filter(e,{assessmentId:t,questionType:a.QuestionType.PageBreak}));var g=n(305870),y=n(333050),f=n(198022),S=n.n(f),_=n(762319);function T(e){a.QuestionType.Matching===(null==e?void 0:e.questionType)&&e.answers.forEach(e=>{var t;(null===(t=null==e?void 0:e.ui)||void 0===t?void 0:t.id)||(e.ui={...e.ui,id:S().v4()})})}let v=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},A=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},O=e=>["views","byCourseId",e.courseId],C=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},s=Object.keys(r).find(e=>{let n=r[e];return"questionId"in n.query?"questionId"in t&&t.questionId===n.query.questionId&&t.courseId===n.query.courseId:!("questionId"in t)&&function(e,t){var n,r,o,s,a,l;let{assessmentId:u,courseId:d,filter:c,paging:E,refreshState:p,useSearch:m}=t,h=i.isEqual(E,e.paging)&&u===e.assessmentId&&d===e.courseId&&p===e.refreshState&&m===e.useSearch;if(!(null==e?void 0:e.filter)||!c)return h;if(!h)return!1;let{assessmentIds:I,categoryIds:b,excludeAssessmentIds:g,keywords:y,questionTypes:f,assessmentTypes:S}=c;return(!I||!!Z(I,null===(n=e.filter)||void 0===n?void 0:n.assessmentIds))&&(!b||!!Z(b,null===(r=e.filter)||void 0===r?void 0:r.categoryIds))&&(!g||!!Z(g,null===(o=e.filter)||void 0===o?void 0:o.excludeAssessmentIds))&&(!y||!!Z(y,null===(s=e.filter)||void 0===s?void 0:s.keywords))&&(!f||!!Z(f,null===(a=e.filter)||void 0===a?void 0:a.questionTypes))&&(!S||!!Z(S,null===(l=e.filter)||void 0===l?void 0:l.assessmentTypes))}(t,n.query)});return s?{id:s,view:r[s]}:o.LW},R=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},L=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]};function D(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}function P(e,t,n){if(!t||!e.views.byCourseId[t])return;let r=Object.values(e.questions).filter(e=>(null==e?void 0:e.assessmentId)&&(null==n?void 0:n.includes(e.assessmentId))).map(e=>null==e?void 0:e.id);(!n||n.length<=0||r.length<=0)&&D(e,t),Object.values(e.views.byCourseId[t]).forEach(e=>{(null==e?void 0:e.values)&&e.values.find(e=>r.includes(e))&&(e.isValid=!1)})}let N=(e,t,n)=>{var r;return null===(r=e.question.copyQuestionsTaskByCourseId[t])||void 0===r?void 0:r[n].queueTask},U=e=>`questionsCopyShowTaskStatus${e.replace(/\_/g,".")}`,w=(e,t)=>({key:U(e),isRequired:!0,value:JSON.stringify({[t.taskId]:!0})}),k=new Set([a.hRl.Complete,a.hRl.CompleteErrors]),M=(0,o.Lq)({copyQuestionsTaskByCourseId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},isLoading:!1,paging:null,permissions:null,questions:{},views:{byCourseId:{}}},{[h.V.QUESTION_LOAD]:(0,o.Li)(C,O),[(0,o.ok)(h.V.QUESTION_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,o.f2)(e,t);let{data:n}=t,{paging:s,permissions:a,questionIds:l,questions:u}=n,d=(0,r.ZP)(e,t=>{Object.keys(u).forEach(n=>{let r=e.questions[n],o=u[n],s=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:(null==o?void 0:o.permissions)?null==o?void 0:o.permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui,questionIdsInBlock:null==r?void 0:r.questionIdsInBlock,sourceInfo:null==r?void 0:r.sourceInfo});T(u[n]),t.questions[n]={...u[n],ui:{},...s,api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.NV)(d,t,{viewResolver:C,viewsPathResolver:O,paging:s,permissions:a,values:l})},[(0,o.bG)(h.V.QUESTION_LOAD)]:(0,o.HT)(C,O),[(0,o.ok)(h.V.QUESTION_CREATE)]:(e,t)=>(0,r.ZP)(e,n=>{let{nextQuestion:r}=t;T(r),"start"!==r.positionAfter&&(r={...r,position:e.questions[r.positionAfter].position+1});let i=e.questions[r.positionAfter]?e.questions[r.positionAfter].position+1:1,o=V(e.questions,r.assessmentId,!0,i);o.questions[r.id]=r,n.questions={...n.questions,...o.questions}}),[(0,o.ok)(h.V.QUESTIONS_CREATE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,assessmentId:r}=t;P(e,n,[r])}),[h.V.QUESTION_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!0}})}),[(0,o.ok)(h.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,n=>{var r;let{prevQuestion:i,question:o}=t;if(!(null==i?void 0:i.id)||!(null==o?void 0:o.id))return;if(T(o),0===i.id.indexOf(s.dc)){let e={...o,api:{isUpdating:!1,isDeleting:!1}};n.questions[o.id]=e,delete n.questions[i.id],D(n,e.courseId);return}let a=e.questions[o.id],l={...o,...a.questionIdsInBlock&&{questionIdsInBlock:a.questionIdsInBlock},...a.sourceInfo&&{sourceInfo:a.sourceInfo},api:{...a.api,isUpdating:!1},...a.ui&&{ui:a.ui}};if((null==i?void 0:i.position)&&(null==l?void 0:l.position)&&i.position!==l.position){let t=l.position<i.position,o=t?l.position:i.position+1,s=t?i.position-1:l.position,a=V(e.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",t,o,s);n.questions={...n.questions,...a.questions}}n.questions={...n.questions,[l.id]:l},D(n,l.courseId)}),[(0,o.bG)(h.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!1}})}),[(0,o.ok)(h.V.QUESTIONS_COPY_QUEUED)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,assessmentId:r,queueTask:i}=t;R(e.copyQuestionsTaskByCourseId,n,i.taskId,{queueTask:i,assessmentId:r,questionCount:t.questionCount})}),[(0,o.ok)(h.V.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;L(e.copyQuestionsTaskByCourseId,n,r)}),[(0,o.bG)(h.V.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,o.sT)(e,t),[h.V.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTask:i}=t;n.copyQuestionsTaskByCourseId[r][i.taskId].queueTask=i;let o=e.copyQuestionsTaskByCourseId[r][i.taskId].queueTask;i.taskStatus!==(null==o?void 0:o.taskStatus)&&k.has(i.taskStatus)&&D(n,t.courseId)}),[(0,o.ok)(h.V.QUESTIONS_COPY)]:(e,t)=>(0,r.ZP)(e,e=>{D(e,t.courseId)}),[h.V.QUESTION_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&e.questions[n.id]&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!0}})}),[(0,o.ok)(h.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,n=>{var r,o,s;let{prevQuestion:l}=t;if(!(null==l?void 0:l.id))return;let u=function(e,t){let n={};return e.forEach(e=>{let r=e.questionIdsInBlock&&e.questionIdsInBlock.filter(e=>e!==t),i={...e,questionIdsInBlock:r};n[i.id]=i}),n}((o=e.questions,s=null==l?void 0:l.id,i.filter(o,e=>a.QuestionType.QuestionBlock===e.questionType&&i.includes(e.questionIdsInBlock,s))),null==l?void 0:l.id);n.questions={...n.questions,...u};let d=V(n.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",!1,l.position+1);n.questions={...n.questions,...d.questions};let c=n.questions[l.id];delete n.questions[l.id],D(n,c.courseId)}),[(0,o.bG)(h.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!1}})}),[(0,o.ok)(c.V.ASSESSMENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{assessmentId:n,courseId:r}=t;P(e,r,n?[n]:[])}),[(0,o.ok)(E.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseAssessmentIds:n}=t;n&&Object.keys(n).forEach(t=>{let r=n[t].filter(e=>!!e);P(e,t,r)})}),[(0,o.ok)(E.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.ZP)(e,e=>{let{assessmentId:n,courseId:r}=t;P(e,r,n?[n]:[])}),[(0,o.ok)(E.V.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{D(e,n)})},[h.V.QUESTION_BLOCK_CLEAR_QUESTIONS]:(e,t)=>{let{questionBlockId:n}=t,i=e.questions[n];return i&&i.questionIdsInBlock?(0,r.ZP)(e,e=>{let t={...i,questionIdsInBlock:[]};(null==t?void 0:t.id)&&(e.questions[t.id]=t)}):e},[h.V.QUESTION_BLOCK_LOAD_QUESTIONS]:o.K4,[(0,o.ok)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{questions:r,questionBlockId:i}=t,o=e.questions[i];o||(o={id:i,api:{isUpdating:!1,isDeleting:!1}}),Object.keys(r).forEach(t=>{let i=e.questions[t];T(r[t]),n.questions[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:i&&i.ui},o={...o,questionIdsInBlock:Array.from(new Set([...o.questionIdsInBlock||[],t]))}}),n.questions[o.id]=o});return(0,o.f2)(n,t)},[h.V.QUESTION_BLOCKS_LOAD_QUESTIONS]:(0,o.Li)(C,O),[(0,o.ok)(h.V.QUESTION_BLOCKS_LOAD_QUESTIONS)]:(e,t)=>{let{results:n,permissions:i}=t.data,s=(0,r.ZP)(e,t=>{n.forEach(({blockId:n,questions:r})=>{var i,o;let s=e.questions[n]&&{...e.questions[n],questionIdsInBlock:[]},a={...s},l=new Set;s||(a={id:n,api:{isUpdating:!1,isDeleting:!1}}),r.forEach(n=>{if(!n.id)return;l.add(n.id);let r=e.questions[n.id];T(n),t.questions[n.id]={...n,api:{isUpdating:!1,isDeleting:!1},ui:null==r?void 0:r.ui},a={...a,questionIdsInBlock:Array.from(new Set([...(null==a?void 0:a.questionIdsInBlock)||[],n.id]))}}),(null==a?void 0:a.id)&&(a.questionIdsInBlock=null!==(o=null===(i=a.questionIdsInBlock)||void 0===i?void 0:i.filter(e=>l.has(e)))&&void 0!==o?o:[],t.questions[a.id]=a)})});return(0,o.NV)(s,t,{viewResolver:C,viewsPathResolver:O,permissions:i})},[(0,o.ok)(h.V.QUESTION_BLOCK_DELETE_QUESTION)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n,questionBlockId:r}=t,o=e.questions[r];e.questions[r].questionIdsInBlock=i.without(o.questionIdsInBlock,n.id),D(e,n.courseId)}),[(0,o.ok)(h.V.QUESTION_BLOCK_ADD_QUESTIONS)]:(e,t)=>{let n=(0,r.ZP)(e,n=>{let{questionBlockId:r}=t,i=e.questions[r];i||(i={id:r,api:{isUpdating:!1,isDeleting:!1}}),t.results.forEach(t=>{if(t.isOk){let r=t.result,o=e.questions[r.id];T(r={...r,api:{isUpdating:!1,isDeleting:!1},ui:o&&o.ui}),i={...i,questionIdsInBlock:Array.from(new Set([...i.questionIdsInBlock||[],r.id]))},n.questions={...n.questions,...(0,s.MO)([r,i])},D(n,r.courseId)}})});return(0,o.f2)(n,t)},[(0,o.ok)(h.V.QUESTIONS_FILE_UPLOAD)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t;D(e,n)}),[(0,o.ok)(I.V.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:{question:n}}=t;return n?(0,r.ZP)(e,e=>{if(null==n?void 0:n.id){let t=e.questions[n.id];T(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}}):e},[(0,o.ok)(I.V.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(null==n?void 0:n.id){let t=e.questions[n.id];T(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}})})},[(0,o.ok)(I.V.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(null==n?void 0:n.id){T(n);let t=e.questions[n.id];e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}})})},[(0,o.ok)(g.V.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(T(r),null==r?void 0:r.id){let t=e.questions[r.id];e.questions[r.id]={api:{isUpdating:!1,isDeleting:!1},...t,...r}}})})},[(0,o.ok)(g.V.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(T(r),null==r?void 0:r.id){let t=e.questions[r.id];e.questions[r.id]={...t,...r}}})})},[(0,o.ok)(y.V5.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(T(n),null==n?void 0:n.id){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[(0,o.ok)(y.V5.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.ZP)(e,e=>{n.forEach(t=>{let{question:n}=t;if(T(n),null==n?void 0:n.id){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[c.V.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;v(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[c.V.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;A(e.fileUploadTasksByCourseId,n,r)}),[c.V.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:o}=t,s=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...s,progress:i,fileLocation:o}}),[c.V.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,queueTask:r}=t;v(e.importTasksByCourseId,n,r.taskId,r)}),[c.V.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.ZP)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var o;n.importTasksByCourseId[r][i.taskId]=i;let s=null===(o=e.importTasksByCourseId[r])||void 0===o?void 0:o[i.taskId];i.taskStatus!==(null==s?void 0:s.taskStatus)&&k.has(i.taskStatus)&&D(n,t.courseId)})}),[(0,o.ok)(c.V.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n,taskId:r}=t;A(e.importTasksByCourseId,n,r)}),[p.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{D(e,n)})}}),B={loadQuestion:e=>{let{assessmentId:t,courseId:n,questionId:r}=e;return B.loadQuestionById({assessmentId:t,courseId:n,questionId:r})},loadQuestions:e=>{let{assessmentId:t,courseId:n,offset:r,refreshState:i}=e;return B.loadQuestionsByQuery({assessmentId:t,courseId:n,paging:{offset:r,limit:100},refreshState:i})},loadQuestionById:({courseId:e,assessmentId:t,questionId:n})=>(0,o.c3)(r=>{let i={assessmentId:t,courseId:e,questionId:n};return r((0,o.aU)(h.V.QUESTION_LOAD,{query:i})),(0,u.Hy)({assessmentId:t,courseId:e,questionId:n}).then(e=>(r((0,o.aU)((0,o.ok)(h.V.QUESTION_LOAD),{data:{questions:{[e.id]:e},questionIds:[e.id]},query:i})),e)).catch(e=>{throw r((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),r((0,o.aU)((0,o.bG)(h.V.QUESTION_LOAD),{query:i})),e})}),loadQuestionsByQuery:e=>(0,o.c3)(async(t,n)=>{var r;let{view:s}=C(null===(r=n())||void 0===r?void 0:r.question,e);return!function(e,t,n=!1,r){let o=i.isEmpty(G.getQuestionsByCourseId(e,t));if(r)return!r.isLoading&&(o||n);let s=e.question.views.byCourseId[t],a=!1;return s&&(a=Object.keys(s).some(e=>!0===s[e].isLoading)),!a&&(o||n)}(n(),e.courseId,null==e?void 0:e.refreshState,s)?Promise.resolve(null):(t((0,o.aU)(h.V.QUESTION_LOAD,{query:e})),(0,u.HC)(e).then(n=>(t((0,o.aU)((0,o.ok)(h.V.QUESTION_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:n})),t((0,o.aU)((0,o.bG)(h.V.QUESTION_LOAD),{query:e})),n}))}),loadAssessmentQuestionsByQuery:e=>(0,o.RU)(h.V.QUESTION_LOAD,async()=>{try{return{data:await (0,u.HC)(e),query:e}}catch(t){throw new o.GM(t).setData({query:e})}},{data:{query:e},condition:q}),persistQuestion:(e,t,n)=>(0,o.PH)(h.V.QUESTION_PERSIST,async()=>{try{let r={...await (0,u.PR)(e,t,n),assessmentId:n.assessmentId,courseId:n.courseId};return{prevQuestion:e,question:r,...n.columnId&&{columnId:n.columnId}}}catch(t){throw{prevQuestion:e,err:t}}},{prevQuestion:e}),createQuestion:(e,t,n,r)=>(0,o.c3)(async(i,s)=>{let l;i((0,o.aU)(h.V.QUESTION_CREATE,{assessmentId:e,positionAfter:t,questionType:n,questionOptions:r}));let c=d.Ys.getAssessmentById(s(),e);if((null==c?void 0:c.type)===a.IQK.Test&&(l=c.subtype),c&&c.id&&c.courseId)return(0,u.CB)(c.id,c.courseId,t,n,c.type,l,r).then(e=>(i((0,o.aU)((0,o.ok)(h.V.QUESTION_CREATE),{nextQuestion:e})),{nextQuestion:e})).catch(e=>{throw i((0,o.aU)((0,o.bG)(h.V.QUESTION_CREATE),e)),i((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),e});throw i((0,o.aU)((0,o.bG)(h.V.QUESTION_CREATE))),i((0,o.aU)((0,o.ok)(m.Z.APP_ERROR))),Error("Unable to create question")}),removeCopyQuestionsTask:(e,t)=>(0,o.PH)(h.V.QUESTIONS_COPY_TASK_REMOVE,async n=>{let r=N(n(),e,t),i=w(e,r);return await (0,_.px)(i),{courseId:e,taskId:t}}),updateCopyTaskStatus:(e,t)=>(0,o.c3)(async n=>{let r=await (0,l.j)(t);return n((0,o.aU)(h.V.QUESTIONS_COPY_TASK_UPDATE,{courseId:e,queueTask:r})),r}),copyQuestionsQueued:(e,t)=>(0,o.PH)(h.V.QUESTIONS_COPY_QUEUED,async()=>{let n=await (0,u._v)(e),r=w(e.courseId,n);return(0,_.px)(r),{courseId:e.courseId,assessmentId:e.assessmentId,queueTask:n,questionCount:t}}),copyQuestions:e=>(0,o.PH)(h.V.QUESTIONS_COPY,async()=>{let{type:t,...n}=await (0,u.DF)(e);return{...n,courseId:e.courseId}}),copyQuestionsCompleted:e=>(0,o.c3)(t=>{t((0,o.aU)((0,o.ok)(h.V.QUESTIONS_COPY),{courseId:e}))}),deleteQuestion:e=>(0,o.PH)(h.V.QUESTION_DELETE,t=>{let n=d.Ys.getAssessmentById(t(),e.assessmentId);return(0,u.Km)(e,{courseId:n.courseId,assessmentId:n.id}).then(()=>({prevQuestion:e})).catch(t=>{throw{prevQuestion:e,err:t}})},{prevQuestion:e}),deleteQuestions:e=>(0,o.c3)((t,n)=>{let r=d.Ys.getAssessmentById(n(),e[0].assessmentId);return(0,u.Ri)(e,{courseId:r.courseId,assessmentId:r.id}).then(n=>{let r=new Map(e.map(e=>[e.id,e]));return Object.keys(n.results).forEach(e=>{let i=n.results[e],s=r.get(i.id);i.isOk?t((0,o.aU)((0,o.ok)(h.V.QUESTION_DELETE),{prevQuestion:s})):t((0,o.aU)((0,o.bG)(h.V.QUESTION_DELETE),{prevQuestion:s}))}),n})}),loadQuestionsFromQuestionBlock:e=>(0,o.c3)((t,n)=>{var r;return n(),t((0,o.aU)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS)),(0,u.ad)(e).then(e=>(t((0,o.aU)((0,o.ok)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS),{...e})),e)).catch(e=>{t((0,o.aU)((0,o.bG)(h.V.QUESTION_BLOCK_LOAD_QUESTIONS),e)),t((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e}))})}),loadAllQuestionsFromQuestionBlocks:e=>(0,o.RU)(h.V.QUESTION_BLOCKS_LOAD_QUESTIONS,async()=>{if(!(null==e?void 0:e.assessmentId)||!(null==e?void 0:e.courseId))return Promise.resolve(null);try{return{data:await (0,u.BB)(e.courseId,e.assessmentId),query:e}}catch(e){throw new o.GM(e).setData({error:e})}},{data:{query:e},condition:(e,t)=>x(e,t)}),clearQuestionsFromQuestionBlock:e=>(0,o.aU)(h.V.QUESTION_BLOCK_CLEAR_QUESTIONS,{questionBlockId:e}),addQuestionsToQuestionBlock:(e,t)=>(0,o.c3)(async n=>{let r;try{r=await (0,u.qE)(e,t),n((0,o.aU)((0,o.ok)(h.V.QUESTION_BLOCK_ADD_QUESTIONS),r))}catch(e){throw n((0,o.aU)((0,o.bG)(h.V.QUESTION_BLOCK_ADD_QUESTIONS),e)),n((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:s,questionBlockId:a}=t;return await n(B.loadQuestionById({courseId:s,assessmentId:i,questionId:a})),r}),updateQuestionsInQuestionBlock:(e,t,n,r)=>(0,o.c3)(async i=>{let s;try{s=await (0,u.jG)(e,t,n,r),i((0,o.aU)((0,o.ok)(h.V.QUESTION_BLOCK_UPDATE_QUESTIONS),s))}catch(e){throw i((0,o.aU)((0,o.bG)(h.V.QUESTION_BLOCK_UPDATE_QUESTIONS),e)),i((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),e}return await i(B.loadQuestionById({courseId:e,assessmentId:t,questionId:n})),s}),deleteQuestionFromQuestionBlock:(e,t)=>(0,o.c3)(async n=>{let r={prevQuestion:e,questionBlockId:t.questionBlockId};try{await (0,u.jh)(e,t),n((0,o.aU)((0,o.ok)(h.V.QUESTION_BLOCK_DELETE_QUESTION),r))}catch(e){throw n((0,o.aU)((0,o.bG)(h.V.QUESTION_BLOCK_DELETE_QUESTION),e)),n((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:s}=t;return await n(B.loadQuestionsByQuery({courseId:s,assessmentId:i})),r}),addQuestionsToAssessment:(e,t,n)=>{let r={courseId:e,assessmentId:t,questions:n};return(0,o.RU)(h.V.QUESTIONS_CREATE,async()=>{for(let r of n)await (0,u.PR)(null,r,{courseId:e,assessmentId:t});return r},{data:r})},uploadQuestionsFromFile:e=>(0,o.c3)(async t=>{let{courseId:n,assessmentId:r}=e;t((0,o.aU)(h.V.QUESTIONS_FILE_UPLOAD,{args:e}));try{let i=await (0,u.EX)(e);return t(i.success>0?(0,o.aU)((0,o.ok)(h.V.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r}):(0,o.aU)((0,o.bG)(h.V.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r})),i}catch(e){throw t((0,o.aU)((0,o.ok)(m.Z.APP_ERROR),{error:e})),t((0,o.aU)((0,o.bG)(h.V.QUESTIONS_FILE_UPLOAD),{courseId:n,assessmentId:r})),e}})},G={getByQuestionId:(e,t)=>i.find(e.question.questions,{id:t}),getQuestionsByAssessmentId:(e,t)=>i.filter(e.question.questions,{assessmentId:t}),getPageBreakQuestionsByAssessmentId:b,getQuestionByPosition:(e,t)=>i.find(e.question.questions,{position:t}),getQuestionsByContentId:(e,t)=>{let n=d.Ys.getAssessmentByContentId(e,t);return n?i.filter(e.question.questions,{assessmentId:n.id,api:{isDeleting:!1}}):[]},getQuestionsByCourseId:(e,t)=>{let n=d.Ys.getAssessmentsByCourseId(e,t);return i.filter(e.question.questions,e=>i.includes(i.map(n,"id"),e.assessmentId))},getQuestionsByQuery:(e,t)=>{let{view:n}=C(e.question,t);return n?(n.values||[]).map(t=>G.getByQuestionId(e,t)).filter(e=>!!e):[]},getQuestionsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=C(e.question,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>G.getByQuestionId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionViewStatusByQuery:(e,t)=>{var n;let{view:r}=C(e.question,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getQuestionViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=C(e.question,n),o=null;return i&&(o={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:o}]},[]),getQuestionsByQuestionBlockId:(e,t)=>{let n=i.find(e.question.questions,{id:t}),r=[];return(null==n?void 0:n.questionIdsInBlock)?(n.questionIdsInBlock.forEach(t=>{let n=e.question.questions[t];n&&r.push(n)}),i.sortBy(r,F,H)):r},getCopyQuestionsTask:(e,t)=>e.question.copyQuestionsTaskByCourseId[t]};function V(e,t,n,r,o,a=1){var l;let u={questions:{}};return(l={assessmentId:t,minPosition:r,maxPosition:o},i.filter(i.values(e),e=>{var t;return e.assessmentId===l.assessmentId&&(null===(t=e.id)||void 0===t?void 0:t.indexOf(s.dc))===-1&&e.position>=l.minPosition&&(!l.maxPosition||e.position<=l.maxPosition)})).forEach(t=>{let r=t.id;u.questions[r]={...e[r],position:n?t.position+a:t.position-a}}),u}let x=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.assessmentId)||!e.query.courseId)return!1;let{view:r}=C(t.getState().question,e.query),i=!!(null==r?void 0:r.isLoading),o=!(null==r?void 0:r.isValid)||!!e.query.refreshState;return!i&&o},q=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.assessmentId))return!1;let r=t.getState(),o=e.query.assessmentId,{view:s}=C(r.question,e.query),a=i.isEmpty(G.getQuestionsByAssessmentId(r,o));return s?!s.isLoading&&(a||!!e.query.refreshState):a||!!e.query.refreshState};function Z(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&(null==e?void 0:e.length)===(null==t?void 0:t.length)&&e.every(e=>t.includes(e))}function F(e){return parseInt(K(e.id)[0],10)}function H(e){return parseInt(K(e.id)[1],10)}function K(e){return e.split("_").slice(1)}},374899:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={QUESTION_LOAD:"question.load",QUESTION_CREATE:"question.create",QUESTIONS_COPY:"questions.copy",QUESTIONS_COPY_QUEUED:"questions.copy.queued",QUESTIONS_COPY_TASK_ADD:"questions.copyTask.add",QUESTIONS_COPY_TASK_REMOVE:"questions.copyTask.remove",QUESTIONS_COPY_TASK_LOAD:"questions.copyTask.load",QUESTIONS_COPY_TASK_UPDATE:"questions.copyTask.update",QUESTION_PERSIST:"question.persist",QUESTION_DELETE:"question.delete",QUESTIONS_DELETE:"questions.delete",QUESTIONS_CREATE:"questions.create",QUESTIONS_FILE_UPLOAD:"questions.upload",QUESTION_BLOCK_ADD_QUESTIONS:"question.block.add.questions",QUESTION_BLOCK_LOAD_QUESTIONS:"question.block.load.questions",QUESTION_BLOCKS_LOAD_QUESTIONS:"question.blocks.load.questions",QUESTION_BLOCK_DELETE_QUESTION:"question.block.delete.questions",QUESTION_BLOCK_UPDATE_QUESTIONS:"question.block.update.questions",QUESTION_BLOCK_CLEAR_QUESTIONS:"question.block.clear.questions"}},459530:function(e,t,n){"use strict";n.d(t,{Nw:function(){return V},I6:function(){return G},Ys:function(){return x}});var r=n(134129),i=n(961719),o=n(333050),s=n(715729),a=n(537672),l=n(276635),u=n.n(l),d=n(560985),c=n(715655),E=n(968227);let p=(0,d.wN)(c.PW,E.yZ);function m(e){return e.allQuestionGradeStatuses[e.asiObjectId]}let h=e=>e.questionGradeStatus.questionGradeStatusByAsiObjectId,I=(0,d.P1)(h,(e,t,n=o.s6.Default)=>n,(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let r=e[1][t];(0,o.i0)(r)&&(n[e[0]]=r)}),n}),b=(0,d.P1)(h,(e,t,n=o.s6.Default)=>n,(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let r=e[1][t];(0,o.i0)(r)&&(n[e[0]]=r)}),n}),g=p((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.ids}},{}),e=>e),y=(e,t,n=o.s6.Default)=>{var r,i;return(null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.isLoading)===!0},f=(e,t,n=o.s6.Default)=>{var r,i;return(null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.isValid)===!0},S=(0,d.P1)(I,(e,t,n=o.s6.Default)=>{var r,i;return null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.ids},(e,t)=>Array.isArray(t)?t.map(t=>m({asiObjectId:t,allQuestionGradeStatuses:e})):void 0),_=p((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:(null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.isLoading)===!0}},{}),e=>e),T=p((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:(null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.isValid)===!0}},{}),e=>e),v=p(b,g,(e,t)=>u().mapValues(t,t=>Array.isArray(t)?t.map(t=>m({asiObjectId:t,allQuestionGradeStatuses:e})):void 0));var A=n(374899),O=n(211498),C=n(689033),R=n(720533),L=n(64403);function D(e,t){var n,r,i,s;if(e.questionIdsByAssessmentId[t]){for(let a of Object.values(o.s6))if(e.questionIdsByAssessmentId[t][a])for(let o of(e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[a]:{...e.questionIdsByAssessmentId[t][a],isValid:!1}},null!==(i=null===(r=null===(n=e.questionIdsByAssessmentId[t])||void 0===n?void 0:n[a])||void 0===r?void 0:r.ids)&&void 0!==i?i:[]))(null===(s=e.questionIdsByQuestionBlockId[o])||void 0===s?void 0:s[a])&&(e.questionIdsByQuestionBlockId[o]={...e.questionIdsByQuestionBlockId[o],[a]:{...e.questionIdsByQuestionBlockId[o][a],isValid:!1}})}}let P=(e,t,n)=>(0,s.ZP)(e,e=>{var r,i,o,s,a;e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[n]:{ids:null===(i=null===(r=e.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.ids,isLoading:!0,isValid:null===(a=null===(s=null===(o=e.questionIdsByAssessmentId[t])||void 0===o?void 0:o[n])||void 0===s?void 0:s.isValid)||void 0===a||a}}}),N=(e,t,n,r)=>(0,s.ZP)(e,e=>{M(e,n,r,t),t.forEach(t=>{k(e,{...t},r)})}),U=(e,t,n,r,i)=>(0,s.ZP)(e,e=>{B(e,r,i,t),t.forEach(t=>{k(e,{...t},i)})}),w=(e,t,n,r)=>(0,s.ZP)(e,e=>{var t,i;e.questionIdsByQuestionBlockId[n]={...e.questionIdsByQuestionBlockId[n],[r]:{ids:null===(i=null===(t=e.questionIdsByQuestionBlockId[n])||void 0===t?void 0:t[r])||void 0===i?void 0:i.ids,isLoading:!0,isValid:!0}}}),k=(e,t,n)=>{t.id&&(e.questionGradeStatusByAsiObjectId[t.id]={...e.questionGradeStatusByAsiObjectId[t.id]||null,[n]:{...t}})},M=(e,t,n,r)=>{e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[n]:{ids:r.map(e=>e.id).filter(e=>!!e),isLoading:!1,isValid:!0}}},B=(e,t,n,r)=>{e.questionIdsByQuestionBlockId[t]={...e.questionIdsByQuestionBlockId[t],[n]:{ids:r.map(e=>e.id).filter(e=>!!e),isLoading:!1,isValid:!0}}},G=(0,i.Lq)({questionGradeStatusByAsiObjectId:{},questionIdsByAssessmentId:{},questionIdsByQuestionBlockId:{}},{[o.V5.QUESTIONS_GRADE_STATUS_LOAD]:(e,{assessmentId:t,questionGradeStatusType:n})=>P(e,t,n),[(0,i.ok)(o.V5.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,results:r,questionGradeStatusType:i}}=t;return N(e,r,n,i)},[o.V5.QUESTION_BLOCKS_GRADE_STATUS_LOAD]:(e,{assessmentId:t,questionBlockId:n,questionGradeStatusType:r})=>w(e,t,n,r),[(0,i.ok)(o.V5.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,questionBlockId:r,results:i,questionGradeStatusType:o}}=t;return U(e,i,n,r,o)},[(0,i.ok)(A.V.QUESTION_PERSIST)]:(e,t)=>{let{question:{id:n}}=t;return(0,s.ZP)(e,e=>{n&&function(e,t){for(let n of Object.values(e.questionIdsByAssessmentId))for(let e of Object.values(o.s6)){let r=n[e];if((0,o.jl)(r)){let{ids:e=[]}=r;-1!==e.indexOf(t)&&(r.isValid=!1)}}for(let n of Object.values(e.questionIdsByQuestionBlockId))for(let e of Object.values(o.s6)){let r=n[e];if((0,o.jl)(r)){let{ids:e=[]}=r;-1!==e.indexOf(t)&&(r.isValid=!1)}}}(e,n)})},[(0,i.ok)(O.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,{attempt:{assessmentId:t}})=>(0,s.ZP)(e,e=>{t&&D(e,t)}),[(0,i.ok)(O.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{var n;let{attempt:r,resultGradeBookAttempt:i}=t;if(i&&"exempt"in i){let t=null===(n=(0,L.GE)(r))||void 0===n?void 0:n.id;if(t)return(0,s.ZP)(e,e=>{D(e,t)})}return e},[(0,i.ok)(C.V.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,{groupAttempt:{assessmentId:t}})=>(0,s.ZP)(e,e=>{t&&D(e,t)}),[(0,i.ok)(R.V.CONTENT_PERSIST)]:(e,t)=>(0,s.ZP)(e,e=>{var n,r;let{contents:i,prevContent:o,columns:s}=t;if(i&&(null==o?void 0:o.id)&&s){let t=i[o.id];(null===(n=null==t?void 0:t.gradingColumn)||void 0===n?void 0:n.aggregationModel)!==(null===(r=null==o?void 0:o.gradingColumn)||void 0===r?void 0:r.aggregationModel)&&t.assessmentId&&D(e,t.assessmentId)}})}),V={loadQuestionGradeStatusesByAssessmentId:(e,t,n=o.s6.Default)=>(0,i.PH)(o.V5.QUESTIONS_GRADE_STATUS_LOAD,()=>{let i=n===o.s6.MyStudents?r.E4h.MyStudentsToGrade:void 0;return(0,r.xTX)(a.nP,{courseId:e,assessmentId:t},i?{filter:i}:void 0).then(e=>({data:{...e,assessmentId:t,questionGradeStatusType:n}}))},{assessmentId:t,questionGradeStatusType:n}),loadQuestionGradingStatusesByQuestionBlockId:(e,t,n,s=o.s6.Default)=>(0,i.PH)(o.V5.QUESTION_BLOCKS_GRADE_STATUS_LOAD,()=>(0,r.sPL)(a.nP,{courseId:e,assessmentId:t,questionBlockId:n}).then(e=>({data:{...e,assessmentId:t,questionBlockId:n,questionGradeStatusType:s}})),{assessmentId:t,questionBlockId:n,questionGradeStatusType:s}),refreshCachedQuestionGradeStatusesByQuestionId:(e,t,n,r=o.s6.Default)=>(0,i.PH)(o.V5.QUESTIONS_GRADE_STATUS_REFRESH,async(i,o)=>{var s,a,l;let u=i(),d=null!==(l=null===(a=null===(s=u.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===s?void 0:s[r])||void 0===a?void 0:a.ids)&&void 0!==l?l:[];if(d.includes(n)){await o(V.loadQuestionGradeStatusesByAssessmentId(e,t,r));return}let c=d.find(e=>{var t,i;let o=null===(i=null===(t=u.questionGradeStatus.questionIdsByQuestionBlockId[e])||void 0===t?void 0:t[r])||void 0===i?void 0:i.ids;return null==o?void 0:o.includes(n)});c&&await o(V.loadQuestionGradingStatusesByQuestionBlockId(e,t,c,r))})},x={getQuestionGradeStatusesByAssessmentId:(e,t=o.s6.Default)=>n=>S(n,e,t),isQuestionGradeStatusesLoadingByAssessmentId:(e,t=o.s6.Default)=>n=>y(n,e,t),isQuestionGradeStatusesValidByAssessmentId:(e,t=o.s6.Default)=>n=>f(n,e,t),getQuestionGradeStatusesByQuestionBlockIds:(e,t=o.s6.Default)=>n=>v(n,e,t),isQuestionGradeStatusesLoadingByQuestionBlockIds:(e,t=o.s6.Default)=>n=>_(n,e,t),isQuestionGradeStatusesValidByQuestionBlockIds:(e,t=o.s6.Default)=>n=>T(n,e,t)}},333050:function(e,t,n){"use strict";var r,i;n.d(t,{V5:function(){return o},i0:function(){return a},jl:function(){return s},s6:function(){return r}});let o={QUESTIONS_GRADE_STATUS_LOAD:"questions.gradeStatus.load",QUESTION_BLOCKS_GRADE_STATUS_LOAD:"questionsBlocks.gradeStatus.load",QUESTIONS_GRADE_STATUS_REFRESH:"questions.gradeStatus.refresh"};(i=r||(r={})).Default="default",i.MyStudents="myStudents";let s=e=>!!e&&["ids","isLoading","isValid"].some(t=>t in e),a=e=>!!e&&["id","question","responsesNeedingGrading","responsesGraded","responsesInProgress","isQuestionSet"].some(t=>t in e)},581780:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return E},Ys:function(){return m}});var r=n(715729),i=n(847922),o=n(494615),s=n(374899);let a={QUESTION_TAG_LOAD:"question.tag.load"};var l=n(961719);let u=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"courseId"in n.query&&"courseId"in t&&(null==t?void 0:t.limit)===n.query.limit&&(null==t?void 0:t.offset)===n.query.offset});return{id:i,view:i?r[i]:null}},E=(0,l.Lq)({isLoading:!1,paging:null,permissions:null,questionTags:{},views:{byCourseId:{}}},{[a.QUESTION_TAG_LOAD]:(0,l.Li)(c,d),[(0,l.ok)(a.QUESTION_TAG_LOAD)]:(e,t)=>{let{paging:n,permissions:i,questionTagIds:o,questionTags:s}=t.data,a=(0,r.ZP)(e,e=>{Object.keys(s).forEach(t=>{e.questionTags[t]={...s[t]}})});return(0,l.NV)(a,t,{viewResolver:c,viewsPathResolver:d,paging:n,permissions:i,values:o})},[(0,l.bG)(a.QUESTION_TAG_LOAD)]:(0,l.HT)(c,d),[(0,l.ok)(s.V.QUESTION_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseId:n}=t.prevQuestion;u(e,n)})}),p={loadQuestionTags:e=>(0,l.c3)(t=>(t((0,l.aU)(a.QUESTION_TAG_LOAD,{query:e})),(0,i.k)(e).then(n=>(t((0,l.aU)((0,l.ok)(a.QUESTION_TAG_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,l.aU)((0,l.ok)(o.Z.APP_ERROR),{error:n})),t((0,l.aU)((0,l.bG)(a.QUESTION_TAG_LOAD),{query:e})),n})))},m={getByTagId:(e,t)=>Object.values(e.questionTag.questionTags).find(e=>e.id===t),getQuestionTagsByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?(n.values||[]).map(t=>m.getByTagId(e,t)).filter(e=>!!e):[]},getQuestionTagsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=c(e.questionTag,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>m.getByTagId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionTagViewStatusByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},getQuestionTagViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{let{view:r}=c(e.questionTag,n),i=null;return r&&(i={isLoading:r.isLoading,isValid:r.isValid,paging:r.paging,permissions:r.permissions}),[...t,{query:n,view:i}]},[])}},1339:function(e,t,n){"use strict";n.d(t,{Nw:function(){return f},I6:function(){return y},Ys:function(){return _}});var r=n(715729),i=n(893932),o=n(374899);let s={QUESTION_TYPE_LOAD:"question.type.load"};var a=n(961719),l=n(842330),u=n(25859),d=n(873779),c=n(720533),E=n(968227),p=n(503715),m=n(560985),h=n(715655);let I=e=>["views","byCourseId",e.courseId],b=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"courseId"in n.query&&"courseId"in t&&(0,E.AD)(t,n.query)});return i?{id:i,view:r[i]}:a.LW},g=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},y=(0,a.Lq)({permissions:null,questionTypes:{},views:{byCourseId:{}}},{[s.QUESTION_TYPE_LOAD]:(0,a.Li)(b,I),[(0,a.ok)(s.QUESTION_TYPE_LOAD)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,a.f2)(e,t);let{data:n}=t,{permissions:i,questionTypes:o}=n,s=(0,r.ZP)(e,e=>{o.forEach(t=>{e.questionTypes[t]||(e.questionTypes[t]=t)})});return(0,a.NV)(s,t,{viewResolver:b,viewsPathResolver:I,permissions:i,values:o})},[(0,a.bG)(s.QUESTION_TYPE_LOAD)]:(0,a.HT)(b,I),[(0,a.ok)(d.V.ASSESSMENT_DELETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{g(e,n)})},[(0,a.ok)(d.V.ASSESSMENT_IMPORT_TASK_UPDATE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{g(e,n)})},[(0,a.ok)(c.V.CONTENT_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{let{courseAssessmentIds:n}=t;n&&Object.keys(n).forEach(t=>{g(e,t)})}),[(0,a.ok)(c.V.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{g(e,n)})},[(0,a.ok)(c.V.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{g(e,n)})},[u.V.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.ZP)(e,e=>{g(e,n)})},[(0,a.ok)(o.V.QUESTION_DELETE)]:(e,t)=>{let{courseId:n}=t.prevQuestion;return(0,r.ZP)(e,e=>{g(e,n)})},[(0,a.ok)(o.V.QUESTION_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{prevQuestion:n,question:r}=t;(null==n?void 0:n.id)&&0===n.id.indexOf(l.dc)&&g(e,r.courseId)})}),f={loadQuestionTypesByQuery:e=>(0,a.PH)(s.QUESTION_TYPE_LOAD,()=>(0,i.Q)(e).catch(e=>{throw{err:e}}),{query:e})},S=(0,m.wN)(h.PW,E.AD),_={getQuestionTypesByQuery:(0,p.U)((e,t)=>{let{view:n}=b(e.questionType,t);return n?(n.values||[]).map(t=>_.getQuestionTypeByString(e,t)).filter(e=>!!e):[]},e=>e),getQuestionTypeViewStatusByQuery:S((e,t)=>{let{view:n}=b(e.questionType,t);return n?{isLoading:n.isLoading,isValid:n.isValid,permissions:n.permissions}:null},e=>e),getQuestionTypeByString:(e,t)=>Object.values(e.questionType.questionTypes).find(e=>e===t)}},197480:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(961719),i=n(447397);let o={postDirectSubmitAddSubmission:(e,t)=>(0,r.PH)("direct.submit.add.submission",async()=>(await (0,i.wx)(e,t)).ok,{})}},68375:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(961719),i=n(715729),o=n(447397);let s={pluginStatus:n(134129).taJ.Unavailable,registered:!1,mdbUp:!1,enabledSaOnCourse:!1},a={LOAD_DIRECT_SUBMIT_COURSE_SETTINGS:"load.direct.submit.plugin.status"},l=(0,r.Lq)({byCourseId:{}},{[(0,r.ok)(a.LOAD_DIRECT_SUBMIT_COURSE_SETTINGS)]:(e,t)=>(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]=t.payload})}),u={loadSafeAssignCourseSettings:e=>(0,r.PH)(a.LOAD_DIRECT_SUBMIT_COURSE_SETTINGS,async()=>{try{return{payload:await (0,o.ZH)({courseId:e}),courseId:e}}catch(t){throw{...s,courseId:e}}},{})},d={loadSafeAssignCourseSettings:(e,t)=>e.directSubmitCoursesSettings.byCourseId[t]}},390770:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return u}});var r=n(961719),i=n(715729),o=n(447397);let s={LOAD_DIRECT_SUBMIT_RESULTS:"load.direct.submit.results"},a=(0,r.Lq)({papers:{byCourseId:{}}},{[(0,r.ok)(s.LOAD_DIRECT_SUBMIT_RESULTS)]:(e,t)=>(0,i.ZP)(e,e=>{let{courseId:n,papers:r}=t;n&&(e.papers.byCourseId[n]=r)})}),l={loadDirectSubmitResults:e=>(0,r.PH)(s.LOAD_DIRECT_SUBMIT_RESULTS,async()=>{let t=await (0,o.Pm)(e);return{courseId:e.courseId,papers:t.papers}},{})},u={loadDirectSubmitResultsByCourseId:(e,t)=>e.directSubmitResults.papers.byCourseId[t]}},115223:function(e,t,n){"use strict";n.d(t,{I6:function(){return l},Nw:function(){return u},Ys:function(){return d}});var r=n(961719),i=n(715729),o=n(447397);let s=n(134129).taJ.Available,a={LOAD_DIRECT_SUBMIT_PLUGIN_STATUS:"load.direct.submit.plugin.status"},l=(0,r.Lq)({status:!1},{[(0,r.ok)(a.LOAD_DIRECT_SUBMIT_PLUGIN_STATUS)]:(e,t)=>(0,i.ZP)(e,e=>{let{status:n}=t;e.status=!!n})}),u={loadSafeAssignPluginStatus:()=>(0,r.PH)(a.LOAD_DIRECT_SUBMIT_PLUGIN_STATUS,async()=>{try{let e=await (0,o.Kq)();return{status:e.registered&&e.pluginStatus===s}}catch(e){throw{status:!1}}},{})},d={loadSafeAssignPluginStatusGlobal:e=>e.directSubmitPluginStatus.status}},837621:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(961719),i=n(447397);let o={postDirectSubmitUploadSubmission:(e,t)=>(0,r.PH)("direct.submit.upload.submission",()=>(0,i.vm)(e,t).then(e=>e.ok),{})}},630476:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(961719),o=n(134129),s=n(182267);let a={SESSION_DEBUG_SUBMIT:"sessionDebug.submit",SESSION_DEBUG_RESET_STATE:"sessionDebug.resetState"},l={logCode:"",isUpdating:!1,submissionErrorCode:0},u=(0,i.Lq)(l,{[a.SESSION_DEBUG_SUBMIT]:(e,t)=>(0,r.Uy)(e,e=>{e.isUpdating=!0}),[(0,i.bG)(a.SESSION_DEBUG_SUBMIT)]:(e,t)=>{var n,r;return(0,i.sT)(e,t,{submissionErrorCode:(null===(r=null===(n=null==t?void 0:t.err)||void 0===n?void 0:n.error)||void 0===r?void 0:r.status)||o.oji.BadRequest})},[(0,i.ok)(a.SESSION_DEBUG_SUBMIT)]:(e,t)=>(0,r.Uy)(e,e=>{e.logCode=t.logCode}),[a.SESSION_DEBUG_RESET_STATE]:(e,t)=>(0,r.Uy)(e,e=>{(0,i.o_)(e,l)})}),d={submitSessionDebug:e=>(0,i.PH)(a.SESSION_DEBUG_SUBMIT,()=>(0,s.mTj)(e).catch(e=>{throw{err:e}})),resetSessionDebugState:()=>(0,i.aU)(a.SESSION_DEBUG_RESET_STATE)},c={getLogCode:e=>e.sessionDebug.logCode,isUpdating:e=>e.sessionDebug.isUpdating,getSubmissionErrorCode:e=>e.sessionDebug.submissionErrorCode}},63117:function(e,t,n){"use strict";n.d(t,{Nw:function(){return g},I6:function(){return b},Ys:function(){return f}});var r=n(276635),i=n.n(r),o=n(715729),s=n(503715),a=n(560985),l=n(715655),u=n(968227),d=n(961719);let c={STUDENT_ACTIVITY_LOG_LOAD:"studentActivityLog.load"};var E=n(182267);let p=e=>["views","byCourseId",e.courseId],m=(e,t)=>{if(!t)return d.LW;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e];return i().isEqual(r.query,t)});return r?{id:r,view:n[r]}:d.LW},h=(e,t)=>{let{view:n}=m(e.studentActivityLog,t);return!n||!n.isLoading&&!n.isValid},I=(e,t)=>{0!==Object.keys(t).length&&Object.keys(t).forEach(n=>{e.byId[n]={...e.byId[n],...t[n]}})},b=(0,d.Lq)({byId:{},views:{byCourseId:{}}},{[c.STUDENT_ACTIVITY_LOG_LOAD]:(0,d.Li)(m,p),[(0,d.ok)(c.STUDENT_ACTIVITY_LOG_LOAD)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,d.f2)(e,t);let{studentActivityLogs:n,paging:r,permissions:i}=t.data,s=(0,o.ZP)(e,e=>{I(e,n)});return(0,d.NV)(s,t,{viewResolver:m,viewsPathResolver:p,values:Object.keys(n),paging:r,permissions:i})},[(0,d.bG)(c.STUDENT_ACTIVITY_LOG_LOAD)]:(0,d.HT)(m,p)}),g={loadStudentActivityLogsByQuery:e=>(0,d.RU)(c.STUDENT_ACTIVITY_LOG_LOAD,async()=>{try{return{data:await (0,E.ToR)(e),query:e}}catch(t){throw new d.GM(t).setData({query:e})}},{data:{query:e},condition:(t,{getState:n})=>h(n(),e)})},y=(0,a.wN)(l.PW,u.AD),f={getByLogId:(e,t)=>Object.values(e.studentActivityLog.byId).find(e=>e.id===t),getStudentActivityLogsByQuery:(0,s.U)((e,t)=>{let{view:n}=m(e.studentActivityLog,t);return n?(n.values||[]).map(t=>f.getByLogId(e,t)).filter(e=>!!e):null},e=>e),getStudentActivityLogViewStatusByQuery:y((e,t)=>{let{view:n}=m(e.studentActivityLog,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},e=>e)}},267918:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return u},Ys:function(){return c}});var r=n(715729),i=n(537672),o=n(134129),s=n(961719),a=n(269624);let l={isLoading:!1,previewing:void 0,courseMembershipId:void 0,user:void 0},u=(0,s.Lq)(l,{[a.V.STUDENT_PREVIEW_LOAD]:s.K4,[(0,s.ok)(a.V.STUDENT_PREVIEW_LOAD)]:(e,t)=>{let{studentPreviewInfo:n}=t,i=e;return i=(0,r.ZP)(e,e=>{e.previewing=!!(null==n?void 0:n.previewing),e.user=null==n?void 0:n.user,e.courseMembershipId=null==n?void 0:n.courseMembershipId}),(0,s.f2)(i,t)},[(0,s.bG)(a.V.STUDENT_PREVIEW_LOAD)]:s.sT,[(0,s.ok)(a.V.STUDENT_PREVIEW_EXIT)]:e=>(0,r.ZP)(e,e=>{e.courseMembershipId=l.courseMembershipId,e.previewing=l.previewing,e.user=l.user})}),d={exitStudentPreview:e=>(0,s.c3)(t=>(t((0,s.aU)((0,s.ok)(a.V.STUDENT_PREVIEW_EXIT),{data:{courseId:e}})),Promise.resolve(null))),loadStudentPreviewUser:e=>(0,s.PH)(a.V.STUDENT_PREVIEW_LOAD,t=>{var n;return(n=t(),void 0===c.getIsPreviewing(n))?(0,o.R5$)(i.nP,e).then(e=>({studentPreviewInfo:e})):Promise.resolve({studentPreviewInfo:c.getStudentPreviewUserInfo(t())})}),setStudentPreviewUserInStore:e=>(0,s.aU)((0,s.ok)(a.V.STUDENT_PREVIEW_LOAD),{studentPreviewInfo:e})},c={getStudentPreviewUserInfo:e=>({previewing:e.studentPreview.previewing,courseMembershipId:e.studentPreview.courseMembershipId,user:e.studentPreview.user}),getIsPreviewing:e=>e.studentPreview.previewing}},269624:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});let r={STUDENT_PREVIEW_EXIT:"studentPreview.exit",STUDENT_PREVIEW_LOAD:"studentPreview.load"}},466526:function(e,t,n){"use strict";n.d(t,{Nw:function(){return b},I6:function(){return I},Ys:function(){return y}});var r=n(961719),i=n(715729),o=n(134129),s=n(537672);let a=async e=>{let t=await (0,o.$CQ)(s.nP,e);return{...e,results:t}};var l=n(494615),u=n(560985),d=n(276635),c=n(93848);let E={LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID:"load.submission.results.by.attempt.id",LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID:"load.submission.results.average.by.column.id",INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID:"invalidate.submission.results.by.attempt.id"},p=(e,t)=>{let n=Object.keys(e.views).find(n=>{let r=e.views[n];return(0,d.isEqual)(r.query,t)});return{id:null!=n?n:null,view:n?e.views[n]:null}},m=(e,t)=>{let n=p(e,t);n.view&&(n.view.isValid=!1)},h=()=>["views"],I=(0,r.Lq)({views:{},byCourseId:{}},{[E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID]:(0,r.Li)(p,h),[(0,r.bG)(E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(0,r.HT)(p,h),[(0,r.ok)(E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(e,t)=>{let n=(0,i.ZP)(e,e=>{t.data&&t.data.results&&t.data.attemptId&&t.data.courseId&&t.data.columnId&&(e.byCourseId[t.data.courseId]||(e.byCourseId[t.data.courseId]={byColumnId:{}}),e.byCourseId[t.data.courseId].byColumnId[t.data.columnId]||(e.byCourseId[t.data.courseId].byColumnId[t.data.columnId]={byAttemptId:{}}),e.byCourseId[t.data.courseId].byColumnId[t.data.columnId].byAttemptId[t.data.attemptId]=t.data.results.results)});return(0,r.NV)(n,t,{viewResolver:p,viewsPathResolver:h})},[(0,r.ok)(E.LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID)]:(e,t)=>(0,i.ZP)(e,e=>{t.courseId&&t.columnId&&(e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={byColumnId:{}}),e.byCourseId[t.courseId].byColumnId[t.columnId]||(e.byCourseId[t.courseId].byColumnId[t.columnId]={byAttemptId:{}}),e.byCourseId[t.courseId].byColumnId[t.columnId].submissionResults=t.submissionResults.map(e=>e.results[o._Nl]))}),[(0,r.ok)(E.INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(e,t)=>(0,i.ZP)(e,e=>{m(e,t.query)})}),b={loadAttemptSubmissionResults:e=>(0,r.c3)(async(t,n)=>{var i,s,u;let d,p;let{courseId:m,columnId:h,attemptId:I}=e,b=y.getSafeAssignSubmissionResponseForAttempt(n(),m,h,I);if(b){let e=(null!==(i=(p=b).results.results["mdb-sa"].answerOriginalities)&&void 0!==i?i:[]).concat(null!==(s=p.results.results["mdb-sa"].attemptOriginality)&&void 0!==s?s:[]);d=e.length>0&&e.every(e=>e.originalityProcessed)}else{let e=null!==(u=null==(p=y.getAssetProcessorSubmissionResponseByCourseAndAttemptId(n(),m,h,I))?void 0:p.results.results[o.C2s].assetProcessorResults)&&void 0!==u?u:[];d=e.length>0&&(0,c.S)(e)}if(!y.shouldLoadView(n(),e)&&p&&d)return p;try{return t((0,r.aU)(E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)),p=await a(e),t((0,r.aU)((0,r.ok)(E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{query:e,data:p})),p}catch(e){throw t((0,r.aU)((0,r.bG)(E.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{error:e})),t((0,r.aU)((0,r.ok)(l.Z.APP_ERROR),{error:e})),e}}),setAverageSubmissionResultsByColumnId:(e,t,n)=>(0,r.aU)((0,r.ok)(E.LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID),{submissionResults:e,columnId:n,courseId:t}),invalidateSubmissionResults:e=>(0,r.aU)((0,r.ok)(E.INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{query:e})},g=(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId[n])||void 0===s?void 0:s.byAttemptId)||void 0===a?void 0:a[r])||void 0===l?void 0:l[o.C2s])||void 0===u?void 0:u.assetProcessorResults},y={shouldLoadView:(e,t)=>{let n=p(e.submissionResults,t);return!n.view||!n.view.isValid&&!n.view.isLoading},getSafeAssignSubmissionResultsForAttempt:(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId)||void 0===s?void 0:s[n])||void 0===a?void 0:a.byAttemptId)||void 0===l?void 0:l[r])||void 0===u?void 0:u[o._Nl]},getSafeAssignSubmissionResponseForAttempt:(e,t,n,r)=>{let i=y.getSafeAssignSubmissionResultsForAttempt(e,t,n,r);if(i)return{courseId:t,columnId:n,attemptId:r,results:{results:{[o._Nl]:i}}}},getAverageSafeAssignSubmissionResultsForColumn:(e,t,n)=>{var r,i;return null===(i=null===(r=e.submissionResults.byCourseId[t])||void 0===r?void 0:r.byColumnId[n])||void 0===i?void 0:i.submissionResults},getAssetProcessorSubmissionResultByCourseAndAttemptId:(0,u.P1)(g,e=>null==e?void 0:e.reduce((e,t)=>{var n;return t.qtiResultDataId?e:t.bbFileUuid?e.filesResult?{...e,filesResult:[...null!==(n=e.filesResult)&&void 0!==n?n:[],t]}:{...e,filesResult:[t]}:{...e,textResult:t}},{})),getAssetProcessorSubmissionResponseByCourseAndAttemptId:(e,t,n,r)=>{let i=g(e,t,n,r);if(null==i?void 0:i.length)return{courseId:t,columnId:n,attemptId:r,results:{results:{[o.C2s]:{assetProcessorResults:i}}}}}}},921736:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return d},Ys:function(){return c}});var r=n(715729),i=n(961719),o=n(134129),s=n(394283),a=n(720533);let l={SUBMISSION_SERVICES_LOAD:"submissionServices.load",SUBMISSION_SERVICE_SAVE:"submissionService.save"};function u(e){let t=e();if(t)return Object.values(t).find(e=>{var t,n;return(null==e?void 0:e.available)&&(null===(n=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.OriginalityReport)||void 0===n?void 0:n.default)})}let d=(0,i.Lq)({byColumnId:{},isLoading:!1},{[l.SUBMISSION_SERVICES_LOAD]:i.K4,[(0,i.ok)(l.SUBMISSION_SERVICES_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{e.byColumnId={...e.byColumnId,...t.submissionServices}});return(0,i.f2)(n,t)},[(0,i.bG)(l.SUBMISSION_SERVICES_LOAD)]:i.sT,[l.SUBMISSION_SERVICE_SAVE]:i.K4,[(0,i.ok)(l.SUBMISSION_SERVICE_SAVE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{submissionServices:n}=t;Object.keys(n).forEach(t=>{Object.keys(n[t]||{}).forEach(r=>{e.byColumnId[t][r]=n[t][r]})})});return(0,i.f2)(n,t)},[(0,i.bG)(l.SUBMISSION_SERVICE_SAVE)]:i.sT,[(0,i.ok)(a.V.CONTENT_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{let{contents:n,assessments:r}=t;Object.values(n||{}).forEach(t=>{var n,i;if((null==t?void 0:t.safeAssignOptions)&&(null==t?void 0:t.assessmentId)&&r[t.assessmentId]&&r[t.assessmentId].gradableItemId){let{safeAssignOptions:s}=t,a=r[t.assessmentId].gradableItemId,l=u(()=>{var t;return null===(t=e.byColumnId)||void 0===t?void 0:t[a]});l&&l.uniqueHandle===o._Nl&&(null===(i=null===(n=null==l?void 0:l.capabilities)||void 0===n?void 0:n.OriginalityReport)||void 0===i?void 0:i.enabled)!==(null==s?void 0:s.checkAttempts)&&(l.capabilities.OriginalityReport.enabled=s.checkAttempts,e.byColumnId[a]={[l.uniqueHandle]:l})}})})}),c={getDefaultOriginalityReportSubmissionService:(e,t)=>u(()=>{var n;return null===(n=e.submissionServices.byColumnId)||void 0===n?void 0:n[t]})},E={loadSubmissionServices:(e,t)=>(0,i.PH)(l.SUBMISSION_SERVICES_LOAD,async n=>{var r;if(null===(r=n().submissionServices.byColumnId)||void 0===r?void 0:r[t])return;let i=(await (0,s.y)(e,t)).reduce((e,t)=>({...e,[t.uniqueHandle]:t}),{});return{submissionServices:{[t]:i}}},null,[o.oji.Forbidden]),saveSubmissionService:(e,t,n)=>(0,i.PH)(l.SUBMISSION_SERVICE_SAVE,async()=>{let r=await (0,s.G)(e,t,n);return{submissionServices:{[t]:{[r.uniqueHandle]:r}}}})}},527719:function(e,t,n){"use strict";n.d(t,{Nw:function(){return p},I6:function(){return c},Ys:function(){return m}});var r=n(715729),i=n(961719),o=n(537672),s=n(134129),a=n(587637);let l={SYSTEM_ENTITLEMENTS_LOAD:"systemEntitlements.load"},u={byEntitlementId:{status:a.by,value:{}}},d=()=>["byEntitlementId"],c=(0,i.Lq)(u,{[l.SYSTEM_ENTITLEMENTS_LOAD]:(0,a.nt)(d,a.Em),[(0,i.ok)(l.SYSTEM_ENTITLEMENTS_LOAD)]:(e,t)=>{let n=t.entitlements;return(0,r.ZP)(e,e=>{var t;let r=null!==(t=e.byEntitlementId.value)&&void 0!==t?t:{};n.forEach(e=>{r[e.uid]=e}),e.byEntitlementId={status:a.vo,value:r}})},[(0,i.bG)(l.SYSTEM_ENTITLEMENTS_LOAD)]:(0,a.nt)(d,a.gp)});function E(e,t){return(0,a.t)(t.getState().systemEntitlements.byEntitlementId.status)}let p={loadSystemEntitlements:()=>(0,i.RU)(l.SYSTEM_ENTITLEMENTS_LOAD,async()=>({entitlements:(await (0,s.zUk)(o.nP)).results}),{condition:E})},m={hasSystemEntitlement:(e,t)=>{var n;let r=e.systemEntitlements.byEntitlementId;return{isLoading:r.status!==a.vo,hasEntitlement:!!(null===(n=r.value)||void 0===n?void 0:n[t])}}}},207708:function(e,t,n){"use strict";n.d(t,{Nw:function(){return g},I6:function(){return I},Ys:function(){return b}});var r=n(715729),i=n(961719),o=n(187680),s=n(135423),a=n(276635),l=n(134129);class u extends s.Y{constructor(e){super(e,"SystemPreferenceValueMissing")}}let d=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===l.oji.NotFound&&(0,a.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message,"No value was found for given preference key")?new u(e.error):e},c="/v1/systemPreferences/%key%";async function E(e){try{return await (0,o.U2)((0,o.Q2)(c,e))}catch(e){throw d(e)}}async function p(e){let t=(0,o.Q2)(c,{key:e.key});return(0,o.gz)(t,e)}var m=n(494615);let h={SYSTEM_PREFERENCE_LOAD:"system-preference.load",SYSTEM_PREFERENCE_PERSIST:"system-preference.persist"},I=(0,i.Lq)({systemPreferences:{}},{[h.SYSTEM_PREFERENCE_LOAD]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!0}),[(0,i.ok)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>{let{systemPreference:n}=t;return(0,r.ZP)(e,e=>{var t;e.systemPreferences[n.key]={...n,api:{isUpdating:!1,isDeleting:!1,isLoading:!1},ui:null===(t=e.systemPreferences[n.key])||void 0===t?void 0:t.ui}})},[(0,i.cI)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!1}),[(0,i.bG)(h.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api||(e.systemPreferences[t.key].api={}),e.systemPreferences[t.key].api.isLoading=!1}),[h.SYSTEM_PREFERENCE_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!0}),[(0,i.ok)(h.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>{let{systemPreference:n}=t,i={...n,api:{...e.systemPreferences[n.key].api,isUpdating:!1},ui:e.systemPreferences[n.key]&&e.systemPreferences[n.key].ui};return(0,r.ZP)(e,e=>{e.systemPreferences[i.key]=i})},[(0,i.bG)(h.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!1})}),b={getSystemPreferenceByKey:(e,t)=>{var n,r;return null===(r=null===(n=null==e?void 0:e.systemPreference)||void 0===n?void 0:n.systemPreferences)||void 0===r?void 0:r[t]},isSystemPreferenceLoading:(e,t)=>{var n,r;return!!(null===(r=null===(n=b.getSystemPreferenceByKey(e,t))||void 0===n?void 0:n.api)||void 0===r?void 0:r.isLoading)}},g={loadSystemPreference:e=>(0,i.c3)(async(t,n)=>{let{key:r,shouldLoadWhilePending:o}=e;if(!function(e,t,n){let r=!!b.getSystemPreferenceByKey(e,t),i=b.isSystemPreferenceLoading(e,t);return(!r||!!i)&&(!r||n)}(n(),r,o))return{systemPreference:b.getSystemPreferenceByKey(n(),e.key)};t((0,i.aU)(h.SYSTEM_PREFERENCE_LOAD,{key:r}));try{let n=await E(e);return t((0,i.aU)((0,i.ok)(h.SYSTEM_PREFERENCE_LOAD),{key:r,systemPreference:n})),{systemPreference:n}}catch(e){if(e instanceof u)return t((0,i.aU)((0,i.cI)(h.SYSTEM_PREFERENCE_LOAD),{key:r})),null;throw t((0,i.aU)((0,i.bG)(h.SYSTEM_PREFERENCE_LOAD),{key:r})),t((0,i.aU)((0,i.ok)(m.Z.APP_ERROR),{error:e})),e}}),persistSystemPreference:e=>(0,i.PH)(h.SYSTEM_PREFERENCE_PERSIST,()=>p(e).then(e=>({systemPreference:e})).catch(e=>{throw{err:e}}),{nextSystemPreference:e})}},133215:function(e,t,n){"use strict";n.d(t,{Nw:function(){return l},I6:function(){return a}});var r=n(715729),i=n(961719),o=n(720032);let s={THEME_CREATE:"theme.create",THEME_DELETE:"theme.delete"},a=(0,i.Lq)({themes:{byId:{}},paging:null,isLoading:!1},{[(0,i.ok)(s.THEME_CREATE)]:(e,t)=>{let n={...t.theme,api:{isUpdating:!1,isDeleting:!1}};return(0,r.ZP)(e,e=>{e.themes.byId[n.id]=n})},[(0,i.bG)(s.THEME_CREATE)]:i.sT,[s.THEME_DELETE]:(e,t)=>(0,r.ZP)(e,e=>{e.themes.byId[t.id].api.isDeleting=!0}),[(0,i.ok)(s.THEME_DELETE)]:(e,t)=>(0,r.ZP)(e,e=>{delete e.themes.byId[t.id]}),[(0,i.bG)(s.THEME_DELETE)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{e.themes.byId[t.id].api.isDeleting=!1});return(0,i.sT)(n,t)}}),l={createTheme:e=>(0,i.PH)(s.THEME_CREATE,()=>(0,o.jG)(e).catch(e=>{throw{err:e}})),deleteTheme:e=>(0,i.PH)(s.THEME_DELETE,()=>(0,o.fR)(e).then(()=>({id:e})).catch(e=>{throw{err:e}}),{id:e})}},844929:function(e,t,n){"use strict";n.d(t,{Nw:function(){return d},I6:function(){return l},Ys:function(){return u}});var r=n(715729),i=n(276635),o=n(961719),s=n(406577);let a={ULTRA_SETTINGS_LOAD:"ultra-settings.load",ULTRA_SETTINGS_PERSIST:"ultra-settings.persist"},l=(0,o.Lq)({ultraSettings:null,isLoading:!1},{[a.ULTRA_SETTINGS_LOAD]:(e,t)=>(0,o.K4)(e,t),[(0,o.ok)(a.ULTRA_SETTINGS_LOAD)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,o.f2)(i,t)},[(0,o.bG)(a.ULTRA_SETTINGS_LOAD)]:(e,t)=>(0,o.sT)(e,t),[a.ULTRA_SETTINGS_PERSIST]:(e,t)=>(0,r.ZP)(e,e=>{let t=e.ultraSettings;e.ultraSettings={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}}),[(0,o.ok)(a.ULTRA_SETTINGS_PERSIST)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.ZP)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,o.f2)(i,t)},[(0,o.bG)(a.ULTRA_SETTINGS_PERSIST)]:(e,t)=>(0,r.ZP)(e,e=>{e.ultraSettings.api.isUpdating=!1})}),u={getUltraSettings:e=>e.ultraSettings,isSettingLoading:e=>(0,i.get)(e,["ultraSettings","isLoading"])},d={loadUltraSetting:()=>(0,o.PH)(a.ULTRA_SETTINGS_LOAD,async e=>{try{return{ultraSettings:await (0,s.X)()}}catch(e){throw{err:e}}}),persistUltraSettings:e=>(0,o.PH)(a.ULTRA_SETTINGS_PERSIST,()=>(0,s.I)(e).then(e=>({ultraSettings:e})).catch(e=>{throw{err:e}}),{ultraSettings:e})}},961006:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return d},Ys:function(){return c}});var r=n(134129),i=n(715729),o=n(778510),s=n(486036),a=n(494615),l=n(961719);let u={SETTINGS_LOAD:"unsplash.settings.load"};(0,l.ok)(u.SETTINGS_LOAD),(0,l.bG)(u.SETTINGS_LOAD);let d=(0,l.Lq)({settings:{byCourseId:{}}},{[u.SETTINGS_LOAD]:(e,t)=>(0,i.ZP)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!0:e.settings.byCourseId[n]={isLoading:!0}}),[(0,l.ok)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{e.settings.byCourseId[t.meta.courseId]={value:t.payload.settings,isLoading:!1}}),[(0,l.bG)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.ZP)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!1:e.settings.byCourseId[n]={isLoading:!1}})}),c={getSettings:(e,t)=>{var n;return null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.value},isLoadingSettings:(e,t)=>{var n,r;return null!==(r=null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}},E={getSettings:e=>(0,l.c3)(async(t,n)=>{if(!(c.isLoadingSettings(n(),e)||c.getSettings(n(),e)))try{let n={type:u.SETTINGS_LOAD,meta:{courseId:e}};t(n);let r=await (0,s.jC)(e),i={type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:r},meta:{courseId:e}};t(i)}catch(n){if((0,o.Kn)((0,o.Gt)(n),[r.oji.NotFound])){t({type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:{applicationId:"",available:!1}},meta:{courseId:e}});return}t({type:(0,l.bG)(u.SETTINGS_LOAD),meta:{courseId:e}}),t((0,l.aU)((0,l.ok)(a.Z.APP_ERROR),{error:n}))}})}},576879:function(e,t,n){"use strict";n.d(t,{Nw:function(){return m},I6:function(){return p},Ys:function(){return h}});var r=n(715729),i=n(221952),o=n(66288),s=n(961719),a=n(304310),l=n(888663),u=n(183399);let d={USER_LOAD:"user.load",USER_LOAD_ME:"user.load.me"},c=(e,t)=>(0,r.ZP)(e,n=>{for(let[r,i]of Object.entries(t.users))n.byId[r]={...e.byId[r],...i}});function E(e,t){return t.forEach(t=>{let{memberships:n}=t;n&&n.forEach(t=>{let{user:n}=t;n&&(e=(0,r.ZP)(e,e=>{e.byId[n.id]=n}))})}),e}let p=(0,s.Lq)({byId:{},isLoading:!1},{[d.USER_LOAD]:s.K4,[(0,s.ok)(d.USER_LOAD)]:(e,t)=>{let{user:n}=t,i=e;return n&&(i=(0,r.ZP)(e,e=>{e.byId[n.id]=n})),(0,s.f2)(i,t)},[(0,s.ok)(l.V.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.user)return e;let{user:i}=n;return(0,r.ZP)(e,e=>{e.byId[i.id]=i})},[(0,s.ok)(l.V.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.users)return e;let{users:i}=n;return(0,r.ZP)(e,e=>{Object.keys(i).forEach(t=>{e.byId[t]=i[t]})})},[(0,s.bG)(d.USER_LOAD)]:s.sT,[(0,s.ok)(i.Z.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let{groups:n}=t;return n&&(e=E(e,Object.values(n))),e},[(0,s.ok)(i.Z.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return e;let r=Object.values(n.groups);return r&&(e=E(e,r)),e},[(0,s.ok)(o.V.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let n=(0,r.ZP)(e,e=>{let{byCourseMembershipId:n}=t.data;n&&Object.keys(n||{}).forEach(t=>{let r=n[t].user;r&&(e.byId[r.id]=r)})});return(0,s.f2)(n,t)},[(0,s.ok)(u.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:c,[(0,s.ok)(u.V.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:c,[d.USER_LOAD_ME]:s.K4,[(0,s.ok)(d.USER_LOAD_ME)]:(e,t)=>{let{user:n}=t,i=e;return n&&(i=(0,r.ZP)(e,e=>{e.current=n,e.byId[n.id]=n})),(0,s.f2)(i,t)},[(0,s.bG)(d.USER_LOAD_ME)]:s.sT}),m={loadUser:e=>(0,s.PH)(d.USER_LOAD,t=>{var n;return(n=t(),h.getUserById(n,e))?Promise.resolve(null):(0,a.B)(e).then(e=>({user:e}))}),loadCurrentUser:()=>(0,s.PH)(d.USER_LOAD_ME,e=>{var t;return(t=e(),h.getCurrentUser(t))?Promise.resolve(null):(0,a.B)("me").then(e=>({user:e}))}),setUserInStore:e=>(0,s.aU)((0,s.ok)(d.USER_LOAD_ME),{user:e})},h={getUserById:(e,t)=>e.user.byId[t],getUsersByIds:(e,t)=>{let n={};return t.forEach(t=>{e.user.byId[t]&&(n[t]=e.user.byId[t])}),n},getCurrentUser:e=>e.user.current}},802692:function(e,t,n){"use strict";n.d(t,{Nw:function(){return b},I6:function(){return p},Ys:function(){return g}});var r=n(715729),i=n(134129),o=n(961719),s=n(762319);let a={USER_PREFERENCE_LOAD:"user-preference.load",USER_PREFERENCE_DELETE:"user-preference.delete",USER_PREFERENCE_PERSIST:"user-preference.persist"};var l=n(587637);let u=e=>["byKey",e.key],d=e=>["byKey",e.userPreference.key],c=e=>(t,n)=>(0,r.Uy)(t,t=>{let{userPreference:r}=n,{key:i}=r;t.byKey[i]={value:r,status:(0,l.Tf)(e,t.byKey[i],l._B)}}),E=(e,t)=>(0,r.Uy)(e,e=>{let n=e.byKey[t.key];n&&(delete n.value,n.status=(0,l.Tf)(l.yL.Load,e.byKey[t.key],l._B),e.byKey[t.key]=n)}),p=(0,o.Lq)({byKey:{}},{[a.USER_PREFERENCE_LOAD]:(0,l.gX)(u,l.yL.Load,l.hJ),[(0,o.ok)(a.USER_PREFERENCE_LOAD)]:c(l.yL.Load),[(0,o.cI)(a.USER_PREFERENCE_LOAD)]:(0,l.gX)(u,l.yL.Load,l._B),[(0,o.bG)(a.USER_PREFERENCE_LOAD)]:(0,l.gX)(u,l.yL.Load,l.eV),[(0,o.ok)(a.USER_PREFERENCE_DELETE)]:E,[(0,o.cI)(a.USER_PREFERENCE_DELETE)]:E,[a.USER_PREFERENCE_PERSIST]:(0,l.gX)(d,l.yL.Update,l.DK),[(0,o.ok)(a.USER_PREFERENCE_PERSIST)]:c(l.yL.Update),[(0,o.bG)(a.USER_PREFERENCE_PERSIST)]:(0,l.gX)(d,l.yL.Update,l.eV)});function m(e,t){let n=g.getUserPreferenceByKey(t.getState(),e.key);return(0,l.M0)(null==n?void 0:n.status)}function h(e,t){let n=g.getUserPreferenceByKey(t.getState(),e.key);return!n||(0,l.M5)(n.status)}function I(e,t){let n=g.getUserPreferenceByKey(t.getState(),e.userPreference.key);return!n||(0,l.BY)(n.status)}let b={loadUserPreference:e=>(0,o.RU)(a.USER_PREFERENCE_LOAD,async()=>({userPreference:await (0,s._s)(e)}),{allowedErrors:[i.oji.NotFound],data:e,condition:m}),deleteUserPreference:e=>(0,o.RU)(a.USER_PREFERENCE_DELETE,async()=>(await (0,s.Lj)(e),{key:e}),{allowedErrors:[i.oji.NotFound],data:{key:e},condition:h}),persistUserPreference:(e,t)=>(0,o.RU)(a.USER_PREFERENCE_PERSIST,async()=>({userPreference:await (0,s.px)(e,t?{userId:t}:void 0)}),{data:{userPreference:e},condition:I})},g={getUserPreferenceByKey:(e,t)=>e.userPreference.byKey[t]}},311846:function(e,t,n){"use strict";n.d(t,{Nw:function(){return E},I6:function(){return c},Ys:function(){return p}});var r=n(715729),i=n(961719),o=n(134129),s=n(113674),a=n(778510),l=n(494615);let u={USER_PRONOUNS_LOAD:"user-pronouns.load",USER_PRONOUN_ADD:"user-pronoun.add",USER_PRONOUN_DELETE:"user-pronoun.delete"},d=(e,t)=>(0,r.Uy)(e,n=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};t.forEach(e=>{let t={...e,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}};e.status===o.xN_.Approved?(r[t.id]=t,delete i[t.id]):(i[t.id]=t,delete r[t.id])}),n.approvedPronounsById=r,n.pendingPronounsById=i}),c=(0,i.Lq)({approvedPronounsById:{},pendingPronounsById:{},isLoading:!1},{[u.USER_PRONOUNS_LOAD]:(e,t)=>(0,i.K4)(e,t),[(0,i.ok)(u.USER_PRONOUNS_LOAD)]:(e,t)=>{let n=t.results;return(0,i.f2)(d(e,n),t)},[(0,i.ok)(u.USER_PRONOUN_ADD)]:(e,t)=>d(e,t.pronoun.id?[t.pronoun]:[]),[(0,i.ok)(u.USER_PRONOUN_DELETE)]:(e,t)=>{let n=t.pronounId;return(0,r.Uy)(e,t=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};delete r[n],delete i[n],t.approvedPronounsById=r,t.pendingPronounsById=i})}}),E={loadSystemPronouns:e=>(0,i.PH)(u.USER_PRONOUNS_LOAD,async()=>{try{return await (0,s.n5)(e)}catch(e){throw{err:e}}}),addSystemPronoun:e=>(0,i.c3)(async t=>{let n;try{return t((0,i.aU)(u.USER_PRONOUN_ADD,{pronoun:e})),n=await (0,s.PB)(e),t((0,i.aU)((0,i.ok)(u.USER_PRONOUN_ADD),{pronoun:n})),{pronoun:n}}catch(e){if(e instanceof a.IK)throw e;throw t((0,i.aU)((0,i.ok)(l.Z.APP_ERROR),{error:e})),e}}),deleteSystemPronoun:e=>(0,i.PH)(u.USER_PRONOUN_DELETE,async()=>{try{return await (0,s.hJ)(e),{pronounId:e}}catch(e){throw{err:e}}})},p={getApprovedPronouns:e=>Object.values(e.userPronouns.approvedPronounsById),getPendingPronouns:e=>Object.values(e.userPronouns.pendingPronounsById),getAllPronouns:e=>[...p.getApprovedPronouns(e),...p.getPendingPronouns(e)]}},219034:function(e,t,n){"use strict";n.d(t,{K:function(){return r},n:function(){return i}});let r=(e,t)=>(null==e?void 0:e.type)==="api"&&t.includes(e.status),i=e=>(null==e?void 0:e.type)==="network"},778991:function(e,t,n){"use strict";n.d(t,{RF:function(){return s},jM:function(){return o}});var r=n(134129),i=n(135423);class o extends i.Y{constructor(e){super(e,"AssessmentConflictNotEnoughPeerReviews")}}function s(e){return e.error.status===r.oji.Conflict&&"bb-assessment-conflict-not-enough-peer-reviews"===e.error.code?new o(e.error):e}},946532:function(e,t,n){"use strict";n.d(t,{PG:function(){return d},QK:function(){return E},S6:function(){return s},UP:function(){return c},e9:function(){return u},hm:function(){return l},hq:function(){return a}});var r,i,o=n(135423);(r=i||(i={})).GROUP_ENROLLMENT_EXPIRED_ERROR_CODE="enrollmentEndDateViolation",r.GROUP_IS_FULL_ERROR_CODE="maximumEnrollmentsExceeded",r.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="sourceGroupContainsAttempt",r.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="targetGroupContainsAttempt",r.SOURCE_GROUP_GRADE_ERROR_CODE="sourceGroupContainsGrade",r.TARGET_GROUP_GRADE_ERROR_CODE="targetGroupContainsGrade";class s extends o.Y{constructor(e){super(e,"GroupEnrollmentExpiredError")}}class a extends o.Y{constructor(e){super(e,"GroupFullError")}}class l extends o.Y{constructor(e){super(e,"TargetGroupSubmittedAttemptError")}}class u extends o.Y{constructor(e){super(e,"SourceGroupSubmittedAttemptError")}}class d extends o.Y{constructor(e){super(e,"SourceGroupGradesError")}}class c extends o.Y{constructor(e){super(e,"TargetGroupGradesError")}}function E(e){var t;switch(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code){case i.GROUP_ENROLLMENT_EXPIRED_ERROR_CODE:return new s(e.error);case i.GROUP_IS_FULL_ERROR_CODE:return new a(e.error);case i.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new l(e.error);case i.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new u(e.error);case i.TARGET_GROUP_GRADE_ERROR_CODE:return new c(e.error);case i.SOURCE_GROUP_GRADE_ERROR_CODE:return new d(e.error);default:return e}}},318900:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});class r extends Error{}},316340:function(e,t,n){"use strict";n.d(t,{xh:function(){return a}});var r=n(276635),i=n(134129),o=n(135423);class s extends o.Y{constructor(e){super(e,"QuestionAnalysisNoSubmittedAttemptsError")}}function a(e){return e.error.status===i.oji.BadRequest&&(r.includes(e.error.message,"Item Analysis can only be run once there are submitted attempts")||r.includes(e.error.message,"There are no questions"))?new s(e.error):e}},135423:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});class r extends Error{constructor(e,t,n){super(n),this.error=e,Object.setPrototypeOf(this,new.target.prototype),this.name=t}}},156536:function(e,t,n){"use strict";n.d(t,{A:function(){return a},I:function(){return s}});var r=n(135423),i=n(276635),o=n(134129);class s extends r.Y{constructor(e){super(e,"UserPronounsUnsafeName")}}let a=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===o.oji.BadRequest&&(0,i.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.code,o.Vez)?new s(e.error):e}},518848:function(e,t,n){"use strict";var r=n(134129),i=n(677937),o=n(216795);let s=e=>(null==e?void 0:e.type)===r.IQK.Test&&(null==e?void 0:e.subtype)===r.PUk.Assignment;t.ZP={isAssignment:s,requiresInitialAttempt:e=>{var t;return!s(null===(t=(0,o.fY)(e))||void 0===t?void 0:t.assessment)||(0,i.TD)(e)||(0,i.G6)(e)||(0,i.AQ)(e)||(0,i.Gu)(e)}}},650220:function(e,t,n){"use strict";var r,i;n.d(t,{W:function(){return r}}),(i=r||(r={})).Default="default",i.MyStudents="myStudents",i.Overview="overview"},570384:function(e,t,n){"use strict";n.d(t,{ab:function(){return l},lG:function(){return a}});var r=n(819353),i=n(134129),o=n(677937);let s=e=>r.GQ.LearningModule.isEqualTo(e.contentHandler),a=e=>{var t,n;return s(e)&&!!(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[i.DXv.LearningModule])||void 0===n?void 0:n.isSequential)};function l(e){return!0===e.inSequence}t.ZP={isLearningModule:s,isForcedSequenceModule:a,isInForcedSequenceLearningModule:l,isFolderOrLearningModule:e=>(0,o._z)(e)||s(e)}},844993:function(e,t,n){"use strict";n.d(t,{MO:function(){return a},QN:function(){return i},b4:function(){return o},dc:function(){return r}});let r="new_",i=e=>!!e.id;class o{constructor(e){if(this.previousState=e,null==e)throw Error("Unable to instantiate RestModel with null state object");this.state={...e}}isNew(){return!this.state.id||0===this.state.id.indexOf(r)}}function s(e,t){return t&&t.id&&(e[t.id]=t),e}function a(e,t){return e.reduce(t||s,{})}},436742:function(e,t,n){"use strict";n.d(t,{Jl:function(){return m},OY:function(){return l},VO:function(){return p},X6:function(){return E},Zx:function(){return a},dc:function(){return h},mJ:function(){return u},nP:function(){return c},u$:function(){return d},vB:function(){return I}});var r=n(2521),i=n(537672),o=n(844993),s=n(4041);let a=(0,s.W)(r.nb,i.T2),l=(0,s.W)(r.j6,i.T2),u=(0,s.W)(r.q6,i.T2),d=(0,s.W)(r.kO,i.T2),c=async e=>{let{courseFoundationsId:t}=e;return function(e){let{results:t}=e;return{achievementsById:(0,o.MO)(t),achievementIds:t.map(e=>e.id)}}(await (0,s.W)(r.$J,i.T2)(t))},E=(0,s.W)(r.Xx,i.T2),p=(0,s.W)(r.QK,i.T2),m=(0,s.W)(r.yO,i.T2),h=(0,s.W)(r.As,i.T2),I=(0,s.W)(r.zD,i.T2)},869075:function(e,t,n){"use strict";n.d(t,{J_:function(){return u},Pz:function(){return a},jh:function(){return l},mR:function(){return d}});var r=n(134129),i=n(537672),o=n(842330),s=n(4041);let a=(0,s.W)(r.naM,i.nP),l=(0,s.W)(r.Em4,i.nP),u=async e=>{let{courseId:t,contentId:n,paging:a={offset:0,limit:1e3}}=e;return function(e){let{results:t,paging:n,permissions:r}=e;return{rules:(0,o.MO)(t),permissions:r,paging:n}}(await (0,s.W)(r.Pkm,i.nP)(t,n,a))},d=(0,s.W)(r.MQt,i.nP)},170209:function(e,t,n){"use strict";n.d(t,{$w:function(){return c},Nf:function(){return u},U_:function(){return I},_5:function(){return E},de:function(){return d},on:function(){return h},tH:function(){return p}});var r=n(537672),i=n(134129),o=n(844993),s=n(468832),a=n(4041);function l(e){let{results:t,paging:n}=e;return{announcements:(0,o.MO)(t),paging:n}}let u=e=>{let{courseId:t,filter:n={searchText:""},paging:o={offset:0,limit:s.g7},sort:a}=e,{offset:u,limit:d}=o;if(n.searchText){let e=new i.SJR({courseId:t}).withSession(r.nP).withPaging({offset:u,limit:d}).withQueryParams({q:n.searchText});return a&&e.withSort(...a),(0,i.jIs)(e).then(l)}return(0,i.D0l)(r.nP,t,{offset:u,limit:d},a).then(e=>l(e))},d=(e,t)=>(t.id?(0,i.L$6)(r.nP,e,t.id,t):(0,i.Vwz)(r.nP,e,t)).then(e=>({announcement:e})),c=(0,a.W)(i.zOC,r.nP),E=(e,t)=>(0,i.WVZ)(r.nP,e,t),p=e=>(0,i.y2J)(r.nP,e).then(t=>({announcementsCounts:t,courseId:e}));async function m(e){let t=new i.pHC({courseId:e}).withSession(r.nP).withQueryParams({membershipAvailable:!0});return(0,i.jIs)(t)}let h=e=>Promise.all([(0,i.WnB)(r.nP,e),m(e)]).then(e=>{let t=e.shift(),{count:n}=e.shift();return{courseContext:{...t,membershipCount:n}}}),I=(e,t)=>(0,i.ECF)(r.nP,e,t).then(e=>({announcement:e}))},87293:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var r=n(537672),i=n(134129);function o(e){return(0,i.C9P)(r.nP,e)}},550206:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(134129),i=n(537672);function o(e){return(0,r.pDv)(i.nP,e)}},708541:function(e,t,n){"use strict";n.d(t,{Ir:function(){return f},JC:function(){return A},Ut:function(){return v},Xi:function(){return h},Y2:function(){return y},YF:function(){return _},oc:function(){return T},p2:function(){return b},p5:function(){return S},s3:function(){return I},wc:function(){return g}});var r=n(276635),i=n(187680),o=n(844993);let s="/v1/courses/%courseId%/journals",a=`${s}/%blogId%`,l=`${s}/%blogId%/entries`,u=`${l}/membership/%assignedUserId%`,d=`${l}/%entryId%`,c=`${d}/comments`,E=`${c}/%commentId%`,p=`${s}/%blogId%/participants`,m=`${s}/%blogId%/summary`;async function h(e){let{courseId:t,blogId:n,expandHasEntries:r,options:o}=e,s=(0,i.Q2)(a,{courseId:t,blogId:n,expand:r?"hasEntries":null});return await (0,i.U2)(s,o)}async function I(e){let t=function(e){let{courseId:t,paging:n,expand:r,assignedUserId:i,blogId:o}=e;return{...n?{limit:n.limit,offset:n.offset}:{},assignedUserId:i,blogId:o,courseId:t,expand:r}}(e),{results:n,paging:r,permissions:s}=await (0,i.U2)((0,i.Q2)(u,t));return{byId:(0,o.MO)(n),entriesId:n.map(e=>e.id),paging:r,permissions:s}}async function b(e,t="permissions"){let{courseId:n,blogId:r,nextEntry:s}=e,a=await (0,i.v_)((0,i.Q2)(`${l}?expand=%expand%`,{courseId:n,blogId:r,expand:t}),s);return{byId:(0,o.MO)([a])}}async function g(e){let{courseId:t,blogId:n,nextEntry:s,prevEntry:a}=e,l=(0,i.T8)(a,s);if((0,r.isEmpty)(l))return null;let u=(0,i.Q2)(d,{courseId:t,blogId:n,entryId:null==s?void 0:s.id}),c=await (0,i.r$)(u,s);return{byId:(0,o.MO)([c])}}let y=e=>{let{courseId:t,blogId:n,entryId:r}=e;return(0,i.Od)((0,i.Q2)(d,{courseId:t,blogId:n,entryId:r}))};async function f(e){let{courseId:t,blogId:n,entryId:r,nextComment:o}=e,s=(0,i.Q2)(c,{courseId:t,blogId:n,entryId:r});return await (0,i.v_)(s,o)}async function S(e){let{courseId:t,blogId:n,entryId:o,nextComment:s,prevComment:a}=e,l=(0,i.T8)(a,s);if((0,r.isEmpty)(l))return null!=a?a:null;let u=(0,i.Q2)(E,{courseId:t,blogId:n,entryId:o,commentId:null==s?void 0:s.id});return await (0,i.r$)(u,s)}let _=async e=>{let{courseId:t,blogId:n,entryId:r,commentId:o}=e,s=(0,i.Q2)(E,{courseId:t,blogId:n,entryId:r,commentId:o});return(0,i.Od)(s)};async function T(e,t,n,r={}){let{permissions:s,results:a,paging:l}=await (0,i.U2)((0,i.Q2)(c,{courseId:e,blogId:t,entryId:n,...r}));return{paging:l,permissions:s,byId:(0,o.MO)(a)}}async function v(e,t="user"){var n,r;let o=[];e.sortColumn&&e.sortDirection&&o.push({field:e.sortColumn,direction:e.sortDirection});let s={limit:null===(n=e.paging)||void 0===n?void 0:n.limit,offset:null===(r=e.paging)||void 0===r?void 0:r.offset,searchText:e.searchText,submissionStatus:e.submissionStatus,gradingStatus:e.gradingStatus,blogId:e.blogId,courseId:e.courseId,expand:t,sort:(0,i.C4)(o)},{results:a,paging:l}=await (0,i.U2)((0,i.Q2)(p,s));return{paging:l,byCourseMembershipId:a.reduce((e,t)=>(e[t.membershipId]=t,e),{})}}async function A(e,t){let n=await (0,i.U2)((0,i.Q2)(m,{courseId:e,blogId:t}));return{byBlogId:(0,o.MO)([n])}}},267105:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(134129),i=n(537672);let o=(0,n(4041).W)(r.kCM,i.nP)},459493:function(e,t,n){"use strict";n.d(t,{Nj:function(){return d},Q6:function(){return s},Qq:function(){return u},qv:function(){return c}});var r=n(187680),i=n(134129),o=n(537672);function s(e,t,n,i){let o=(0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/summary",{courseId:e,columnId:t,...n});return(0,r.U2)(o,i).then(e=>e)}function a(e){return e.reduce((e,t)=>({...e,[t.columnId]:t}),{})}let l="fetchColumnSummaries";async function u(e,t,n){(0,r.Zt)(l);let i=[];for(let r of t)i.push(s(e,r,n,{batchKey:l}));return{columnSummaries:a(await Promise.all(i))}}async function d(e){var t,n;let s;let l=null===(t=e.paging)||void 0===t?void 0:t.limit,u=null===(n=e.paging)||void 0===n?void 0:n.offset,d={courseId:e.courseId};e.sort&&(s=(0,r.C4)(e.sort));let c={filter:e.filter,expand:e.expandParam,includeCount:e.includeCount},{results:E,paging:p}=await (0,i.t2v)(o.nP,d,{...c,limit:l,offset:u,sort:s});return{columnSummaryType:e.columnSummaryType,columnSummariesOverview:a(E),columnIds:E.reduce((e,t)=>[...e,t.columnId],[]),paging:p}}async function c(e){let t={courseId:e.courseId},n={filter:e.filter},r=await (0,i.hcC)(o.nP,t,n);return{courseId:e.courseId,needsGrading:r.needsGradingCount,needsPosting:r.needsPostingCount,needsReconciling:r.needsReconcilingCount}}},584956:function(e,t,n){"use strict";n.d(t,{g:function(){return a},s:function(){return s}});var r=n(134129),i=n(243038),o=n(537672);async function s(e,t){return await (0,r.p4i)(o.nP,{courseId:e,contentId:t})}async function a(e,t,{fileName:n,fileLocation:s},a){if(!n||!s)throw Error("Tried to convert with no file name or location");let{id:l,body:u}=await (0,r.MVx)(o.nP,{courseId:e,contentId:t},{fileName:n,fileLocation:s},a);return u||(0,i.$)(async()=>(await (0,r.$AB)(o.nP,{courseId:e,contentId:t,conversionId:l})).body,e=>!!e,a)}},175110:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(187680);async function i(e,t){let n=(0,r.Q2)("/v1/courses/%courseId%/imports",e);return(0,r.v_)(n,t)}},782147:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(187680);async function i(e){let{results:t}=await (0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/contents/indicators",{courseId:e}));return{indicators:t}}},281313:function(e,t,n){"use strict";n.d(t,{Hf:function(){return s},oi:function(){return l},uH:function(){return a}});var r=n(187680),i=n(134129),o=n(537672);function s(e,t,n){let s=(0,r.T8)(e,t);return s.hasOwnProperty("startDate")&&!s.startDate?s.startDate="":s.hasOwnProperty("durationType")&&"DATE_RANGE"===s.durationType&&(s.startDate=t.startDate),s.hasOwnProperty("endDate")&&!s.endDate?s.endDate="":s.hasOwnProperty("durationType")&&"DATE_RANGE"===s.durationType&&(s.endDate=t.endDate),(0,i.TZe)(o.nP,t.id,{...s,id:t.id},n)}function a(e){return(0,i.WnB)(o.nP,e)}async function l(e){let{STUDENT:t}=(await (0,i.p8Q)(o.nP,e)).results;return t}},49742:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(187680);function i(e){return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/entitlements",{courseId:e})).then(t=>({entitlements:t.results,courseId:e}))}},65671:function(e,t,n){"use strict";n.d(t,{a:function(){return a},v:function(){return s}});var r=n(134129),i=n(537672),o=n(842330);async function s(e){var t;let{results:n,paging:s}=await (0,r.E8D)(i.nP,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{logs:(0,o.MO)(n,(e,t)=>(t&&(e[t.logId]=t),e)),logIds:n.map(e=>e.logId),paging:s}}function a(e,t){return(0,r.lzM)(i.nP,e,t)}},504015:function(e,t,n){"use strict";n.d(t,{$R:function(){return u},Dc:function(){return a},J3:function(){return d},jT:function(){return l}});var r=n(187680),i=n(537672),o=n(134129),s=n(4041);async function a(e){let t=(0,r.Q2)("/v1/courses/conversations/counts",{});return e?(0,r.U2)(t,e):(0,r.U2)(t)}async function l(e){return(0,o.lHP)(i.nP,e)}let u=(0,s.W)(o.J2$,i.nP),d=(0,s.W)(o.c7z,i.nP)},208923:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(537672),i=n(134129),o=n(198371);let s=(e={offset:0,limit:o.w})=>(0,i.UjU)(r.nP,e).then(e=>(function(e){let{results:t,paging:n}=e;return{courses:t.reduce((e,t)=>(e[t.courseId]=t,e),{}),paging:n}})(e))},50500:function(e,t,n){"use strict";n.d(t,{RB:function(){return s},oN:function(){return a},xN:function(){return o}});var r=n(187680);let i="/v1/courses/%courseId%/preferences/%key%";function o(e){return(0,r.U2)((0,r.Q2)(i,e))}function s(e,t){let n=(0,r.Q2)(i,{courseId:t.courseId,key:e.key});return(0,r.gz)(n,e)}function a(e){return(0,r.Od)((0,r.Q2)(i,e))}},710108:function(e,t,n){"use strict";n.d(t,{f:function(){return o},o:function(){return s}});var r=n(187680);let i="/v1/courses/%courseId%/progress/configuration",o=e=>(0,r.U2)((0,r.Q2)(i,e)),s=(e,t)=>{let n=(0,r.Q2)(i,{courseId:t.courseId});return(0,r.r$)(n,e)}},641489:function(e,t,n){"use strict";n.d(t,{$:function(){return s},q:function(){return o}});var r=n(134129),i=n(537672);function o(e,t){return(0,r.x70)(i.nP,e,t)}async function s(e){var t;let{courseResources:n,paging:o,unusedFilesTotal:s}=await (0,r.WJ$)(i.nP,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{resources:n.reduce((e,t)=>(t&&(e[t.resourceId]=t),e),{}),resourceIds:n.map(e=>e.resourceId),paging:o,unusedFilesTotal:s}}},255570:function(e,t,n){"use strict";n.d(t,{Y:function(){return a},i:function(){return s}});var r=n(134129),i=n(537672),o=n(4041);let s=(0,o.W)(r.F1$,i.nP),a=(0,o.W)(r.RSb,i.nP)},993150:function(e,t,n){"use strict";n.d(t,{Z:function(){return s},m:function(){return a}});var r=n(134129),i=n(537672),o=n(842330);function s(e,t){return(0,r.yYO)(i.nP,e,t)}async function a(e){var t;let{results:n,paging:s}=await (0,r.J_U)(i.nP,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{tasks:(0,o.MO)(n,(e,t)=>(t&&(e[t.taskId]=t),e)),tasksIds:n.map(e=>e.taskId),paging:s}}},439138:function(e,t,n){"use strict";n.d(t,{FA:function(){return u},Xg:function(){return d},z9:function(){return l}});var r=n(187680),i=n(842330);let o="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades/%gradeId%/attempts/%attemptId%/stagedAttemptGrades",s=`${o}/%stagedAttemptId%`,a=(e,t)=>{let{paging:n,permissions:r,results:o}=t,s={},a=(0,i.MO)(o,(t,n)=>{let{grader:r,userBeingGraded:i,...o}=n;return o.columnId=e,o.graderId=null==r?void 0:r.id,o.userBeingGradedId=null==i?void 0:i.id,r&&!s[r.id]&&(s[r.id]={...r}),i&&!s[i.id]&&(s[i.id]={...i}),t[n.stagedAttemptId]=o,t});return{paging:n,permissions:r,users:s,byStagedAttemptId:a}},l=async e=>{let{columnId:t}=e;return a(t,await (0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/peerReviews",e)))},u=async e=>{let{columnId:t}=e;return a(t,{results:(await (0,r.U2)((0,r.Q2)(o,e))).stagedAttemptGrades})},d=async e=>{let{updatedProperties:t}=e,n={courseId:e.courseId,columnId:e.columnId,gradeId:e.gradeId,attemptId:e.attemptId,stagedAttemptId:e.stagedAttemptId};return{stagedAttempt:await (0,r.r$)((0,r.Q2)(s,n),t)}}},40781:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(134129),i=n(537672);async function o(e,t){var n,o;let s;let a=[],l=t.limit,u=t.offset;do{let{results:d,paging:c}=await (0,r.i8y)(i.nP,e,{...t,limit:l,offset:u});s=null!==(n=null==c?void 0:c.nextPage)&&void 0!==n?n:"",u=(null!==(o=null==c?void 0:c.offset)&&void 0!==o?o:0)+l,a=a.concat(d)}while(s);return{learnExceptionDetails:a}}},68070:function(e,t,n){"use strict";n.d(t,{Vw:function(){return o},Y1:function(){return s},ep:function(){return a}});var r=n(134129),i=n(537672);function o(){return(0,r.j2)(i.nP).then(e=>{let{results:t}=e,n={};return t.forEach(e=>{n[e.flagKey]=e}),{featureFlags:{byKey:n}}})}function s(e){return(0,r.HQE)(i.nP,e.flagKey)}function a(e){return(0,r.CV7)(i.nP,e.flagKey,e)}},130789:function(e,t,n){"use strict";n.d(t,{O:function(){return o},b:function(){return s}});var r=n(537672),i=n(134129);async function o(e,t={},n){return(0,i.WiT)(r.nP,e,t,n)}function s(e,t={},n){return(0,i.ZX5)(r.nP,e,t,n)}},570848:function(e,t,n){"use strict";n.d(t,{Cz:function(){return E},JR:function(){return c},hP:function(){return u},qw:function(){return d}});var r=n(134129),i=n(4041),o=n(537672),s=n(842330),a=n(60394);function l(e){let{results:t}=e;return{performance:t,performanceIds:t.map(e=>(0,a._)({goalId:e.goalId,userId:e.userId}))}}let u=(0,i.W)(r.L9n,o.nP),d=async e=>{let{courseId:t,paging:n}=e;return function(e){let{results:t}=e;return{paging:e.paging,goalsById:(0,s.MO)(t),goalIds:t.map(e=>e.id)}}(await (0,r.Oj4)(o.nP,t,n))},c=async e=>{let{courseId:t,userIds:n,goalIds:i}=e;return l(await (0,r.Plb)(o.nP,t,n,i))},E=async e=>{let{courseId:t,userId:n,parentId:i}=e;return l(i?await (0,r.RLQ)(o.nP,t,n,i):await (0,r.pzx)(o.nP,t,n))}},526541:function(e,t,n){"use strict";n.d(t,{TL:function(){return u},_8:function(){return l},bw:function(){return s},jZ:function(){return a},jd:function(){return o},nH:function(){return d},sH:function(){return c}});var r=n(134129),i=n(537672);function o(e,t){return(0,r.XDk)(i.nP,e,t)}function s(e){return(0,r.NDS)(i.nP,e)}function a(e,t){return(0,r.Oqd)(i.nP,e,t)}function l(e){return(0,r.KRY)(i.nP,e)}async function u(e,t){var n,o;let{results:s}=await (0,r.DN0)(i.nP,e,t),a={columnId:e.columnId,courseId:e.courseId,...t};return(null===(n=null==t?void 0:t.membershipIds)||void 0===n?void 0:n.length)&&(a.byCourseMembershipId=s.reduce((e,t)=>(t.membershipId&&(e[t.membershipId]=t),e),{})),(null===(o=null==t?void 0:t.groupIds)||void 0===o?void 0:o.length)&&(a.byGroupId=s.reduce((e,t)=>(t.groupId&&(e[t.groupId]=t),e),{})),a}async function d(e,t){let{results:n}=await (0,r.v7Q)(i.nP,e,t);return{membershipId:e.membershipId,byColumnId:n.reduce((e,t)=>(e[t.columnId]=t,e),{})}}function c(e){return(0,r.YHn)(i.nP,e)}},67913:function(e,t,n){"use strict";n.d(t,{AN:function(){return l},KV:function(){return u},Oc:function(){return d},g2:function(){return E},gA:function(){return p},lF:function(){return c}});var r=n(187680),i=n(842330),o=n(778510),s=n(134129),a=n(537672);async function l(e){let{courseId:t,columnId:n}=e;return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/attempts/%attemptId%",e)).then(e=>({courseId:t,columnId:n,attempt:e}))}async function u(e){let{courseId:t,columnId:n}=e;return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/attempts",e)).then(e=>{let{lookup:r,paging:o}=e,s=[],a=[];return r&&Object.values(r).forEach(e=>{e.forEach(e=>{e.deletedAttempt?a.push(e):s.push(e)})}),{courseId:t,columnId:n,byGradebookAttemptId:(0,i.MO)(s),deletedAttempts:a,paging:o}})}async function d(e,t,n,{columnId:r}={},i){return{attempt:{...await (0,s.t5N)(a.nP,{courseId:e,attemptId:t},n,i,["toolAttemptDetail","attemptReceipt.lateSubmission"]),courseId:e,...r?{columnId:r}:{}},resultGradeBookAttempt:n}}function c(e,t,n){return(0,s.MkZ)(a.nP,{courseId:e,columnId:n},t)}async function E(e,t){return(0,s.$De)(a.nP,{courseId:e,attemptId:t})}async function p(e){return(0,r.v_)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/users",e),{}).catch(e=>{throw(0,o.RF)(e)})}},838246:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(187680);let i=async e=>{let t=(0,r.Q2)("/v1/courses/%courseId%/gradebook/categories",{courseId:e}),{paging:n,permissions:i,results:o}=await (0,r.U2)(t);return{results:o,paging:n,permissions:i}}},100038:function(e,t,n){"use strict";n.d(t,{JS:function(){return l},ae:function(){return a},dm:function(){return s},ki:function(){return u}});var r=n(187680),i=n(134129),o=n(537672);async function s(e){let{courseId:t,columnId:n}=e;return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/groupAttempts/%groupAttemptId%",{...e})).then(e=>({courseId:t,columnId:n,groupAttempt:e}))}async function a(e){let{courseId:t,columnId:n,groupAssociationId:r}=e;return{...await (0,i.jzt)(o.nP,{courseId:t,columnId:n,groupAssociationId:r}),courseId:t,columnId:n}}async function l(e,t,n,r){return{groupAttempt:{...await (0,i.RVf)(o.nP,{courseId:e,attemptId:t},n,r,["toolAttemptDetail","attemptReceipt.lateSubmission"]),courseId:e}}}async function u(e,t){return(0,i.c75)(o.nP,{courseId:e,groupAttemptId:t})}},871365:function(e,t,n){"use strict";n.d(t,{LX:function(){return o},fH:function(){return a},qm:function(){return s}});var r=n(134129),i=n(537672);async function o(e){let{courseId:t,columnId:n,groupAssociationIds:o}=e;return await (0,r.CkG)(i.nP,{courseId:t,columnId:n},{groupAssociationIds:o})}async function s(e,t,n){return await (0,r.DJg)(i.nP,{courseId:e,columnId:t,groupAssociationId:n})}async function a(e,t,n){return await (0,r.Klk)(i.nP,{courseId:e,columnId:t,groupAssociationId:n})}},241225:function(e,t,n){"use strict";n.d(t,{Ew:function(){return d},QM:function(){return l},ov:function(){return c},uV:function(){return E},yx:function(){return a}});var r=n(134129),i=n(842330),o=n(537672);function s(e){if(e.localizableTitle){let t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui={displayTitleKey:`components.services.grade.schema.${t}`}}else e.ui={displayTitle:e.title}}async function a(e,t){let n=await (0,r.YCr)(o.nP,{courseId:e,schemaId:t});return s(n),n}async function l(e,t,n){var a;let{paging:l,permissions:u,results:d}=await (0,r.zpx)(o.nP,{courseId:e},t||n?{offset:t,limit:n}:void 0);for(let t of d)s(t),null!==(a=t.courseId)&&void 0!==a||(t.courseId=e);return{byId:(0,i.MO)(d),paging:l,permissions:u}}async function u(e,t){let n;let i=t.id;n=i?(0,r.N02)(o.nP,{courseId:e,schemaId:i},t):(0,r.dYx)(o.nP,{courseId:e},t);let a=await n;return s(a),a}async function d(e,t){return u(e,t)}async function c(e,t){return u(e,t)}async function E(e,t){return(0,r.Im$)(o.nP,{courseId:e,schemaId:t})}},888313:function(e,t,n){"use strict";n.d(t,{d:function(){return o},n:function(){return s}});var r=n(537672),i=n(134129);function o(e){return(0,i.n6v)(e,r.nP)}function s(e,t){return(0,i.PCp)(e,r.nP,t)}},386999:function(e,t,n){"use strict";n.d(t,{GT:function(){return s},i7:function(){return l},si:function(){return o},vW:function(){return a}});var r=n(537672),i=n(134129);async function o(e,t,n){return(0,i.uVV)(r.nP,e,t,n)}async function s(e,t,n){return(0,i.C0A)(r.nP,e,t,n)}async function a(e,t,n){return(0,i.MQp)(r.nP,e,t,n)}async function l(e,t){return(0,i.lZD)(r.nP,e,t)}},988765:function(e,t,n){"use strict";n.d(t,{GN:function(){return d},N3:function(){return s},Vb:function(){return l},gM:function(){return o},k9:function(){return a},yL:function(){return u}});var r=n(187680);let i="/v1/brands";async function o(e){return c({},await (0,r.U2)(`${i}/${e}`))}async function s(e=1e3){let{results:t,paging:n}=await (0,r.U2)((0,r.Q2)(i,{limit:e}));return{...t.reduce(c,{}),paging:n}}async function a(e=1e3){let{results:t,paging:n}=await (0,r.U2)((0,r.Q2)(`${i}/hosts`,{limit:e}));return{hostnames:t.map(e=>e.hostname),paging:n}}async function l(e){return c({},await (0,r.v_)(`${i}`,{...e}))}async function u(e,t){return c({},await (0,r.gz)(`${i}/${e}`,{...t}))}async function d(e){return(0,r.Od)(`${i}/${e}`)}function c(e,t){let{ultraBranding:n,brandAssociations:r}=t,i=n.id;return e.institutionBrands||(e.institutionBrands={byId:{}}),e.brandAssociations||(e.brandAssociations={byId:{}}),e.institutionRoles||(e.institutionRoles={}),e.institutionBrands.byId[i]={...n,id:n.id},r.forEach(t=>{let{institutionRole:n,hostName:r}=t,o={id:t.id,brandId:i};r&&(o.hostName=r),n&&(e.institutionRoles[n.roleId]={...n,id:n.roleId},o.institutionRoleId=n.roleId),e.brandAssociations.byId[t.id]=o}),e}},642438:function(e,t,n){"use strict";n.d(t,{B:function(){return s},pS:function(){return o}});var r=n(187680);let i="/v1/roles/institutionRoles";async function o(e){let{result:t}=await (0,r.U2)(`${i}/${e}`);return t}async function s(e=1e3){let{results:t,institutionId:n,paging:o}=await (0,r.U2)((0,r.Q2)(i,{limit:e}));return{institutionId:n,institutionRoles:{byId:t.reduce((e,t)=>(e[t.roleId]={id:t.roleId,...t},e),{})},paging:o}}},946861:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(134129),i=n(537672);async function o(e){return(0,r.hVK)(i.nP,e)}},216501:function(e,t,n){"use strict";n.d(t,{$d:function(){return u},Ay:function(){return a},Bj:function(){return l},PD:function(){return s},XE:function(){return c},_p:function(){return d},ks:function(){return E}});var r=n(537672),i=n(134129),o=n(844993);function s(e,t,n,o){return(0,i.h$A)(r.nP,{courseId:e,attemptId:t,questionAttemptId:n},o)}async function a(e,t){let n=await (0,i.AzN)(r.nP,e,t);return{data:(0,o.MO)(n)}}function l(e,t){return(0,i.wZ_)(r.nP,{courseId:e,attemptId:t})}function u(e,t,n,o=[]){return(0,i.ts9)(r.nP,{courseId:e,attemptId:t,questionAttemptId:n},o)}function d(e,t,n=[]){return(0,i._xN)(r.nP,{courseId:e,attemptId:t},n)}function c(e,t){let{courseId:n,attemptId:o,questionAttemptId:s,groupAttemptId:a}=e;return s&&o?(0,i.Bi2)(r.nP,{courseId:n,attemptId:o,questionAttemptId:s},t,a?{groupAttemptId:a}:void 0):Promise.reject(Error("Missing the question attempt id and attempt id."))}function E(e,t,n,{paging:o,expandParams:s,filterParams:a,includeOnlyAvailableUsers:l}={}){let u={};return a&&(u.filter=a),l&&(u.includeOnlyAvailableUsers=!0),(0,i.GRx)(r.nP,{courseId:e,assessmentId:t,questionId:n},o,s,u)}},847922:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(134129),i=n(537672);async function o(e){let{courseId:t,limit:n,offset:o}=e,{paging:s,permissions:a,results:l}=await (0,r.w6S)(i.nP,t,{limit:n,offset:o});return{paging:s,permissions:a,questionTagIds:l.map(e=>e.id),questionTags:Object.assign({},...l.map(e=>({[e.id]:e})))}}},893932:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(134129),i=n(537672);async function o(e){var t;let{permissions:n,results:o}=await (0,r.sAK)(i.nP,e.courseId,null===(t=e.filter)||void 0===t?void 0:t.assessmentIds);return{data:{permissions:n,questionTypes:o.map(e=>e.key)},query:e}}},447397:function(e,t,n){"use strict";n.d(t,{Kq:function(){return a},Pm:function(){return s},ZH:function(){return l},vm:function(){return d},wx:function(){return u}});var r=n(537672),i=n(134129),o=n(4041);let s=(0,o.W)(i.hj4,r.nP),a=(0,o.W)(i.qZ4,r.nP),l=(0,o.W)(i.WRq,r.nP),u=(0,o.W)(i._HO,r.nP),d=(0,o.W)(i.Rok,r.nP)},207849:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(537672),i=n(134129);async function o(e){return(0,i.jdu)(r.nP,e)}},123406:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(187680);async function i(e){return(0,r.gz)("/v1/utilities/userSessionDebugLog",{sessionDebug:e})}},658062:function(e,t,n){"use strict";n.d(t,{T:function(){return o}});var r=n(537672),i=n(134129);async function o(e){var t,n,o,s;let a;let{courseId:l,userId:u,dateInterval:d,...c}=e;d&&(a={since:d.since.toISOString(),until:d.until.toISOString(),handlers:(null===(n=null===(t=e.eventTypeFilter)||void 0===t?void 0:t.handlers)||void 0===n?void 0:n.length)?e.eventTypeFilter.handlers:void 0,eventTypes:(null===(s=null===(o=e.eventTypeFilter)||void 0===o?void 0:o.eventTypes)||void 0===s?void 0:s.length)?e.eventTypeFilter.eventTypes:void 0});let{results:E,paging:p,permissions:m}=await (0,i.TOP)(r.nP,{courseId:l,userId:u},c,a);return{studentActivityLogs:Object.assign({},...E.map(e=>({[e.id]:e}))),paging:p,permissions:m}}},394283:function(e,t,n){"use strict";n.d(t,{G:function(){return o},y:function(){return i}});var r=n(187680);async function i(e,t){return(0,r.U2)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices",{courseId:e,columnId:t})).then(e=>e.submissionServices)}async function o(e,t,n){if(!e||!t)return Promise.reject();let i=n.uniqueHandle;return(0,r.r$)((0,r.Q2)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices/%uniqueHandle%",{courseId:e,columnId:t,uniqueHandle:i}),n)}},720032:function(e,t,n){"use strict";n.d(t,{fR:function(){return s},jG:function(){return o}});var r=n(187680);let i="/v1/themes";async function o(e){return(0,r.v_)(i,{...e})}async function s(e){return(0,r.Od)(`${i}/${e}`)}},406577:function(e,t,n){"use strict";n.d(t,{I:function(){return s},X:function(){return o}});var r=n(187680);let i="/v1/ultra-ui/ultrasettings";async function o(){return(0,r.U2)((0,r.Q2)(i,[]))}async function s(e){let t=(0,r.Q2)(i,[]);return(0,r.v_)(t,e)}},304310:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var r=n(537672),i=n(134129);function o(e){return(0,i.xJl)(r.nP,e)}},762319:function(e,t,n){"use strict";n.d(t,{Lj:function(){return u},_s:function(){return a},px:function(){return l}});var r=n(187680),i=n(134129),o=n(537672);let s="/v1/users/%userId%/preferences/%key%";function a(e){return null==e.userId&&(e.userId="me"),(0,r.U2)((0,r.Q2)(s,e))}async function l(e,t){let n=t&&t.userId||"me",i=(0,r.Q2)(s,{userId:n,key:e.key});return(0,r.gz)(i,e)}async function u(e){return(0,i.w0S)(o.nP,{key:e})}},113674:function(e,t,n){"use strict";n.d(t,{PB:function(){return l},hJ:function(){return u},n5:function(){return a}});var r=n(187680),i=n(778510);let o="/public/v1/pronouns",s=`${o}/%pronounId%`;async function a(e){var t;let n=e&&"nextPage"in e?await (0,r.U2)(e.nextPage):await (0,r.U2)((0,r.Q2)(o,{offset:null==e?void 0:e.offset,limit:null==e?void 0:e.limit}));if(null===(t=n.paging)||void 0===t?void 0:t.nextPage){let e=n.paging.nextPage.split("/"),t=e.findIndex(e=>"public"===e),r="";e.splice(t).forEach(e=>r=r+"/"+e),n.paging.nextPage=r}return n}async function l(e){try{return await (0,r.v_)(o,e)}catch(e){throw(0,i.A1)(e)}}async function u(e){return(0,r.Od)((0,r.Q2)(s,{pronounId:e}))}},4041:function(e,t,n){"use strict";function r(e,t){return(...n)=>e(t,...n)}n.d(t,{W:function(){return r}})},372680:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(26715);let i={getRenderedGroupSets:(e,t)=>{var n,i;return null!==(i=null===(n=e.groupWorkspace.groupSets.byCourseId[t])||void 0===n?void 0:n.map(t=>{var n;return{id:t,...e.groupWorkspace.groupSets.byId[t],assignedGroups:null===(n=r.Ys.getGroupsByGroupSetId(e,t))||void 0===n?void 0:n.map(e=>e.id)}}))&&void 0!==i?i:[]}}},11897:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({containerPeekPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto","& section":{borderBottom:`1px solid ${e.palette.border.main}`,marginTop:"20px",paddingBottom:"20px","&:first-child":{marginTop:"0px"},"&:last-child":{borderBottom:"none"}}},containerBody:{padding:"30px 30px 90px 30px"},description:{marginLeft:"20px",color:e.palette.text.hint},header:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",[e.breakpoints.up("xl")]:{paddingLeft:"30px"}}},footer:{position:"absolute",left:0,bottom:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},additionalToolIcon:{display:"inline-block",verticalAlign:"top",paddingLeft:"10px",paddingTop:"3px"},additionalTools:{fontWeight:e.typography.fontWeightSemiBold},additionalToolTextContainer:{flex:"1",display:"inline-block",verticalAlign:"top",paddingLeft:"10px",minHeight:"32px",maxWidth:"272px",lineHeight:"16px",[e.breakpoints.up("sm")]:{minWidth:"200px"}},additionalToolText:{display:"block",fontWeight:e.typography.fontWeightBold},additionalToolLink:{display:"block"},descriptionBox:{"& div":{border:`1px solid ${e.palette.background.b5}`},"& textarea":{height:"146px"}},additionalToolsItemContainer:{display:"flex"},additionalToolsItemContainerTrashCanIcon:{display:"flex",justifyContent:"space-between"},unassignGroupButton:{marginLeft:"auto",marginRight:"10px",marginTop:"-5px","& [disabled] span":{color:e.palette.action.disabled}},groupsSectionHint:{marginTop:"10px",color:e.palette.text.hint},groupsSection:{"& button":{opacity:0,[e.breakpoints.down("xs")]:{opacity:1},"@media (hover: none) and (pointer: coarse)":{opacity:1},"&:focus":{opacity:1}},"&:hover":{"& button":{opacity:1,transition:"transform 100ms, background-color 250ms, color 250ms, box-shadow 250ms, opacity 250ms"}}}}))},776013:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(202784),i=n(572243),o=n(464158),s=n(410628);let a=({titleText:e,contentText:t,analyticsId:n,rootId:a,confirmationText:l,exitCallback:u})=>{let d=(0,s.q)();return r.createElement(i._X,{analyticsId:`${n}.dialog`,open:!0,onClose:()=>u(),"aria-labelledby":`${a}.dialog-title`},r.createElement(o.AnalyticsDialogTitle,{analyticsId:`${n}.dialog-title`,onClose:()=>u(),id:`${a}.dialog-title`},d(e)),r.createElement(o.AnalyticsDialogContent,{analyticsId:`${n}.dialog-content`},r.createElement(o.AnalyticsDialogContentText,{analyticsId:`${n}.dialog-description`,id:`${a}.dialog-description`},d(t))),r.createElement(o.AnalyticsDialogActions,{analyticsId:`${n}.dialog-events`},r.createElement(o.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:()=>u()},d("global.cancel")),r.createElement(o.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.confirm.button`,onClick:()=>u(!0)},d(l))))}},484514:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var r=n(662176);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}}))},597901:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var r=n(202784),i=n(789644),o=n.n(i),s=n(188391),a=n.n(s);class l{constructor(e){if(l.isWirisLoaded&&l.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${l.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(l.isWirisLoaded)return Promise.resolve(l.getNewInstance(e));let t=await this.getConfiguration(),n=(await l.getConfigurationjs(t.data.contextPath)).data.editorUrl;return this.loadWirisJS(n,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){let e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return o().get(e)}static getConfigurationjs(e){return o().get(`${e}app/configurationjs`)}static getNewInstance(e){let t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily=l.wirisDefaultFontFamily),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise((n,r)=>{a()(e,()=>{try{l.apiBasePathUsedForLoading=this.apiBasePath,l.isWirisLoaded=!0,n(l.getNewInstance(t))}catch(e){l.isWirisLoaded=!1,r(e)}})})}}l.apiBasePathUsedForLoading="",l.isWirisLoaded=!1,l.wirisDefaultFontFamily="Times New Roman";let u={initError:null,isReady:!1,wirisEditorInstance:null},d=(e,t)=>{switch(t.type){case"get-new-instance":return{...u};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}},c=(e,t,n,i)=>{let[{isReady:o,initError:s,wirisEditorInstance:a},c]=(0,r.useReducer)(d,u);return(0,r.useEffect)(()=>{let r;let o=new l(t);return c({type:"get-new-instance"}),o.newInstance({mml:n,language:i,fontFamily:l.wirisDefaultFontFamily}).then(t=>{(r=t).insertInto(e.current),c({type:"ready",wirisEditorInstance:r})},e=>{c({type:"error",error:e})}),()=>{r&&r.close()}},[e]),(0,r.useEffect)(()=>{a&&a.getEditorModel().getParam("language")!==i&&a.setParam("language",i)},[i,a]),{initError:s,isReady:o,wirisEditorInstance:a}}},258382:function(e,t,n){"use strict";var r,i;n.d(t,{e$:function(){return o},pR:function(){return a}});let o="audio/webm; codecs=opus";(i=r||(r={})).Inactive="inactive",i.Recording="recording",i.Paused="paused";class s{constructor(){this.currentRecordingSession=null,this.mediaRecorder=null,this.mediaStream=null,this.autoStop=null}static getInstance(){return s.instance||(s.instance=new s),this.instance}static getBlobOptionsFromRecorderOptions(e){return{type:null==e?void 0:e.mimeType}}get recordingState(){var e;return(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)||r.Inactive}get isRecording(){return this.recordingState===r.Recording}isCurrentRecordingSession(e){return null!==this.currentRecordingSession&&this.currentRecordingSession===e}async enableRecording(e){if(this.isRecording)throw Error("Recording in progress");try{this.mediaStream=await navigator.mediaDevices.getUserMedia(e.streamConstraints),this.currentRecordingSession=e}catch(e){throw Error("Unable to start recording")}}async startRecording(e){if(this.isRecording)throw Error("Recording in progress");return this.mediaStream&&this.isCurrentRecordingSession(e)||await this.enableRecording(e),this.mediaRecorder=new MediaRecorder(this.mediaStream,this.currentRecordingSession.recorderOptions),this.mediaRecorder.start(),this.configureAutoStop(e),this.recordingState}async stopRecording(e){if(!this.isRecording)throw Error("No recording in progress");if(!this.isCurrentRecordingSession(e))throw Error("Cannot stop non-respective recording");let{currentRecordingSession:t,mediaRecorder:n}=this,{onRecordingComplete:r,recorderOptions:i}=t,o=new Promise(e=>{let t=s.getBlobOptionsFromRecorderOptions(i);n.ondataavailable=({data:n})=>{e(new Blob([n],t))}}),a=new Promise(e=>{n.onstop=()=>{this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{e.stop()}),e()}});return n.stop(),await Promise.all([o,a]).then(([e])=>{r(e),this.currentRecordingSession=null}),this.autoStop&&clearTimeout(this.autoStop),this.recordingState}async toggleRecording(e){return this.isRecording?this.stopRecording(e):this.startRecording(e)}configureAutoStop(e){var t,n;let r=null===(n=null===(t=this.currentRecordingSession)||void 0===t?void 0:t.recordingOptions)||void 0===n?void 0:n.maxDuration;r&&(this.autoStop=setTimeout(()=>{this.isCurrentRecordingSession(e)&&this.stopRecording(this.currentRecordingSession)},r))}}class a{constructor(e,t,n,r){this.recorder=s.getInstance(),this.onRecordingComplete=e,this.recorderOptions=t,this.streamConstraints=n,this.recordingOptions=r||{},this.onRecordToggle=this.onRecordToggle.bind(this),this.onRecordStart=this.onRecordStart.bind(this),this.onRecordStop=this.onRecordStop.bind(this)}async onEnableRecording(){return this.recorder.enableRecording(this)}async onRecordStart(){return this.recorder.startRecording(this)}async onRecordStop(){return this.recorder.stopRecording(this)}async onRecordToggle(){return this.recorder.toggleRecording(this)}}},812809:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var r=n(821286),i=n(465139),o=n(202784),s=n(34625);let a=(0,o.forwardRef)(function(e,t){let{open:n}=e,a=(0,i.Me)();return(0,o.useEffect)(()=>(n?s.g.getInstance().addModal(a):s.g.getInstance().removeModal(a),()=>{s.g.getInstance().removeModal(a)}),[a,n]),o.createElement(r.N,{...e,ref:t})})},820488:function(e,t,n){"use strict";var r=n(464158),i=n(465139),o=n(202784),s=n(34625);o.forwardRef((e,t)=>{let{open:n}=e,a=(0,i.Me)();return o.useEffect(()=>(null!=n&&n?s.g.getInstance().addModal(a):s.g.getInstance().removeModal(a),()=>{s.g.getInstance().removeModal(a)}),[a,n]),o.createElement(r.AnalyticsModal,{...e,ref:t})}).displayName="BbUiModal"},332170:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(609582),i=n(465139),o=n(202784),s=n(34625);let a=e=>{let{isOpen:t,hidden:n}=e,a=(0,i.Me)();return o.useEffect(()=>{let e=!n;return void 0===n&&(e=void 0!==t&&t),e?s.g.getInstance().addModal(a):s.g.getInstance().removeModal(a),()=>{s.g.getInstance().removeModal(a)}},[a,n,t]),o.createElement(r.Dialog,{...e})};a.displayName="UltraModalDialog"},34625:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});class r{constructor(){this.modalList=new Set,this.modalDisplayingListeners=new Set,this.modalDisplayingLatch=!1}static getInstance(){return r.INSTANCE||(r.INSTANCE=new r),r.INSTANCE}updateListeners(){let e=this.isModalDisplaying();e!==this.modalDisplayingLatch&&(this.modalDisplayingLatch=e,this.modalDisplayingListeners.forEach(t=>{try{t(e)}catch(e){}}))}addModal(e){this.modalList.add(e),this.updateListeners()}removeModal(e){this.modalList.delete(e),this.updateListeners()}isModalDisplaying(){return this.modalList.size>0}addOnModalDisplayingChanged(e){this.modalDisplayingListeners.add(e)}removeOnModalDisplayingChanged(e){this.modalDisplayingListeners.delete(e)}}},167013:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});class r{async goToRoute(){throw Error("routeHandler.goToRoute called before setting routeHandler")}async goPeekState(){throw Error("routeHandler.goPeekState called before setting routeHandler")}async getPeekHref(){throw Error("routeHandler.getPeekHref called before setting routeHandler")}async leavePeekState(){throw Error("routeHandler.leavePeekState called before setting routeHandler")}async search(){throw Error("routeHandler.search called before setting routeHandler")}getHref(){throw Error("routeHandler.getHref called before setting routeHandler")}onRouteChanging(){throw Error("routeHandler.onRouteChanging called before setting routeHandler")}getCurrentRoute(){throw Error("routeHandler.getCurrentRoute called before setting routeHandler")}}let i=new class{constructor(){this.routeHandler=new r}setRouteHandler(e){this.routeHandler=e}goRoute(e,t,n){return this.routeHandler.goToRoute(e,t,n)}goPeekState(e,t){return this.routeHandler.goPeekState(e.routeName,e.getArgs(),t)}getPeekHref(e,t){return this.routeHandler.getPeekHref(e.routeName,e.getArgs(),t)}getHref(e,t,n){return this.routeHandler.getHref(e,t,n)}leavePeekState(e,t){return this.routeHandler.leavePeekState(e,t)}search(e,t){return this.routeHandler.search(e,t)}onRouteChanging(e){return this.routeHandler.onRouteChanging(e)}getCurrentRoute(){return this.routeHandler.getCurrentRoute()}}},562134:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(202784),i=n(167013);let o=e=>{let t=(0,r.useRef)();t.current=e,(0,r.useEffect)(()=>i.N.onRouteChanging(e=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,e)}),[])}},930878:function(e,t,n){"use strict";n(345393)},290622:function(e,t,n){"use strict";n(345393)},414622:function(e,t,n){"use strict";n(597961)},529513:function(e,t,n){"use strict";n(345393)},807999:function(e,t,n){"use strict";n(663646)},730591:function(e,t,n){"use strict";n(345393)},322475:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});let r={CREATE_ACHIEVEMENT:"create-achievement",MODIFY_ACHIEVEMENT:"modify-achievement",IMPORT_OPEN_BADGE:"import-open-badge"}},428346:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r={ULTRA_SETTINGS_PEEK:"ultra-settings-admin",ULTRA_EDIT_APPROVED_PRONOUNS_PEEK:"ultra-edit-approved-pronouns-admin",ULTRA_LOCALIZATION_EDITOR:"localization"}},989106:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});let r={ANNOUNCEMENT_DETAIL:"announcement-detail"}},345397:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});let r={ASSESSMENT:"assessment",ASSESSMENT_OVERVIEW:"assessment.overview",ASSESSMENT_DETAILS:"assessment-details",ASSESSMENT_EXTERNAL_OVERVIEW:"assessment.external-overview",ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:"flexible-attempt-grading",ASSESSMENT_PEER_GRADING:"peer-grading",ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB:"peer-grading.assessment-submission-feedback-tab",ASSESSMENT_SETTINGS:"assessment-settings",ASSESSMENT_SETTINGS_DELEGATED_GRADERS:"delegated-graders",ASSESSMENT_SETTINGS_DISTRIBUTED_GRADERS:"distributed-graders",ASSESSMENT_SETTINGS_RUBRIC_SETTINGS:"assessment-settings.peek.rubric.mode",ASSESSMENT_ATTEMPT:"assessment.overview.attempt",ASSESSMENT_ATTEMPT_REVIEW:"assessment.overview.attempt.review",ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB:"assessment.overview.attempt.review.assessment-submission-feedback-tab",ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB:"assessment.overview.attempt.review.inline-rubric",ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB:"assessment.overview.attempt.review.originality-tab",ASSESSMENT_ATTEMPT_IMS_PROCTORING:"assessment.ims-proctoring",ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT:"assessment.respondus-requirement",ASSESSMENT_MULTIPLE_ATTEMPTS_TAB:"assessment.overview.multiple-attempt",ASSESSMENT_AUTO_GENERATE:"auto-generate-assessment",ASSESSMENT_AUTO_GENERATE_QUESTION:"auto-generate-question",ASSESSMENT_OPEN_ATTEMPT_LOG:"open-attempt-log",ASSESSMENT_PRINT_CONTENTS:"assessment-print",ASSESSMENT_STUDENT_SUBMISSION_VIEW:"student-submission-view"}},69609:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r={BASE_CALENDAR:"base.calendar",BASE_COURSES:"base.courses",BASE_COURSES_FILTERS:"base-courses-filters",BASE_MESSAGES:"base.messages",BASE_PROCTORING_ATTEMPT:"base.proctoring-attempt",BASE_DASHBOARD:"base.dashboard",BASE_ACTIVITY:"base.recentActivity"}},345393:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r={CALENDAR_SETTINGS:"calendar-settings",CREATE_EVENT:"event-create",COURSE_SCHEDULE:"class-schedule",EDIT_EVENT:"event-edit",OFFICE_HOURS:"office-hours",VIEW_EVENT:"event-view"}},447670:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r={CONTENT_COLLECTION:"content-collection",CONTENT_COLLECTION_SETTINGS:"content-collection-settings",CONTENT_COLLECTION_PICKER:"content-collection-picker"}},693929:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r={CONTENT_MARKET:"content-market"}},897127:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});let r={CONDITIONAL_RELEASE_PEEK_PANEL:"conditional-release",BULK_EDIT_CONTENT_PEEK_PANEL:"bulk-edit-content",CONTENT_MANAGE:"content-manage",CONTENT_MANAGE_EDIT:"content-manage.edit",CONTENT_PICKER:"content-picker",FILE_MANAGEMENT_PANEL:"file-management",CREATE_CONTENT_PEEK_PANEL:"content-manage.create",CREATE_LEARNING_MODULE_PEEK_PANEL:"content-manage.create.learningModule",COPY_CONTENT_PEEK_PANEL:"content-manage.copy",EDIT_LEARNING_MODULE_PEEK_PANEL:"content-manage.edit.learningModule",CREATE_DOCUMENT:"content-manage.create.document",DOCUMENT:"content-manage.edit.document",DOCUMENT_SETTINGS:"document-settings",CREATE_CLOUD_DOCUMENT_MODULE_PEEK_PANEL:"content-manage.create.cloud-document",CREATE_FOLDER:"content-manage.create.folder",EDIT_FOLDER:"content-manage.edit.folder",COPY_REPORT_PEEK_PANEL:"content-manage.copy-report",IMPORT_CONTENT_PEEK_PANEL:"content-manage.import",IMPORT_REPORT_PEEK_PANEL:"content-manage.import-report",COPY_DETAILS_PEEK_PANEL:"content-manage.copy-details",GENERIC_STUDENT_PROGRES_PEEK_PANEL:"content-manage.progress",CONTENT_SEARCH:"content-search",GENERATE_STRUCTURE:"content-manage.generate-structure",CONTENT_NAVIGATOR_TRANSITION_PEEK:"content-navigator-transition-peek",CONTENT_NAVIGATOR_TRANSITION_FULL:"content-navigator-transition-full",CONTENT_NAVIGATOR_PLACEHOLDER:"content-navigator-placeholder",CONTENT_GOAL_ALIGNMENT_FOR_STUDENT:"content-goal-alignment-for-student"}},241248:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r={ACCOMMODATION:"accommodation",COURSE:"course",COURSE_ACHIEVEMENTS:"course.achievements",COURSE_ANALYTICS:"course.analytics",COURSE_ANALYTICS_QUESTION_ANALYSIS:"course.analytics.question-analysis",COURSE_ANALYTICS_ACTIVITY:"course.analytics.course-activity",COURSE_ANALYTICS_REPORTS:"course.analytics.reports",COURSE_ANALYTICS_SCORM_REPORTS:"course.analytics.scorm-reports",COURSE_ANNOUNCEMENT_LIST:"course.announcements",COURSE_CALENDAR:"course.calendar",COURSE_CLASSIC:"course.classic",COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL:"course.classic.outline.ultra-course-self-enroll",COURSE_CONTENT_MARKET:"content-market",COURSE_DISCUSSION_PARTICIPANTS:"discussion-participants",COURSE_ENGAGEMENT:"course.engagement",COURSE_GRADES:"course.grades",COURSE_GRADES_MULTIPLE_ATTEMPT:"multiple-attempt-grading",COURSE_GROUPS:"course.groups",COURSE_GROUPS_STUDENT:"course.groups-student",COURSE_LTI:"lti",COURSE_MESSAGE:"message",COURSE_MESSAGES:"course.messages",COURSE_OUTLINE:"course.outline",EDIT_BANNER:"course-edit-banner",EDIT_ENROLLMENT:"edit-enrollment",SETTINGS:"course-settings"}},897293:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={COURSE_TASKS_LOGS:"course-tasks",COURSE_TASKS_PANEL:"course-tasks.tasks",COURSE_LOGS_PANEL:"course-tasks.logs"}},430552:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={CONVERSATION:"conversations",DISCUSSION:"discussion",DISCUSSION_DETAILS:"discussion-details",DISCUSSION_FEEDBACK:"discussion-feedback",DISCUSSION_PARTICIPANTS:"discussion-participants",DISCUSSION_SETTINGS:"discussion-settings",DISCUSSIONS_SETTINGS:"discussions-settings",DISCUSSION_VIEW:"discussion.view",DISCUSSION_VIEW_WITH_GRADING:"discussion.view.with-grading",SUBMISSION_LIST:"submission-list",DISCUSSION_GENERATE:"discussion-generate"}},251871:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});let r={EDIT_EXTERNAL_LINK:"content-manage.edit.link",WEB_LINK_LAUNCH_FRAME:"content-manage.url-launch-frame"}},37150:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});let r={PREVIEW_FILE:"preview-file",PREVIEW_FILE_EDIT:"preview-file-edit",EDIT_FILE:"content-manage.edit.file"}},958417:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r={ADD_GOALS:"goal-picker-legacy"}},775333:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});let r={CREATE_OFFLINE_ATTEMPT:"assessment-create-attempt",GRADE_AND_FEEDBACK:"grade-and-feedback",STUDENT_GRADE_AND_FEEDBACK:"student-grade-and-feedback",OFFLINE_GRADE_AND_FEEDBACK:"offline-feedback",GRADEBOOK_ITEM:"gradebook-item",GRADEBOOK_ITEM_ASSESSMENT:"gradebook-item.assessment",GRADE_ITEM_OVERALL_GRADE:"gradebook-item.overall-grade",GRADE_ITEM_TOTAL_CALCULATION:"gradebook-item.total-calculation",GRADE_SETTING:"grade-setting",GRADING_SCHEMA:"grading-schema",GROUP_SUBMISSION_GRADING:"group-submission-grading",RECONCILE_GRADE:"reconcile-grade",SUBMISSION_DEEP_LINK:"submission-deep-link",SUBMISSION_DEEP_LINK_FEEDBACK_TAB:"submission-deep-link.assessment-submission-feedback-tab",SUBMISSION_GRADING:"submission-grading",SUBMISSION_GRADING_FEEDBACK_TAB:"submission-grading.assessment-submission-feedback-tab",SUBMISSION_GRADING_RUBRICS_TAB:"submission-grading.inline-rubric",SUBMISSION_GRADING_ORIGINALITY_TAB:"submission-grading.originality-tab",GROUP_SUBMISSION_GRADING_FEEDBACK_TAB:"group-submission-grading.assessment-submission-feedback-tab",GROUP_SUBMISSION_GRADING_RUBRICS_TAB:"group-submission-grading.inline-rubric",GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB:"group-submission-grading.originality-tab",GRADEBOOK_GRID_ADVANCED_FILTERS:"gradebook-grid-advanced-filters",GRADE_DOWNLOAD_SETTINGS:"grade-download-setting",DOWNLOAD_TEST_RESULTS:"download-test-results",ATTEMPT_RECEIPT_SEARCH:"attempt-receipt-search",GRADE_UPLOAD:"grade-upload-setting",PER_GRADABLE_ITEM_SETTINGS:"per-gradable-item-settings",PER_ASSESSMENT_SETTINGS:"per-assessment-settings",PER_ASSESSMENT_GROUP_SETTING:"per-assessment-group-settings",GRADABLE_ITEM_STATISTICS:"column-statistics",GRADE_ITEM_EDIT:"grade-item.edit",OBSERVEE_VIEW:"observee-view",ATTENDANCE:"attendance",ATTENDANCE_STUDENT_RECORDS:"attendance-student-records",VIEW_INDIVIDUAL_GRADES:"view-individual-grades",GRADES_BULK_DOWNLOAD:"grades-bulk-download"}},663646:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});let r={VIEW:"course-group",VIEW_GROUP_ENROLL:"content-group-enroll",IMPORT_GROUP_SET:"import-group-set",EXPORT_GROUP_SET:"export-group-set",IMPORT_GROUP_MEMBERS:"import-groups-members",GROUP_MEMBERS_LIST:"group-members-list",GROUP_SPACE:"group-space",GROUP_SET_DETAIL:"group-set-detail",GROUP_SET_LIST:"group-set-list",COURSE_GROUP_ENROLL:"course-group-enroll"}},412499:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});let r={INTEGRATION_BASE:"base.integration"}},961641:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});let r={JOURNAL:"journal",JOURNAL_VIEW:"journal.view",JOURNAL_DETAILS:"journal-details",JOURNAL_SETTINGS:"journal-settings",JOURNAL_VIEW_WITH_PARTICIPATION:"journal.view.with-participation",JOURNAL_PARTICIPATION_DETAIL:"journal-participation-detail",JOURNAL_SUBMISSION_FEEDBACK:"journal-submission-feedback",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:"journal.view.with-participation.peek.rubric-evaluation",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW:"journal.view.with-participation.peek.rubric-view",JOURNAL_GENERATE:"journal-generate"}},733003:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});let r={LTI:"lti",LTI_LAUNCH:"lti.launch",LTI_LAUNCH_CLOUD_CREATE:"lti.launch-cloud-create",LTI_LAUNCH_FRAME:"lti.launch-frame",LTI_LAUNCH_PEEK:"lti.launch-peek",LTI_EDIT:"content-manage.edit.lti",LTI_EDIT_PLACEMENT:"content-manage.edit.placement",LTI_EDIT_CLOUD_DOCUMENT:"cloud-document-edit"}},743712:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});let r={EDIT_PARTNER_CONTENT:"content-manage.edit.partner-content"}},402316:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});let r={PROFILE_BASE:"base.profile",UPDATE_AVATAR_PEEK:"update-avatar",UPDATE_LANGUAGE_PEEK:"update-language",UPDATE_PASSWORD_PEEK:"update-password",UPDATE_PROFILE_PEEK:"update-profile",NOTIFICATION_SETTINGS:"notification-settings",NOTIFICATION_SETTINGS_PEEK_PANEL:"notification-settings.content"}},713845:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});let r={QUESTION_ANALYSIS_REPORT:"question-analysis.report"}},608566:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r={QUESTION_BANKS:"question-banks",IMPORT_DETAILS:"import-details",EDIT_QUESTION_BANK:"question-bank-edit",CREATE_QUESTION_BANK:"question-bank-create",GENERATE_QUESTION_BANK:"question-bank-generate"}},413150:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});let r={ALIGN_GOALS_FOR_INSTRUCTOR:"question-goal-alignment",ALIGN_GOALS_FOR_STUDENT:"question-goal-alignment-for-student"}},345109:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});let r={RUBRIC:"rubric",RUBRIC_MODE:"rubric.mode",RUBRIC_EVALUATION:"rubric-evaluation",RUBRIC_VIEW:"rubric-view",RUBRIC_GENERATE:"rubric-generate"}},597961:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});let r={SAFE_ASSIGN:"safe-assign",ATTEMPT_SAFE_ASSIGN_SETTING:"attempt-safe-assign-setting"}},412152:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let r={GRADEBOOK_ITEM_SCORM_SUBMISSIONS:"gradebook-item.scorm-submissions",SCORM_EDIT:"scorm-settings",SCORM_ANALYTICS_REPORT:"scorm-analytics-report",SCORM_LAUNCH_FRAME:"scorm-launch-frame",SCORM_OVERVIEW:"scorm-overview",SCORM_OVERVIEW_STUDENT:"scorm-overview.student"}},895567:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});let r={LOR:"lor"}},40314:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});let r="tracing.core";class i{constructor(){this.sinks=new Set}notifySink(e){this.sinks.forEach(t=>{try{t(e)}catch(e){console.error(`[${r}]: Encountered exception while dispatching error to sink ${t.name}`,e)}})}addSink(e){this.sinks.add(e),console.debug(r,`[${r}] Added new sink ${e.name}`)}removeSink(e){this.sinks.delete(e)||console.warn(`[${r}] Tried to remove a sink ${e.name} but the sink wasn't in our list; this could be a potential memory leak`)}}},828859:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(40314),i=n(212156);class o extends r.z{error(e,t,n){this.notifySink({ts:Date.now(),level:i.i.Error,topic:e,context:n,..."string"==typeof t?{message:t}:{exception:t}})}warn(e,t,n){this.notifySink({ts:Date.now(),level:i.i.Warning,topic:e,context:n,message:t})}info(e,t,n){this.notifySink({ts:Date.now(),level:i.i.Information,topic:e,context:n,message:t})}debug(e,t,n){this.notifySink({ts:Date.now(),level:i.i.Debug,topic:e,context:n,message:t})}}let s=new o},635241:function(e,t,n){"use strict";n.d(t,{g:function(){return u},W:function(){return a}});var r=n(40314);let i="(unknown)",o=e=>"body"in e,s=async e=>{var t;let n=e.clone(),r=e.url?new URL(e.url):null,o=i;try{o=await n.text()}catch(e){}return{ts:Date.now(),status:n.status,path:r?r.pathname+r.search:i,host:null!==(t=null==r?void 0:r.host)&&void 0!==t?t:i,response:o}},a=(e,t)=>{var n,r;let o=e.url?new URL(e.url):null;return{ts:Date.now(),status:-1,path:o?o.pathname+o.search:i,host:null!==(n=null==o?void 0:o.host)&&void 0!==n?n:i,response:null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:""}};class l extends r.z{async logResponse(e){if(o(e)){let t=await s(e);this.notifySink(t);return}this.notifySink(e)}}let u=new l},73245:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=e=>{let t={};return e&&Object.keys(e).forEach(n=>{"object"==typeof e[n]?"domNode"!==n&&(t[n]=r(e[n])):t[n]=e[n]}),t},i=(e,t)=>JSON.stringify(r(e))===JSON.stringify(r(t))},199824:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(747182);function i(e,t){let n=(0,r.uI)((0,r.xx)(e,t));window.open(n,"_self")}},202782:function(e,t,n){"use strict";var r,i;n.d(t,{r:function(){return r}}),(i=r||(r={})).AppendSection="appendSection",i.Outdated_PrependSection="prependSection"},582288:function(e,t,n){"use strict";n.d(t,{f:function(){return o},z:function(){return i}});var r=n(202784);function i(e){let t=(0,r.useRef)(e);return(0,r.useLayoutEffect)(()=>{t.current=e}),(0,r.useCallback)((...e)=>t.current(...e),[])}function o(e){let t=i((...t)=>null==e?void 0:e(...t));return e?t:void 0}},15155:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(202784);let i=-1;function o(){let[e]=(0,r.useState)(()=>`:r${i+=1}:`);return e}},25672:function(e,t,n){"use strict";n.d(t,{nb:function(){return U},j6:function(){return w},q6:function(){return k},Xx:function(){return B},QK:function(){return G},yO:function(){return V},As:function(){return x},zD:function(){return q},kO:function(){return M},$J:function(){return N}});var r=n(249788),i=n(283834);n(163273),n(625506),n(56164),n(721966);let o="Authorization";class s{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){var e,t,n,i,o,s;let a=this.path;if(this.pathParams)for(let[e,t]of Object.entries(this.pathParams))a=a.replace(`%${e}%`,encodeURIComponent(t));if(a.includes("%tenantId%")){if(!(null===(t=null===(e=this.session)||void 0===e?void 0:e.foundationsTokenContext)||void 0===t?void 0:t.tenantId))throw new r.j("Request is missing required session value: [tenantId]");a=a.replace("%tenantId%",encodeURIComponent(this.session.foundationsTokenContext.tenantId))}if(a.includes("%personId%")){if(!(null===(i=null===(n=this.session)||void 0===n?void 0:n.foundationsTokenContext)||void 0===i?void 0:i.personId))throw new r.j("Request is missing required session value: [personId]");a=a.replace("%personId%",encodeURIComponent(this.session.foundationsTokenContext.personId))}let l=a.substring(1,a.indexOf("/",1));if(l&&(null===(s=null===(o=this.session)||void 0===o?void 0:o.foundationsTokenContext)||void 0===s?void 0:s.capabilities[l])){let e=this.session.foundationsTokenContext.capabilities[l];a=`/foundations/${e.region}/${e.stage}${a}`}let u=this.getQueryString();return u&&(a+=`?${u}`),a}getUrl(){return i.urlManager.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){var t;return this.session=e,(null===(t=e.foundationsToken)||void 0===t?void 0:t.accessToken)&&this.headers.set(o,`Bearer ${e.foundationsToken.accessToken}`),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(async()=>{var e,t;if(this.requiresSession()){if(!this.session)throw new r.j("Request requires session but no session info was added");if(!this.session.fetchFoundationsToken)throw new r.j("Request session is invalid, unable to fetch Foundations Token");if(this.session=await this.session.fetchFoundationsToken(),!this.session.fetchFoundationsContext)throw new r.j("Request session is invalid, unable to fetch Foundations Context");if(this.session=await this.session.fetchFoundationsContext(),!(null===(e=this.session.foundationsToken)||void 0===e?void 0:e.accessToken))throw new r.j("Request requires authorization via the Foundations JWT but no token was found");this.headers.set(o,`Bearer ${this.session.foundationsToken.accessToken}`)}let n=(null!==(t=this.path.match(/%\w+%/g))&&void 0!==t?t:[]).map(e=>e.slice(1,-1)).filter(e=>"tenantId"!==e&&"personId"!==e&&!this.pathParams[e]);if(n.length>0)throw new r.j(`Request is missing required path params: [${n}]`)})}async failed(e){throw new r.H(await e.json())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[FoundationsRequest: ${this.method} ${this.getUrl()}]`}}n(163273),n(625506),n(56164),n(721966);class a extends s{getUrl(){return i.urlManager.getUrl(super.getRelativeUrl())}requiresSession(){return!0}toString(){return`[FoundationsApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new r.H(await e.json())}}class l extends a{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set("Content-Type",this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new r.j("Request requires a body but none was provided")})}getBody(){return this.body}}class u extends l{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class d extends a{constructor(e,t){super(i.HttpMethod.Get,e,t)}}class c extends d{withPaging(e){return this.withQuery({limit:e.limit,lastEvaluatedKey:e.lastEvaluatedKey})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("cursor")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class E extends a{constructor(e,t){super(i.HttpMethod.Delete,e,t)}}class p extends u{constructor(e,t){super(i.HttpMethod.Patch,e,t)}}class m extends u{constructor(e,t){super(i.HttpMethod.Post,e,t)}}n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966);let h="/lms-achievements/api/v1/tenants/%tenantId%/courses/%courseFoundationsId%",I=`${h}/achievements`,b=`${I}/%achievementId%`,g=`${I}/memberships/count`,y=`${b}/memberships`,f=`${y}/%membershipFoundationsId%`,S=`${h}/memberships/%membershipFoundationsId%/achievements`;class _ extends d{constructor(e){super(I,e)}}class T extends m{constructor(e){super(I,e)}}class v extends E{constructor(e){super(b,e)}}class A extends d{constructor(e){super(b,e)}}class O extends p{constructor(e){super(b,e)}}class C extends d{constructor(e){super(g,e)}}class R extends c{constructor(e){super(y,e)}}class L extends d{constructor(e){super(S,e)}}class D extends d{constructor(e){super(f,e)}}class P extends p{constructor(e){super(f,e)}}async function N(e,t){let n=new _({courseFoundationsId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function U(e,t,n){let r=new T({courseFoundationsId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(r)}async function w(e,t,n){let r=new v({courseFoundationsId:t,achievementId:n}).withSession(e);await (0,i.fetchApiResult)(r)}async function k(e,t,n){let r=new A({courseFoundationsId:t,achievementId:n}).withSession(e);return(0,i.fetchJsonApiResult)(r)}async function M(e,t,n,r){let o=new O({courseFoundationsId:t,achievementId:n}).withSession(e).withBody(r);return(0,i.fetchJsonApiResult)(o)}async function B(e,t){let n=new C({courseFoundationsId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function G(e,t,n,r){let o=new D({courseFoundationsId:t,achievementId:n,membershipFoundationsId:r}).withSession(e);return(0,i.fetchJsonApiResult)(o)}async function V(e,t,n,r,o){let s=new P({courseFoundationsId:t,achievementId:n,membershipFoundationsId:r}).withSession(e).withBody(o);return(0,i.fetchJsonApiResult)(s)}async function x(e,t,n,r){let o=new R({courseFoundationsId:t,achievementId:n}).withSession(e);return r&&o.withPaging(r),(0,i.fetchJsonApiResult)(o)}async function q(e,t,n){let r=new L({courseFoundationsId:t,membershipFoundationsId:n}).withSession(e);return(0,i.fetchJsonApiResult)(r)}n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966)},249788:function(e,t,n){"use strict";n.d(t,{j:function(){return r},H:function(){return i}}),n(163273),n(625506),n(56164),n(721966);class r extends Error{}n(163273),n(625506),n(56164),n(721966);class i extends Error{get body(){return this.responseBody}constructor(e){super(e.message),this.responseBody=e,Object.setPrototypeOf(this,new.target.prototype)}}n(163273),n(625506),n(56164),n(721966)},810824:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966)},641813:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966)},186402:function(e,t,n){"use strict";n.d(t,{aV:function(){return s},uM:function(){return o},v$:function(){return i}});var r=n(990638);n(163273),n(625506),n(56164),n(721966);class i extends r.YX{constructor(){super("/v1/foundationsToken"),this.headers.set("Suppress-Session-Timestamp-Update","true")}}class o extends r.B_{constructor(){super("/v1/foundationsToken/refresh"),this.headers.set("Suppress-Session-Timestamp-Update","true")}}class s extends r.SB{constructor(){super("/v1/foundationsToken/context")}}},841609:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966)},96616:function(e,t,n){var r={"./af":195191,"./af.js":195191,"./ar":854358,"./ar-dz":571727,"./ar-dz.js":571727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":787895,"./ar-ly.js":787895,"./ar-ma":611987,"./ar-ma.js":611987,"./ar-sa":852796,"./ar-sa.js":852796,"./ar-tn":312386,"./ar-tn.js":312386,"./ar.js":854358,"./az":457452,"./az.js":457452,"./be":579053,"./be.js":579053,"./bg":765428,"./bg.js":765428,"./bm":521569,"./bm.js":521569,"./bn":356212,"./bn-bd":224635,"./bn-bd.js":224635,"./bn.js":356212,"./bo":713667,"./bo.js":713667,"./br":100192,"./br.js":100192,"./bs":51802,"./bs.js":51802,"./ca":219118,"./ca.js":219118,"./cs":739990,"./cs.js":739990,"./cv":130557,"./cv.js":130557,"./cy":404227,"./cy.js":404227,"./da":395406,"./da.js":395406,"./de":887994,"./de-at":444139,"./de-at.js":444139,"./de-ch":786591,"./de-ch.js":786591,"./de.js":887994,"./dv":294649,"./dv.js":294649,"./el":914453,"./el.js":914453,"./en-au":148428,"./en-au.js":148428,"./en-ca":336972,"./en-ca.js":336972,"./en-gb":213224,"./en-gb.js":213224,"./en-ie":418843,"./en-ie.js":418843,"./en-il":632732,"./en-il.js":632732,"./en-in":176579,"./en-in.js":176579,"./en-nz":329851,"./en-nz.js":329851,"./en-sg":870442,"./en-sg.js":870442,"./eo":410654,"./eo.js":410654,"./es":463621,"./es-do":568791,"./es-do.js":568791,"./es-mx":167278,"./es-mx.js":167278,"./es-us":860717,"./es-us.js":860717,"./es.js":463621,"./et":772404,"./et.js":772404,"./eu":962944,"./eu.js":962944,"./fa":730496,"./fa.js":730496,"./fi":498137,"./fi.js":498137,"./fil":132872,"./fil.js":132872,"./fo":806545,"./fo.js":806545,"./fr":949090,"./fr-ca":213049,"./fr-ca.js":213049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":949090,"./fy":295088,"./fy.js":295088,"./ga":77812,"./ga.js":77812,"./gd":608374,"./gd.js":608374,"./gl":63649,"./gl.js":63649,"./gom-deva":452674,"./gom-deva.js":452674,"./gom-latn":844948,"./gom-latn.js":844948,"./gu":24033,"./gu.js":24033,"./he":710175,"./he.js":710175,"./hi":858055,"./hi.js":858055,"./hr":41678,"./hr.js":41678,"./hu":985111,"./hu.js":985111,"./hy-am":926530,"./hy-am.js":926530,"./id":119126,"./id.js":119126,"./is":811696,"./is.js":811696,"./it":198710,"./it-ch":838821,"./it-ch.js":838821,"./it.js":198710,"./ja":993974,"./ja.js":993974,"./jv":770648,"./jv.js":770648,"./ka":454731,"./ka.js":454731,"./kk":943501,"./kk.js":943501,"./km":484398,"./km.js":484398,"./kn":391825,"./kn.js":391825,"./ko":913729,"./ko.js":913729,"./ku":419670,"./ku.js":419670,"./ky":878797,"./ky.js":878797,"./lb":650627,"./lb.js":650627,"./lo":65859,"./lo.js":65859,"./lt":880355,"./lt.js":880355,"./lv":116594,"./lv.js":116594,"./me":245324,"./me.js":245324,"./mi":11689,"./mi.js":11689,"./mk":461308,"./mk.js":461308,"./ml":385241,"./ml.js":385241,"./mn":176320,"./mn.js":176320,"./mr":996771,"./mr.js":996771,"./ms":820503,"./ms-my":477748,"./ms-my.js":477748,"./ms.js":820503,"./mt":155534,"./mt.js":155534,"./my":62727,"./my.js":62727,"./nb":807550,"./nb.js":807550,"./ne":249899,"./ne.js":249899,"./nl":241228,"./nl-be":431225,"./nl-be.js":431225,"./nl.js":241228,"./nn":697130,"./nn.js":697130,"./oc-lnc":293130,"./oc-lnc.js":293130,"./pa-in":591282,"./pa-in.js":591282,"./pl":28190,"./pl.js":28190,"./pt":341549,"./pt-br":178135,"./pt-br.js":178135,"./pt.js":341549,"./ro":900307,"./ro.js":900307,"./ru":989272,"./ru.js":989272,"./sd":179248,"./sd.js":179248,"./se":674969,"./se.js":674969,"./si":365522,"./si.js":365522,"./sk":661581,"./sk.js":661581,"./sl":556428,"./sl.js":556428,"./sq":534611,"./sq.js":534611,"./sr":719821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":719821,"./ss":435029,"./ss.js":435029,"./sv":980939,"./sv.js":980939,"./sw":373107,"./sw.js":373107,"./ta":272304,"./ta.js":272304,"./te":872550,"./te.js":872550,"./tet":699717,"./tet.js":699717,"./tg":687669,"./tg.js":687669,"./th":594959,"./th.js":594959,"./tk":892661,"./tk.js":892661,"./tl-ph":552234,"./tl-ph.js":552234,"./tlh":394120,"./tlh.js":394120,"./tr":981111,"./tr.js":981111,"./tzl":453080,"./tzl.js":453080,"./tzm":188246,"./tzm-latn":125385,"./tzm-latn.js":125385,"./tzm.js":188246,"./ug-cn":548777,"./ug-cn.js":548777,"./uk":302014,"./uk.js":302014,"./ur":145953,"./ur.js":145953,"./uz":89716,"./uz-latn":487791,"./uz-latn.js":487791,"./uz.js":89716,"./vi":699816,"./vi.js":699816,"./x-pseudo":26064,"./x-pseudo.js":26064,"./yo":522556,"./yo.js":522556,"./zh-cn":407414,"./zh-cn.js":407414,"./zh-hk":750824,"./zh-hk.js":750824,"./zh-mo":688589,"./zh-mo.js":688589,"./zh-tw":163285,"./zh-tw.js":163285};function i(e){return n(o(e))}function o(e){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=96616},744998:function(e){e.exports='<svg width="51" height="51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.429 13c-.226 0-.452.053-.66.163A1.448 1.448 0 0 0 16 14.444v10.112c0 .538.296 1.032.769 1.28a1.418 1.418 0 0 0 1.48-.097l7.142-5.055a1.454 1.454 0 0 0-.001-2.368l-7.143-5.056a1.41 1.41 0 0 0-.818-.26Z" id="a"/><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="13" fill="#fff"><use xlink:href="#a"/></mask></defs><g transform="translate(6 6)" fill="none" fill-rule="evenodd"><path d="M37.143 39H2.857C1.286 39 0 37.7 0 36.111V2.89C0 1.3 1.286 0 2.857 0h34.286C38.714 0 40 1.3 40 2.889V36.11C40 37.7 38.714 39 37.143 39Z" fill="#FFF"/><path d="M7 39H2.8C1.26 39 0 37.7 0 36.111V2.89C0 1.3 1.26 0 2.8 0H7v39Zm26 0h4.2c1.54 0 2.8-1.3 2.8-2.889V2.89C40 1.3 38.74 0 37.2 0H33v39Z" fill="#CEE0F3"/><path d="M6 1h1v37H6V1Zm27 0h1v37h-1V1Zm4.538 0C38.342 1 39 1.666 39 2.48v34.04c0 .814-.658 1.48-1.462 1.48H2.462A1.475 1.475 0 0 1 1 36.52V2.48C1 1.666 1.658 1 2.462 1h35.076ZM2.858 0C1.285 0 0 1.3 0 2.889V36.11C0 37.7 1.286 39 2.857 39h34.286C38.714 39 40 37.7 40 36.111V2.89C40 1.3 38.714 0 37.143 0H2.857Z" fill="#777677"/><use stroke="#777677" mask="url(#b)" stroke-width="2" fill="#CEE0F3" xlink:href="#a"/><path fill="#777677" d="M1 19h6v1H1zM34 19h6v1h-6zM1 31h6v1H1zM34 31h6v1h-6zM1 25h6v1H1zM34 25h6v1h-6zM1 13h6v1H1zM34 13h6v1h-6zM1 7h6v1H1zM34 7h6v1h-6z"/></g></svg>'},422375:function(e,t,n){"use strict";let r;n.d(t,{Z:function(){return d}});var i=n(745635),o=n(658895),s=n(579633);let a=e=>{let t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw Error(`Could not find locale in path ${e}`);return t[1]};var l=n(707769);class u extends i.Babelfish{getBundlePath(e,t){if(o.default.unitTesting){if(t.match(/^force\!/))t=t.replace(/^force\!/,"");else{if(!t.match(/^forcereset$/))return;this.reset();return}}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"}loadIncludedBundle(e){let t=a(e);return new s.InstantPromise(r=>{n(320922)("./"+e.replace("locales/","").replace(t,this.normalizeLocale(t))).then(e=>{var t;return r(JSON.parse(null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e))}).catch(()=>r(null))})}loadPath(e){return e.indexOf("://")>=0?l.h.loadFromRemotePath(e):this.loadIncludedBundle(e)}load(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]}onOverrideAdded(e){this.preferredLocalesCache=new Map}loadBundles(e){"string"==typeof e&&(e=[e]);let t=[];return this.normalizeLocales(e).forEach(e=>{t.push(this.overrideLoader.getOverridePathForLocale(e).then(e=>{if(e&&e.path)return this.loadBundle(e.ultraLocale,e.path)}),super.loadBundles(e))}),s.InstantPromise.all(t)}getPreferredLocales(e){"string"==typeof e&&(e=[e]);let t=e.join("|");if(!this.preferredLocalesCache.has(t)){let n=[];this.normalizeLocales(e).forEach(e=>{n=n.concat(this.overrideLoader.getPreferredLocales(e))}),this.preferredLocalesCache.set(t,Array.from(new Set(n)))}return this.preferredLocalesCache.get(t)}getLocaleForFormatting(e){return this.overrideLoader.getBaseLocale(e)||e}constructor(e,t=l.h.getInstance()){super(e),this.preferredLocalesCache=new Map,this.overrideLoader=t,this.overrideLoader.onOverrideAdded(this.onOverrideAdded.bind(this))}}var d=class{static getInstance(){return null==r&&(r=new u({fallbackLocales:[]})),r}static getTestInstance(e){if(!o.default.unitTesting)throw Error("Use getInstance() instead");return new u({fallbackLocales:[]},e)}}},707769:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(325135);function i(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}class o{static getInstance(){return this.instance||(this.instance=new o),this.instance}onOverrideAdded(e){this.overrideAddedHandlers.add(e)}notifyOverrideAdded(e){this.overrideAddedHandlers.forEach(t=>{try{t(e)}catch(e){}})}static normalizeLocale(e){return e.toLocaleLowerCase().replace(/_/g,"-")}get root(){return this._root}get siteId(){return this._siteId}setOverrideLocation(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t}addOverrideBundle(e,t){e=o.normalizeLocale(e);let n=o.normalizeLocale(t),r=o.getFallbackLocale(n);this.overrideBundles[e]={ultraLocale:n,localeForPath:t},this.baseLocaleMap[e]=this.baseLocaleMap[n]=r,this.notifyOverrideAdded(e)}getOverridePathForLocale(e){return(e=o.normalizeLocale(e),this.overrideBundles[e])?(this.overridePathPromises[e]||(this.overridePathPromises[e]=this.internalGetOverridePath(e)),this.overridePathPromises[e]):Promise.resolve(null)}async internalGetOverridePath(e){let t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,r=await this.getPathToLocale(n);return t&&r?{path:r,ultraLocale:t}:null}static getFallbackLocale(e){return e.split("-").slice(0,-1).join("-")}getPreferredLocales(e){if(e=o.normalizeLocale(e),!this.overrideBundles[e])return[e];let t=this.overrideBundles[e].ultraLocale,n=o.getFallbackLocale(t);return[t,n].filter(e=>!!e)}async getPathToLocale(e){if(!this._root||!this._siteId)return null;try{if(void 0===this.pathMap[e]){let t=`${this._root}/${this._siteId}/mapping.json`,n=await fetch(t);if(!n.ok)return this.pathMap[e]=null,null;let r=await n.json();if(!r[e])return this.pathMap[e]=null,null;this.pathMap[e]=`${this._root}${r[e][0].url}`}return this.pathMap[e]}catch(e){return null}}getBaseLocale(e){return(e=o.normalizeLocale(e),void 0===this.baseLocaleMap[e])?"":this.baseLocaleMap[e]||"en"}static async loadFromRemotePath(e){try{let t=await fetch(e);if(!t.ok)return{};return await t.json()}catch(e){return{}}}constructor(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}}i([(0,r.LRUMemoize)()],o,"normalizeLocale",null),i([(0,r.LRUMemoize)(2)],o,"getFallbackLocale",null)},179949:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(579633),i=n.n(r),o=n(325135),s=n(707769);class a extends i(){setUltraLocaleData(e){this.options.localeData=e}_load(e){return a._loadPromises[e]||(a._loadPromises[e]=new r.InstantPromise(t=>{n(178823)("./"+e+"/_combined.json").then(e=>{var n;return t(JSON.parse(null!==(n=null==e?void 0:e.default)&&void 0!==n?n:e))}).catch(()=>t(null))})),a._loadPromises[e]}getPreferredLocales(e){return[e].concat(super.getPreferredLocales(this.overrideLoader.getBaseLocale(e)||e))}constructor(e,t={defaultLocale:"en",production:!1,urlRoot:""}){super(e,t),this.babelfishInstance=e,this.options=t,this.overrideLoader=s.h.getInstance()}}a._loadPromises={},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([(0,o.LRUMemoize)(2)],a.prototype,"getPreferredLocales",null)},658895:function(e,t,n){"use strict";n.d(t,{default:function(){return b}});var r={};n.r(r),n.d(r,{default:function(){return o}});var i=n(276635),o={},s={batchRestAPI:!0,collab:!0,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,externalCourse:!1,httpEase:!0,journal:!1,learnApiCaching:!0,organizationA4L:!1,overallGradeAlert:!1,rightToLeftSupport:!0,useReactRendererForDocumentEditor:!1,multipleAttemptsInGroupAssessments:!0};let a={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},l={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},u={devtools_enableSetLangQuery:!0},d=function(e,t,n){return!(e in n)||n[e]},c=(e,t,n)=>e in n?n[e]:s[e];var E={"^(https://ultra-integ.int.bbpd.io)$":(e,t)=>d(e,t,a),"^(https://ultra-canary.bbpd.io)$":(e,t)=>d(e,t,l),".*(bbpd.io)":(e,t)=>c(e,t,u)},p=n(473011),m=(()=>{let e={...s},t=p.mg(),n=E[Object.keys(E).find(e=>!!t.match(e))];if("all"===n)for(let t of Object.keys(e))e[t]=!0;else if("function"==typeof n)for(let t of Object.keys(e))e[t]=n(t,e[t]);else null!=n&&Object.assign(e,n);return e})();let h={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(m,{}),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",cloudStorageIntegrationServices:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,cloudStorageIntegrationInitializationTimeout:1e4},I=JSON.parse(sessionStorage.getItem(h.storageKeyForFeatureFlags)||"{}");i.isEmpty(I)||(console.warn("Attention! Feature flags are overridden by client setting!",I),console.warn("To clear, please logout and re-login"),Object.assign(h.features,I)),r&&Object.assign(h,r),h.production=!0;var b=h},98592:function(e,t,n){n.p=window.publicPath||n.p}}]);